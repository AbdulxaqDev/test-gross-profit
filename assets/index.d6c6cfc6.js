const m2=function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const I of document.querySelectorAll('link[rel="modulepreload"]'))E(I);new MutationObserver(I=>{for(const L of I)if(L.type==="childList")for(const V of L.addedNodes)V.tagName==="LINK"&&V.rel==="modulepreload"&&E(V)}).observe(document,{childList:!0,subtree:!0});function b(I){const L={};return I.integrity&&(L.integrity=I.integrity),I.referrerpolicy&&(L.referrerPolicy=I.referrerpolicy),I.crossorigin==="use-credentials"?L.credentials="include":I.crossorigin==="anonymous"?L.credentials="omit":L.credentials="same-origin",L}function E(I){if(I.ep)return;I.ep=!0;const L=b(I);fetch(I.href,L)}};m2();function uf(d,g){const b=Object.create(null),E=d.split(",");for(let I=0;I<E.length;I++)b[E[I]]=!0;return g?I=>!!b[I.toLowerCase()]:I=>!!b[I]}const A2="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",g2=uf(A2);function DA(d){return!!d||d===""}function hf(d){if(jt(d)){const g={};for(let b=0;b<d.length;b++){const E=d[b],I=cr(E)?x2(E):hf(E);if(I)for(const L in I)g[L]=I[L]}return g}else{if(cr(d))return d;if(rr(d))return d}}const _2=/;(?![^(]*\))/g,y2=/:(.+)/;function x2(d){const g={};return d.split(_2).forEach(b=>{if(b){const E=b.split(y2);E.length>1&&(g[E[0].trim()]=E[1].trim())}}),g}function Lo(d){let g="";if(cr(d))g=d;else if(jt(d))for(let b=0;b<d.length;b++){const E=Lo(d[b]);E&&(g+=E+" ")}else if(rr(d))for(const b in d)d[b]&&(g+=b+" ");return g.trim()}const v3=d=>cr(d)?d:d==null?"":jt(d)||rr(d)&&(d.toString===kA||!Yt(d.toString))?JSON.stringify(d,SA,2):String(d),SA=(d,g)=>g&&g.__v_isRef?SA(d,g.value):xl(g)?{[`Map(${g.size})`]:[...g.entries()].reduce((b,[E,I])=>(b[`${E} =>`]=I,b),{})}:zA(g)?{[`Set(${g.size})`]:[...g.values()]}:rr(g)&&!jt(g)&&!LA(g)?String(g):g,Ei={},yl=[],kn=()=>{},v2=()=>!1,b2=/^on[^a-z]/,ed=d=>b2.test(d),df=d=>d.startsWith("onUpdate:"),Nr=Object.assign,pf=(d,g)=>{const b=d.indexOf(g);b>-1&&d.splice(b,1)},w2=Object.prototype.hasOwnProperty,hi=(d,g)=>w2.call(d,g),jt=Array.isArray,xl=d=>td(d)==="[object Map]",zA=d=>td(d)==="[object Set]",Yt=d=>typeof d=="function",cr=d=>typeof d=="string",ff=d=>typeof d=="symbol",rr=d=>d!==null&&typeof d=="object",BA=d=>rr(d)&&Yt(d.then)&&Yt(d.catch),kA=Object.prototype.toString,td=d=>kA.call(d),C2=d=>td(d).slice(8,-1),LA=d=>td(d)==="[object Object]",mf=d=>cr(d)&&d!=="NaN"&&d[0]!=="-"&&""+parseInt(d,10)===d,Vh=uf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),id=d=>{const g=Object.create(null);return b=>g[b]||(g[b]=d(b))},T2=/-(\w)/g,ao=id(d=>d.replace(T2,(g,b)=>b?b.toUpperCase():"")),M2=/\B([A-Z])/g,Tl=id(d=>d.replace(M2,"-$1").toLowerCase()),rd=id(d=>d.charAt(0).toUpperCase()+d.slice(1)),Rp=id(d=>d?`on${rd(d)}`:""),ou=(d,g)=>!Object.is(d,g),Np=(d,g)=>{for(let b=0;b<d.length;b++)d[b](g)},Yh=(d,g,b)=>{Object.defineProperty(d,g,{configurable:!0,enumerable:!1,value:b})},E2=d=>{const g=parseFloat(d);return isNaN(g)?d:g};let F1;const I2=()=>F1||(F1=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let io;class PA{constructor(g=!1){this.active=!0,this.effects=[],this.cleanups=[],!g&&io&&(this.parent=io,this.index=(io.scopes||(io.scopes=[])).push(this)-1)}run(g){if(this.active){const b=io;try{return io=this,g()}finally{io=b}}}on(){io=this}off(){io=this.parent}stop(g){if(this.active){let b,E;for(b=0,E=this.effects.length;b<E;b++)this.effects[b].stop();for(b=0,E=this.cleanups.length;b<E;b++)this.cleanups[b]();if(this.scopes)for(b=0,E=this.scopes.length;b<E;b++)this.scopes[b].stop(!0);if(this.parent&&!g){const I=this.parent.scopes.pop();I&&I!==this&&(this.parent.scopes[this.index]=I,I.index=this.index)}this.active=!1}}}function D2(d){return new PA(d)}function S2(d,g=io){g&&g.active&&g.effects.push(d)}const Af=d=>{const g=new Set(d);return g.w=0,g.n=0,g},RA=d=>(d.w&bs)>0,NA=d=>(d.n&bs)>0,z2=({deps:d})=>{if(d.length)for(let g=0;g<d.length;g++)d[g].w|=bs},B2=d=>{const{deps:g}=d;if(g.length){let b=0;for(let E=0;E<g.length;E++){const I=g[E];RA(I)&&!NA(I)?I.delete(d):g[b++]=I,I.w&=~bs,I.n&=~bs}g.length=b}},jp=new WeakMap;let Xc=0,bs=1;const Qp=30;let oo;const da=Symbol(""),Yp=Symbol("");class gf{constructor(g,b=null,E){this.fn=g,this.scheduler=b,this.active=!0,this.deps=[],this.parent=void 0,S2(this,E)}run(){if(!this.active)return this.fn();let g=oo,b=ys;for(;g;){if(g===this)return;g=g.parent}try{return this.parent=oo,oo=this,ys=!0,bs=1<<++Xc,Xc<=Qp?z2(this):V1(this),this.fn()}finally{Xc<=Qp&&B2(this),bs=1<<--Xc,oo=this.parent,ys=b,this.parent=void 0}}stop(){this.active&&(V1(this),this.onStop&&this.onStop(),this.active=!1)}}function V1(d){const{deps:g}=d;if(g.length){for(let b=0;b<g.length;b++)g[b].delete(d);g.length=0}}let ys=!0;const OA=[];function Ml(){OA.push(ys),ys=!1}function El(){const d=OA.pop();ys=d===void 0?!0:d}function un(d,g,b){if(ys&&oo){let E=jp.get(d);E||jp.set(d,E=new Map);let I=E.get(b);I||E.set(b,I=Af()),GA(I)}}function GA(d,g){let b=!1;Xc<=Qp?NA(d)||(d.n|=bs,b=!RA(d)):b=!d.has(oo),b&&(d.add(oo),oo.deps.push(d))}function Po(d,g,b,E,I,L){const V=jp.get(d);if(!V)return;let s=[];if(g==="clear")s=[...V.values()];else if(b==="length"&&jt(d))V.forEach((W,le)=>{(le==="length"||le>=E)&&s.push(W)});else switch(b!==void 0&&s.push(V.get(b)),g){case"add":jt(d)?mf(b)&&s.push(V.get("length")):(s.push(V.get(da)),xl(d)&&s.push(V.get(Yp)));break;case"delete":jt(d)||(s.push(V.get(da)),xl(d)&&s.push(V.get(Yp)));break;case"set":xl(d)&&s.push(V.get(da));break}if(s.length===1)s[0]&&Hp(s[0]);else{const W=[];for(const le of s)le&&W.push(...le);Hp(Af(W))}}function Hp(d,g){for(const b of jt(d)?d:[...d])(b!==oo||b.allowRecurse)&&(b.scheduler?b.scheduler():b.run())}const k2=uf("__proto__,__v_isRef,__isVue"),FA=new Set(Object.getOwnPropertyNames(Symbol).map(d=>Symbol[d]).filter(ff)),L2=_f(),P2=_f(!1,!0),R2=_f(!0),U1=N2();function N2(){const d={};return["includes","indexOf","lastIndexOf"].forEach(g=>{d[g]=function(...b){const E=xi(this);for(let L=0,V=this.length;L<V;L++)un(E,"get",L+"");const I=E[g](...b);return I===-1||I===!1?E[g](...b.map(xi)):I}}),["push","pop","shift","unshift","splice"].forEach(g=>{d[g]=function(...b){Ml();const E=xi(this)[g].apply(this,b);return El(),E}}),d}function _f(d=!1,g=!1){return function(E,I,L){if(I==="__v_isReactive")return!d;if(I==="__v_isReadonly")return d;if(I==="__v_isShallow")return g;if(I==="__v_raw"&&L===(d?g?$2:QA:g?jA:ZA).get(E))return E;const V=jt(E);if(!d&&V&&hi(U1,I))return Reflect.get(U1,I,L);const s=Reflect.get(E,I,L);return(ff(I)?FA.has(I):k2(I))||(d||un(E,"get",I),g)?s:Ar(s)?!V||!mf(I)?s.value:s:rr(s)?d?YA(s):Aa(s):s}}const O2=VA(),G2=VA(!0);function VA(d=!1){return function(b,E,I,L){let V=b[E];if(su(V)&&Ar(V)&&!Ar(I))return!1;if(!d&&!su(I)&&(HA(I)||(I=xi(I),V=xi(V)),!jt(b)&&Ar(V)&&!Ar(I)))return V.value=I,!0;const s=jt(b)&&mf(E)?Number(E)<b.length:hi(b,E),W=Reflect.set(b,E,I,L);return b===xi(L)&&(s?ou(I,V)&&Po(b,"set",E,I):Po(b,"add",E,I)),W}}function F2(d,g){const b=hi(d,g);d[g];const E=Reflect.deleteProperty(d,g);return E&&b&&Po(d,"delete",g,void 0),E}function V2(d,g){const b=Reflect.has(d,g);return(!ff(g)||!FA.has(g))&&un(d,"has",g),b}function U2(d){return un(d,"iterate",jt(d)?"length":da),Reflect.ownKeys(d)}const UA={get:L2,set:O2,deleteProperty:F2,has:V2,ownKeys:U2},Z2={get:R2,set(d,g){return!0},deleteProperty(d,g){return!0}},j2=Nr({},UA,{get:P2,set:G2}),yf=d=>d,nd=d=>Reflect.getPrototypeOf(d);function Rh(d,g,b=!1,E=!1){d=d.__v_raw;const I=xi(d),L=xi(g);g!==L&&!b&&un(I,"get",g),!b&&un(I,"get",L);const{has:V}=nd(I),s=E?yf:b?wf:au;if(V.call(I,g))return s(d.get(g));if(V.call(I,L))return s(d.get(L));d!==I&&d.get(g)}function Nh(d,g=!1){const b=this.__v_raw,E=xi(b),I=xi(d);return d!==I&&!g&&un(E,"has",d),!g&&un(E,"has",I),d===I?b.has(d):b.has(d)||b.has(I)}function Oh(d,g=!1){return d=d.__v_raw,!g&&un(xi(d),"iterate",da),Reflect.get(d,"size",d)}function Z1(d){d=xi(d);const g=xi(this);return nd(g).has.call(g,d)||(g.add(d),Po(g,"add",d,d)),this}function j1(d,g){g=xi(g);const b=xi(this),{has:E,get:I}=nd(b);let L=E.call(b,d);L||(d=xi(d),L=E.call(b,d));const V=I.call(b,d);return b.set(d,g),L?ou(g,V)&&Po(b,"set",d,g):Po(b,"add",d,g),this}function Q1(d){const g=xi(this),{has:b,get:E}=nd(g);let I=b.call(g,d);I||(d=xi(d),I=b.call(g,d)),E&&E.call(g,d);const L=g.delete(d);return I&&Po(g,"delete",d,void 0),L}function Y1(){const d=xi(this),g=d.size!==0,b=d.clear();return g&&Po(d,"clear",void 0,void 0),b}function Gh(d,g){return function(E,I){const L=this,V=L.__v_raw,s=xi(V),W=g?yf:d?wf:au;return!d&&un(s,"iterate",da),V.forEach((le,he)=>E.call(I,W(le),W(he),L))}}function Fh(d,g,b){return function(...E){const I=this.__v_raw,L=xi(I),V=xl(L),s=d==="entries"||d===Symbol.iterator&&V,W=d==="keys"&&V,le=I[d](...E),he=b?yf:g?wf:au;return!g&&un(L,"iterate",W?Yp:da),{next(){const{value:$,done:pe}=le.next();return pe?{value:$,done:pe}:{value:s?[he($[0]),he($[1])]:he($),done:pe}},[Symbol.iterator](){return this}}}}function ps(d){return function(...g){return d==="delete"?!1:this}}function Q2(){const d={get(L){return Rh(this,L)},get size(){return Oh(this)},has:Nh,add:Z1,set:j1,delete:Q1,clear:Y1,forEach:Gh(!1,!1)},g={get(L){return Rh(this,L,!1,!0)},get size(){return Oh(this)},has:Nh,add:Z1,set:j1,delete:Q1,clear:Y1,forEach:Gh(!1,!0)},b={get(L){return Rh(this,L,!0)},get size(){return Oh(this,!0)},has(L){return Nh.call(this,L,!0)},add:ps("add"),set:ps("set"),delete:ps("delete"),clear:ps("clear"),forEach:Gh(!0,!1)},E={get(L){return Rh(this,L,!0,!0)},get size(){return Oh(this,!0)},has(L){return Nh.call(this,L,!0)},add:ps("add"),set:ps("set"),delete:ps("delete"),clear:ps("clear"),forEach:Gh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(L=>{d[L]=Fh(L,!1,!1),b[L]=Fh(L,!0,!1),g[L]=Fh(L,!1,!0),E[L]=Fh(L,!0,!0)}),[d,b,g,E]}const[Y2,H2,q2,W2]=Q2();function xf(d,g){const b=g?d?W2:q2:d?H2:Y2;return(E,I,L)=>I==="__v_isReactive"?!d:I==="__v_isReadonly"?d:I==="__v_raw"?E:Reflect.get(hi(b,I)&&I in E?b:E,I,L)}const K2={get:xf(!1,!1)},X2={get:xf(!1,!0)},J2={get:xf(!0,!1)},ZA=new WeakMap,jA=new WeakMap,QA=new WeakMap,$2=new WeakMap;function ey(d){switch(d){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ty(d){return d.__v_skip||!Object.isExtensible(d)?0:ey(C2(d))}function Aa(d){return su(d)?d:vf(d,!1,UA,K2,ZA)}function iy(d){return vf(d,!1,j2,X2,jA)}function YA(d){return vf(d,!0,Z2,J2,QA)}function vf(d,g,b,E,I){if(!rr(d)||d.__v_raw&&!(g&&d.__v_isReactive))return d;const L=I.get(d);if(L)return L;const V=ty(d);if(V===0)return d;const s=new Proxy(d,V===2?E:b);return I.set(d,s),s}function vl(d){return su(d)?vl(d.__v_raw):!!(d&&d.__v_isReactive)}function su(d){return!!(d&&d.__v_isReadonly)}function HA(d){return!!(d&&d.__v_isShallow)}function qA(d){return vl(d)||su(d)}function xi(d){const g=d&&d.__v_raw;return g?xi(g):d}function bf(d){return Yh(d,"__v_skip",!0),d}const au=d=>rr(d)?Aa(d):d,wf=d=>rr(d)?YA(d):d;function WA(d){ys&&oo&&(d=xi(d),GA(d.dep||(d.dep=Af())))}function KA(d,g){d=xi(d),d.dep&&Hp(d.dep)}function Ar(d){return!!(d&&d.__v_isRef===!0)}function XA(d){return JA(d,!1)}function ry(d){return JA(d,!0)}function JA(d,g){return Ar(d)?d:new ny(d,g)}class ny{constructor(g,b){this.__v_isShallow=b,this.dep=void 0,this.__v_isRef=!0,this._rawValue=b?g:xi(g),this._value=b?g:au(g)}get value(){return WA(this),this._value}set value(g){g=this.__v_isShallow?g:xi(g),ou(g,this._rawValue)&&(this._rawValue=g,this._value=this.__v_isShallow?g:au(g),KA(this))}}function $c(d){return Ar(d)?d.value:d}const oy={get:(d,g,b)=>$c(Reflect.get(d,g,b)),set:(d,g,b,E)=>{const I=d[g];return Ar(I)&&!Ar(b)?(I.value=b,!0):Reflect.set(d,g,b,E)}};function $A(d){return vl(d)?d:new Proxy(d,oy)}class sy{constructor(g,b,E,I){this._setter=b,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new gf(g,()=>{this._dirty||(this._dirty=!0,KA(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!I,this.__v_isReadonly=E}get value(){const g=xi(this);return WA(g),(g._dirty||!g._cacheable)&&(g._dirty=!1,g._value=g.effect.run()),g._value}set value(g){this._setter(g)}}function ay(d,g,b=!1){let E,I;const L=Yt(d);return L?(E=d,I=kn):(E=d.get,I=d.set),new sy(E,I,L||!I,b)}Promise.resolve();function xs(d,g,b,E){let I;try{I=E?d(...E):d()}catch(L){od(L,g,b)}return I}function Ln(d,g,b,E){if(Yt(d)){const L=xs(d,g,b,E);return L&&BA(L)&&L.catch(V=>{od(V,g,b)}),L}const I=[];for(let L=0;L<d.length;L++)I.push(Ln(d[L],g,b,E));return I}function od(d,g,b,E=!0){const I=g?g.vnode:null;if(g){let L=g.parent;const V=g.proxy,s=b;for(;L;){const le=L.ec;if(le){for(let he=0;he<le.length;he++)if(le[he](d,V,s)===!1)return}L=L.parent}const W=g.appContext.config.errorHandler;if(W){xs(W,null,10,[d,V,s]);return}}ly(d,b,I,E)}function ly(d,g,b,E=!0){console.error(d)}let Hh=!1,qp=!1;const cn=[];let ko=0;const eu=[];let Jc=null,Al=0;const tu=[];let As=null,gl=0;const eg=Promise.resolve();let Cf=null,Wp=null;function tg(d){const g=Cf||eg;return d?g.then(this?d.bind(this):d):g}function cy(d){let g=ko+1,b=cn.length;for(;g<b;){const E=g+b>>>1;lu(cn[E])<d?g=E+1:b=E}return g}function ig(d){(!cn.length||!cn.includes(d,Hh&&d.allowRecurse?ko+1:ko))&&d!==Wp&&(d.id==null?cn.push(d):cn.splice(cy(d.id),0,d),rg())}function rg(){!Hh&&!qp&&(qp=!0,Cf=eg.then(sg))}function uy(d){const g=cn.indexOf(d);g>ko&&cn.splice(g,1)}function ng(d,g,b,E){jt(d)?b.push(...d):(!g||!g.includes(d,d.allowRecurse?E+1:E))&&b.push(d),rg()}function hy(d){ng(d,Jc,eu,Al)}function dy(d){ng(d,As,tu,gl)}function Tf(d,g=null){if(eu.length){for(Wp=g,Jc=[...new Set(eu)],eu.length=0,Al=0;Al<Jc.length;Al++)Jc[Al]();Jc=null,Al=0,Wp=null,Tf(d,g)}}function og(d){if(tu.length){const g=[...new Set(tu)];if(tu.length=0,As){As.push(...g);return}for(As=g,As.sort((b,E)=>lu(b)-lu(E)),gl=0;gl<As.length;gl++)As[gl]();As=null,gl=0}}const lu=d=>d.id==null?1/0:d.id;function sg(d){qp=!1,Hh=!0,Tf(d),cn.sort((b,E)=>lu(b)-lu(E));const g=kn;try{for(ko=0;ko<cn.length;ko++){const b=cn[ko];b&&b.active!==!1&&xs(b,null,14)}}finally{ko=0,cn.length=0,og(),Hh=!1,Cf=null,(cn.length||eu.length||tu.length)&&sg(d)}}function py(d,g,...b){const E=d.vnode.props||Ei;let I=b;const L=g.startsWith("update:"),V=L&&g.slice(7);if(V&&V in E){const he=`${V==="modelValue"?"model":V}Modifiers`,{number:$,trim:pe}=E[he]||Ei;pe?I=b.map(Te=>Te.trim()):$&&(I=b.map(E2))}let s,W=E[s=Rp(g)]||E[s=Rp(ao(g))];!W&&L&&(W=E[s=Rp(Tl(g))]),W&&Ln(W,d,6,I);const le=E[s+"Once"];if(le){if(!d.emitted)d.emitted={};else if(d.emitted[s])return;d.emitted[s]=!0,Ln(le,d,6,I)}}function ag(d,g,b=!1){const E=g.emitsCache,I=E.get(d);if(I!==void 0)return I;const L=d.emits;let V={},s=!1;if(!Yt(d)){const W=le=>{const he=ag(le,g,!0);he&&(s=!0,Nr(V,he))};!b&&g.mixins.length&&g.mixins.forEach(W),d.extends&&W(d.extends),d.mixins&&d.mixins.forEach(W)}return!L&&!s?(E.set(d,null),null):(jt(L)?L.forEach(W=>V[W]=null):Nr(V,L),E.set(d,V),V)}function sd(d,g){return!d||!ed(g)?!1:(g=g.slice(2).replace(/Once$/,""),hi(d,g[0].toLowerCase()+g.slice(1))||hi(d,Tl(g))||hi(d,g))}let Bn=null,ad=null;function qh(d){const g=Bn;return Bn=d,ad=d&&d.type.__scopeId||null,g}function ws(d){ad=d}function Cs(){ad=null}function so(d,g=Bn,b){if(!g||d._n)return d;const E=(...I)=>{E._d&&iA(-1);const L=qh(g),V=d(...I);return qh(L),E._d&&iA(1),V};return E._n=!0,E._c=!0,E._d=!0,E}function Op(d){const{type:g,vnode:b,proxy:E,withProxy:I,props:L,propsOptions:[V],slots:s,attrs:W,emit:le,render:he,renderCache:$,data:pe,setupState:Te,ctx:ut,inheritAttrs:zt}=d;let He,dt;const Pt=qh(d);try{if(b.shapeFlag&4){const ei=I||E;He=ro(he.call(ei,ei,$,L,Te,pe,ut)),dt=W}else{const ei=g;He=ro(ei.length>1?ei(L,{attrs:W,slots:s,emit:le}):ei(L,null)),dt=g.props?W:fy(W)}}catch(ei){iu.length=0,od(ei,d,1),He=Wt(ma)}let Kt=He;if(dt&&zt!==!1){const ei=Object.keys(dt),{shapeFlag:wi}=Kt;ei.length&&wi&7&&(V&&ei.some(df)&&(dt=my(dt,V)),Kt=cu(Kt,dt))}return b.dirs&&(Kt.dirs=Kt.dirs?Kt.dirs.concat(b.dirs):b.dirs),b.transition&&(Kt.transition=b.transition),He=Kt,qh(Pt),He}const fy=d=>{let g;for(const b in d)(b==="class"||b==="style"||ed(b))&&((g||(g={}))[b]=d[b]);return g},my=(d,g)=>{const b={};for(const E in d)(!df(E)||!(E.slice(9)in g))&&(b[E]=d[E]);return b};function Ay(d,g,b){const{props:E,children:I,component:L}=d,{props:V,children:s,patchFlag:W}=g,le=L.emitsOptions;if(g.dirs||g.transition)return!0;if(b&&W>=0){if(W&1024)return!0;if(W&16)return E?H1(E,V,le):!!V;if(W&8){const he=g.dynamicProps;for(let $=0;$<he.length;$++){const pe=he[$];if(V[pe]!==E[pe]&&!sd(le,pe))return!0}}}else return(I||s)&&(!s||!s.$stable)?!0:E===V?!1:E?V?H1(E,V,le):!0:!!V;return!1}function H1(d,g,b){const E=Object.keys(g);if(E.length!==Object.keys(d).length)return!0;for(let I=0;I<E.length;I++){const L=E[I];if(g[L]!==d[L]&&!sd(b,L))return!0}return!1}function gy({vnode:d,parent:g},b){for(;g&&g.subTree===d;)(d=g.vnode).el=b,g=g.parent}const _y=d=>d.__isSuspense;function yy(d,g){g&&g.pendingBranch?jt(d)?g.effects.push(...d):g.effects.push(d):dy(d)}function Uh(d,g){if(mr){let b=mr.provides;const E=mr.parent&&mr.parent.provides;E===b&&(b=mr.provides=Object.create(E)),b[d]=g}}function vs(d,g,b=!1){const E=mr||Bn;if(E){const I=E.parent==null?E.vnode.appContext&&E.vnode.appContext.provides:E.parent.provides;if(I&&d in I)return I[d];if(arguments.length>1)return b&&Yt(g)?g.call(E.proxy):g}}const q1={};function Zh(d,g,b){return lg(d,g,b)}function lg(d,g,{immediate:b,deep:E,flush:I,onTrack:L,onTrigger:V}=Ei){const s=mr;let W,le=!1,he=!1;if(Ar(d)?(W=()=>d.value,le=HA(d)):vl(d)?(W=()=>d,E=!0):jt(d)?(he=!0,le=d.some(vl),W=()=>d.map(dt=>{if(Ar(dt))return dt.value;if(vl(dt))return ha(dt);if(Yt(dt))return xs(dt,s,2)})):Yt(d)?g?W=()=>xs(d,s,2):W=()=>{if(!(s&&s.isUnmounted))return $&&$(),Ln(d,s,3,[pe])}:W=kn,g&&E){const dt=W;W=()=>ha(dt())}let $,pe=dt=>{$=He.onStop=()=>{xs(dt,s,4)}};if(uu)return pe=kn,g?b&&Ln(g,s,3,[W(),he?[]:void 0,pe]):W(),kn;let Te=he?[]:q1;const ut=()=>{if(!!He.active)if(g){const dt=He.run();(E||le||(he?dt.some((Pt,Kt)=>ou(Pt,Te[Kt])):ou(dt,Te)))&&($&&$(),Ln(g,s,3,[dt,Te===q1?void 0:Te,pe]),Te=dt)}else He.run()};ut.allowRecurse=!!g;let zt;I==="sync"?zt=ut:I==="post"?zt=()=>Xr(ut,s&&s.suspense):zt=()=>{!s||s.isMounted?hy(ut):ut()};const He=new gf(W,zt);return g?b?ut():Te=He.run():I==="post"?Xr(He.run.bind(He),s&&s.suspense):He.run(),()=>{He.stop(),s&&s.scope&&pf(s.scope.effects,He)}}function xy(d,g,b){const E=this.proxy,I=cr(d)?d.includes(".")?cg(E,d):()=>E[d]:d.bind(E,E);let L;Yt(g)?L=g:(L=g.handler,b=g);const V=mr;bl(this);const s=lg(I,L.bind(E),b);return V?bl(V):fa(),s}function cg(d,g){const b=g.split(".");return()=>{let E=d;for(let I=0;I<b.length&&E;I++)E=E[b[I]];return E}}function ha(d,g){if(!rr(d)||d.__v_skip||(g=g||new Set,g.has(d)))return d;if(g.add(d),Ar(d))ha(d.value,g);else if(jt(d))for(let b=0;b<d.length;b++)ha(d[b],g);else if(zA(d)||xl(d))d.forEach(b=>{ha(b,g)});else if(LA(d))for(const b in d)ha(d[b],g);return d}function Mf(d){return Yt(d)?{setup:d,name:d.name}:d}const Kp=d=>!!d.type.__asyncLoader,ug=d=>d.type.__isKeepAlive;function vy(d,g){hg(d,"a",g)}function by(d,g){hg(d,"da",g)}function hg(d,g,b=mr){const E=d.__wdc||(d.__wdc=()=>{let I=b;for(;I;){if(I.isDeactivated)return;I=I.parent}return d()});if(ld(g,E,b),b){let I=b.parent;for(;I&&I.parent;)ug(I.parent.vnode)&&wy(E,g,b,I),I=I.parent}}function wy(d,g,b,E){const I=ld(g,d,E,!0);dg(()=>{pf(E[g],I)},b)}function ld(d,g,b=mr,E=!1){if(b){const I=b[d]||(b[d]=[]),L=g.__weh||(g.__weh=(...V)=>{if(b.isUnmounted)return;Ml(),bl(b);const s=Ln(g,b,d,V);return fa(),El(),s});return E?I.unshift(L):I.push(L),L}}const Ro=d=>(g,b=mr)=>(!uu||d==="sp")&&ld(d,g,b),Cy=Ro("bm"),Ty=Ro("m"),My=Ro("bu"),Ey=Ro("u"),Iy=Ro("bum"),dg=Ro("um"),Dy=Ro("sp"),Sy=Ro("rtg"),zy=Ro("rtc");function By(d,g=mr){ld("ec",d,g)}let Xp=!0;function ky(d){const g=fg(d),b=d.proxy,E=d.ctx;Xp=!1,g.beforeCreate&&W1(g.beforeCreate,d,"bc");const{data:I,computed:L,methods:V,watch:s,provide:W,inject:le,created:he,beforeMount:$,mounted:pe,beforeUpdate:Te,updated:ut,activated:zt,deactivated:He,beforeDestroy:dt,beforeUnmount:Pt,destroyed:Kt,unmounted:ei,render:wi,renderTracked:Dt,renderTriggered:ur,errorCaptured:Xi,serverPrefetch:Ji,expose:gr,inheritAttrs:mi,components:hr,directives:Tr,filters:$r}=g;if(le&&Ly(le,E,null,d.appContext.config.unwrapInjectedRef),V)for(const ci in V){const Ht=V[ci];Yt(Ht)&&(E[ci]=Ht.bind(b))}if(I){const ci=I.call(b,b);rr(ci)&&(d.data=Aa(ci))}if(Xp=!0,L)for(const ci in L){const Ht=L[ci],Li=Yt(Ht)?Ht.bind(b,b):Yt(Ht.get)?Ht.get.bind(b,b):kn,Or=!Yt(Ht)&&Yt(Ht.set)?Ht.set.bind(b):kn,Pi=no({get:Li,set:Or});Object.defineProperty(E,ci,{enumerable:!0,configurable:!0,get:()=>Pi.value,set:dr=>Pi.value=dr})}if(s)for(const ci in s)pg(s[ci],E,b,ci);if(W){const ci=Yt(W)?W.call(b):W;Reflect.ownKeys(ci).forEach(Ht=>{Uh(Ht,ci[Ht])})}he&&W1(he,d,"c");function vi(ci,Ht){jt(Ht)?Ht.forEach(Li=>ci(Li.bind(b))):Ht&&ci(Ht.bind(b))}if(vi(Cy,$),vi(Ty,pe),vi(My,Te),vi(Ey,ut),vi(vy,zt),vi(by,He),vi(By,Xi),vi(zy,Dt),vi(Sy,ur),vi(Iy,Pt),vi(dg,ei),vi(Dy,Ji),jt(gr))if(gr.length){const ci=d.exposed||(d.exposed={});gr.forEach(Ht=>{Object.defineProperty(ci,Ht,{get:()=>b[Ht],set:Li=>b[Ht]=Li})})}else d.exposed||(d.exposed={});wi&&d.render===kn&&(d.render=wi),mi!=null&&(d.inheritAttrs=mi),hr&&(d.components=hr),Tr&&(d.directives=Tr)}function Ly(d,g,b=kn,E=!1){jt(d)&&(d=Jp(d));for(const I in d){const L=d[I];let V;rr(L)?"default"in L?V=vs(L.from||I,L.default,!0):V=vs(L.from||I):V=vs(L),Ar(V)&&E?Object.defineProperty(g,I,{enumerable:!0,configurable:!0,get:()=>V.value,set:s=>V.value=s}):g[I]=V}}function W1(d,g,b){Ln(jt(d)?d.map(E=>E.bind(g.proxy)):d.bind(g.proxy),g,b)}function pg(d,g,b,E){const I=E.includes(".")?cg(b,E):()=>b[E];if(cr(d)){const L=g[d];Yt(L)&&Zh(I,L)}else if(Yt(d))Zh(I,d.bind(b));else if(rr(d))if(jt(d))d.forEach(L=>pg(L,g,b,E));else{const L=Yt(d.handler)?d.handler.bind(b):g[d.handler];Yt(L)&&Zh(I,L,d)}}function fg(d){const g=d.type,{mixins:b,extends:E}=g,{mixins:I,optionsCache:L,config:{optionMergeStrategies:V}}=d.appContext,s=L.get(g);let W;return s?W=s:!I.length&&!b&&!E?W=g:(W={},I.length&&I.forEach(le=>Wh(W,le,V,!0)),Wh(W,g,V)),L.set(g,W),W}function Wh(d,g,b,E=!1){const{mixins:I,extends:L}=g;L&&Wh(d,L,b,!0),I&&I.forEach(V=>Wh(d,V,b,!0));for(const V in g)if(!(E&&V==="expose")){const s=Py[V]||b&&b[V];d[V]=s?s(d[V],g[V]):g[V]}return d}const Py={data:K1,props:ca,emits:ca,methods:ca,computed:ca,beforeCreate:Rr,created:Rr,beforeMount:Rr,mounted:Rr,beforeUpdate:Rr,updated:Rr,beforeDestroy:Rr,beforeUnmount:Rr,destroyed:Rr,unmounted:Rr,activated:Rr,deactivated:Rr,errorCaptured:Rr,serverPrefetch:Rr,components:ca,directives:ca,watch:Ny,provide:K1,inject:Ry};function K1(d,g){return g?d?function(){return Nr(Yt(d)?d.call(this,this):d,Yt(g)?g.call(this,this):g)}:g:d}function Ry(d,g){return ca(Jp(d),Jp(g))}function Jp(d){if(jt(d)){const g={};for(let b=0;b<d.length;b++)g[d[b]]=d[b];return g}return d}function Rr(d,g){return d?[...new Set([].concat(d,g))]:g}function ca(d,g){return d?Nr(Nr(Object.create(null),d),g):g}function Ny(d,g){if(!d)return g;if(!g)return d;const b=Nr(Object.create(null),d);for(const E in g)b[E]=Rr(d[E],g[E]);return b}function Oy(d,g,b,E=!1){const I={},L={};Yh(L,cd,1),d.propsDefaults=Object.create(null),mg(d,g,I,L);for(const V in d.propsOptions[0])V in I||(I[V]=void 0);b?d.props=E?I:iy(I):d.type.props?d.props=I:d.props=L,d.attrs=L}function Gy(d,g,b,E){const{props:I,attrs:L,vnode:{patchFlag:V}}=d,s=xi(I),[W]=d.propsOptions;let le=!1;if((E||V>0)&&!(V&16)){if(V&8){const he=d.vnode.dynamicProps;for(let $=0;$<he.length;$++){let pe=he[$];if(sd(d.emitsOptions,pe))continue;const Te=g[pe];if(W)if(hi(L,pe))Te!==L[pe]&&(L[pe]=Te,le=!0);else{const ut=ao(pe);I[ut]=$p(W,s,ut,Te,d,!1)}else Te!==L[pe]&&(L[pe]=Te,le=!0)}}}else{mg(d,g,I,L)&&(le=!0);let he;for(const $ in s)(!g||!hi(g,$)&&((he=Tl($))===$||!hi(g,he)))&&(W?b&&(b[$]!==void 0||b[he]!==void 0)&&(I[$]=$p(W,s,$,void 0,d,!0)):delete I[$]);if(L!==s)for(const $ in L)(!g||!hi(g,$)&&!0)&&(delete L[$],le=!0)}le&&Po(d,"set","$attrs")}function mg(d,g,b,E){const[I,L]=d.propsOptions;let V=!1,s;if(g)for(let W in g){if(Vh(W))continue;const le=g[W];let he;I&&hi(I,he=ao(W))?!L||!L.includes(he)?b[he]=le:(s||(s={}))[he]=le:sd(d.emitsOptions,W)||(!(W in E)||le!==E[W])&&(E[W]=le,V=!0)}if(L){const W=xi(b),le=s||Ei;for(let he=0;he<L.length;he++){const $=L[he];b[$]=$p(I,W,$,le[$],d,!hi(le,$))}}return V}function $p(d,g,b,E,I,L){const V=d[b];if(V!=null){const s=hi(V,"default");if(s&&E===void 0){const W=V.default;if(V.type!==Function&&Yt(W)){const{propsDefaults:le}=I;b in le?E=le[b]:(bl(I),E=le[b]=W.call(null,g),fa())}else E=W}V[0]&&(L&&!s?E=!1:V[1]&&(E===""||E===Tl(b))&&(E=!0))}return E}function Ag(d,g,b=!1){const E=g.propsCache,I=E.get(d);if(I)return I;const L=d.props,V={},s=[];let W=!1;if(!Yt(d)){const he=$=>{W=!0;const[pe,Te]=Ag($,g,!0);Nr(V,pe),Te&&s.push(...Te)};!b&&g.mixins.length&&g.mixins.forEach(he),d.extends&&he(d.extends),d.mixins&&d.mixins.forEach(he)}if(!L&&!W)return E.set(d,yl),yl;if(jt(L))for(let he=0;he<L.length;he++){const $=ao(L[he]);X1($)&&(V[$]=Ei)}else if(L)for(const he in L){const $=ao(he);if(X1($)){const pe=L[he],Te=V[$]=jt(pe)||Yt(pe)?{type:pe}:pe;if(Te){const ut=eA(Boolean,Te.type),zt=eA(String,Te.type);Te[0]=ut>-1,Te[1]=zt<0||ut<zt,(ut>-1||hi(Te,"default"))&&s.push($)}}}const le=[V,s];return E.set(d,le),le}function X1(d){return d[0]!=="$"}function J1(d){const g=d&&d.toString().match(/^\s*function (\w+)/);return g?g[1]:d===null?"null":""}function $1(d,g){return J1(d)===J1(g)}function eA(d,g){return jt(g)?g.findIndex(b=>$1(b,d)):Yt(g)&&$1(g,d)?0:-1}const gg=d=>d[0]==="_"||d==="$stable",Ef=d=>jt(d)?d.map(ro):[ro(d)],Fy=(d,g,b)=>{const E=so((...I)=>Ef(g(...I)),b);return E._c=!1,E},_g=(d,g,b)=>{const E=d._ctx;for(const I in d){if(gg(I))continue;const L=d[I];if(Yt(L))g[I]=Fy(I,L,E);else if(L!=null){const V=Ef(L);g[I]=()=>V}}},yg=(d,g)=>{const b=Ef(g);d.slots.default=()=>b},Vy=(d,g)=>{if(d.vnode.shapeFlag&32){const b=g._;b?(d.slots=xi(g),Yh(g,"_",b)):_g(g,d.slots={})}else d.slots={},g&&yg(d,g);Yh(d.slots,cd,1)},Uy=(d,g,b)=>{const{vnode:E,slots:I}=d;let L=!0,V=Ei;if(E.shapeFlag&32){const s=g._;s?b&&s===1?L=!1:(Nr(I,g),!b&&s===1&&delete I._):(L=!g.$stable,_g(g,I)),V=g}else g&&(yg(d,g),V={default:1});if(L)for(const s in I)!gg(s)&&!(s in V)&&delete I[s]};function b3(d,g){const b=Bn;if(b===null)return d;const E=ud(b)||b.proxy,I=d.dirs||(d.dirs=[]);for(let L=0;L<g.length;L++){let[V,s,W,le=Ei]=g[L];Yt(V)&&(V={mounted:V,updated:V}),V.deep&&ha(s),I.push({dir:V,instance:E,value:s,oldValue:void 0,arg:W,modifiers:le})}return d}function aa(d,g,b,E){const I=d.dirs,L=g&&g.dirs;for(let V=0;V<I.length;V++){const s=I[V];L&&(s.oldValue=L[V].value);let W=s.dir[E];W&&(Ml(),Ln(W,b,8,[d.el,s,d,g]),El())}}function xg(){return{app:null,config:{isNativeTag:v2,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zy=0;function jy(d,g){return function(E,I=null){Yt(E)||(E=Object.assign({},E)),I!=null&&!rr(I)&&(I=null);const L=xg(),V=new Set;let s=!1;const W=L.app={_uid:Zy++,_component:E,_props:I,_container:null,_context:L,_instance:null,version:d5,get config(){return L.config},set config(le){},use(le,...he){return V.has(le)||(le&&Yt(le.install)?(V.add(le),le.install(W,...he)):Yt(le)&&(V.add(le),le(W,...he))),W},mixin(le){return L.mixins.includes(le)||L.mixins.push(le),W},component(le,he){return he?(L.components[le]=he,W):L.components[le]},directive(le,he){return he?(L.directives[le]=he,W):L.directives[le]},mount(le,he,$){if(!s){const pe=Wt(E,I);return pe.appContext=L,he&&g?g(pe,le):d(pe,le,$),s=!0,W._container=le,le.__vue_app__=W,ud(pe.component)||pe.component.proxy}},unmount(){s&&(d(null,W._container),delete W._container.__vue_app__)},provide(le,he){return L.provides[le]=he,W}};return W}}function ef(d,g,b,E,I=!1){if(jt(d)){d.forEach((pe,Te)=>ef(pe,g&&(jt(g)?g[Te]:g),b,E,I));return}if(Kp(E)&&!I)return;const L=E.shapeFlag&4?ud(E.component)||E.component.proxy:E.el,V=I?null:L,{i:s,r:W}=d,le=g&&g.r,he=s.refs===Ei?s.refs={}:s.refs,$=s.setupState;if(le!=null&&le!==W&&(cr(le)?(he[le]=null,hi($,le)&&($[le]=null)):Ar(le)&&(le.value=null)),Yt(W))xs(W,s,12,[V,he]);else{const pe=cr(W),Te=Ar(W);if(pe||Te){const ut=()=>{if(d.f){const zt=pe?he[W]:W.value;I?jt(zt)&&pf(zt,L):jt(zt)?zt.includes(L)||zt.push(L):pe?(he[W]=[L],hi($,W)&&($[W]=he[W])):(W.value=[L],d.k&&(he[d.k]=W.value))}else pe?(he[W]=V,hi($,W)&&($[W]=V)):Ar(W)&&(W.value=V,d.k&&(he[d.k]=V))};V?(ut.id=-1,Xr(ut,b)):ut()}}}const Xr=yy;function Qy(d){return Yy(d)}function Yy(d,g){const b=I2();b.__VUE__=!0;const{insert:E,remove:I,patchProp:L,createElement:V,createText:s,createComment:W,setText:le,setElementText:he,parentNode:$,nextSibling:pe,setScopeId:Te=kn,cloneNode:ut,insertStaticContent:zt}=d,He=(te,de,Ce,Oe=null,Se=null,We=null,ot=!1,Ye=null,Ke=!!de.dynamicChildren)=>{if(te===de)return;te&&!qc(te,de)&&(Oe=yt(te),Ot(te,Se,We,!0),te=null),de.patchFlag===-2&&(Ke=!1,de.dynamicChildren=null);const{type:Ue,ref:wt,shapeFlag:ft}=de;switch(Ue){case If:dt(te,de,Ce,Oe);break;case ma:Pt(te,de,Ce,Oe);break;case jh:te==null&&Kt(de,Ce,Oe,ot);break;case Bo:Tr(te,de,Ce,Oe,Se,We,ot,Ye,Ke);break;default:ft&1?Dt(te,de,Ce,Oe,Se,We,ot,Ye,Ke):ft&6?$r(te,de,Ce,Oe,Se,We,ot,Ye,Ke):(ft&64||ft&128)&&Ue.process(te,de,Ce,Oe,Se,We,ot,Ye,Ke,si)}wt!=null&&Se&&ef(wt,te&&te.ref,We,de||te,!de)},dt=(te,de,Ce,Oe)=>{if(te==null)E(de.el=s(de.children),Ce,Oe);else{const Se=de.el=te.el;de.children!==te.children&&le(Se,de.children)}},Pt=(te,de,Ce,Oe)=>{te==null?E(de.el=W(de.children||""),Ce,Oe):de.el=te.el},Kt=(te,de,Ce,Oe)=>{[te.el,te.anchor]=zt(te.children,de,Ce,Oe,te.el,te.anchor)},ei=({el:te,anchor:de},Ce,Oe)=>{let Se;for(;te&&te!==de;)Se=pe(te),E(te,Ce,Oe),te=Se;E(de,Ce,Oe)},wi=({el:te,anchor:de})=>{let Ce;for(;te&&te!==de;)Ce=pe(te),I(te),te=Ce;I(de)},Dt=(te,de,Ce,Oe,Se,We,ot,Ye,Ke)=>{ot=ot||de.type==="svg",te==null?ur(de,Ce,Oe,Se,We,ot,Ye,Ke):gr(te,de,Se,We,ot,Ye,Ke)},ur=(te,de,Ce,Oe,Se,We,ot,Ye)=>{let Ke,Ue;const{type:wt,props:ft,shapeFlag:bt,transition:Tt,patchFlag:Ft,dirs:Xt}=te;if(te.el&&ut!==void 0&&Ft===-1)Ke=te.el=ut(te.el);else{if(Ke=te.el=V(te.type,We,ft&&ft.is,ft),bt&8?he(Ke,te.children):bt&16&&Ji(te.children,Ke,null,Oe,Se,We&&wt!=="foreignObject",ot,Ye),Xt&&aa(te,null,Oe,"created"),ft){for(const ai in ft)ai!=="value"&&!Vh(ai)&&L(Ke,ai,null,ft[ai],We,te.children,Oe,Se,$e);"value"in ft&&L(Ke,"value",null,ft.value),(Ue=ft.onVnodeBeforeMount)&&eo(Ue,Oe,te)}Xi(Ke,te,te.scopeId,ot,Oe)}Xt&&aa(te,null,Oe,"beforeMount");const Qt=(!Se||Se&&!Se.pendingBranch)&&Tt&&!Tt.persisted;Qt&&Tt.beforeEnter(Ke),E(Ke,de,Ce),((Ue=ft&&ft.onVnodeMounted)||Qt||Xt)&&Xr(()=>{Ue&&eo(Ue,Oe,te),Qt&&Tt.enter(Ke),Xt&&aa(te,null,Oe,"mounted")},Se)},Xi=(te,de,Ce,Oe,Se)=>{if(Ce&&Te(te,Ce),Oe)for(let We=0;We<Oe.length;We++)Te(te,Oe[We]);if(Se){let We=Se.subTree;if(de===We){const ot=Se.vnode;Xi(te,ot,ot.scopeId,ot.slotScopeIds,Se.parent)}}},Ji=(te,de,Ce,Oe,Se,We,ot,Ye,Ke=0)=>{for(let Ue=Ke;Ue<te.length;Ue++){const wt=te[Ue]=Ye?gs(te[Ue]):ro(te[Ue]);He(null,wt,de,Ce,Oe,Se,We,ot,Ye)}},gr=(te,de,Ce,Oe,Se,We,ot)=>{const Ye=de.el=te.el;let{patchFlag:Ke,dynamicChildren:Ue,dirs:wt}=de;Ke|=te.patchFlag&16;const ft=te.props||Ei,bt=de.props||Ei;let Tt;Ce&&la(Ce,!1),(Tt=bt.onVnodeBeforeUpdate)&&eo(Tt,Ce,de,te),wt&&aa(de,te,Ce,"beforeUpdate"),Ce&&la(Ce,!0);const Ft=Se&&de.type!=="foreignObject";if(Ue?mi(te.dynamicChildren,Ue,Ye,Ce,Oe,Ft,We):ot||Li(te,de,Ye,null,Ce,Oe,Ft,We,!1),Ke>0){if(Ke&16)hr(Ye,de,ft,bt,Ce,Oe,Se);else if(Ke&2&&ft.class!==bt.class&&L(Ye,"class",null,bt.class,Se),Ke&4&&L(Ye,"style",ft.style,bt.style,Se),Ke&8){const Xt=de.dynamicProps;for(let Qt=0;Qt<Xt.length;Qt++){const ai=Xt[Qt],$i=ft[ai],_r=bt[ai];(_r!==$i||ai==="value")&&L(Ye,ai,$i,_r,Se,te.children,Ce,Oe,$e)}}Ke&1&&te.children!==de.children&&he(Ye,de.children)}else!ot&&Ue==null&&hr(Ye,de,ft,bt,Ce,Oe,Se);((Tt=bt.onVnodeUpdated)||wt)&&Xr(()=>{Tt&&eo(Tt,Ce,de,te),wt&&aa(de,te,Ce,"updated")},Oe)},mi=(te,de,Ce,Oe,Se,We,ot)=>{for(let Ye=0;Ye<de.length;Ye++){const Ke=te[Ye],Ue=de[Ye],wt=Ke.el&&(Ke.type===Bo||!qc(Ke,Ue)||Ke.shapeFlag&70)?$(Ke.el):Ce;He(Ke,Ue,wt,null,Oe,Se,We,ot,!0)}},hr=(te,de,Ce,Oe,Se,We,ot)=>{if(Ce!==Oe){for(const Ye in Oe){if(Vh(Ye))continue;const Ke=Oe[Ye],Ue=Ce[Ye];Ke!==Ue&&Ye!=="value"&&L(te,Ye,Ue,Ke,ot,de.children,Se,We,$e)}if(Ce!==Ei)for(const Ye in Ce)!Vh(Ye)&&!(Ye in Oe)&&L(te,Ye,Ce[Ye],null,ot,de.children,Se,We,$e);"value"in Oe&&L(te,"value",Ce.value,Oe.value)}},Tr=(te,de,Ce,Oe,Se,We,ot,Ye,Ke)=>{const Ue=de.el=te?te.el:s(""),wt=de.anchor=te?te.anchor:s("");let{patchFlag:ft,dynamicChildren:bt,slotScopeIds:Tt}=de;Tt&&(Ye=Ye?Ye.concat(Tt):Tt),te==null?(E(Ue,Ce,Oe),E(wt,Ce,Oe),Ji(de.children,Ce,wt,Se,We,ot,Ye,Ke)):ft>0&&ft&64&&bt&&te.dynamicChildren?(mi(te.dynamicChildren,bt,Ce,Se,We,ot,Ye),(de.key!=null||Se&&de===Se.subTree)&&vg(te,de,!0)):Li(te,de,Ce,wt,Se,We,ot,Ye,Ke)},$r=(te,de,Ce,Oe,Se,We,ot,Ye,Ke)=>{de.slotScopeIds=Ye,te==null?de.shapeFlag&512?Se.ctx.activate(de,Ce,Oe,ot,Ke):en(de,Ce,Oe,Se,We,ot,Ke):vi(te,de,Ke)},en=(te,de,Ce,Oe,Se,We,ot)=>{const Ye=te.component=o5(te,Oe,Se);if(ug(te)&&(Ye.ctx.renderer=si),s5(Ye),Ye.asyncDep){if(Se&&Se.registerDep(Ye,ci),!te.el){const Ke=Ye.subTree=Wt(ma);Pt(null,Ke,de,Ce)}return}ci(Ye,te,de,Ce,Se,We,ot)},vi=(te,de,Ce)=>{const Oe=de.component=te.component;if(Ay(te,de,Ce))if(Oe.asyncDep&&!Oe.asyncResolved){Ht(Oe,de,Ce);return}else Oe.next=de,uy(Oe.update),Oe.update();else de.component=te.component,de.el=te.el,Oe.vnode=de},ci=(te,de,Ce,Oe,Se,We,ot)=>{const Ye=()=>{if(te.isMounted){let{next:wt,bu:ft,u:bt,parent:Tt,vnode:Ft}=te,Xt=wt,Qt;la(te,!1),wt?(wt.el=Ft.el,Ht(te,wt,ot)):wt=Ft,ft&&Np(ft),(Qt=wt.props&&wt.props.onVnodeBeforeUpdate)&&eo(Qt,Tt,wt,Ft),la(te,!0);const ai=Op(te),$i=te.subTree;te.subTree=ai,He($i,ai,$($i.el),yt($i),te,Se,We),wt.el=ai.el,Xt===null&&gy(te,ai.el),bt&&Xr(bt,Se),(Qt=wt.props&&wt.props.onVnodeUpdated)&&Xr(()=>eo(Qt,Tt,wt,Ft),Se)}else{let wt;const{el:ft,props:bt}=de,{bm:Tt,m:Ft,parent:Xt}=te,Qt=Kp(de);if(la(te,!1),Tt&&Np(Tt),!Qt&&(wt=bt&&bt.onVnodeBeforeMount)&&eo(wt,Xt,de),la(te,!0),ft&&it){const ai=()=>{te.subTree=Op(te),it(ft,te.subTree,te,Se,null)};Qt?de.type.__asyncLoader().then(()=>!te.isUnmounted&&ai()):ai()}else{const ai=te.subTree=Op(te);He(null,ai,Ce,Oe,te,Se,We),de.el=ai.el}if(Ft&&Xr(Ft,Se),!Qt&&(wt=bt&&bt.onVnodeMounted)){const ai=de;Xr(()=>eo(wt,Xt,ai),Se)}de.shapeFlag&256&&te.a&&Xr(te.a,Se),te.isMounted=!0,de=Ce=Oe=null}},Ke=te.effect=new gf(Ye,()=>ig(te.update),te.scope),Ue=te.update=Ke.run.bind(Ke);Ue.id=te.uid,la(te,!0),Ue()},Ht=(te,de,Ce)=>{de.component=te;const Oe=te.vnode.props;te.vnode=de,te.next=null,Gy(te,de.props,Oe,Ce),Uy(te,de.children,Ce),Ml(),Tf(void 0,te.update),El()},Li=(te,de,Ce,Oe,Se,We,ot,Ye,Ke=!1)=>{const Ue=te&&te.children,wt=te?te.shapeFlag:0,ft=de.children,{patchFlag:bt,shapeFlag:Tt}=de;if(bt>0){if(bt&128){Pi(Ue,ft,Ce,Oe,Se,We,ot,Ye,Ke);return}else if(bt&256){Or(Ue,ft,Ce,Oe,Se,We,ot,Ye,Ke);return}}Tt&8?(wt&16&&$e(Ue,Se,We),ft!==Ue&&he(Ce,ft)):wt&16?Tt&16?Pi(Ue,ft,Ce,Oe,Se,We,ot,Ye,Ke):$e(Ue,Se,We,!0):(wt&8&&he(Ce,""),Tt&16&&Ji(ft,Ce,Oe,Se,We,ot,Ye,Ke))},Or=(te,de,Ce,Oe,Se,We,ot,Ye,Ke)=>{te=te||yl,de=de||yl;const Ue=te.length,wt=de.length,ft=Math.min(Ue,wt);let bt;for(bt=0;bt<ft;bt++){const Tt=de[bt]=Ke?gs(de[bt]):ro(de[bt]);He(te[bt],Tt,Ce,null,Se,We,ot,Ye,Ke)}Ue>wt?$e(te,Se,We,!0,!1,ft):Ji(de,Ce,Oe,Se,We,ot,Ye,Ke,ft)},Pi=(te,de,Ce,Oe,Se,We,ot,Ye,Ke)=>{let Ue=0;const wt=de.length;let ft=te.length-1,bt=wt-1;for(;Ue<=ft&&Ue<=bt;){const Tt=te[Ue],Ft=de[Ue]=Ke?gs(de[Ue]):ro(de[Ue]);if(qc(Tt,Ft))He(Tt,Ft,Ce,null,Se,We,ot,Ye,Ke);else break;Ue++}for(;Ue<=ft&&Ue<=bt;){const Tt=te[ft],Ft=de[bt]=Ke?gs(de[bt]):ro(de[bt]);if(qc(Tt,Ft))He(Tt,Ft,Ce,null,Se,We,ot,Ye,Ke);else break;ft--,bt--}if(Ue>ft){if(Ue<=bt){const Tt=bt+1,Ft=Tt<wt?de[Tt].el:Oe;for(;Ue<=bt;)He(null,de[Ue]=Ke?gs(de[Ue]):ro(de[Ue]),Ce,Ft,Se,We,ot,Ye,Ke),Ue++}}else if(Ue>bt)for(;Ue<=ft;)Ot(te[Ue],Se,We,!0),Ue++;else{const Tt=Ue,Ft=Ue,Xt=new Map;for(Ue=Ft;Ue<=bt;Ue++){const Yi=de[Ue]=Ke?gs(de[Ue]):ro(de[Ue]);Yi.key!=null&&Xt.set(Yi.key,Ue)}let Qt,ai=0;const $i=bt-Ft+1;let _r=!1,yn=0;const xn=new Array($i);for(Ue=0;Ue<$i;Ue++)xn[Ue]=0;for(Ue=Tt;Ue<=ft;Ue++){const Yi=te[Ue];if(ai>=$i){Ot(Yi,Se,We,!0);continue}let er;if(Yi.key!=null)er=Xt.get(Yi.key);else for(Qt=Ft;Qt<=bt;Qt++)if(xn[Qt-Ft]===0&&qc(Yi,de[Qt])){er=Qt;break}er===void 0?Ot(Yi,Se,We,!0):(xn[er-Ft]=Ue+1,er>=yn?yn=er:_r=!0,He(Yi,de[er],Ce,null,Se,We,ot,Ye,Ke),ai++)}const lo=_r?Hy(xn):yl;for(Qt=lo.length-1,Ue=$i-1;Ue>=0;Ue--){const Yi=Ft+Ue,er=de[Yi],co=Yi+1<wt?de[Yi+1].el:Oe;xn[Ue]===0?He(null,er,Ce,co,Se,We,ot,Ye,Ke):_r&&(Qt<0||Ue!==lo[Qt]?dr(er,Ce,co,2):Qt--)}}},dr=(te,de,Ce,Oe,Se=null)=>{const{el:We,type:ot,transition:Ye,children:Ke,shapeFlag:Ue}=te;if(Ue&6){dr(te.component.subTree,de,Ce,Oe);return}if(Ue&128){te.suspense.move(de,Ce,Oe);return}if(Ue&64){ot.move(te,de,Ce,si);return}if(ot===Bo){E(We,de,Ce);for(let ft=0;ft<Ke.length;ft++)dr(Ke[ft],de,Ce,Oe);E(te.anchor,de,Ce);return}if(ot===jh){ei(te,de,Ce);return}if(Oe!==2&&Ue&1&&Ye)if(Oe===0)Ye.beforeEnter(We),E(We,de,Ce),Xr(()=>Ye.enter(We),Se);else{const{leave:ft,delayLeave:bt,afterLeave:Tt}=Ye,Ft=()=>E(We,de,Ce),Xt=()=>{ft(We,()=>{Ft(),Tt&&Tt()})};bt?bt(We,Ft,Xt):Xt()}else E(We,de,Ce)},Ot=(te,de,Ce,Oe=!1,Se=!1)=>{const{type:We,props:ot,ref:Ye,children:Ke,dynamicChildren:Ue,shapeFlag:wt,patchFlag:ft,dirs:bt}=te;if(Ye!=null&&ef(Ye,null,Ce,te,!0),wt&256){de.ctx.deactivate(te);return}const Tt=wt&1&&bt,Ft=!Kp(te);let Xt;if(Ft&&(Xt=ot&&ot.onVnodeBeforeUnmount)&&eo(Xt,de,te),wt&6)ht(te.component,Ce,Oe);else{if(wt&128){te.suspense.unmount(Ce,Oe);return}Tt&&aa(te,null,de,"beforeUnmount"),wt&64?te.type.remove(te,de,Ce,Se,si,Oe):Ue&&(We!==Bo||ft>0&&ft&64)?$e(Ue,de,Ce,!1,!0):(We===Bo&&ft&384||!Se&&wt&16)&&$e(Ke,de,Ce),Oe&&Fi(te)}(Ft&&(Xt=ot&&ot.onVnodeUnmounted)||Tt)&&Xr(()=>{Xt&&eo(Xt,de,te),Tt&&aa(te,null,de,"unmounted")},Ce)},Fi=te=>{const{type:de,el:Ce,anchor:Oe,transition:Se}=te;if(de===Bo){Pe(Ce,Oe);return}if(de===jh){wi(te);return}const We=()=>{I(Ce),Se&&!Se.persisted&&Se.afterLeave&&Se.afterLeave()};if(te.shapeFlag&1&&Se&&!Se.persisted){const{leave:ot,delayLeave:Ye}=Se,Ke=()=>ot(Ce,We);Ye?Ye(te.el,We,Ke):Ke()}else We()},Pe=(te,de)=>{let Ce;for(;te!==de;)Ce=pe(te),I(te),te=Ce;I(de)},ht=(te,de,Ce)=>{const{bum:Oe,scope:Se,update:We,subTree:ot,um:Ye}=te;Oe&&Np(Oe),Se.stop(),We&&(We.active=!1,Ot(ot,te,de,Ce)),Ye&&Xr(Ye,de),Xr(()=>{te.isUnmounted=!0},de),de&&de.pendingBranch&&!de.isUnmounted&&te.asyncDep&&!te.asyncResolved&&te.suspenseId===de.pendingId&&(de.deps--,de.deps===0&&de.resolve())},$e=(te,de,Ce,Oe=!1,Se=!1,We=0)=>{for(let ot=We;ot<te.length;ot++)Ot(te[ot],de,Ce,Oe,Se)},yt=te=>te.shapeFlag&6?yt(te.component.subTree):te.shapeFlag&128?te.suspense.next():pe(te.anchor||te.el),ui=(te,de,Ce)=>{te==null?de._vnode&&Ot(de._vnode,null,null,!0):He(de._vnode||null,te,de,null,null,null,Ce),og(),de._vnode=te},si={p:He,um:Ot,m:dr,r:Fi,mt:en,mc:Ji,pc:Li,pbc:mi,n:yt,o:d};let Bt,it;return g&&([Bt,it]=g(si)),{render:ui,hydrate:Bt,createApp:jy(ui,Bt)}}function la({effect:d,update:g},b){d.allowRecurse=g.allowRecurse=b}function vg(d,g,b=!1){const E=d.children,I=g.children;if(jt(E)&&jt(I))for(let L=0;L<E.length;L++){const V=E[L];let s=I[L];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=I[L]=gs(I[L]),s.el=V.el),b||vg(V,s))}}function Hy(d){const g=d.slice(),b=[0];let E,I,L,V,s;const W=d.length;for(E=0;E<W;E++){const le=d[E];if(le!==0){if(I=b[b.length-1],d[I]<le){g[E]=I,b.push(E);continue}for(L=0,V=b.length-1;L<V;)s=L+V>>1,d[b[s]]<le?L=s+1:V=s;le<d[b[L]]&&(L>0&&(g[E]=b[L-1]),b[L]=E)}}for(L=b.length,V=b[L-1];L-- >0;)b[L]=V,V=g[V];return b}const qy=d=>d.__isTeleport,bg="components";function lr(d,g){return Ky(bg,d,!0,g)||d}const Wy=Symbol();function Ky(d,g,b=!0,E=!1){const I=Bn||mr;if(I){const L=I.type;if(d===bg){const s=u5(L);if(s&&(s===g||s===ao(g)||s===rd(ao(g))))return L}const V=tA(I[d]||L[d],g)||tA(I.appContext[d],g);return!V&&E?L:V}}function tA(d,g){return d&&(d[g]||d[ao(g)]||d[rd(ao(g))])}const Bo=Symbol(void 0),If=Symbol(void 0),ma=Symbol(void 0),jh=Symbol(void 0),iu=[];let pa=null;function Jr(d=!1){iu.push(pa=d?null:[])}function Xy(){iu.pop(),pa=iu[iu.length-1]||null}let Kh=1;function iA(d){Kh+=d}function wg(d){return d.dynamicChildren=Kh>0?pa||yl:null,Xy(),Kh>0&&pa&&pa.push(d),d}function hn(d,g,b,E,I,L){return wg(Le(d,g,b,E,I,L,!0))}function Jy(d,g,b,E,I){return wg(Wt(d,g,b,E,I,!0))}function tf(d){return d?d.__v_isVNode===!0:!1}function qc(d,g){return d.type===g.type&&d.key===g.key}const cd="__vInternal",Cg=({key:d})=>d!=null?d:null,Qh=({ref:d,ref_key:g,ref_for:b})=>d!=null?cr(d)||Ar(d)||Yt(d)?{i:Bn,r:d,k:g,f:!!b}:d:null;function Le(d,g=null,b=null,E=0,I=null,L=d===Bo?0:1,V=!1,s=!1){const W={__v_isVNode:!0,__v_skip:!0,type:d,props:g,key:g&&Cg(g),ref:g&&Qh(g),scopeId:ad,slotScopeIds:null,children:b,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:L,patchFlag:E,dynamicProps:I,dynamicChildren:null,appContext:null};return s?(Df(W,b),L&128&&d.normalize(W)):b&&(W.shapeFlag|=cr(b)?8:16),Kh>0&&!V&&pa&&(W.patchFlag>0||L&6)&&W.patchFlag!==32&&pa.push(W),W}const Wt=$y;function $y(d,g=null,b=null,E=0,I=null,L=!1){if((!d||d===Wy)&&(d=ma),tf(d)){const s=cu(d,g,!0);return b&&Df(s,b),s}if(h5(d)&&(d=d.__vccOpts),g){g=e5(g);let{class:s,style:W}=g;s&&!cr(s)&&(g.class=Lo(s)),rr(W)&&(qA(W)&&!jt(W)&&(W=Nr({},W)),g.style=hf(W))}const V=cr(d)?1:_y(d)?128:qy(d)?64:rr(d)?4:Yt(d)?2:0;return Le(d,g,b,E,I,V,L,!0)}function e5(d){return d?qA(d)||cd in d?Nr({},d):d:null}function cu(d,g,b=!1){const{props:E,ref:I,patchFlag:L,children:V}=d,s=g?t5(E||{},g):E;return{__v_isVNode:!0,__v_skip:!0,type:d.type,props:s,key:s&&Cg(s),ref:g&&g.ref?b&&I?jt(I)?I.concat(Qh(g)):[I,Qh(g)]:Qh(g):I,scopeId:d.scopeId,slotScopeIds:d.slotScopeIds,children:V,target:d.target,targetAnchor:d.targetAnchor,staticCount:d.staticCount,shapeFlag:d.shapeFlag,patchFlag:g&&d.type!==Bo?L===-1?16:L|16:L,dynamicProps:d.dynamicProps,dynamicChildren:d.dynamicChildren,appContext:d.appContext,dirs:d.dirs,transition:d.transition,component:d.component,suspense:d.suspense,ssContent:d.ssContent&&cu(d.ssContent),ssFallback:d.ssFallback&&cu(d.ssFallback),el:d.el,anchor:d.anchor}}function Ki(d=" ",g=0){return Wt(If,null,d,g)}function Il(d,g){const b=Wt(jh,null,d);return b.staticCount=g,b}function w3(d="",g=!1){return g?(Jr(),Jy(ma,null,d)):Wt(ma,null,d)}function ro(d){return d==null||typeof d=="boolean"?Wt(ma):jt(d)?Wt(Bo,null,d.slice()):typeof d=="object"?gs(d):Wt(If,null,String(d))}function gs(d){return d.el===null||d.memo?d:cu(d)}function Df(d,g){let b=0;const{shapeFlag:E}=d;if(g==null)g=null;else if(jt(g))b=16;else if(typeof g=="object")if(E&65){const I=g.default;I&&(I._c&&(I._d=!1),Df(d,I()),I._c&&(I._d=!0));return}else{b=32;const I=g._;!I&&!(cd in g)?g._ctx=Bn:I===3&&Bn&&(Bn.slots._===1?g._=1:(g._=2,d.patchFlag|=1024))}else Yt(g)?(g={default:g,_ctx:Bn},b=32):(g=String(g),E&64?(b=16,g=[Ki(g)]):b=8);d.children=g,d.shapeFlag|=b}function t5(...d){const g={};for(let b=0;b<d.length;b++){const E=d[b];for(const I in E)if(I==="class")g.class!==E.class&&(g.class=Lo([g.class,E.class]));else if(I==="style")g.style=hf([g.style,E.style]);else if(ed(I)){const L=g[I],V=E[I];V&&L!==V&&!(jt(L)&&L.includes(V))&&(g[I]=L?[].concat(L,V):V)}else I!==""&&(g[I]=E[I])}return g}function eo(d,g,b,E=null){Ln(d,g,7,[b,E])}function C3(d,g,b,E){let I;const L=b&&b[E];if(jt(d)||cr(d)){I=new Array(d.length);for(let V=0,s=d.length;V<s;V++)I[V]=g(d[V],V,void 0,L&&L[V])}else if(typeof d=="number"){I=new Array(d);for(let V=0;V<d;V++)I[V]=g(V+1,V,void 0,L&&L[V])}else if(rr(d))if(d[Symbol.iterator])I=Array.from(d,(V,s)=>g(V,s,void 0,L&&L[s]));else{const V=Object.keys(d);I=new Array(V.length);for(let s=0,W=V.length;s<W;s++){const le=V[s];I[s]=g(d[le],le,s,L&&L[s])}}else I=[];return b&&(b[E]=I),I}const rf=d=>d?Tg(d)?ud(d)||d.proxy:rf(d.parent):null,Xh=Nr(Object.create(null),{$:d=>d,$el:d=>d.vnode.el,$data:d=>d.data,$props:d=>d.props,$attrs:d=>d.attrs,$slots:d=>d.slots,$refs:d=>d.refs,$parent:d=>rf(d.parent),$root:d=>rf(d.root),$emit:d=>d.emit,$options:d=>fg(d),$forceUpdate:d=>()=>ig(d.update),$nextTick:d=>tg.bind(d.proxy),$watch:d=>xy.bind(d)}),i5={get({_:d},g){const{ctx:b,setupState:E,data:I,props:L,accessCache:V,type:s,appContext:W}=d;let le;if(g[0]!=="$"){const Te=V[g];if(Te!==void 0)switch(Te){case 1:return E[g];case 2:return I[g];case 4:return b[g];case 3:return L[g]}else{if(E!==Ei&&hi(E,g))return V[g]=1,E[g];if(I!==Ei&&hi(I,g))return V[g]=2,I[g];if((le=d.propsOptions[0])&&hi(le,g))return V[g]=3,L[g];if(b!==Ei&&hi(b,g))return V[g]=4,b[g];Xp&&(V[g]=0)}}const he=Xh[g];let $,pe;if(he)return g==="$attrs"&&un(d,"get",g),he(d);if(($=s.__cssModules)&&($=$[g]))return $;if(b!==Ei&&hi(b,g))return V[g]=4,b[g];if(pe=W.config.globalProperties,hi(pe,g))return pe[g]},set({_:d},g,b){const{data:E,setupState:I,ctx:L}=d;return I!==Ei&&hi(I,g)?(I[g]=b,!0):E!==Ei&&hi(E,g)?(E[g]=b,!0):hi(d.props,g)||g[0]==="$"&&g.slice(1)in d?!1:(L[g]=b,!0)},has({_:{data:d,setupState:g,accessCache:b,ctx:E,appContext:I,propsOptions:L}},V){let s;return!!b[V]||d!==Ei&&hi(d,V)||g!==Ei&&hi(g,V)||(s=L[0])&&hi(s,V)||hi(E,V)||hi(Xh,V)||hi(I.config.globalProperties,V)},defineProperty(d,g,b){return b.get!=null?d.$.accessCache[g]=0:hi(b,"value")&&this.set(d,g,b.value,null),Reflect.defineProperty(d,g,b)}},r5=xg();let n5=0;function o5(d,g,b){const E=d.type,I=(g?g.appContext:d.appContext)||r5,L={uid:n5++,vnode:d,type:E,parent:g,appContext:I,root:null,next:null,subTree:null,effect:null,update:null,scope:new PA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:g?g.provides:Object.create(I.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ag(E,I),emitsOptions:ag(E,I),emit:null,emitted:null,propsDefaults:Ei,inheritAttrs:E.inheritAttrs,ctx:Ei,data:Ei,props:Ei,attrs:Ei,slots:Ei,refs:Ei,setupState:Ei,setupContext:null,suspense:b,suspenseId:b?b.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return L.ctx={_:L},L.root=g?g.root:L,L.emit=py.bind(null,L),d.ce&&d.ce(L),L}let mr=null;const bl=d=>{mr=d,d.scope.on()},fa=()=>{mr&&mr.scope.off(),mr=null};function Tg(d){return d.vnode.shapeFlag&4}let uu=!1;function s5(d,g=!1){uu=g;const{props:b,children:E}=d.vnode,I=Tg(d);Oy(d,b,I,g),Vy(d,E);const L=I?a5(d,g):void 0;return uu=!1,L}function a5(d,g){const b=d.type;d.accessCache=Object.create(null),d.proxy=bf(new Proxy(d.ctx,i5));const{setup:E}=b;if(E){const I=d.setupContext=E.length>1?c5(d):null;bl(d),Ml();const L=xs(E,d,0,[d.props,I]);if(El(),fa(),BA(L)){if(L.then(fa,fa),g)return L.then(V=>{rA(d,V,g)}).catch(V=>{od(V,d,0)});d.asyncDep=L}else rA(d,L,g)}else Mg(d,g)}function rA(d,g,b){Yt(g)?d.type.__ssrInlineRender?d.ssrRender=g:d.render=g:rr(g)&&(d.setupState=$A(g)),Mg(d,b)}let nA;function Mg(d,g,b){const E=d.type;if(!d.render){if(!g&&nA&&!E.render){const I=E.template;if(I){const{isCustomElement:L,compilerOptions:V}=d.appContext.config,{delimiters:s,compilerOptions:W}=E,le=Nr(Nr({isCustomElement:L,delimiters:s},V),W);E.render=nA(I,le)}}d.render=E.render||kn}bl(d),Ml(),ky(d),El(),fa()}function l5(d){return new Proxy(d.attrs,{get(g,b){return un(d,"get","$attrs"),g[b]}})}function c5(d){const g=E=>{d.exposed=E||{}};let b;return{get attrs(){return b||(b=l5(d))},slots:d.slots,emit:d.emit,expose:g}}function ud(d){if(d.exposed)return d.exposeProxy||(d.exposeProxy=new Proxy($A(bf(d.exposed)),{get(g,b){if(b in g)return g[b];if(b in Xh)return Xh[b](d)}}))}function u5(d){return Yt(d)&&d.displayName||d.name}function h5(d){return Yt(d)&&"__vccOpts"in d}const no=(d,g)=>ay(d,g,uu);function Eg(d,g,b){const E=arguments.length;return E===2?rr(g)&&!jt(g)?tf(g)?Wt(d,null,[g]):Wt(d,g):Wt(d,null,g):(E>3?b=Array.prototype.slice.call(arguments,2):E===3&&tf(b)&&(b=[b]),Wt(d,g,b))}const d5="3.2.32",p5="http://www.w3.org/2000/svg",ua=typeof document!="undefined"?document:null,oA=ua&&ua.createElement("template"),f5={insert:(d,g,b)=>{g.insertBefore(d,b||null)},remove:d=>{const g=d.parentNode;g&&g.removeChild(d)},createElement:(d,g,b,E)=>{const I=g?ua.createElementNS(p5,d):ua.createElement(d,b?{is:b}:void 0);return d==="select"&&E&&E.multiple!=null&&I.setAttribute("multiple",E.multiple),I},createText:d=>ua.createTextNode(d),createComment:d=>ua.createComment(d),setText:(d,g)=>{d.nodeValue=g},setElementText:(d,g)=>{d.textContent=g},parentNode:d=>d.parentNode,nextSibling:d=>d.nextSibling,querySelector:d=>ua.querySelector(d),setScopeId(d,g){d.setAttribute(g,"")},cloneNode(d){const g=d.cloneNode(!0);return"_value"in d&&(g._value=d._value),g},insertStaticContent(d,g,b,E,I,L){const V=b?b.previousSibling:g.lastChild;if(I&&(I===L||I.nextSibling))for(;g.insertBefore(I.cloneNode(!0),b),!(I===L||!(I=I.nextSibling)););else{oA.innerHTML=E?`<svg>${d}</svg>`:d;const s=oA.content;if(E){const W=s.firstChild;for(;W.firstChild;)s.appendChild(W.firstChild);s.removeChild(W)}g.insertBefore(s,b)}return[V?V.nextSibling:g.firstChild,b?b.previousSibling:g.lastChild]}};function m5(d,g,b){const E=d._vtc;E&&(g=(g?[g,...E]:[...E]).join(" ")),g==null?d.removeAttribute("class"):b?d.setAttribute("class",g):d.className=g}function A5(d,g,b){const E=d.style,I=cr(b);if(b&&!I){for(const L in b)nf(E,L,b[L]);if(g&&!cr(g))for(const L in g)b[L]==null&&nf(E,L,"")}else{const L=E.display;I?g!==b&&(E.cssText=b):g&&d.removeAttribute("style"),"_vod"in d&&(E.display=L)}}const sA=/\s*!important$/;function nf(d,g,b){if(jt(b))b.forEach(E=>nf(d,g,E));else if(g.startsWith("--"))d.setProperty(g,b);else{const E=g5(d,g);sA.test(b)?d.setProperty(Tl(E),b.replace(sA,""),"important"):d[E]=b}}const aA=["Webkit","Moz","ms"],Gp={};function g5(d,g){const b=Gp[g];if(b)return b;let E=ao(g);if(E!=="filter"&&E in d)return Gp[g]=E;E=rd(E);for(let I=0;I<aA.length;I++){const L=aA[I]+E;if(L in d)return Gp[g]=L}return g}const lA="http://www.w3.org/1999/xlink";function _5(d,g,b,E,I){if(E&&g.startsWith("xlink:"))b==null?d.removeAttributeNS(lA,g.slice(6,g.length)):d.setAttributeNS(lA,g,b);else{const L=g2(g);b==null||L&&!DA(b)?d.removeAttribute(g):d.setAttribute(g,L?"":b)}}function y5(d,g,b,E,I,L,V){if(g==="innerHTML"||g==="textContent"){E&&V(E,I,L),d[g]=b==null?"":b;return}if(g==="value"&&d.tagName!=="PROGRESS"&&!d.tagName.includes("-")){d._value=b;const s=b==null?"":b;(d.value!==s||d.tagName==="OPTION")&&(d.value=s),b==null&&d.removeAttribute(g);return}if(b===""||b==null){const s=typeof d[g];if(s==="boolean"){d[g]=DA(b);return}else if(b==null&&s==="string"){d[g]="",d.removeAttribute(g);return}else if(s==="number"){try{d[g]=0}catch{}d.removeAttribute(g);return}}try{d[g]=b}catch{}}let Jh=Date.now,Ig=!1;if(typeof window!="undefined"){Jh()>document.createEvent("Event").timeStamp&&(Jh=()=>performance.now());const d=navigator.userAgent.match(/firefox\/(\d+)/i);Ig=!!(d&&Number(d[1])<=53)}let of=0;const x5=Promise.resolve(),v5=()=>{of=0},b5=()=>of||(x5.then(v5),of=Jh());function w5(d,g,b,E){d.addEventListener(g,b,E)}function C5(d,g,b,E){d.removeEventListener(g,b,E)}function T5(d,g,b,E,I=null){const L=d._vei||(d._vei={}),V=L[g];if(E&&V)V.value=E;else{const[s,W]=M5(g);if(E){const le=L[g]=E5(E,I);w5(d,s,le,W)}else V&&(C5(d,s,V,W),L[g]=void 0)}}const cA=/(?:Once|Passive|Capture)$/;function M5(d){let g;if(cA.test(d)){g={};let b;for(;b=d.match(cA);)d=d.slice(0,d.length-b[0].length),g[b[0].toLowerCase()]=!0}return[Tl(d.slice(2)),g]}function E5(d,g){const b=E=>{const I=E.timeStamp||Jh();(Ig||I>=b.attached-1)&&Ln(I5(E,b.value),g,5,[E])};return b.value=d,b.attached=b5(),b}function I5(d,g){if(jt(g)){const b=d.stopImmediatePropagation;return d.stopImmediatePropagation=()=>{b.call(d),d._stopped=!0},g.map(E=>I=>!I._stopped&&E&&E(I))}else return g}const uA=/^on[a-z]/,D5=(d,g,b,E,I=!1,L,V,s,W)=>{g==="class"?m5(d,E,I):g==="style"?A5(d,b,E):ed(g)?df(g)||T5(d,g,b,E,V):(g[0]==="."?(g=g.slice(1),!0):g[0]==="^"?(g=g.slice(1),!1):S5(d,g,E,I))?y5(d,g,E,L,V,s,W):(g==="true-value"?d._trueValue=E:g==="false-value"&&(d._falseValue=E),_5(d,g,E,I))};function S5(d,g,b,E){return E?!!(g==="innerHTML"||g==="textContent"||g in d&&uA.test(g)&&Yt(b)):g==="spellcheck"||g==="draggable"||g==="form"||g==="list"&&d.tagName==="INPUT"||g==="type"&&d.tagName==="TEXTAREA"||uA.test(g)&&cr(b)?!1:g in d}const z5=["ctrl","shift","alt","meta"],B5={stop:d=>d.stopPropagation(),prevent:d=>d.preventDefault(),self:d=>d.target!==d.currentTarget,ctrl:d=>!d.ctrlKey,shift:d=>!d.shiftKey,alt:d=>!d.altKey,meta:d=>!d.metaKey,left:d=>"button"in d&&d.button!==0,middle:d=>"button"in d&&d.button!==1,right:d=>"button"in d&&d.button!==2,exact:(d,g)=>z5.some(b=>d[`${b}Key`]&&!g.includes(b))},Dg=(d,g)=>(b,...E)=>{for(let I=0;I<g.length;I++){const L=B5[g[I]];if(L&&L(b,g))return}return d(b,...E)},T3={beforeMount(d,{value:g},{transition:b}){d._vod=d.style.display==="none"?"":d.style.display,b&&g?b.beforeEnter(d):Wc(d,g)},mounted(d,{value:g},{transition:b}){b&&g&&b.enter(d)},updated(d,{value:g,oldValue:b},{transition:E}){!g!=!b&&(E?g?(E.beforeEnter(d),Wc(d,!0),E.enter(d)):E.leave(d,()=>{Wc(d,!1)}):Wc(d,g))},beforeUnmount(d,{value:g}){Wc(d,g)}};function Wc(d,g){d.style.display=g?d._vod:"none"}const k5=Nr({patchProp:D5},f5);let hA;function L5(){return hA||(hA=Qy(k5))}const P5=(...d)=>{const g=L5().createApp(...d),{mount:b}=g;return g.mount=E=>{const I=R5(E);if(!I)return;const L=g._component;!Yt(L)&&!L.render&&!L.template&&(L.template=I.innerHTML),I.innerHTML="";const V=b(I,!1,I instanceof SVGElement);return I instanceof Element&&(I.removeAttribute("v-cloak"),I.setAttribute("data-v-app","")),V},g};function R5(d){return cr(d)?document.querySelector(d):d}var N5=!1;/*!
  * pinia v2.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const O5=Symbol();var dA;(function(d){d.direct="direct",d.patchObject="patch object",d.patchFunction="patch function"})(dA||(dA={}));function G5(){const d=D2(!0),g=d.run(()=>XA({}));let b=[],E=[];const I=bf({install(L){I._a=L,L.provide(O5,I),L.config.globalProperties.$pinia=I,E.forEach(V=>b.push(V)),E=[]},use(L){return!this._a&&!N5?E.push(L):b.push(L),this},_p:b,_a:null,_e:d,_s:new Map,state:g});return I}const hd=Aa({isVisible:!1,index:"",showDetailedSer:!1,hideBotForm:()=>{globalThis.isVisible=!1}}),F5=Aa({isVisible:!1});/*!
  * vue-router v4.0.14
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Sg=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Dl=d=>Sg?Symbol(d):"_vr_"+d,V5=Dl("rvlm"),pA=Dl("rvd"),Sf=Dl("r"),zg=Dl("rl"),sf=Dl("rvl"),_l=typeof window!="undefined";function U5(d){return d.__esModule||Sg&&d[Symbol.toStringTag]==="Module"}const Mi=Object.assign;function Fp(d,g){const b={};for(const E in g){const I=g[E];b[E]=Array.isArray(I)?I.map(d):d(I)}return b}const ru=()=>{},Z5=/\/$/,j5=d=>d.replace(Z5,"");function Vp(d,g,b="/"){let E,I={},L="",V="";const s=g.indexOf("?"),W=g.indexOf("#",s>-1?s:0);return s>-1&&(E=g.slice(0,s),L=g.slice(s+1,W>-1?W:g.length),I=d(L)),W>-1&&(E=E||g.slice(0,W),V=g.slice(W,g.length)),E=q5(E!=null?E:g,b),{fullPath:E+(L&&"?")+L+V,path:E,query:I,hash:V}}function Q5(d,g){const b=g.query?d(g.query):"";return g.path+(b&&"?")+b+(g.hash||"")}function fA(d,g){return!g||!d.toLowerCase().startsWith(g.toLowerCase())?d:d.slice(g.length)||"/"}function Y5(d,g,b){const E=g.matched.length-1,I=b.matched.length-1;return E>-1&&E===I&&wl(g.matched[E],b.matched[I])&&Bg(g.params,b.params)&&d(g.query)===d(b.query)&&g.hash===b.hash}function wl(d,g){return(d.aliasOf||d)===(g.aliasOf||g)}function Bg(d,g){if(Object.keys(d).length!==Object.keys(g).length)return!1;for(const b in d)if(!H5(d[b],g[b]))return!1;return!0}function H5(d,g){return Array.isArray(d)?mA(d,g):Array.isArray(g)?mA(g,d):d===g}function mA(d,g){return Array.isArray(g)?d.length===g.length&&d.every((b,E)=>b===g[E]):d.length===1&&d[0]===g}function q5(d,g){if(d.startsWith("/"))return d;if(!d)return g;const b=g.split("/"),E=d.split("/");let I=b.length-1,L,V;for(L=0;L<E.length;L++)if(V=E[L],!(I===1||V==="."))if(V==="..")I--;else break;return b.slice(0,I).join("/")+"/"+E.slice(L-(L===E.length?1:0)).join("/")}var hu;(function(d){d.pop="pop",d.push="push"})(hu||(hu={}));var nu;(function(d){d.back="back",d.forward="forward",d.unknown=""})(nu||(nu={}));function W5(d){if(!d)if(_l){const g=document.querySelector("base");d=g&&g.getAttribute("href")||"/",d=d.replace(/^\w+:\/\/[^\/]+/,"")}else d="/";return d[0]!=="/"&&d[0]!=="#"&&(d="/"+d),j5(d)}const K5=/^[^#]+#/;function X5(d,g){return d.replace(K5,"#")+g}function J5(d,g){const b=document.documentElement.getBoundingClientRect(),E=d.getBoundingClientRect();return{behavior:g.behavior,left:E.left-b.left-(g.left||0),top:E.top-b.top-(g.top||0)}}const dd=()=>({left:window.pageXOffset,top:window.pageYOffset});function $5(d){let g;if("el"in d){const b=d.el,E=typeof b=="string"&&b.startsWith("#"),I=typeof b=="string"?E?document.getElementById(b.slice(1)):document.querySelector(b):b;if(!I)return;g=J5(I,d)}else g=d;"scrollBehavior"in document.documentElement.style?window.scrollTo(g):window.scrollTo(g.left!=null?g.left:window.pageXOffset,g.top!=null?g.top:window.pageYOffset)}function AA(d,g){return(history.state?history.state.position-g:-1)+d}const af=new Map;function ex(d,g){af.set(d,g)}function tx(d){const g=af.get(d);return af.delete(d),g}let ix=()=>location.protocol+"//"+location.host;function kg(d,g){const{pathname:b,search:E,hash:I}=g,L=d.indexOf("#");if(L>-1){let s=I.includes(d.slice(L))?d.slice(L).length:1,W=I.slice(s);return W[0]!=="/"&&(W="/"+W),fA(W,"")}return fA(b,d)+E+I}function rx(d,g,b,E){let I=[],L=[],V=null;const s=({state:pe})=>{const Te=kg(d,location),ut=b.value,zt=g.value;let He=0;if(pe){if(b.value=Te,g.value=pe,V&&V===ut){V=null;return}He=zt?pe.position-zt.position:0}else E(Te);I.forEach(dt=>{dt(b.value,ut,{delta:He,type:hu.pop,direction:He?He>0?nu.forward:nu.back:nu.unknown})})};function W(){V=b.value}function le(pe){I.push(pe);const Te=()=>{const ut=I.indexOf(pe);ut>-1&&I.splice(ut,1)};return L.push(Te),Te}function he(){const{history:pe}=window;!pe.state||pe.replaceState(Mi({},pe.state,{scroll:dd()}),"")}function $(){for(const pe of L)pe();L=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",he)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",he),{pauseListeners:W,listen:le,destroy:$}}function gA(d,g,b,E=!1,I=!1){return{back:d,current:g,forward:b,replaced:E,position:window.history.length,scroll:I?dd():null}}function nx(d){const{history:g,location:b}=window,E={value:kg(d,b)},I={value:g.state};I.value||L(E.value,{back:null,current:E.value,forward:null,position:g.length-1,replaced:!0,scroll:null},!0);function L(W,le,he){const $=d.indexOf("#"),pe=$>-1?(b.host&&document.querySelector("base")?d:d.slice($))+W:ix()+d+W;try{g[he?"replaceState":"pushState"](le,"",pe),I.value=le}catch(Te){console.error(Te),b[he?"replace":"assign"](pe)}}function V(W,le){const he=Mi({},g.state,gA(I.value.back,W,I.value.forward,!0),le,{position:I.value.position});L(W,he,!0),E.value=W}function s(W,le){const he=Mi({},I.value,g.state,{forward:W,scroll:dd()});L(he.current,he,!0);const $=Mi({},gA(E.value,W,null),{position:he.position+1},le);L(W,$,!1),E.value=W}return{location:E,state:I,push:s,replace:V}}function ox(d){d=W5(d);const g=nx(d),b=rx(d,g.state,g.location,g.replace);function E(L,V=!0){V||b.pauseListeners(),history.go(L)}const I=Mi({location:"",base:d,go:E,createHref:X5.bind(null,d)},g,b);return Object.defineProperty(I,"location",{enumerable:!0,get:()=>g.location.value}),Object.defineProperty(I,"state",{enumerable:!0,get:()=>g.state.value}),I}function sx(d){return typeof d=="string"||d&&typeof d=="object"}function Lg(d){return typeof d=="string"||typeof d=="symbol"}const fs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Pg=Dl("nf");var _A;(function(d){d[d.aborted=4]="aborted",d[d.cancelled=8]="cancelled",d[d.duplicated=16]="duplicated"})(_A||(_A={}));function Cl(d,g){return Mi(new Error,{type:d,[Pg]:!0},g)}function ms(d,g){return d instanceof Error&&Pg in d&&(g==null||!!(d.type&g))}const yA="[^/]+?",ax={sensitive:!1,strict:!1,start:!0,end:!0},lx=/[.+*?^${}()[\]/\\]/g;function cx(d,g){const b=Mi({},ax,g),E=[];let I=b.start?"^":"";const L=[];for(const le of d){const he=le.length?[]:[90];b.strict&&!le.length&&(I+="/");for(let $=0;$<le.length;$++){const pe=le[$];let Te=40+(b.sensitive?.25:0);if(pe.type===0)$||(I+="/"),I+=pe.value.replace(lx,"\\$&"),Te+=40;else if(pe.type===1){const{value:ut,repeatable:zt,optional:He,regexp:dt}=pe;L.push({name:ut,repeatable:zt,optional:He});const Pt=dt||yA;if(Pt!==yA){Te+=10;try{new RegExp(`(${Pt})`)}catch(ei){throw new Error(`Invalid custom RegExp for param "${ut}" (${Pt}): `+ei.message)}}let Kt=zt?`((?:${Pt})(?:/(?:${Pt}))*)`:`(${Pt})`;$||(Kt=He&&le.length<2?`(?:/${Kt})`:"/"+Kt),He&&(Kt+="?"),I+=Kt,Te+=20,He&&(Te+=-8),zt&&(Te+=-20),Pt===".*"&&(Te+=-50)}he.push(Te)}E.push(he)}if(b.strict&&b.end){const le=E.length-1;E[le][E[le].length-1]+=.7000000000000001}b.strict||(I+="/?"),b.end?I+="$":b.strict&&(I+="(?:/|$)");const V=new RegExp(I,b.sensitive?"":"i");function s(le){const he=le.match(V),$={};if(!he)return null;for(let pe=1;pe<he.length;pe++){const Te=he[pe]||"",ut=L[pe-1];$[ut.name]=Te&&ut.repeatable?Te.split("/"):Te}return $}function W(le){let he="",$=!1;for(const pe of d){(!$||!he.endsWith("/"))&&(he+="/"),$=!1;for(const Te of pe)if(Te.type===0)he+=Te.value;else if(Te.type===1){const{value:ut,repeatable:zt,optional:He}=Te,dt=ut in le?le[ut]:"";if(Array.isArray(dt)&&!zt)throw new Error(`Provided param "${ut}" is an array but it is not repeatable (* or + modifiers)`);const Pt=Array.isArray(dt)?dt.join("/"):dt;if(!Pt)if(He)pe.length<2&&(he.endsWith("/")?he=he.slice(0,-1):$=!0);else throw new Error(`Missing required param "${ut}"`);he+=Pt}}return he}return{re:V,score:E,keys:L,parse:s,stringify:W}}function ux(d,g){let b=0;for(;b<d.length&&b<g.length;){const E=g[b]-d[b];if(E)return E;b++}return d.length<g.length?d.length===1&&d[0]===40+40?-1:1:d.length>g.length?g.length===1&&g[0]===40+40?1:-1:0}function hx(d,g){let b=0;const E=d.score,I=g.score;for(;b<E.length&&b<I.length;){const L=ux(E[b],I[b]);if(L)return L;b++}return I.length-E.length}const dx={type:0,value:""},px=/[a-zA-Z0-9_]/;function fx(d){if(!d)return[[]];if(d==="/")return[[dx]];if(!d.startsWith("/"))throw new Error(`Invalid path "${d}"`);function g(Te){throw new Error(`ERR (${b})/"${le}": ${Te}`)}let b=0,E=b;const I=[];let L;function V(){L&&I.push(L),L=[]}let s=0,W,le="",he="";function $(){!le||(b===0?L.push({type:0,value:le}):b===1||b===2||b===3?(L.length>1&&(W==="*"||W==="+")&&g(`A repeatable param (${le}) must be alone in its segment. eg: '/:ids+.`),L.push({type:1,value:le,regexp:he,repeatable:W==="*"||W==="+",optional:W==="*"||W==="?"})):g("Invalid state to consume buffer"),le="")}function pe(){le+=W}for(;s<d.length;){if(W=d[s++],W==="\\"&&b!==2){E=b,b=4;continue}switch(b){case 0:W==="/"?(le&&$(),V()):W===":"?($(),b=1):pe();break;case 4:pe(),b=E;break;case 1:W==="("?b=2:px.test(W)?pe():($(),b=0,W!=="*"&&W!=="?"&&W!=="+"&&s--);break;case 2:W===")"?he[he.length-1]=="\\"?he=he.slice(0,-1)+W:b=3:he+=W;break;case 3:$(),b=0,W!=="*"&&W!=="?"&&W!=="+"&&s--,he="";break;default:g("Unknown state");break}}return b===2&&g(`Unfinished custom RegExp for param "${le}"`),$(),V(),I}function mx(d,g,b){const E=cx(fx(d.path),b),I=Mi(E,{record:d,parent:g,children:[],alias:[]});return g&&!I.record.aliasOf==!g.record.aliasOf&&g.children.push(I),I}function Ax(d,g){const b=[],E=new Map;g=vA({strict:!1,end:!0,sensitive:!1},g);function I(he){return E.get(he)}function L(he,$,pe){const Te=!pe,ut=_x(he);ut.aliasOf=pe&&pe.record;const zt=vA(g,he),He=[ut];if("alias"in he){const Kt=typeof he.alias=="string"?[he.alias]:he.alias;for(const ei of Kt)He.push(Mi({},ut,{components:pe?pe.record.components:ut.components,path:ei,aliasOf:pe?pe.record:ut}))}let dt,Pt;for(const Kt of He){const{path:ei}=Kt;if($&&ei[0]!=="/"){const wi=$.record.path,Dt=wi[wi.length-1]==="/"?"":"/";Kt.path=$.record.path+(ei&&Dt+ei)}if(dt=mx(Kt,$,zt),pe?pe.alias.push(dt):(Pt=Pt||dt,Pt!==dt&&Pt.alias.push(dt),Te&&he.name&&!xA(dt)&&V(he.name)),"children"in ut){const wi=ut.children;for(let Dt=0;Dt<wi.length;Dt++)L(wi[Dt],dt,pe&&pe.children[Dt])}pe=pe||dt,W(dt)}return Pt?()=>{V(Pt)}:ru}function V(he){if(Lg(he)){const $=E.get(he);$&&(E.delete(he),b.splice(b.indexOf($),1),$.children.forEach(V),$.alias.forEach(V))}else{const $=b.indexOf(he);$>-1&&(b.splice($,1),he.record.name&&E.delete(he.record.name),he.children.forEach(V),he.alias.forEach(V))}}function s(){return b}function W(he){let $=0;for(;$<b.length&&hx(he,b[$])>=0&&(he.record.path!==b[$].record.path||!Rg(he,b[$]));)$++;b.splice($,0,he),he.record.name&&!xA(he)&&E.set(he.record.name,he)}function le(he,$){let pe,Te={},ut,zt;if("name"in he&&he.name){if(pe=E.get(he.name),!pe)throw Cl(1,{location:he});zt=pe.record.name,Te=Mi(gx($.params,pe.keys.filter(Pt=>!Pt.optional).map(Pt=>Pt.name)),he.params),ut=pe.stringify(Te)}else if("path"in he)ut=he.path,pe=b.find(Pt=>Pt.re.test(ut)),pe&&(Te=pe.parse(ut),zt=pe.record.name);else{if(pe=$.name?E.get($.name):b.find(Pt=>Pt.re.test($.path)),!pe)throw Cl(1,{location:he,currentLocation:$});zt=pe.record.name,Te=Mi({},$.params,he.params),ut=pe.stringify(Te)}const He=[];let dt=pe;for(;dt;)He.unshift(dt.record),dt=dt.parent;return{name:zt,path:ut,params:Te,matched:He,meta:xx(He)}}return d.forEach(he=>L(he)),{addRoute:L,resolve:le,removeRoute:V,getRoutes:s,getRecordMatcher:I}}function gx(d,g){const b={};for(const E of g)E in d&&(b[E]=d[E]);return b}function _x(d){return{path:d.path,redirect:d.redirect,name:d.name,meta:d.meta||{},aliasOf:void 0,beforeEnter:d.beforeEnter,props:yx(d),children:d.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in d?d.components||{}:{default:d.component}}}function yx(d){const g={},b=d.props||!1;if("component"in d)g.default=b;else for(const E in d.components)g[E]=typeof b=="boolean"?b:b[E];return g}function xA(d){for(;d;){if(d.record.aliasOf)return!0;d=d.parent}return!1}function xx(d){return d.reduce((g,b)=>Mi(g,b.meta),{})}function vA(d,g){const b={};for(const E in d)b[E]=E in g?g[E]:d[E];return b}function Rg(d,g){return g.children.some(b=>b===d||Rg(d,b))}const Ng=/#/g,vx=/&/g,bx=/\//g,wx=/=/g,Cx=/\?/g,Og=/\+/g,Tx=/%5B/g,Mx=/%5D/g,Gg=/%5E/g,Ex=/%60/g,Fg=/%7B/g,Ix=/%7C/g,Vg=/%7D/g,Dx=/%20/g;function zf(d){return encodeURI(""+d).replace(Ix,"|").replace(Tx,"[").replace(Mx,"]")}function Sx(d){return zf(d).replace(Fg,"{").replace(Vg,"}").replace(Gg,"^")}function lf(d){return zf(d).replace(Og,"%2B").replace(Dx,"+").replace(Ng,"%23").replace(vx,"%26").replace(Ex,"`").replace(Fg,"{").replace(Vg,"}").replace(Gg,"^")}function zx(d){return lf(d).replace(wx,"%3D")}function Bx(d){return zf(d).replace(Ng,"%23").replace(Cx,"%3F")}function kx(d){return d==null?"":Bx(d).replace(bx,"%2F")}function $h(d){try{return decodeURIComponent(""+d)}catch{}return""+d}function Lx(d){const g={};if(d===""||d==="?")return g;const E=(d[0]==="?"?d.slice(1):d).split("&");for(let I=0;I<E.length;++I){const L=E[I].replace(Og," "),V=L.indexOf("="),s=$h(V<0?L:L.slice(0,V)),W=V<0?null:$h(L.slice(V+1));if(s in g){let le=g[s];Array.isArray(le)||(le=g[s]=[le]),le.push(W)}else g[s]=W}return g}function bA(d){let g="";for(let b in d){const E=d[b];if(b=zx(b),E==null){E!==void 0&&(g+=(g.length?"&":"")+b);continue}(Array.isArray(E)?E.map(L=>L&&lf(L)):[E&&lf(E)]).forEach(L=>{L!==void 0&&(g+=(g.length?"&":"")+b,L!=null&&(g+="="+L))})}return g}function Px(d){const g={};for(const b in d){const E=d[b];E!==void 0&&(g[b]=Array.isArray(E)?E.map(I=>I==null?null:""+I):E==null?E:""+E)}return g}function Kc(){let d=[];function g(E){return d.push(E),()=>{const I=d.indexOf(E);I>-1&&d.splice(I,1)}}function b(){d=[]}return{add:g,list:()=>d,reset:b}}function _s(d,g,b,E,I){const L=E&&(E.enterCallbacks[I]=E.enterCallbacks[I]||[]);return()=>new Promise((V,s)=>{const W=$=>{$===!1?s(Cl(4,{from:b,to:g})):$ instanceof Error?s($):sx($)?s(Cl(2,{from:g,to:$})):(L&&E.enterCallbacks[I]===L&&typeof $=="function"&&L.push($),V())},le=d.call(E&&E.instances[I],g,b,W);let he=Promise.resolve(le);d.length<3&&(he=he.then(W)),he.catch($=>s($))})}function Up(d,g,b,E){const I=[];for(const L of d)for(const V in L.components){let s=L.components[V];if(!(g!=="beforeRouteEnter"&&!L.instances[V]))if(Rx(s)){const le=(s.__vccOpts||s)[g];le&&I.push(_s(le,b,E,L,V))}else{let W=s();I.push(()=>W.then(le=>{if(!le)return Promise.reject(new Error(`Couldn't resolve component "${V}" at "${L.path}"`));const he=U5(le)?le.default:le;L.components[V]=he;const pe=(he.__vccOpts||he)[g];return pe&&_s(pe,b,E,L,V)()}))}}return I}function Rx(d){return typeof d=="object"||"displayName"in d||"props"in d||"__vccOpts"in d}function wA(d){const g=vs(Sf),b=vs(zg),E=no(()=>g.resolve($c(d.to))),I=no(()=>{const{matched:W}=E.value,{length:le}=W,he=W[le-1],$=b.matched;if(!he||!$.length)return-1;const pe=$.findIndex(wl.bind(null,he));if(pe>-1)return pe;const Te=CA(W[le-2]);return le>1&&CA(he)===Te&&$[$.length-1].path!==Te?$.findIndex(wl.bind(null,W[le-2])):pe}),L=no(()=>I.value>-1&&Fx(b.params,E.value.params)),V=no(()=>I.value>-1&&I.value===b.matched.length-1&&Bg(b.params,E.value.params));function s(W={}){return Gx(W)?g[$c(d.replace)?"replace":"push"]($c(d.to)).catch(ru):Promise.resolve()}return{route:E,href:no(()=>E.value.href),isActive:L,isExactActive:V,navigate:s}}const Nx=Mf({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:wA,setup(d,{slots:g}){const b=Aa(wA(d)),{options:E}=vs(Sf),I=no(()=>({[TA(d.activeClass,E.linkActiveClass,"router-link-active")]:b.isActive,[TA(d.exactActiveClass,E.linkExactActiveClass,"router-link-exact-active")]:b.isExactActive}));return()=>{const L=g.default&&g.default(b);return d.custom?L:Eg("a",{"aria-current":b.isExactActive?d.ariaCurrentValue:null,href:b.href,onClick:b.navigate,class:I.value},L)}}}),Ox=Nx;function Gx(d){if(!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)&&!d.defaultPrevented&&!(d.button!==void 0&&d.button!==0)){if(d.currentTarget&&d.currentTarget.getAttribute){const g=d.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(g))return}return d.preventDefault&&d.preventDefault(),!0}}function Fx(d,g){for(const b in g){const E=g[b],I=d[b];if(typeof E=="string"){if(E!==I)return!1}else if(!Array.isArray(I)||I.length!==E.length||E.some((L,V)=>L!==I[V]))return!1}return!0}function CA(d){return d?d.aliasOf?d.aliasOf.path:d.path:""}const TA=(d,g,b)=>d!=null?d:g!=null?g:b,Vx=Mf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(d,{attrs:g,slots:b}){const E=vs(sf),I=no(()=>d.route||E.value),L=vs(pA,0),V=no(()=>I.value.matched[L]);Uh(pA,L+1),Uh(V5,V),Uh(sf,I);const s=XA();return Zh(()=>[s.value,V.value,d.name],([W,le,he],[$,pe,Te])=>{le&&(le.instances[he]=W,pe&&pe!==le&&W&&W===$&&(le.leaveGuards.size||(le.leaveGuards=pe.leaveGuards),le.updateGuards.size||(le.updateGuards=pe.updateGuards))),W&&le&&(!pe||!wl(le,pe)||!$)&&(le.enterCallbacks[he]||[]).forEach(ut=>ut(W))},{flush:"post"}),()=>{const W=I.value,le=V.value,he=le&&le.components[d.name],$=d.name;if(!he)return MA(b.default,{Component:he,route:W});const pe=le.props[d.name],Te=pe?pe===!0?W.params:typeof pe=="function"?pe(W):pe:null,zt=Eg(he,Mi({},Te,g,{onVnodeUnmounted:He=>{He.component.isUnmounted&&(le.instances[$]=null)},ref:s}));return MA(b.default,{Component:zt,route:W})||zt}}});function MA(d,g){if(!d)return null;const b=d(g);return b.length===1?b[0]:b}const Ux=Vx;function Zx(d){const g=Ax(d.routes,d),b=d.parseQuery||Lx,E=d.stringifyQuery||bA,I=d.history,L=Kc(),V=Kc(),s=Kc(),W=ry(fs);let le=fs;_l&&d.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const he=Fp.bind(null,Pe=>""+Pe),$=Fp.bind(null,kx),pe=Fp.bind(null,$h);function Te(Pe,ht){let $e,yt;return Lg(Pe)?($e=g.getRecordMatcher(Pe),yt=ht):yt=Pe,g.addRoute(yt,$e)}function ut(Pe){const ht=g.getRecordMatcher(Pe);ht&&g.removeRoute(ht)}function zt(){return g.getRoutes().map(Pe=>Pe.record)}function He(Pe){return!!g.getRecordMatcher(Pe)}function dt(Pe,ht){if(ht=Mi({},ht||W.value),typeof Pe=="string"){const it=Vp(b,Pe,ht.path),te=g.resolve({path:it.path},ht),de=I.createHref(it.fullPath);return Mi(it,te,{params:pe(te.params),hash:$h(it.hash),redirectedFrom:void 0,href:de})}let $e;if("path"in Pe)$e=Mi({},Pe,{path:Vp(b,Pe.path,ht.path).path});else{const it=Mi({},Pe.params);for(const te in it)it[te]==null&&delete it[te];$e=Mi({},Pe,{params:$(Pe.params)}),ht.params=$(ht.params)}const yt=g.resolve($e,ht),ui=Pe.hash||"";yt.params=he(pe(yt.params));const si=Q5(E,Mi({},Pe,{hash:Sx(ui),path:yt.path})),Bt=I.createHref(si);return Mi({fullPath:si,hash:ui,query:E===bA?Px(Pe.query):Pe.query||{}},yt,{redirectedFrom:void 0,href:Bt})}function Pt(Pe){return typeof Pe=="string"?Vp(b,Pe,W.value.path):Mi({},Pe)}function Kt(Pe,ht){if(le!==Pe)return Cl(8,{from:ht,to:Pe})}function ei(Pe){return ur(Pe)}function wi(Pe){return ei(Mi(Pt(Pe),{replace:!0}))}function Dt(Pe){const ht=Pe.matched[Pe.matched.length-1];if(ht&&ht.redirect){const{redirect:$e}=ht;let yt=typeof $e=="function"?$e(Pe):$e;return typeof yt=="string"&&(yt=yt.includes("?")||yt.includes("#")?yt=Pt(yt):{path:yt},yt.params={}),Mi({query:Pe.query,hash:Pe.hash,params:Pe.params},yt)}}function ur(Pe,ht){const $e=le=dt(Pe),yt=W.value,ui=Pe.state,si=Pe.force,Bt=Pe.replace===!0,it=Dt($e);if(it)return ur(Mi(Pt(it),{state:ui,force:si,replace:Bt}),ht||$e);const te=$e;te.redirectedFrom=ht;let de;return!si&&Y5(E,yt,$e)&&(de=Cl(16,{to:te,from:yt}),Or(yt,yt,!0,!1)),(de?Promise.resolve(de):Ji(te,yt)).catch(Ce=>ms(Ce)?ms(Ce,2)?Ce:Li(Ce):ci(Ce,te,yt)).then(Ce=>{if(Ce){if(ms(Ce,2))return ur(Mi(Pt(Ce.to),{state:ui,force:si,replace:Bt}),ht||te)}else Ce=mi(te,yt,!0,Bt,ui);return gr(te,yt,Ce),Ce})}function Xi(Pe,ht){const $e=Kt(Pe,ht);return $e?Promise.reject($e):Promise.resolve()}function Ji(Pe,ht){let $e;const[yt,ui,si]=jx(Pe,ht);$e=Up(yt.reverse(),"beforeRouteLeave",Pe,ht);for(const it of yt)it.leaveGuards.forEach(te=>{$e.push(_s(te,Pe,ht))});const Bt=Xi.bind(null,Pe,ht);return $e.push(Bt),ml($e).then(()=>{$e=[];for(const it of L.list())$e.push(_s(it,Pe,ht));return $e.push(Bt),ml($e)}).then(()=>{$e=Up(ui,"beforeRouteUpdate",Pe,ht);for(const it of ui)it.updateGuards.forEach(te=>{$e.push(_s(te,Pe,ht))});return $e.push(Bt),ml($e)}).then(()=>{$e=[];for(const it of Pe.matched)if(it.beforeEnter&&!ht.matched.includes(it))if(Array.isArray(it.beforeEnter))for(const te of it.beforeEnter)$e.push(_s(te,Pe,ht));else $e.push(_s(it.beforeEnter,Pe,ht));return $e.push(Bt),ml($e)}).then(()=>(Pe.matched.forEach(it=>it.enterCallbacks={}),$e=Up(si,"beforeRouteEnter",Pe,ht),$e.push(Bt),ml($e))).then(()=>{$e=[];for(const it of V.list())$e.push(_s(it,Pe,ht));return $e.push(Bt),ml($e)}).catch(it=>ms(it,8)?it:Promise.reject(it))}function gr(Pe,ht,$e){for(const yt of s.list())yt(Pe,ht,$e)}function mi(Pe,ht,$e,yt,ui){const si=Kt(Pe,ht);if(si)return si;const Bt=ht===fs,it=_l?history.state:{};$e&&(yt||Bt?I.replace(Pe.fullPath,Mi({scroll:Bt&&it&&it.scroll},ui)):I.push(Pe.fullPath,ui)),W.value=Pe,Or(Pe,ht,$e,Bt),Li()}let hr;function Tr(){hr=I.listen((Pe,ht,$e)=>{const yt=dt(Pe),ui=Dt(yt);if(ui){ur(Mi(ui,{replace:!0}),yt).catch(ru);return}le=yt;const si=W.value;_l&&ex(AA(si.fullPath,$e.delta),dd()),Ji(yt,si).catch(Bt=>ms(Bt,12)?Bt:ms(Bt,2)?(ur(Bt.to,yt).then(it=>{ms(it,20)&&!$e.delta&&$e.type===hu.pop&&I.go(-1,!1)}).catch(ru),Promise.reject()):($e.delta&&I.go(-$e.delta,!1),ci(Bt,yt,si))).then(Bt=>{Bt=Bt||mi(yt,si,!1),Bt&&($e.delta?I.go(-$e.delta,!1):$e.type===hu.pop&&ms(Bt,20)&&I.go(-1,!1)),gr(yt,si,Bt)}).catch(ru)})}let $r=Kc(),en=Kc(),vi;function ci(Pe,ht,$e){Li(Pe);const yt=en.list();return yt.length?yt.forEach(ui=>ui(Pe,ht,$e)):console.error(Pe),Promise.reject(Pe)}function Ht(){return vi&&W.value!==fs?Promise.resolve():new Promise((Pe,ht)=>{$r.add([Pe,ht])})}function Li(Pe){return vi||(vi=!Pe,Tr(),$r.list().forEach(([ht,$e])=>Pe?$e(Pe):ht()),$r.reset()),Pe}function Or(Pe,ht,$e,yt){const{scrollBehavior:ui}=d;if(!_l||!ui)return Promise.resolve();const si=!$e&&tx(AA(Pe.fullPath,0))||(yt||!$e)&&history.state&&history.state.scroll||null;return tg().then(()=>ui(Pe,ht,si)).then(Bt=>Bt&&$5(Bt)).catch(Bt=>ci(Bt,Pe,ht))}const Pi=Pe=>I.go(Pe);let dr;const Ot=new Set;return{currentRoute:W,addRoute:Te,removeRoute:ut,hasRoute:He,getRoutes:zt,resolve:dt,options:d,push:ei,replace:wi,go:Pi,back:()=>Pi(-1),forward:()=>Pi(1),beforeEach:L.add,beforeResolve:V.add,afterEach:s.add,onError:en.add,isReady:Ht,install(Pe){const ht=this;Pe.component("RouterLink",Ox),Pe.component("RouterView",Ux),Pe.config.globalProperties.$router=ht,Object.defineProperty(Pe.config.globalProperties,"$route",{enumerable:!0,get:()=>$c(W)}),_l&&!dr&&W.value===fs&&(dr=!0,ei(I.location).catch(ui=>{}));const $e={};for(const ui in fs)$e[ui]=no(()=>W.value[ui]);Pe.provide(Sf,ht),Pe.provide(zg,Aa($e)),Pe.provide(sf,W);const yt=Pe.unmount;Ot.add(Pe),Pe.unmount=function(){Ot.delete(Pe),Ot.size<1&&(le=fs,hr&&hr(),W.value=fs,dr=!1,vi=!1),yt()}}}}function ml(d){return d.reduce((g,b)=>g.then(()=>b()),Promise.resolve())}function jx(d,g){const b=[],E=[],I=[],L=Math.max(g.matched.length,d.matched.length);for(let V=0;V<L;V++){const s=g.matched[V];s&&(d.matched.find(le=>wl(le,s))?E.push(s):b.push(s));const W=d.matched[V];W&&(g.matched.find(le=>wl(le,W))||I.push(W))}return[b,E,I]}var Qx="/assets/Group338.cc02c2c4.png",Yx="/assets/Group406.5765f38c.png",Hx="data:image/png;base64,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",EA="/assets/farxod.833046d4.png";var dn=(d,g)=>{const b=d.__vccOpts||d;for(const[E,I]of g)b[E]=I;return b};const qx={},Wx={class:"homeIntroImg"},Kx=Il('<div class="blueBlock1" data-v-57b9649b></div><div class="blueBlock2" data-v-57b9649b></div><img class="introMan" src="'+Qx+'" alt="You are welcome" data-v-57b9649b><img class="progress" src="'+Yx+'" alt="You are welcome" data-v-57b9649b><img class="lupa" src="'+Hx+'" alt="You are welcome" data-v-57b9649b><div class="smallCard" data-v-57b9649b><img src="'+EA+'" alt="\u0424\u0430\u0440\u0445\u043E\u0434 \u0418\u0441\u0440\u043E\u0438\u043B\u043E\u0432" data-v-57b9649b><div data-v-57b9649b><h2 class="smallCardName" data-v-57b9649b>\u0424\u0430\u0440\u0445\u043E\u0434 \u0418\u0441\u0440\u043E\u0438\u043B\u043E\u0432</h2><p data-v-57b9649b>\u041D\u0430\u043B\u043E\u0433\u043E\u0432\u044B\u0439 \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u043D\u0442</p></div></div><div class="smallCard secondSmallCard" data-v-57b9649b><img src="'+EA+'" alt="\u0424\u0430\u0440\u0445\u043E\u0434 \u0418\u0441\u0440\u043E\u0438\u043B\u043E\u0432" data-v-57b9649b><div data-v-57b9649b><h2 class="smallCardName" data-v-57b9649b>OOO \u201C\u041C\u0415\u0427\u0422\u0410\u201D</h2><p data-v-57b9649b>\u041C\u043D\u0435 \u043D\u0443\u0436\u043D\u0430 \u0432\u0430\u0448\u0430 \u043F\u043E\u043C\u043E\u0449\u044C</p></div></div>',7),Xx=[Kx];function Jx(d,g,b,E,I,L){return Jr(),hn("div",Wx,Xx)}var $x=dn(qx,[["render",Jx],["__scopeId","data-v-57b9649b"]]);const ev={components:{HomeIntroImg:$x},data(){return{showForm:hd}},methods:{showBottForm(d){if(d==2){this.showForm.isVisible=!1;return}this.showForm.isVisible=!this.showForm.isVisible},fireForm(){setTimeout(()=>{this.showBottForm(1)},200)}}},Ug=d=>(ws("data-v-62245ad8"),d=d(),Cs(),d),tv={class:"home-intro-text"},iv=Ug(()=>Le("h1",null,[Ki(" \u041D\u0430\u0434\u0435\u0436\u043D\u0430\u044F "),Le("br"),Ki(),Le("span",{class:"yellow"},"\u0411\u0423\u0425\u0413\u0410\u041B\u0422\u0415\u0420\u0418\u042F"),Le("br"),Ki(" \u0434\u043B\u044F "),Le("span",{class:"yellow"},"\u0412\u0410\u0428\u0415\u0413\u041E \u0411\u0418\u0417\u041D\u0415\u0421\u0410")],-1)),rv=Ug(()=>Le("p",null,[Ki(" \u0412\u044B \u0437\u0430\u043D\u0438\u043C\u0430\u0435\u0442\u0435\u0441\u044C \u0431\u0438\u0437\u043D\u0435\u0441\u043E\u043C, \u043C\u044B \u0437\u0430\u043D\u0438\u043C\u0430\u0435\u043C\u0441\u044F \u0412\u0430\u0448\u0435\u0439 \u0431\u0443\u0445\u0433\u0430\u043B\u0442\u0435\u0440\u0438\u0435\u0439."),Le("br"),Ki("\u0412\u0430\u0448\u0430 \u043B\u0438\u0447\u043D\u0430\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u0430 \u043F\u0440\u043E\u0444\u0435\u0441\u0441\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0431\u0443\u0445\u0433\u0430\u043B\u0442\u0435\u0440\u043E\u0432, \u043A\u043E\u0442\u043E\u0440\u0430\u044F \u0432\u0441\u0435\u0433\u0434\u0430 \u043F\u043E\u0434 \u0440\u0443\u043A\u043E\u0439. ")],-1));function nv(d,g,b,E,I,L){const V=lr("HomeIntroImg");return Jr(),hn("div",{class:"home-intro",onClick:g[1]||(g[1]=s=>L.showBottForm(2))},[Le("div",tv,[iv,rv,Le("button",{onClick:g[0]||(g[0]=(...s)=>L.fireForm&&L.fireForm(...s))},"\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u044F\u0432\u043A\u0443")]),Wt(V)])}var ov=dn(ev,[["render",nv],["__scopeId","data-v-62245ad8"]]);const sv={props:["title","description","imageUrl","index","serviceLink"]},av={class:"serviceCard"},lv=["innerHTML"],cv=["innerHTML"],uv={class:"image"},hv=["src"];function dv(d,g,b,E,I,L){const V=lr("RouterLink");return Jr(),hn("div",av,[Wt(V,{to:b.serviceLink},{default:so(()=>[Le("h3",{innerHTML:b.title,class:Lo(b.index>"2"?"secondLine":"firstLine")},null,10,lv),Le("p",{innerHTML:b.description},null,8,cv),Le("div",uv,[Le("img",{src:b.imageUrl,alt:"Service"},null,8,hv)])]),_:1},8,["to"])])}var pv=dn(sv,[["render",dv],["__scopeId","data-v-23dbb62f"]]),fv="/assets/calc.b9b52796.png",mv="/assets/stamp.ec76809c.png",Av="/assets/files.866f037e.png",gv="/assets/taxy.91c24906.png",_v="/assets/man.36f21450.png";const yv={components:{ServiceCard:pv},data(){return{card1:{title:"\u0411\u0443\u0445\u0433\u0430\u043B\u0442\u0435\u0440\u0441\u043A\u043E\u0435 \u0441\u043E\u043F\u0440\u043E\u0432\u043E\u0436\u0434\u0435\u043D\u0438e",description:"\u0411\u0435\u0440\u0451\u043C \u043D\u0430 \u0441\u0435\u0431\u044F \u0432\u0441\u044E \u0431\u0443\u0433\u0430\u043B\u0442\u0435\u0440\u0438\u044E!<br>\u0412\u0435\u0434\u0435\u043C \u043D\u0430\u043B\u043E\u0433\u043E\u0432\u044B\u0439 \u0443\u0447\u0435\u0442 \u0438 \u0433\u043E\u0442\u043E\u0432\u0438\u043C \u0441\u0447\u0435\u0442\u0430 \u043A \u043E\u043F\u043B\u0430\u0442\u0435 \u0432\u043E\u0432\u0440\u0435\u043C\u044F \u0438 \u0431\u0435\u0437 \u0437\u0430\u0434\u0435\u0440\u0436\u0435\u043A.",path:fv},card2:{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F \u043A\u043E\u043C\u043F\u0430\u043D\u0438\u0438",description:"\u041F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0435 \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u0435 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432, \u0431\u044B\u0441\u0442\u0440\u043E\u0435 \u0438 \u043B\u0435\u0433\u043A\u043E\u0435 \u043F\u0440\u043E\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u0435 \u043F\u0440\u043E\u0446\u0435\u0434\u0443\u0440\u044B \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0435 \u0441\u0432\u0438\u0434\u0435\u0442\u0435\u043B\u044C\u0441\u0442\u0432.",path:mv},card3:{title:"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435<br>\u0431\u0443\u0445\u0433\u0430\u043B\u0442\u0435\u0440\u0441\u043A\u043E\u0433\u043E \u0443\u0447\u0435\u0442\u0430",description:"\u0412\u0441\u0435 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B \u043F\u0440\u0438\u0432\u043E\u0434\u044F\u0442\u0441\u044F \u0432 \u043F\u043E\u0440\u044F\u0434\u043E\u043A \u0438 \u0432\u043E\u0441\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u044E\u0442\u0441\u044F \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B.",path:Av},card4:{title:"\u041F\u0435\u0440\u0435\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F<br>\u044E\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043B\u0438\u0446\u0430",description:"\u041B\u044E\u0431\u044B\u0435 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F, \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0441 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435\u043C \u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u0439 \u0443\u0447\u0440\u0435\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0445 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432 \u0444\u0438\u0440\u043C\u044B.",path:gv},card5:{title:"\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435 \u043D\u0430<br>\u043F\u0440\u0438\u0432\u043B\u0435\u0447\u0435\u043D\u0438\u0435 \u0438\u043D\u043E\u0441\u0442\u0440\u0430\u043D\u043D\u043E\u0439<br>\u0440\u0430\u0431\u043E\u0447\u0435\u0439 \u0441\u0438\u043B\u044B",description:"\u0411\u044B\u0441\u0442\u0440\u043E\u0435 \u0438 \u043B\u0435\u0433\u043A\u043E\u0435 \u043F\u0440\u043E\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u0435 \u043F\u0440\u043E\u0446\u0435\u0434\u0443\u0440\u044B.",path:_v},showForm:hd,serviceLinks:["service1","service2","service3","service4","service5","service6","service7","service8"]}},methods:{detailedSer(){"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo({top:0,behavior:"smooth"})},showHomeService(){window.scrollY>260&&document.getElementById("groupOne").classList.add("showCards"),window.scrollY>530&&document.getElementById("groupTwo").classList.add("showCards")}},created(){window.addEventListener("scroll",this.showHomeService)},mounted(){this.detailedSer()},unmounted(){window.removeEventListener("scroll",this.showHomeService)}},xv=d=>(ws("data-v-38f7ca36"),d=d(),Cs(),d),vv={class:"homeService"},bv=xv(()=>Le("h1",null,"\u041D\u0410\u0428\u0418 \u0423\u0421\u041B\u0423\u0413\u0418",-1)),wv={class:"cards",id:"groupOne"},Cv={class:"cards",id:"groupTwo"},Tv=Ki("\u0412\u0441\u0435 \u0443\u0441\u043B\u0443\u0433\u0438");function Mv(d,g,b,E,I,L){const V=lr("ServiceCard"),s=lr("RouterLink");return Jr(),hn("div",vv,[bv,Le("div",wv,[Wt(V,{serviceLink:I.serviceLinks[0],index:1,title:I.card1.title,description:I.card1.description,imageUrl:I.card1.path},null,8,["serviceLink","title","description","imageUrl"]),Wt(V,{serviceLink:I.serviceLinks[1],index:2,title:I.card2.title,description:I.card2.description,imageUrl:I.card2.path},null,8,["serviceLink","title","description","imageUrl"])]),Le("div",Cv,[Wt(V,{serviceLink:I.serviceLinks[4],index:3,title:I.card3.title,description:I.card3.description,imageUrl:I.card3.path},null,8,["serviceLink","title","description","imageUrl"]),Wt(V,{serviceLink:I.serviceLinks[2],index:4,title:I.card4.title,description:I.card4.description,imageUrl:I.card4.path},null,8,["serviceLink","title","description","imageUrl"]),Wt(V,{serviceLink:I.serviceLinks[3],index:5,title:I.card5.title,description:I.card5.description,imageUrl:I.card5.path},null,8,["serviceLink","title","description","imageUrl"])]),Wt(s,{to:"/service"},{default:so(()=>[Tv]),_:1})])}var Ev=dn(yv,[["render",Mv],["__scopeId","data-v-38f7ca36"]]),Iv="/assets/aboutImg.a4f61460.png";const Dv={methods:{scollEvent(){const d=document.getElementById("box");window.scrollY>1500&&d.classList.add("showImg")}},created(){window.addEventListener("scroll",this.scollEvent)},unmounted(){window.removeEventListener("scroll",this.scollEvent)}},Bf=d=>(ws("data-v-2df1bfbe"),d=d(),Cs(),d),Sv={class:"home-about-img",id:"box"},zv=Bf(()=>Le("div",{class:"corner-block"},null,-1)),Bv=Bf(()=>Le("img",{src:Iv,alt:""},null,-1)),kv=Bf(()=>Le("div",{class:"corner-block2"},null,-1)),Lv=[zv,Bv,kv];function Pv(d,g,b,E,I,L){return Jr(),hn("div",Sv,Lv)}var Rv=dn(Dv,[["render",Pv],["__scopeId","data-v-2df1bfbe"]]);const Nv={components:{HomeAboutImg:Rv},methods:{scrollEvent(){const d=document.getElementById("aboutText");window.scrollY>1500&&(d.classList.add("showText"),console.log("sssssssssssssssssssssssssssssssssssssssssssssssssss"))}},created(){window.addEventListener("scroll",this.scollEvent)},des(){window.removeEventListener("scroll",this.scollEvent)}},Zg=d=>(ws("data-v-48e5ebe8"),d=d(),Cs(),d),Ov=Zg(()=>Le("h1",null,"\u041E \u043D\u0430\u0441",-1)),Gv={class:"details"},Fv=Il('<p id="aboutText" class="about-text" data-v-48e5ebe8>\u041A\u043E\u043D\u0441\u0430\u043B\u0442\u0438\u043D\u0433\u043E\u0432\u043E\u0435 \u0430\u0433\u0435\u043D\u0442\u0441\u0442\u0432\u043E &quot;GrossProfit&quot; \u0431\u044B\u043B\u0430 \u043E\u0441\u043D\u043E\u0432\u0430\u043D\u0430 \u0432 2019 \u0433\u043E\u0434\u0443 \u0434\u043B\u044F \u0442\u043E\u0433\u043E, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043C\u043E\u0447\u044C \u0434\u0440\u0443\u0437\u044C\u044F\u043C \u043F\u043E \u0431\u0438\u0437\u043D\u0435\u0441\u0443 \u0441 \u0431\u0443\u0445\u0433\u0430\u043B\u0442\u0435\u0440\u0441\u043A\u0438\u043C \u0438 \u043D\u0430\u043B\u043E\u0433\u043E\u0432\u044B\u043C \u0443\u0447\u0435\u0442\u043E\u043C. <br data-v-48e5ebe8><br data-v-48e5ebe8> \u0421 \u0441\u0430\u043C\u043E\u0433\u043E \u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u0430\u0448\u0438\u043C \u0433\u043B\u0430\u0432\u043D\u044B\u043C \u043F\u0440\u0438\u043D\u0446\u0438\u043F\u043E\u043C \u0431\u044B\u043B\u043E \u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u0434\u043E\u0431\u0440\u043E\u0441\u043E\u0432\u0435\u0441\u0442\u043D\u043E, \u0430 \u043D\u0435 \u0437\u0430\u0446\u0438\u043A\u043B\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 \u0441\u0438\u044E\u043C\u0438\u043D\u0443\u0442\u043D\u043E\u0439 \u043F\u0440\u0438\u0431\u044B\u043B\u0438. \u041F\u043E\u043C\u043E\u0433\u0430\u044F \u043E\u0440\u0433\u0430\u043D\u0438\u0437\u043E\u0432\u0430\u0442\u044C \u0431\u0438\u0437\u043D\u0435\u0441 \u0431\u043B\u0438\u0437\u043A\u0438\u043C \u043B\u044E\u0434\u044F\u043C, \u043C\u044B \u0440\u0430\u0437\u0434\u0435\u043B\u044F\u043B\u0438 \u0441 \u043D\u0438\u043C\u0438 \u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0441\u0442\u044C \u0437\u0430 \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u043C\u044B\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u044F, \u0441\u0442\u0440\u0435\u043C\u0438\u043B\u0438\u0441\u044C \u0441\u0442\u0430\u0442\u044C \u043B\u0443\u0447\u0448\u0435 \u0438 \u0442\u0435\u043C \u0441\u0430\u043C\u044B\u043C \u0434\u0430\u0442\u044C \u043F\u0430\u0440\u0442\u043D\u0435\u0440\u0430\u043C \u0435\u0449\u0435 \u0431\u043E\u043B\u044C\u0448\u0435. </p><div class="years-cards" data-v-48e5ebe8><div class="years-card" data-v-48e5ebe8><div class="text" data-v-48e5ebe8><h2 data-v-48e5ebe8>3+</h2><p data-v-48e5ebe8>\u043B\u0435\u0442 \u043D\u0430 \u0440\u044B\u043D\u043A\u0435 \u0423\u0437\u0431\u0435\u043A\u0438\u0441\u0442\u0430\u043D\u0430</p></div><div class="corner" data-v-48e5ebe8></div></div><div class="years-card" data-v-48e5ebe8><div class="text" data-v-48e5ebe8><h2 data-v-48e5ebe8>40+</h2><p data-v-48e5ebe8>\u0434\u043E\u0432\u043E\u043B\u043D\u0438\u0445 \u043A\u043B\u0438\u0435\u043D\u0442\u043E\u0432</p></div><div class="blue corner" data-v-48e5ebe8></div></div><div class="years-card" data-v-48e5ebe8><div class="text" data-v-48e5ebe8><h2 data-v-48e5ebe8>100%</h2><p data-v-48e5ebe8>\u043A\u043E\u043D\u0444\u0438\u0434\u0435\u043D\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0432\u0430\u0448\u0438\u0445 \u0434\u0430\u043D\u043D\u044B\u0445</p></div><div class="corner" data-v-48e5ebe8></div></div></div>',2),Vv=Zg(()=>Le("button",null," \u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435",-1));function Uv(d,g,b,E,I,L){const V=lr("HomeAboutImg"),s=lr("RouterLink");return Jr(),hn("div",{class:"home-about",onClick:g[0]||(g[0]=(...W)=>d.showForm.hideBotForm&&d.showForm.hideBotForm(...W))},[Ov,Le("div",Gv,[Wt(V),Fv]),Wt(s,{to:"/about"},{default:so(()=>[Vv]),_:1})])}var Zv=dn(Nv,[["render",Uv],["__scopeId","data-v-48e5ebe8"]]),jv="/assets/mountain.da13267f.png",Qv="/assets/train.6d027718.png",Yv="/assets/team.bf3d4ed0.png",Hv="/assets/vestco.8dc13c30.png",qv="/assets/plant.4a655a19.png";const Wv={},Kv=Il('<div class="stake-holders-text" data-v-8ef8fff2><h1 data-v-8ef8fff2>\u041F\u043E\u0447\u0435\u043C\u0443 \u043D\u0443\u0436\u043D\u043E \u0432\u044B\u0431\u0440\u0430\u0442\u044C <br data-v-8ef8fff2>\u0438\u043C\u0435\u043D\u043D\u043E \u043D\u0430\u0441?</h1><h3 data-v-8ef8fff2>\u041C\u044B \u043F\u043E\u043C\u043E\u0436\u0435\u043C \u0441\u043E\u043A\u0440\u0430\u0442\u0438\u0442\u044C <span class="yellow" data-v-8ef8fff2>\u0440\u0430\u0441\u0445\u043E\u0434\u044B \u043D\u0430 15%</span></h3><p data-v-8ef8fff2>\u041E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u043D\u0430\u043C \u0438 \u0443\u0432\u0435\u043B\u0438\u0447\u044C\u0442\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044C\u043D\u0443\u044E \u0432\u044B\u0433\u043E\u0434\u0443, \u0442\u0430\u043A \u043A\u0430\u043A \u0431\u0438\u0437\u043D\u0435\u0441 \u0441\u0442\u0430\u043D\u0435\u0442 \u0431\u043E\u043B\u0435\u0435 \u043F\u0440\u043E\u0437\u0440\u0430\u0447\u043D\u044B\u043C</p><div class="smallCards" data-v-8ef8fff2><div class="smallCard" data-v-8ef8fff2><p data-v-8ef8fff2>\u0421\u043E\u043A\u0440\u0430\u0442\u0438\u043C \u0432\u0430\u0448\u0438 \u0440\u0430\u0441\u0445\u043E\u0434\u044B</p><h4 data-v-8ef8fff2>1</h4></div><div class="smallCard" data-v-8ef8fff2><p data-v-8ef8fff2>\u041F\u043E\u043B\u043D\u043E\u0441\u0442\u044C\u044E \u0437\u0430\u043C\u0435\u043D\u0438\u043C \u0448\u0442\u0430\u0442\u043D\u043E\u0433\u043E \u0431\u0443\u0445\u0433\u0430\u043B\u0442\u0435\u0440\u0430</p><h4 data-v-8ef8fff2>2</h4></div><div class="smallCard" data-v-8ef8fff2><p data-v-8ef8fff2>\u0412\u043E\u0432\u0435\u0440\u0435\u043C\u044F \u0441\u0434\u0430\u0434\u0438\u043C \u0432\u0441\u044E \u043E\u0442\u0447\u0435\u0442\u043D\u043E\u0441\u0442\u044C</p><h4 data-v-8ef8fff2>3</h4></div></div></div><div class="stakeHolders" data-v-8ef8fff2><h1 data-v-8ef8fff2>\u041D\u0430\u043C \u0434\u043E\u0432\u0435\u0440\u044F\u0435\u0442 </h1><h6 data-v-8ef8fff2><img src="'+jv+'" alt="" data-v-8ef8fff2><img src="'+Qv+'" alt="" data-v-8ef8fff2></h6><h6 data-v-8ef8fff2><img src="'+Yv+'" alt="" data-v-8ef8fff2><img src="'+Hv+'" alt="" data-v-8ef8fff2></h6><h6 data-v-8ef8fff2><img src="'+qv+'" alt="" data-v-8ef8fff2></h6></div>',2),Xv=[Kv];function Jv(d,g){return Jr(),hn("div",{class:"home-stake-holders",onClick:g[0]||(g[0]=(...b)=>d.showForm.hideBotForm&&d.showForm.hideBotForm(...b))},Xv)}var $v=dn(Wv,[["render",Jv],["__scopeId","data-v-8ef8fff2"]]),eb="data:image/png;base64,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",Zp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAmCAYAAADAzmuWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD1SURBVHgBtdY7DoMwDAZgB68MjIwcoeoJOErVi0Bv0qO0J2iP0LEjAzMpQVDxCGDH5pciObb0KcqSAPRJs2vpFigFBxTAFm2Zx8nZ1NXrAcLgCB2igkcAjV22bSG9Fqyr9zNOTm1p8tlMdPLujo/AcSi0cRxvNHGcN7Rw9DU1cFwbSHHcGkrwTViC78KhOAkOwckwF2fBHJwNU/EgmIJHIEpk/P3GGgiM5+XpY8vv534LgvdQV7FhCsqGqSgL5qBkmIuS4BB0Fw5FN2EJugpLUS+sgS5gLXQCa6J/WBvt4CNQl7X/sQh18fyP5egkaXYp3AKl/ABe/gUeGbQ3WAAAAABJRU5ErkJggg==",tb="data:image/png;base64,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",ib="data:image/png;base64,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",rb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAABACAYAAABcIPRGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAQ9SURBVHgB7ZrNbhMxEMf/TkGtBBLhAO0N9wlIb9xIn4DyBN3AAwA3bqRPQHkB2D4B4caNcONGeQLMraWHhgNSK9SYmf1Am91sas9utUHan9Q2dp1Zj3c8Ho+tUAMbOtD0R/t85wKYnJjwEBVRENLVQXcNnWcW9jkJ6UKAJSUU1AiY7h2Z0ECASIF4xNUneI76Agypsy1RogMRtXYesSz1DgIKb4BN4zoJXCk1i85DGq1htobM6JAETeD3aI3CINgBorcxH3pD44KUbGFDP3nlb9M2JMEDCFjXwT7NgWceXzHUZXre27204p8JbejBJx5ZwYQ8gBB61sjvG/zG7HBdD76mFZECPPL0pw8ZfcjREECK98iRDKPPsTtUp7k2hjQdl3xdo9BpFZIr/AwvOvfy5krlUflcUn1kFGYXfA67qe7qYKcD9T7T0pzBbk1MOFcQK7wK9V3q+xdgjsy7zUUN2HR49NMyKbHT6RQ6Yg/KOs/w/xTsY9SOvdQR0HM/5Mq3ResAu7MLektY4PI8MMkiNoaAaxCSxDGbNJn6EExkev2nZA7fpB1PESuQknRgjIYQhhLLQ6tA07QKNE2rQNO0CjRN5ZW4Kml2g4KLvoWiQHH6wmdz76xAEkbzju0+xNhBvnO0F9mn+l3+rHhHQHE/xVdbrko4K7AKcOd99q9ziDIP22kpSYjtzrSgsaJA7znin0txngN1bGCsowx61i044jOJh6gQ//MWkAxkL1uXmIkptlZjOOJsQsnDNpPX7s05KTB/p2e3Sbn3lF7p2Wg/bPeOTeic6fD2QtIc5iXytthJLNrKlrE064Ck80y7EjdNq0Bd8CSGAG8vJHWjZyVuNDks4RWaQoiByWefL8NZgaqnMmuRjEFA6cOcj5+RqTn7TM/67JovcjahJD7RqMYwW7ijg16JzF044hMLifz0LNZkSyslMmmwfsERZxMiG95fg9X08R4ExCeSeJGt41V4XT+hlLrdybXbd5XrrEAyAQPUzLF5+5iOmvic4BEVzRR4c3IVG5qrhII3HnHnUc/SLmRN0yrQNEsxiePUCtiVGt8TGy8FkuMkDQHkHic/TTgqynxKq+40TMt0EnlIx6fbrhscn1gokF7IYDqxDL5WM0zr4gh0Osy242PU1Xi9cXKrPnOgj8qomRjnevw2daGVR/LMR4ExKjN7+v+HbN7OjYeuJq0SkgnwRw0BfKxKK+6bbB3bOYURFPur15lqvinwwVWu1yRmJVAzHEbQwPDkDhB1HiOfDMVSuNEkNzSEgHYlbppWgaZhBcxsldqVpk6uknjVVvnNvlElN7AM6rkLVBu0jvTyfeQbXtdKFhONei+2VqZwwRU2yi+t8K/fk8MvN7q923TI8AD/BfaA1o7oDG0lrSIlPt7s9n6QrpxsqvtCX01Yjp34BOdlWqPmNUs2GD0sCXxVn5Ng806H/gLb14gD5xk/bgAAAABJRU5ErkJggg==";const nb={},ob=Il('<h1 data-v-5d75aa84>\u042D\u0442\u0430\u043F\u044B \u0440\u0430\u0431\u043E\u0442\u044B \u0441 \u043D\u0430\u043C\u0438<br data-v-5d75aa84>\u043E\u0447\u0435\u043D \u043F\u0440\u043E\u0441\u0442\u044B</h1><div class="smallCards" data-v-5d75aa84><div class="frame" data-v-5d75aa84><div class="smallCard" data-v-5d75aa84><img src="'+eb+'" alt="" data-v-5d75aa84></div><div class="cornerBlock" data-v-5d75aa84></div><p data-v-5d75aa84>\u0412\u044B \u043E\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u0442\u0435 \u0437\u0430\u044F\u0432\u043A\u0443 \u0438 \u043D\u0430\u0448 \u043C\u0435\u043D\u0435\u0434\u0436\u0435\u0440 \u0441\u0432\u044F\u0437\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u0441 \u0412\u0430\u043C\u0438</p></div><img class="arrow" src="'+Zp+'" alt="" data-v-5d75aa84><div class="frame topMargin" data-v-5d75aa84><div class="smallCard" data-v-5d75aa84><img src="'+tb+'" alt="" data-v-5d75aa84></div><div class="cornerBlock blue" data-v-5d75aa84></div><p data-v-5d75aa84>\u041E\u043F\u0440\u0435\u0434\u0435\u043B\u044F\u0435\u043C \u043F\u043B\u0430\u043D \u0440\u0430\u0431\u043E\u0442\u044B, \u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C \u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u044B\u0432\u0430\u0435\u043C \u0434\u043E\u0433\u043E\u0432\u043E\u0440</p></div><img class="arrow" src="'+Zp+'" alt="" data-v-5d75aa84><div class="frame" data-v-5d75aa84><div class="smallCard" data-v-5d75aa84><img src="'+ib+'" alt="" data-v-5d75aa84></div><div class="cornerBlock" data-v-5d75aa84></div><p data-v-5d75aa84>\u041D\u0430\u0448\u0438 \u0441\u043F\u0435\u0446\u0438\u0430\u043B\u0438\u0441\u0442\u044B \u043F\u0440\u0438\u0432\u043E\u0434\u044F\u0442 \u0432 \u043F\u043E\u0440\u044F\u0434\u043E\u043A \u043E\u0442\u0447\u0435\u0442\u043D\u043E\u0441\u0442\u044C</p></div><img class="arrow" src="'+Zp+'" alt="" data-v-5d75aa84><div class="frame" data-v-5d75aa84><div class="smallCard" data-v-5d75aa84><img src="'+rb+'" alt="" data-v-5d75aa84></div><div class="cornerBlock blue" data-v-5d75aa84></div><p data-v-5d75aa84>\u0412\u044B \u0440\u0435\u0433\u0443\u043B\u044F\u0440\u043D\u043E \u043F\u043E\u043B\u0443\u0447\u0430\u0435\u0442\u0435 \u0433\u043E\u0442\u043E\u0432\u0443\u044E \u043E\u0442\u0447\u0435\u0442\u043D\u043E\u0441\u0442\u044C</p></div></div>',2),sb=[ob];function ab(d,g){return Jr(),hn("div",{class:"home-contact-details",onClick:g[0]||(g[0]=(...b)=>d.showForm.hideBotForm&&d.showForm.hideBotForm(...b))},sb)}var lb=dn(nb,[["render",ab],["__scopeId","data-v-5d75aa84"]]),cb=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},jg={exports:{}};(function(d,g){(function(b,E){d.exports=E()})(cb,function(){var b,E,I;function L(s,W){if(!b)b=W;else if(!E)E=W;else{var le="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+b+")(sharedChunk); ("+E+")(sharedChunk); self.onerror = null;",he={};b(he),I=W(he),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(I.workerUrl=window.URL.createObjectURL(new Blob([le],{type:"text/javascript"})))}}L(["exports"],function(s){var W="2.8.1",le=he;function he(i,e,r,n){this.cx=3*i,this.bx=3*(r-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=r,this.p2y=n}he.prototype.sampleCurveX=function(i){return((this.ax*i+this.bx)*i+this.cx)*i},he.prototype.sampleCurveY=function(i){return((this.ay*i+this.by)*i+this.cy)*i},he.prototype.sampleCurveDerivativeX=function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},he.prototype.solveCurveX=function(i,e){var r,n,a,c,h;for(e===void 0&&(e=1e-6),a=i,h=0;h<8;h++){if(c=this.sampleCurveX(a)-i,Math.abs(c)<e)return a;var p=this.sampleCurveDerivativeX(a);if(Math.abs(p)<1e-6)break;a-=c/p}if((a=i)<(r=0))return r;if(a>(n=1))return n;for(;r<n;){if(c=this.sampleCurveX(a),Math.abs(c-i)<e)return a;i>c?r=a:n=a,a=.5*(n-r)+r}return a},he.prototype.solve=function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))};var $=pe;function pe(i,e){this.x=i,this.y=e}pe.prototype={clone:function(){return new pe(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,e){return this.clone()._rotateAround(i,e)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var e=i.x-this.x,r=i.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,e){return Math.atan2(this.x*e-this.y*i,this.x*i+this.y*e)},_matMult:function(i){var e=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=e,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var e=Math.cos(i),r=Math.sin(i),n=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=n,this},_rotateAround:function(i,e){var r=Math.cos(i),n=Math.sin(i),a=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-n*(this.y-e.y),this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},pe.convert=function(i){return i instanceof pe?i:Array.isArray(i)?new pe(i[0],i[1]):i};var Te=typeof self!="undefined"?self:{};const ut=Math.PI/180,zt=180/Math.PI;function He(i){return i*ut}function dt(i){return i*zt}const Pt=[[0,0],[1,0],[1,1],[0,1]];function Kt(i){if(i<=0)return 0;if(i>=1)return 1;const e=i*i,r=e*i;return 4*(i<.5?r:3*(i-e)+r-.75)}function ei(i,e,r,n){const a=new le(i,e,r,n);return function(c){return a.solve(c)}}const wi=ei(.25,.1,.25,1);function Dt(i,e,r){return Math.min(r,Math.max(e,i))}function ur(i,e,r){return(r=Dt((r-i)/(e-i),0,1))*r*(3-2*r)}function Xi(i,e,r){const n=r-e,a=((i-e)%n+n)%n+e;return a===e?r:a}function Ji(i,e,r){if(!i.length)return r(null,[]);let n=i.length;const a=new Array(i.length);let c=null;i.forEach((h,p)=>{e(h,(A,y)=>{A&&(c=A),a[p]=y,--n==0&&r(c,a)})})}function gr(i){const e=[];for(const r in i)e.push(i[r]);return e}function mi(i,...e){for(const r of e)for(const n in r)i[n]=r[n];return i}let hr=1;function Tr(){return hr++}function $r(){return function i(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,i)}()}function en(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function vi(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function ci(i,e){i.forEach(r=>{e[r]&&(e[r]=e[r].bind(e))})}function Ht(i,e){return i.indexOf(e,i.length-e.length)!==-1}function Li(i,e,r){const n={};for(const a in i)n[a]=e.call(r||this,i[a],a,i);return n}function Or(i,e,r){const n={};for(const a in i)e.call(r||this,i[a],a,i)&&(n[a]=i[a]);return n}function Pi(i){return Array.isArray(i)?i.map(Pi):typeof i=="object"&&i?Li(i,Pi):i}const dr={};function Ot(i){dr[i]||(typeof console!="undefined"&&console.warn(i),dr[i]=!0)}function Fi(i,e,r){return(r.y-i.y)*(e.x-i.x)>(e.y-i.y)*(r.x-i.x)}function Pe(i){let e=0;for(let r,n,a=0,c=i.length,h=c-1;a<c;h=a++)r=i[a],n=i[h],e+=(n.x-r.x)*(r.y+n.y);return e}function ht(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function $e(i){const e={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,n,a,c)=>{const h=a||c;return e[n]=!h||h.toLowerCase(),""}),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}let yt,ui,si,Bt,it=null;function te(i){if(it==null){const e=i.navigator?i.navigator.userAgent:null;it=!!i.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return it}function de(i){try{const e=Te[i];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}const Ce={now:()=>si!==void 0?si:Te.performance.now(),setNow(i){si=i},restoreNow(){si=void 0},frame(i){const e=Te.requestAnimationFrame(i);return{cancel:()=>Te.cancelAnimationFrame(e)}},getImageData(i,e=0){const{width:r,height:n}=i;Bt||(Bt=Te.document.createElement("canvas"));const a=Bt.getContext("2d");if(!a)throw new Error("failed to create canvas 2d context");return(r>Bt.width||n>Bt.height)&&(Bt.width=r,Bt.height=n),a.clearRect(-e,-e,r+2*e,n+2*e),a.drawImage(i,0,0,r,n),a.getImageData(-e,-e,r+2*e,n+2*e)},resolveURL:i=>(yt||(yt=Te.document.createElement("a")),yt.href=i,yt.href),get devicePixelRatio(){return Te.devicePixelRatio},get prefersReducedMotion(){return!!Te.matchMedia&&(ui==null&&(ui=Te.matchMedia("(prefers-reduced-motion: reduce)")),ui.matches)}};let Oe;const Se={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(Oe==null){const i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Oe={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):i}catch{Oe=i}}return Oe},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},We={supported:!1,testSupport:function(i){!Ke&&Ye&&(Ue?wt(i):ot=i)}};let ot,Ye,Ke=!1,Ue=!1;function wt(i){const e=i.createTexture();i.bindTexture(i.TEXTURE_2D,e);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,Ye),i.isContextLost())return;We.supported=!0}catch{}i.deleteTexture(e),Ke=!0}Te.document&&(Ye=Te.document.createElement("img"),Ye.onload=function(){ot&&wt(ot),ot=null,Ue=!0},Ye.onerror=function(){Ke=!0,ot=null},Ye.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ft="01",bt="NO_ACCESS_TOKEN";function Tt(i){return i.indexOf("mapbox:")===0}function Ft(i){return Se.API_URL_REGEX.test(i)}const Xt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Qt(i){const e=i.match(Xt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function ai(i){const e=i.params.length?`?${i.params.join("&")}`:"";return`${i.protocol}://${i.authority}${i.path}${e}`}function $i(i){if(!i)return null;const e=i.split(".");if(!e||e.length!==3)return null;try{return JSON.parse(decodeURIComponent(Te.atob(e[1]).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class _r{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=$i(Se.ACCESS_TOKEN);let n="";return n=r&&r.u?Te.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,(a,c)=>String.fromCharCode(Number("0x"+c)))):Se.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${n}`:`mapbox.eventData:${n}`}fetchEventData(){const e=de("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{const a=Te.localStorage.getItem(r);a&&(this.eventData=JSON.parse(a));const c=Te.localStorage.getItem(n);c&&(this.anonId=c)}catch{Ot("Unable to read from LocalStorage")}}saveEventData(){const e=de("localStorage"),r=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{Te.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&Te.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{Ot("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,r,n,a){if(!Se.EVENTS_URL)return;const c=Qt(Se.EVENTS_URL);c.params.push(`access_token=${a||Se.ACCESS_TOKEN||""}`);const h={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:W,skuId:ft,userId:this.anonId},p=r?mi(h,r):h,A={url:ai(c),headers:{"Content-Type":"text/plain"},body:JSON.stringify([p])};this.pendingRequest=ne(A,y=>{this.pendingRequest=null,n(y),this.saveEventData(),this.processRequests(a)})}queueRequest(e,r){this.queue.push(e),this.processRequests(r)}}const yn=new class extends _r{constructor(i){super("appUserTurnstile"),this._customAccessToken=i}postTurnstileEvent(i,e){Se.EVENTS_URL&&Se.ACCESS_TOKEN&&Array.isArray(i)&&i.some(r=>Tt(r)||Ft(r))&&this.queueRequest(Date.now(),e)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=$i(Se.ACCESS_TOKEN),r=e?e.u:Se.ACCESS_TOKEN;let n=r!==this.eventData.tokenU;vi(this.anonId)||(this.anonId=$r(),n=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const c=new Date(this.eventData.lastSuccess),h=new Date(a),p=(a-this.eventData.lastSuccess)/864e5;n=n||p>=1||p<-1||c.getDate()!==h.getDate()}else n=!0;n?this.postEvent(a,{"enabled.telemetry":!1},c=>{c||(this.eventData.lastSuccess=a,this.eventData.tokenU=r)},i):this.processRequests()}},xn=yn.postTurnstileEvent.bind(yn),lo=new class extends _r{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(i,e,r,n){this.skuToken=e,this.errorCb=n,Se.EVENTS_URL&&(r||Se.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},r):this.errorCb(new Error(bt)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),vi(this.anonId)||(this.anonId=$r()),this.postEvent(r,{skuToken:this.skuToken},n=>{n?this.errorCb(n):e&&(this.success[e]=!0)},i))}},Yi=lo.postMapLoadEvent.bind(lo),er=new class extends _r{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(i,e,r,n){if(!Se.API_URL||!Se.SESSION_PATH)return;const a=Qt(Se.API_URL+Se.SESSION_PATH);a.params.push(`sku=${e||""}`),a.params.push(`access_token=${n||Se.ACCESS_TOKEN||""}`);const c={url:ai(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=me(c,h=>{this.pendingRequest=null,r(h),this.saveEventData(),this.processRequests(n)})}getSessionAPI(i,e,r,n){this.skuToken=e,this.errorCb=n,Se.SESSION_PATH&&Se.API_URL&&(r||Se.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},r):this.errorCb(new Error(bt)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||this.getSession(r,this.skuToken,n=>{n?this.errorCb(n):e&&(this.success[e]=!0)},i)}},co=er.getSessionAPI.bind(er),uo=new Set,ga="mapbox-tiles";let tn,Pn,ho=500,po=50;function No(){Te.caches&&!tn&&(tn=Te.caches.open(ga))}function Ts(i){const e=i.indexOf("?");return e<0?i:i.slice(0,e)}let Oo=1/0;const Y={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Y);class z extends Error{constructor(e,r,n){r===401&&Ft(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=r,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const P=ht()?()=>self.worker&&self.worker.referrer:()=>(Te.location.protocol==="blob:"?Te.parent:Te).location.href,Z=function(i,e){if(!(/^file:/.test(r=i.url)||/^file:/.test(P())&&!/^\w+:/.test(r))){if(Te.fetch&&Te.Request&&Te.AbortController&&Te.Request.prototype.hasOwnProperty("signal"))return function(n,a){const c=new Te.AbortController,h=new Te.Request(n.url,{method:n.method||"GET",body:n.body,credentials:n.credentials,headers:n.headers,referrer:P(),signal:c.signal});let p=!1,A=!1;const y=(v=h.url).indexOf("sku=")>0&&Ft(v);var v;n.type==="json"&&h.headers.set("Accept","application/json");const w=(S,k,N)=>{if(A)return;if(S&&S.message!=="SecurityError"&&Ot(S),k&&N)return T(k);const F=Date.now();Te.fetch(h).then(Q=>{if(Q.ok){const ie=y?Q.clone():null;return T(Q,ie,F)}return a(new z(Q.statusText,Q.status,n.url))}).catch(Q=>{Q.code!==20&&a(new Error(Q.message))})},T=(S,k,N)=>{(n.type==="arrayBuffer"?S.arrayBuffer():n.type==="json"?S.json():S.text()).then(F=>{A||(k&&N&&function(Q,ie,oe){if(No(),!tn)return;const ae={status:ie.status,statusText:ie.statusText,headers:new Te.Headers};ie.headers.forEach((we,Ee)=>ae.headers.set(Ee,we));const ce=$e(ie.headers.get("Cache-Control")||"");if(ce["no-store"])return;ce["max-age"]&&ae.headers.set("Expires",new Date(oe+1e3*ce["max-age"]).toUTCString());const ue=ae.headers.get("Expires");ue&&(new Date(ue).getTime()-oe<42e4||function(we,Ee){if(Pn===void 0)try{new Response(new ReadableStream),Pn=!0}catch{Pn=!1}Pn?Ee(we.body):we.blob().then(Ee)}(ie,we=>{const Ee=new Te.Response(we,ae);No(),tn&&tn.then(ze=>ze.put(Ts(Q.url),Ee)).catch(ze=>Ot(ze.message))}))}(h,k,N),p=!0,a(null,F,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(F=>{A||a(new Error(F.message))})};return y?function(S,k){if(No(),!tn)return k(null);const N=Ts(S.url);tn.then(F=>{F.match(N).then(Q=>{const ie=function(oe){if(!oe)return!1;const ae=new Date(oe.headers.get("Expires")||0),ce=$e(oe.headers.get("Cache-Control")||"");return ae>Date.now()&&!ce["no-cache"]}(Q);F.delete(N),ie&&F.put(N,Q.clone()),k(null,Q,ie)}).catch(k)}).catch(k)}(h,w):w(null,null),{cancel:()=>{A=!0,p||c.abort()}}}(i,e);if(ht()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,e,void 0,!0)}var r;return function(n,a){const c=new Te.XMLHttpRequest;c.open(n.method||"GET",n.url,!0),n.type==="arrayBuffer"&&(c.responseType="arraybuffer");for(const h in n.headers)c.setRequestHeader(h,n.headers[h]);return n.type==="json"&&(c.responseType="text",c.setRequestHeader("Accept","application/json")),c.withCredentials=n.credentials==="include",c.onerror=()=>{a(new Error(c.statusText))},c.onload=()=>{if((c.status>=200&&c.status<300||c.status===0)&&c.response!==null){let h=c.response;if(n.type==="json")try{h=JSON.parse(c.response)}catch(p){return a(p)}a(null,h,c.getResponseHeader("Cache-Control"),c.getResponseHeader("Expires"))}else a(new z(c.statusText,c.status,n.url))},c.send(n.body),{cancel:()=>c.abort()}}(i,e)},J=function(i,e){return Z(mi(i,{type:"arrayBuffer"}),e)},ne=function(i,e){return Z(mi(i,{method:"POST"}),e)},me=function(i,e){return Z(mi(i,{method:"GET"}),e)};function fe(i){const e=Te.document.createElement("a");return e.href=i,e.protocol===Te.document.location.protocol&&e.host===Te.document.location.host}const se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let _e,Be;_e=[],Be=0;const Xe=function(i,e){if(We.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),Be>=Se.MAX_PARALLEL_IMAGE_REQUESTS){const c={requestParameters:i,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return _e.push(c),c}Be++;let r=!1;const n=()=>{if(!r)for(r=!0,Be--;_e.length&&Be<Se.MAX_PARALLEL_IMAGE_REQUESTS;){const c=_e.shift(),{requestParameters:h,callback:p,cancelled:A}=c;A||(c.cancel=Xe(h,p).cancel)}},a=J(i,(c,h,p,A)=>{n(),c?e(c):h&&(Te.createImageBitmap?function(y,v){const w=new Te.Blob([new Uint8Array(y)],{type:"image/png"});Te.createImageBitmap(w).then(T=>{v(null,T)}).catch(T=>{v(new Error(`Could not load image because of ${T.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(h,(y,v)=>e(y,v,p,A)):function(y,v){const w=new Te.Image,T=Te.URL;w.onload=()=>{v(null,w),T.revokeObjectURL(w.src),w.onload=null,Te.requestAnimationFrame(()=>{w.src=se})},w.onerror=()=>v(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const S=new Te.Blob([new Uint8Array(y)],{type:"image/png"});w.src=y.byteLength?T.createObjectURL(S):se}(h,(y,v)=>e(y,v,p,A)))});return{cancel:()=>{a.cancel(),n()}}};function Re(i,e,r){r[i]&&r[i].indexOf(e)!==-1||(r[i]=r[i]||[],r[i].push(e))}function xt(i,e,r){if(r&&r[i]){const n=r[i].indexOf(e);n!==-1&&r[i].splice(n,1)}}class mt{constructor(e,r={}){mi(this,r),this.type=e}}class At extends mt{constructor(e,r={}){super("error",mi({error:e},r))}}class Ct{on(e,r){return this._listeners=this._listeners||{},Re(e,r,this._listeners),this}off(e,r){return xt(e,r,this._listeners),xt(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},Re(e,r,this._oneTimeListeners),this):new Promise(n=>this.once(e,n))}fire(e,r){typeof e=="string"&&(e=new mt(e,r||{}));const n=e.type;if(this.listens(n)){e.target=this;const a=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const p of a)p.call(this,e);const c=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const p of c)xt(n,p,this._oneTimeListeners),p.call(this,e);const h=this._eventedParent;h&&(mi(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),h.fire(e))}else e instanceof At&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var ye=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":0.1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ti(i,...e){for(const r of e)for(const n in r)i[n]=r[n];return i}function at(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Jt(i){if(Array.isArray(i))return i.map(Jt);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const e={};for(const r in i)e[r]=Jt(i[r]);return e}return at(i)}class ii extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}class fo{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[n,a]of r)this.bindings[n]=a}concat(e){return new fo(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const vn={kind:"null"},qe={kind:"number"},Ut={kind:"string"},Rt={kind:"boolean"},fn={kind:"color"},mo={kind:"object"},Gt={kind:"value"},Ao={kind:"collator"},Go={kind:"formatted"},pr={kind:"resolvedImage"};function Gr(i,e){return{kind:"array",itemType:i,N:e}}function Ci(i){if(i.kind==="array"){const e=Ci(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}return i.kind}const pd=[vn,qe,Ut,Rt,fn,Go,mo,Gr(Gt),pr];function Ms(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Ms(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const r of pd)if(!Ms(r,e))return null}}return`Expected ${Ci(i)} but found ${Ci(e)} instead.`}function _a(i,e){return e.some(r=>r.kind===i.kind)}function Fo(i,e){return e.some(r=>r==="null"?i===null:r==="array"?Array.isArray(i):r==="object"?i&&!Array.isArray(i)&&typeof i=="object":r===typeof i)}function ya(i){var e={exports:{}};return i(e,e.exports),e.exports}var zl=ya(function(i,e){var r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(p){return(p=Math.round(p))<0?0:p>255?255:p}function a(p){return n(p[p.length-1]==="%"?parseFloat(p)/100*255:parseInt(p))}function c(p){return(A=p[p.length-1]==="%"?parseFloat(p)/100:parseFloat(p))<0?0:A>1?1:A;var A}function h(p,A,y){return y<0?y+=1:y>1&&(y-=1),6*y<1?p+(A-p)*y*6:2*y<1?A:3*y<2?p+(A-p)*(2/3-y)*6:p}try{e.parseCSSColor=function(p){var A,y=p.replace(/ /g,"").toLowerCase();if(y in r)return r[y].slice();if(y[0]==="#")return y.length===4?(A=parseInt(y.substr(1),16))>=0&&A<=4095?[(3840&A)>>4|(3840&A)>>8,240&A|(240&A)>>4,15&A|(15&A)<<4,1]:null:y.length===7&&(A=parseInt(y.substr(1),16))>=0&&A<=16777215?[(16711680&A)>>16,(65280&A)>>8,255&A,1]:null;var v=y.indexOf("("),w=y.indexOf(")");if(v!==-1&&w+1===y.length){var T=y.substr(0,v),S=y.substr(v+1,w-(v+1)).split(","),k=1;switch(T){case"rgba":if(S.length!==4)return null;k=c(S.pop());case"rgb":return S.length!==3?null:[a(S[0]),a(S[1]),a(S[2]),k];case"hsla":if(S.length!==4)return null;k=c(S.pop());case"hsl":if(S.length!==3)return null;var N=(parseFloat(S[0])%360+360)%360/360,F=c(S[1]),Q=c(S[2]),ie=Q<=.5?Q*(F+1):Q+F-Q*F,oe=2*Q-ie;return[n(255*h(oe,ie,N+1/3)),n(255*h(oe,ie,N)),n(255*h(oe,ie,N-1/3)),k];default:return null}}return null}}catch{}});class $t{constructor(e,r,n,a=1){this.r=e,this.g=r,this.b=n,this.a=a}static parse(e){if(!e)return;if(e instanceof $t)return e;if(typeof e!="string")return;const r=zl.parseCSSColor(e);return r?new $t(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3]):void 0}toString(){const[e,r,n,a]=this.toArray();return`rgba(${Math.round(e)},${Math.round(r)},${Math.round(n)},${a})`}toArray(){const{r:e,g:r,b:n,a}=this;return a===0?[0,0,0,0]:[255*e/a,255*r/a,255*n/a,a]}}$t.black=new $t(0,0,0,1),$t.white=new $t(1,1,1,1),$t.transparent=new $t(0,0,0,0),$t.red=new $t(1,0,0,1),$t.blue=new $t(0,0,1,1);class Vo{constructor(e,r,n){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Bl{constructor(e,r,n,a,c){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=n,this.fontStack=a,this.textColor=c}}class Vi{constructor(e){this.sections=e}static fromString(e){return new Vi([new Bl(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Vi?e:Vi.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const r of this.sections){if(r.image){e.push(["image",r.image.name]);continue}e.push(r.text);const n={};r.fontStack&&(n["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(n["font-scale"]=r.scale),r.textColor&&(n["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(n)}return e}}class Mr{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Mr({name:e,available:!1}):null}serialize(){return["image",this.name]}}function rn(i,e,r,n){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?n===void 0||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[i,e,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[i,e,r,n]:[i,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xa(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof $t||i instanceof Vo||i instanceof Vi||i instanceof Mr)return!0;if(Array.isArray(i)){for(const e of i)if(!xa(e))return!1;return!0}if(typeof i=="object"){for(const e in i)if(!xa(i[e]))return!1;return!0}return!1}function Ri(i){if(i===null)return vn;if(typeof i=="string")return Ut;if(typeof i=="boolean")return Rt;if(typeof i=="number")return qe;if(i instanceof $t)return fn;if(i instanceof Vo)return Ao;if(i instanceof Vi)return Go;if(i instanceof Mr)return pr;if(Array.isArray(i)){const e=i.length;let r;for(const n of i){const a=Ri(n);if(r){if(r===a)continue;r=Gt;break}r=a}return Gr(r||Gt,e)}return mo}function bn(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof $t||i instanceof Vi||i instanceof Mr?i.toString():JSON.stringify(i)}class wn{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!xa(e[1]))return r.error("invalid value");const n=e[1];let a=Ri(n);const c=r.expectedType;return a.kind!=="array"||a.N!==0||!c||c.kind!=="array"||typeof c.N=="number"&&c.N!==0||(a=c),new wn(a,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof $t?["rgba"].concat(this.value.toArray()):this.value instanceof Vi?this.value.serialize():this.value}}class tr{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const kl={string:Ut,number:qe,boolean:Rt,object:mo};class nn{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let n,a=1;const c=e[0];if(c==="array"){let p,A;if(e.length>2){const y=e[1];if(typeof y!="string"||!(y in kl)||y==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);p=kl[y],a++}else p=Gt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);A=e[2],a++}n=Gr(p,A)}else n=kl[c];const h=[];for(;a<e.length;a++){const p=r.parse(e[a],a,Gt);if(!p)return null;h.push(p)}return new nn(n,h)}evaluate(e){for(let r=0;r<this.args.length;r++){const n=this.args[r].evaluate(e);if(!Ms(this.type,Ri(n)))return n;if(r===this.args.length-1)throw new tr(`Expected value to be of type ${Ci(this.type)}, but found ${Ci(Ri(n))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,r=[e.kind];if(e.kind==="array"){const n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){r.push(n.kind);const a=e.N;(typeof a=="number"||this.args.length>1)&&r.push(a)}}return r.concat(this.args.map(n=>n.serialize()))}}class Uo{constructor(e){this.type=Go,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&typeof n=="object")return r.error("First argument must be an image or text section.");const a=[];let c=!1;for(let h=1;h<=e.length-1;++h){const p=e[h];if(c&&typeof p=="object"&&!Array.isArray(p)){c=!1;let A=null;if(p["font-scale"]&&(A=r.parse(p["font-scale"],1,qe),!A))return null;let y=null;if(p["text-font"]&&(y=r.parse(p["text-font"],1,Gr(Ut)),!y))return null;let v=null;if(p["text-color"]&&(v=r.parse(p["text-color"],1,fn),!v))return null;const w=a[a.length-1];w.scale=A,w.font=y,w.textColor=v}else{const A=r.parse(e[h],1,Gt);if(!A)return null;const y=A.type.kind;if(y!=="string"&&y!=="value"&&y!=="null"&&y!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");c=!0,a.push({content:A,scale:null,font:null,textColor:null})}}return new Uo(a)}evaluate(e){return new Vi(this.sections.map(r=>{const n=r.content.evaluate(e);return Ri(n)===pr?new Bl("",n,null,null,null):new Bl(bn(n),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const r of this.sections){e.push(r.content.serialize());const n={};r.scale&&(n["font-scale"]=r.scale.serialize()),r.font&&(n["text-font"]=r.font.serialize()),r.textColor&&(n["text-color"]=r.textColor.serialize()),e.push(n)}return e}}class Zo{constructor(e){this.type=pr,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const n=r.parse(e[1],1,Ut);return n?new Zo(n):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),n=Mr.fromString(r);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(r)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const fd={"to-boolean":Rt,"to-color":fn,"to-number":qe,"to-string":Ut};class on{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return r.error("Expected one argument.");const a=fd[n],c=[];for(let h=1;h<e.length;h++){const p=r.parse(e[h],h,Gt);if(!p)return null;c.push(p)}return new on(a,c)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let r,n;for(const a of this.args){if(r=a.evaluate(e),n=null,r instanceof $t)return r;if(typeof r=="string"){const c=e.parseColor(r);if(c)return c}else if(Array.isArray(r)&&(n=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:rn(r[0],r[1],r[2],r[3]),!n))return new $t(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new tr(n||`Could not parse color from value '${typeof r=="string"?r:String(JSON.stringify(r))}'`)}if(this.type.kind==="number"){let r=null;for(const n of this.args){if(r=n.evaluate(e),r===null)return 0;const a=Number(r);if(!isNaN(a))return a}throw new tr(`Could not convert ${JSON.stringify(r)} to number.`)}return this.type.kind==="formatted"?Vi.fromString(bn(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Mr.fromString(bn(this.args[0].evaluate(e))):bn(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Uo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Zo(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(r=>{e.push(r.serialize())}),e}}const md=["Unknown","Point","LineString","Polygon"];class du{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?md[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:n,y:a}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*r-e[0])+this.featureDistanceData.bearing[1]*(a*r-e[1])}return 0}parseColor(e){let r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=$t.parse(e)),r}}class Er{constructor(e,r,n,a){this.name=e,this.type=r,this._evaluate=n,this.args=a}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,r){const n=e[0],a=Er.definitions[n];if(!a)return r.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const c=Array.isArray(a)?a[0]:a.type,h=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,p=h.filter(([y])=>!Array.isArray(y)||y.length===e.length-1);let A=null;for(const[y,v]of p){A=new Nn(r.registry,r.path,null,r.scope);const w=[];let T=!1;for(let S=1;S<e.length;S++){const k=e[S],N=Array.isArray(y)?y[S-1]:y.type,F=A.parse(k,1+w.length,N);if(!F){T=!0;break}w.push(F)}if(!T)if(Array.isArray(y)&&y.length!==w.length)A.error(`Expected ${y.length} arguments, but found ${w.length} instead.`);else{for(let S=0;S<w.length;S++){const k=Array.isArray(y)?y[S]:y.type,N=w[S];A.concat(S+1).checkSubtype(k,N.type)}if(A.errors.length===0)return new Er(n,c,v,w)}}if(p.length===1)r.errors.push(...A.errors);else{const y=(p.length?p:h).map(([w])=>{return T=w,Array.isArray(T)?`(${T.map(Ci).join(", ")})`:`(${Ci(T.type)}...)`;var T}).join(" | "),v=[];for(let w=1;w<e.length;w++){const T=r.parse(e[w],1+v.length);if(!T)return null;v.push(Ci(T.type))}r.error(`Expected arguments of type ${y}, but found (${v.join(", ")}) instead.`)}return null}static register(e,r){Er.definitions=r;for(const n in r)e[n]=Er}}class va{constructor(e,r,n){this.type=Ao,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const n=e[1];if(typeof n!="object"||Array.isArray(n))return r.error("Collator options argument must be an object.");const a=r.parse(n["case-sensitive"]!==void 0&&n["case-sensitive"],1,Rt);if(!a)return null;const c=r.parse(n["diacritic-sensitive"]!==void 0&&n["diacritic-sensitive"],1,Rt);if(!c)return null;let h=null;return n.locale&&(h=r.parse(n.locale,1,Ut),!h)?null:new va(a,c,h)}evaluate(e){return new Vo(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Rn=8192;function Ll(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function ba(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function pu(i,e){const r=(180+i[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,a=Math.pow(2,e.z);return[Math.round(r*a*Rn),Math.round(n*a*Rn)]}function wa(i,e,r){const n=i[0]-e[0],a=i[1]-e[1],c=i[0]-r[0],h=i[1]-r[1];return n*h-c*a==0&&n*c<=0&&a*h<=0}function Pl(i,e){let r=!1;for(let h=0,p=e.length;h<p;h++){const A=e[h];for(let y=0,v=A.length;y<v-1;y++){if(wa(i,A[y],A[y+1]))return!1;(a=A[y])[1]>(n=i)[1]!=(c=A[y+1])[1]>n[1]&&n[0]<(c[0]-a[0])*(n[1]-a[1])/(c[1]-a[1])+a[0]&&(r=!r)}}var n,a,c;return r}function Ad(i,e){for(let r=0;r<e.length;r++)if(Pl(i,e[r]))return!0;return!1}function fu(i,e,r,n){const a=n[0]-r[0],c=n[1]-r[1],h=(i[0]-r[0])*c-a*(i[1]-r[1]),p=(e[0]-r[0])*c-a*(e[1]-r[1]);return h>0&&p<0||h<0&&p>0}function gd(i,e,r){for(const y of r)for(let v=0;v<y.length-1;++v)if((p=[(h=y[v+1])[0]-(c=y[v])[0],h[1]-c[1]])[0]*(A=[(a=e)[0]-(n=i)[0],a[1]-n[1]])[1]-p[1]*A[0]!=0&&fu(n,a,c,h)&&fu(c,h,n,a))return!0;var n,a,c,h,p,A;return!1}function mu(i,e){for(let r=0;r<i.length;++r)if(!Pl(i[r],e))return!1;for(let r=0;r<i.length-1;++r)if(gd(i[r],i[r+1],e))return!1;return!0}function _d(i,e){for(let r=0;r<e.length;r++)if(mu(i,e[r]))return!0;return!1}function Ca(i,e,r){const n=[];for(let a=0;a<i.length;a++){const c=[];for(let h=0;h<i[a].length;h++){const p=pu(i[a][h],r);Ll(e,p),c.push(p)}n.push(c)}return n}function Es(i,e,r){const n=[];for(let a=0;a<i.length;a++){const c=Ca(i[a],e,r);n.push(c)}return n}function Au(i,e,r,n){if(i[0]<r[0]||i[0]>r[2]){const a=.5*n;let c=i[0]-r[0]>a?-n:r[0]-i[0]>a?n:0;c===0&&(c=i[0]-r[2]>a?-n:r[2]-i[0]>a?n:0),i[0]+=c}Ll(e,i)}function gu(i,e,r,n){const a=Math.pow(2,n.z)*Rn,c=[n.x*Rn,n.y*Rn],h=[];if(!i)return h;for(const p of i)for(const A of p){const y=[A.x+c[0],A.y+c[1]];Au(y,e,r,a),h.push(y)}return h}function _u(i,e,r,n){const a=Math.pow(2,n.z)*Rn,c=[n.x*Rn,n.y*Rn],h=[];if(!i)return h;for(const A of i){const y=[];for(const v of A){const w=[v.x+c[0],v.y+c[1]];Ll(e,w),y.push(w)}h.push(y)}if(e[2]-e[0]<=a/2){(p=e)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(const A of h)for(const y of A)Au(y,e,r,a)}var p;return h}class go{constructor(e,r){this.type=Rt,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(xa(e[1])){const n=e[1];if(n.type==="FeatureCollection")for(let a=0;a<n.features.length;++a){const c=n.features[a].geometry.type;if(c==="Polygon"||c==="MultiPolygon")return new go(n,n.features[a].geometry)}else if(n.type==="Feature"){const a=n.geometry.type;if(a==="Polygon"||a==="MultiPolygon")return new go(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new go(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,n){const a=[1/0,1/0,-1/0,-1/0],c=[1/0,1/0,-1/0,-1/0],h=r.canonicalID();if(!h)return!1;if(n.type==="Polygon"){const p=Ca(n.coordinates,c,h),A=gu(r.geometry(),a,c,h);if(!ba(a,c))return!1;for(const y of A)if(!Pl(y,p))return!1}if(n.type==="MultiPolygon"){const p=Es(n.coordinates,c,h),A=gu(r.geometry(),a,c,h);if(!ba(a,c))return!1;for(const y of A)if(!Ad(y,p))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,n){const a=[1/0,1/0,-1/0,-1/0],c=[1/0,1/0,-1/0,-1/0],h=r.canonicalID();if(!h)return!1;if(n.type==="Polygon"){const p=Ca(n.coordinates,c,h),A=_u(r.geometry(),a,c,h);if(!ba(a,c))return!1;for(const y of A)if(!mu(y,p))return!1}if(n.type==="MultiPolygon"){const p=Es(n.coordinates,c,h),A=_u(r.geometry(),a,c,h);if(!ba(a,c))return!1;for(const y of A)if(!_d(y,p))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function yr(i){if(i instanceof Er&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof go)return!1;let e=!0;return i.eachChild(r=>{e&&!yr(r)&&(e=!1)}),e}function Is(i){if(i instanceof Er&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(r=>{e&&!Is(r)&&(e=!1)}),e}function Ds(i,e){if(i instanceof Er&&e.indexOf(i.name)>=0)return!1;let r=!0;return i.eachChild(n=>{r&&!Ds(n,e)&&(r=!1)}),r}class _o{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const n=e[1];return r.scope.has(n)?new _o(n,r.scope.get(n)):r.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Nn{constructor(e,r=[],n,a=new fo,c=[]){this.registry=e,this.path=r,this.key=r.map(h=>`[${h}]`).join(""),this.scope=a,this.errors=c,this.expectedType=n}parse(e,r,n,a,c={}){return r?this.concat(r,n,a)._parse(e,c):this._parse(e,c)}_parse(e,r){function n(a,c,h){return h==="assert"?new nn(c,[a]):h==="coerce"?new on(c,[a]):a}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const a=e[0];if(typeof a!="string")return this.error(`Expression name must be a string, but found ${typeof a} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const c=this.registry[a];if(c){let h=c.parse(e,this);if(!h)return null;if(this.expectedType){const p=this.expectedType,A=h.type;if(p.kind!=="string"&&p.kind!=="number"&&p.kind!=="boolean"&&p.kind!=="object"&&p.kind!=="array"||A.kind!=="value")if(p.kind!=="color"&&p.kind!=="formatted"&&p.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string"){if(this.checkSubtype(p,A))return null}else h=n(h,p,r.typeAnnotation||"coerce");else h=n(h,p,r.typeAnnotation||"assert")}if(!(h instanceof wn)&&h.type.kind!=="resolvedImage"&&Ta(h)){const p=new du;try{h=new wn(h.type,h.evaluate(p))}catch(A){return this.error(A.message),null}}return h}return this.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,n){const a=typeof e=="number"?this.path.concat(e):this.path,c=n?this.scope.concat(n):this.scope;return new Nn(this.registry,a,r||null,c,this.errors)}error(e,...r){const n=`${this.key}${r.map(a=>`[${a}]`).join("")}`;this.errors.push(new ii(n,e))}checkSubtype(e,r){const n=Ms(e,r);return n&&this.error(n),n}}function Ta(i){if(i instanceof _o)return Ta(i.boundExpression);if(i instanceof Er&&i.name==="error"||i instanceof va||i instanceof go)return!1;const e=i instanceof on||i instanceof nn;let r=!0;return i.eachChild(n=>{r=e?r&&Ta(n):r&&n instanceof wn}),!!r&&yr(i)&&Ds(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ss(i,e){const r=i.length-1;let n,a,c=0,h=r,p=0;for(;c<=h;)if(p=Math.floor((c+h)/2),n=i[p],a=i[p+1],n<=e){if(p===r||e<a)return p;c=p+1}else{if(!(n>e))throw new tr("Input is not a number.");h=p-1}return 0}class zs{constructor(e,r,n){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[a,c]of n)this.labels.push(a),this.outputs.push(c)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const n=r.parse(e[1],1,qe);if(!n)return null;const a=[];let c=null;r.expectedType&&r.expectedType.kind!=="value"&&(c=r.expectedType);for(let h=1;h<e.length;h+=2){const p=h===1?-1/0:e[h],A=e[h+1],y=h,v=h+1;if(typeof p!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(a.length&&a[a.length-1][0]>=p)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',y);const w=r.parse(A,v,c);if(!w)return null;c=c||w.type,a.push([p,w])}return new zs(c,n,a)}evaluate(e){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);const a=this.input.evaluate(e);if(a<=r[0])return n[0].evaluate(e);const c=r.length;return a>=r[c-1]?n[c-1].evaluate(e):n[Ss(r,a)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e}}function _t(i,e,r){return i*(1-r)+e*r}var Ma=Object.freeze({__proto__:null,number:_t,color:function(i,e,r){return new $t(_t(i.r,e.r,r),_t(i.g,e.g,r),_t(i.b,e.b,r),_t(i.a,e.a,r))},array:function(i,e,r){return i.map((n,a)=>_t(n,e[a],r))}});const yu=.95047,xu=1.08883,Rl=4/29,Nl=6/29,Ol=3*Nl*Nl,vu=Math.PI/180,bu=180/Math.PI;function Ea(i){return i>.008856451679035631?Math.pow(i,1/3):i/Ol+Rl}function On(i){return i>Nl?i*i*i:Ol*(i-Rl)}function jo(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Gl(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Ia(i){const e=Gl(i.r),r=Gl(i.g),n=Gl(i.b),a=Ea((.4124564*e+.3575761*r+.1804375*n)/yu),c=Ea((.2126729*e+.7151522*r+.072175*n)/1);return{l:116*c-16,a:500*(a-c),b:200*(c-Ea((.0193339*e+.119192*r+.9503041*n)/xu)),alpha:i.a}}function Fl(i){let e=(i.l+16)/116,r=isNaN(i.a)?e:e+i.a/500,n=isNaN(i.b)?e:e-i.b/200;return e=1*On(e),r=yu*On(r),n=xu*On(n),new $t(jo(3.2404542*r-1.5371385*e-.4985314*n),jo(-.969266*r+1.8760108*e+.041556*n),jo(.0556434*r-.2040259*e+1.0572252*n),i.alpha)}function yd(i,e,r){const n=e-i;return i+r*(n>180||n<-180?n-360*Math.round(n/360):n)}const Bs={forward:Ia,reverse:Fl,interpolate:function(i,e,r){return{l:_t(i.l,e.l,r),a:_t(i.a,e.a,r),b:_t(i.b,e.b,r),alpha:_t(i.alpha,e.alpha,r)}}},ks={forward:function(i){const{l:e,a:r,b:n}=Ia(i),a=Math.atan2(n,r)*bu;return{h:a<0?a+360:a,c:Math.sqrt(r*r+n*n),l:e,alpha:i.a}},reverse:function(i){const e=i.h*vu,r=i.c;return Fl({l:i.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:i.alpha})},interpolate:function(i,e,r){return{h:yd(i.h,e.h,r),c:_t(i.c,e.c,r),l:_t(i.l,e.l,r),alpha:_t(i.alpha,e.alpha,r)}}};var Vl=Object.freeze({__proto__:null,lab:Bs,hcl:ks});class Ir{constructor(e,r,n,a,c){this.type=e,this.operator=r,this.interpolation=n,this.input=a,this.labels=[],this.outputs=[];for(const[h,p]of c)this.labels.push(h),this.outputs.push(p)}static interpolationFactor(e,r,n,a){let c=0;if(e.name==="exponential")c=Da(r,e.base,n,a);else if(e.name==="linear")c=Da(r,1,n,a);else if(e.name==="cubic-bezier"){const h=e.controlPoints;c=new le(h[0],h[1],h[2],h[3]).solve(Da(r,1,n,a))}return c}static parse(e,r){let[n,a,c,...h]=e;if(!Array.isArray(a)||a.length===0)return r.error("Expected an interpolation type expression.",1);if(a[0]==="linear")a={name:"linear"};else if(a[0]==="exponential"){const y=a[1];if(typeof y!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:y}}else{if(a[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(a[0])}`,1,0);{const y=a.slice(1);if(y.length!==4||y.some(v=>typeof v!="number"||v<0||v>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:y}}}if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(c=r.parse(c,2,qe),!c)return null;const p=[];let A=null;n==="interpolate-hcl"||n==="interpolate-lab"?A=fn:r.expectedType&&r.expectedType.kind!=="value"&&(A=r.expectedType);for(let y=0;y<h.length;y+=2){const v=h[y],w=h[y+1],T=y+3,S=y+4;if(typeof v!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(p.length&&p[p.length-1][0]>=v)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',T);const k=r.parse(w,S,A);if(!k)return null;A=A||k.type,p.push([v,k])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new Ir(A,n,a,c,p):r.error(`Type ${Ci(A)} is not interpolatable.`)}evaluate(e){const r=this.labels,n=this.outputs;if(r.length===1)return n[0].evaluate(e);const a=this.input.evaluate(e);if(a<=r[0])return n[0].evaluate(e);const c=r.length;if(a>=r[c-1])return n[c-1].evaluate(e);const h=Ss(r,a),p=Ir.interpolationFactor(this.interpolation,a,r[h],r[h+1]),A=n[h].evaluate(e),y=n[h+1].evaluate(e);return this.operator==="interpolate"?Ma[this.type.kind.toLowerCase()](A,y,p):this.operator==="interpolate-hcl"?ks.reverse(ks.interpolate(ks.forward(A),ks.forward(y),p)):Bs.reverse(Bs.interpolate(Bs.forward(A),Bs.forward(y),p))}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,e,this.input.serialize()];for(let n=0;n<this.labels.length;n++)r.push(this.labels[n],this.outputs[n].serialize());return r}}function Da(i,e,r,n){const a=n-r,c=i-r;return a===0?0:e===1?c/a:(Math.pow(e,c)-1)/(Math.pow(e,a)-1)}class Ls{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expectected at least one argument.");let n=null;const a=r.expectedType;a&&a.kind!=="value"&&(n=a);const c=[];for(const p of e.slice(1)){const A=r.parse(p,1+c.length,n,void 0,{typeAnnotation:"omit"});if(!A)return null;n=n||A.type,c.push(A)}const h=a&&c.some(p=>Ms(a,p.type));return new Ls(h?Gt:n,c)}evaluate(e){let r,n=null,a=0;for(const c of this.args){if(a++,n=c.evaluate(e),n&&n instanceof Mr&&!n.available&&(r||(r=n),n=null,a===this.args.length))return r;if(n!==null)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(r=>{e.push(r.serialize())}),e}}class Ps{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let c=1;c<e.length-1;c+=2){const h=e[c];if(typeof h!="string")return r.error(`Expected string, but found ${typeof h} instead.`,c);if(/[^a-zA-Z0-9_]/.test(h))return r.error("Variable names must contain only alphanumeric characters or '_'.",c);const p=r.parse(e[c+1],c+1);if(!p)return null;n.push([h,p])}const a=r.parse(e[e.length-1],e.length-1,r.expectedType,n);return a?new Ps(n,a):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[r,n]of this.bindings)e.push(r,n.serialize());return e.push(this.result.serialize()),e}}class Ul{constructor(e,r,n){this.type=e,this.index=r,this.input=n}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,qe),a=r.parse(e[2],2,Gr(r.expectedType||Gt));return n&&a?new Ul(a.type.itemType,n,a):null}evaluate(e){const r=this.index.evaluate(e),n=this.input.evaluate(e);if(r<0)throw new tr(`Array index out of bounds: ${r} < 0.`);if(r>=n.length)throw new tr(`Array index out of bounds: ${r} > ${n.length-1}.`);if(r!==Math.floor(r))throw new tr(`Array index must be an integer, but found ${r} instead.`);return n[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Sa{constructor(e,r){this.type=Rt,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,Gt),a=r.parse(e[2],2,Gt);return n&&a?_a(n.type,[Rt,Ut,qe,vn,Gt])?new Sa(n,a):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ci(n.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(n==null)return!1;if(!Fo(r,["boolean","string","number","null"]))throw new tr(`Expected first argument to be of type boolean, string, number or null, but found ${Ci(Ri(r))} instead.`);if(!Fo(n,["string","array"]))throw new tr(`Expected second argument to be of type array or string, but found ${Ci(Ri(n))} instead.`);return n.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class za{constructor(e,r,n){this.type=qe,this.needle=e,this.haystack=r,this.fromIndex=n}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,Gt),a=r.parse(e[2],2,Gt);if(!n||!a)return null;if(!_a(n.type,[Rt,Ut,qe,vn,Gt]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ci(n.type)} instead`);if(e.length===4){const c=r.parse(e[3],3,qe);return c?new za(n,a,c):null}return new za(n,a)}evaluate(e){const r=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Fo(r,["boolean","string","number","null"]))throw new tr(`Expected first argument to be of type boolean, string, number or null, but found ${Ci(Ri(r))} instead.`);if(!Fo(n,["string","array"]))throw new tr(`Expected second argument to be of type array or string, but found ${Ci(Ri(n))} instead.`);if(this.fromIndex){const a=this.fromIndex.evaluate(e);return n.indexOf(r,a)}return n.indexOf(r)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Ba{constructor(e,r,n,a,c,h){this.inputType=e,this.type=r,this.input=n,this.cases=a,this.outputs=c,this.otherwise=h}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let n,a;r.expectedType&&r.expectedType.kind!=="value"&&(a=r.expectedType);const c={},h=[];for(let y=2;y<e.length-1;y+=2){let v=e[y];const w=e[y+1];Array.isArray(v)||(v=[v]);const T=r.concat(y);if(v.length===0)return T.error("Expected at least one branch label.");for(const k of v){if(typeof k!="number"&&typeof k!="string")return T.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return T.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return T.error("Numeric branch labels must be integer values.");if(n){if(T.checkSubtype(n,Ri(k)))return null}else n=Ri(k);if(c[String(k)]!==void 0)return T.error("Branch labels must be unique.");c[String(k)]=h.length}const S=r.parse(w,y,a);if(!S)return null;a=a||S.type,h.push(S)}const p=r.parse(e[1],1,Gt);if(!p)return null;const A=r.parse(e[e.length-1],e.length-1,a);return A?p.type.kind!=="value"&&r.concat(1).checkSubtype(n,p.type)?null:new Ba(n,a,p,c,h,A):null}evaluate(e){const r=this.input.evaluate(e);return(Ri(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),n=[],a={};for(const h of r){const p=a[this.cases[h]];p===void 0?(a[this.cases[h]]=n.length,n.push([this.cases[h],[h]])):n[p][1].push(h)}const c=h=>this.inputType.kind==="number"?Number(h):h;for(const[h,p]of n)e.push(p.length===1?c(p[0]):p.map(c)),e.push(this.outputs[h].serialize());return e.push(this.otherwise.serialize()),e}}class ka{constructor(e,r,n){this.type=e,this.branches=r,this.otherwise=n}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let n;r.expectedType&&r.expectedType.kind!=="value"&&(n=r.expectedType);const a=[];for(let h=1;h<e.length-1;h+=2){const p=r.parse(e[h],h,Rt);if(!p)return null;const A=r.parse(e[h+1],h+1,n);if(!A)return null;a.push([p,A]),n=n||A.type}const c=r.parse(e[e.length-1],e.length-1,n);return c?new ka(n,a,c):null}evaluate(e){for(const[r,n]of this.branches)if(r.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,n]of this.branches)e(r),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(r=>{e.push(r.serialize())}),e}}class La{constructor(e,r,n,a){this.type=e,this.input=r,this.beginIndex=n,this.endIndex=a}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=r.parse(e[1],1,Gt),a=r.parse(e[2],2,qe);if(!n||!a)return null;if(!_a(n.type,[Gr(Gt),Ut,Gt]))return r.error(`Expected first argument to be of type array or string, but found ${Ci(n.type)} instead`);if(e.length===4){const c=r.parse(e[3],3,qe);return c?new La(n.type,n,a,c):null}return new La(n.type,n,a)}evaluate(e){const r=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Fo(r,["string","array"]))throw new tr(`Expected first argument to be of type array or string, but found ${Ci(Ri(r))} instead.`);if(this.endIndex){const a=this.endIndex.evaluate(e);return r.slice(n,a)}return r.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function wu(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Cu(i,e,r,n){return n.compare(e,r)===0}function Qo(i,e,r){const n=i!=="=="&&i!=="!=";return class Qg{constructor(c,h,p){this.type=Rt,this.lhs=c,this.rhs=h,this.collator=p,this.hasUntypedArgument=c.type.kind==="value"||h.type.kind==="value"}static parse(c,h){if(c.length!==3&&c.length!==4)return h.error("Expected two or three arguments.");const p=c[0];let A=h.parse(c[1],1,Gt);if(!A)return null;if(!wu(p,A.type))return h.concat(1).error(`"${p}" comparisons are not supported for type '${Ci(A.type)}'.`);let y=h.parse(c[2],2,Gt);if(!y)return null;if(!wu(p,y.type))return h.concat(2).error(`"${p}" comparisons are not supported for type '${Ci(y.type)}'.`);if(A.type.kind!==y.type.kind&&A.type.kind!=="value"&&y.type.kind!=="value")return h.error(`Cannot compare types '${Ci(A.type)}' and '${Ci(y.type)}'.`);n&&(A.type.kind==="value"&&y.type.kind!=="value"?A=new nn(y.type,[A]):A.type.kind!=="value"&&y.type.kind==="value"&&(y=new nn(A.type,[y])));let v=null;if(c.length===4){if(A.type.kind!=="string"&&y.type.kind!=="string"&&A.type.kind!=="value"&&y.type.kind!=="value")return h.error("Cannot use collator to compare non-string types.");if(v=h.parse(c[3],3,Ao),!v)return null}return new Qg(A,y,v)}evaluate(c){const h=this.lhs.evaluate(c),p=this.rhs.evaluate(c);if(n&&this.hasUntypedArgument){const A=Ri(h),y=Ri(p);if(A.kind!==y.kind||A.kind!=="string"&&A.kind!=="number")throw new tr(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${A.kind}, ${y.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const A=Ri(h),y=Ri(p);if(A.kind!=="string"||y.kind!=="string")return e(c,h,p)}return this.collator?r(c,h,p,this.collator.evaluate(c)):e(c,h,p)}eachChild(c){c(this.lhs),c(this.rhs),this.collator&&c(this.collator)}outputDefined(){return!0}serialize(){const c=[i];return this.eachChild(h=>{c.push(h.serialize())}),c}}}const xd=Qo("==",function(i,e,r){return e===r},Cu),vd=Qo("!=",function(i,e,r){return e!==r},function(i,e,r,n){return!Cu(0,e,r,n)}),Tu=Qo("<",function(i,e,r){return e<r},function(i,e,r,n){return n.compare(e,r)<0}),bd=Qo(">",function(i,e,r){return e>r},function(i,e,r,n){return n.compare(e,r)>0}),wd=Qo("<=",function(i,e,r){return e<=r},function(i,e,r,n){return n.compare(e,r)<=0}),Cd=Qo(">=",function(i,e,r){return e>=r},function(i,e,r,n){return n.compare(e,r)>=0});class Zl{constructor(e,r,n,a,c){this.type=Ut,this.number=e,this.locale=r,this.currency=n,this.minFractionDigits=a,this.maxFractionDigits=c}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const n=r.parse(e[1],1,qe);if(!n)return null;const a=e[2];if(typeof a!="object"||Array.isArray(a))return r.error("NumberFormat options argument must be an object.");let c=null;if(a.locale&&(c=r.parse(a.locale,1,Ut),!c))return null;let h=null;if(a.currency&&(h=r.parse(a.currency,1,Ut),!h))return null;let p=null;if(a["min-fraction-digits"]&&(p=r.parse(a["min-fraction-digits"],1,qe),!p))return null;let A=null;return a["max-fraction-digits"]&&(A=r.parse(a["max-fraction-digits"],1,qe),!A)?null:new Zl(n,c,h,p,A)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Pa{constructor(e){this.type=qe,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=r.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${Ci(n.type)} instead.`):new Pa(n):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new tr(`Expected value to be of type string or array, but found ${Ci(Ri(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(r=>{e.push(r.serialize())}),e}}const yo={"==":xd,"!=":vd,">":bd,"<":Tu,">=":Cd,"<=":wd,array:nn,at:Ul,boolean:nn,case:ka,coalesce:Ls,collator:va,format:Uo,image:Zo,in:Sa,"index-of":za,interpolate:Ir,"interpolate-hcl":Ir,"interpolate-lab":Ir,length:Pa,let:Ps,literal:wn,match:Ba,number:nn,"number-format":Zl,object:nn,slice:La,step:zs,string:nn,"to-boolean":on,"to-color":on,"to-number":on,"to-string":on,var:_o,within:go};function jl(i,[e,r,n,a]){e=e.evaluate(i),r=r.evaluate(i),n=n.evaluate(i);const c=a?a.evaluate(i):1,h=rn(e,r,n,c);if(h)throw new tr(h);return new $t(e/255*c,r/255*c,n/255*c,c)}function Mu(i,e){return i in e}function Ql(i,e){const r=e[i];return r===void 0?null:r}function Gn(i){return{type:i}}function Yl(i){return{result:"success",value:i}}function xo(i){return{result:"error",value:i}}function Yo(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Eu(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Hl(i){return!!i.expression&&i.expression.interpolated}function li(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function vo(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Iu(i){return i}function ql(i,e){const r=e.type==="color",n=i.stops&&typeof i.stops[0][0]=="object",a=n||!(n||i.property!==void 0),c=i.type||(Hl(e)?"exponential":"interval");if(r&&((i=ti({},i)).stops&&(i.stops=i.stops.map(y=>[y[0],$t.parse(y[1])])),i.default=$t.parse(i.default?i.default:e.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!Vl[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let h,p,A;if(c==="exponential")h=Wl;else if(c==="interval")h=Md;else if(c==="categorical"){h=Td,p=Object.create(null);for(const y of i.stops)p[y[0]]=y[1];A=typeof i.stops[0][0]}else{if(c!=="identity")throw new Error(`Unknown function type "${c}"`);h=Du}if(n){const y={},v=[];for(let S=0;S<i.stops.length;S++){const k=i.stops[S],N=k[0].zoom;y[N]===void 0&&(y[N]={zoom:N,type:i.type,property:i.property,default:i.default,stops:[]},v.push(N)),y[N].stops.push([k[0].value,k[1]])}const w=[];for(const S of v)w.push([y[S].zoom,ql(y[S],e)]);const T={name:"linear"};return{kind:"composite",interpolationType:T,interpolationFactor:Ir.interpolationFactor.bind(void 0,T),zoomStops:w.map(S=>S[0]),evaluate:({zoom:S},k)=>Wl({stops:w,base:i.base},e,S).evaluate(S,k)}}if(a){const y=c==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:y,interpolationFactor:Ir.interpolationFactor.bind(void 0,y),zoomStops:i.stops.map(v=>v[0]),evaluate:({zoom:v})=>h(i,e,v,p,A)}}return{kind:"source",evaluate(y,v){const w=v&&v.properties?v.properties[i.property]:void 0;return w===void 0?Rs(i.default,e.default):h(i,e,w,p,A)}}}function Rs(i,e,r){return i!==void 0?i:e!==void 0?e:r!==void 0?r:void 0}function Td(i,e,r,n,a){return Rs(typeof r===a?n[r]:void 0,i.default,e.default)}function Md(i,e,r){if(li(r)!=="number")return Rs(i.default,e.default);const n=i.stops.length;if(n===1||r<=i.stops[0][0])return i.stops[0][1];if(r>=i.stops[n-1][0])return i.stops[n-1][1];const a=Ss(i.stops.map(c=>c[0]),r);return i.stops[a][1]}function Wl(i,e,r){const n=i.base!==void 0?i.base:1;if(li(r)!=="number")return Rs(i.default,e.default);const a=i.stops.length;if(a===1||r<=i.stops[0][0])return i.stops[0][1];if(r>=i.stops[a-1][0])return i.stops[a-1][1];const c=Ss(i.stops.map(v=>v[0]),r),h=function(v,w,T,S){const k=S-T,N=v-T;return k===0?0:w===1?N/k:(Math.pow(w,N)-1)/(Math.pow(w,k)-1)}(r,n,i.stops[c][0],i.stops[c+1][0]),p=i.stops[c][1],A=i.stops[c+1][1];let y=Ma[e.type]||Iu;if(i.colorSpace&&i.colorSpace!=="rgb"){const v=Vl[i.colorSpace];y=(w,T)=>v.reverse(v.interpolate(v.forward(w),v.forward(T),h))}return typeof p.evaluate=="function"?{evaluate(...v){const w=p.evaluate.apply(void 0,v),T=A.evaluate.apply(void 0,v);if(w!==void 0&&T!==void 0)return y(w,T,h)}}:y(p,A,h)}function Du(i,e,r){return e.type==="color"?r=$t.parse(r):e.type==="formatted"?r=Vi.fromString(r.toString()):e.type==="resolvedImage"?r=Mr.fromString(r.toString()):li(r)===e.type||e.type==="enum"&&e.values[r]||(r=void 0),Rs(r,i.default,e.default)}Er.register(yo,{error:[{kind:"error"},[Ut],(i,[e])=>{throw new tr(e.evaluate(i))}],typeof:[Ut,[Gt],(i,[e])=>Ci(Ri(e.evaluate(i)))],"to-rgba":[Gr(qe,4),[fn],(i,[e])=>e.evaluate(i).toArray()],rgb:[fn,[qe,qe,qe],jl],rgba:[fn,[qe,qe,qe,qe],jl],has:{type:Rt,overloads:[[[Ut],(i,[e])=>Mu(e.evaluate(i),i.properties())],[[Ut,mo],(i,[e,r])=>Mu(e.evaluate(i),r.evaluate(i))]]},get:{type:Gt,overloads:[[[Ut],(i,[e])=>Ql(e.evaluate(i),i.properties())],[[Ut,mo],(i,[e,r])=>Ql(e.evaluate(i),r.evaluate(i))]]},"feature-state":[Gt,[Ut],(i,[e])=>Ql(e.evaluate(i),i.featureState||{})],properties:[mo,[],i=>i.properties()],"geometry-type":[Ut,[],i=>i.geometryType()],id:[Gt,[],i=>i.id()],zoom:[qe,[],i=>i.globals.zoom],pitch:[qe,[],i=>i.globals.pitch||0],"distance-from-center":[qe,[],i=>i.distanceFromCenter()],"heatmap-density":[qe,[],i=>i.globals.heatmapDensity||0],"line-progress":[qe,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[qe,[],i=>i.globals.skyRadialProgress||0],accumulated:[Gt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[qe,Gn(qe),(i,e)=>{let r=0;for(const n of e)r+=n.evaluate(i);return r}],"*":[qe,Gn(qe),(i,e)=>{let r=1;for(const n of e)r*=n.evaluate(i);return r}],"-":{type:qe,overloads:[[[qe,qe],(i,[e,r])=>e.evaluate(i)-r.evaluate(i)],[[qe],(i,[e])=>-e.evaluate(i)]]},"/":[qe,[qe,qe],(i,[e,r])=>e.evaluate(i)/r.evaluate(i)],"%":[qe,[qe,qe],(i,[e,r])=>e.evaluate(i)%r.evaluate(i)],ln2:[qe,[],()=>Math.LN2],pi:[qe,[],()=>Math.PI],e:[qe,[],()=>Math.E],"^":[qe,[qe,qe],(i,[e,r])=>Math.pow(e.evaluate(i),r.evaluate(i))],sqrt:[qe,[qe],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[qe,[qe],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[qe,[qe],(i,[e])=>Math.log(e.evaluate(i))],log2:[qe,[qe],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[qe,[qe],(i,[e])=>Math.sin(e.evaluate(i))],cos:[qe,[qe],(i,[e])=>Math.cos(e.evaluate(i))],tan:[qe,[qe],(i,[e])=>Math.tan(e.evaluate(i))],asin:[qe,[qe],(i,[e])=>Math.asin(e.evaluate(i))],acos:[qe,[qe],(i,[e])=>Math.acos(e.evaluate(i))],atan:[qe,[qe],(i,[e])=>Math.atan(e.evaluate(i))],min:[qe,Gn(qe),(i,e)=>Math.min(...e.map(r=>r.evaluate(i)))],max:[qe,Gn(qe),(i,e)=>Math.max(...e.map(r=>r.evaluate(i)))],abs:[qe,[qe],(i,[e])=>Math.abs(e.evaluate(i))],round:[qe,[qe],(i,[e])=>{const r=e.evaluate(i);return r<0?-Math.round(-r):Math.round(r)}],floor:[qe,[qe],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[qe,[qe],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[Rt,[Ut,Gt],(i,[e,r])=>i.properties()[e.value]===r.value],"filter-id-==":[Rt,[Gt],(i,[e])=>i.id()===e.value],"filter-type-==":[Rt,[Ut],(i,[e])=>i.geometryType()===e.value],"filter-<":[Rt,[Ut,Gt],(i,[e,r])=>{const n=i.properties()[e.value],a=r.value;return typeof n==typeof a&&n<a}],"filter-id-<":[Rt,[Gt],(i,[e])=>{const r=i.id(),n=e.value;return typeof r==typeof n&&r<n}],"filter->":[Rt,[Ut,Gt],(i,[e,r])=>{const n=i.properties()[e.value],a=r.value;return typeof n==typeof a&&n>a}],"filter-id->":[Rt,[Gt],(i,[e])=>{const r=i.id(),n=e.value;return typeof r==typeof n&&r>n}],"filter-<=":[Rt,[Ut,Gt],(i,[e,r])=>{const n=i.properties()[e.value],a=r.value;return typeof n==typeof a&&n<=a}],"filter-id-<=":[Rt,[Gt],(i,[e])=>{const r=i.id(),n=e.value;return typeof r==typeof n&&r<=n}],"filter->=":[Rt,[Ut,Gt],(i,[e,r])=>{const n=i.properties()[e.value],a=r.value;return typeof n==typeof a&&n>=a}],"filter-id->=":[Rt,[Gt],(i,[e])=>{const r=i.id(),n=e.value;return typeof r==typeof n&&r>=n}],"filter-has":[Rt,[Gt],(i,[e])=>e.value in i.properties()],"filter-has-id":[Rt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Rt,[Gr(Ut)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[Rt,[Gr(Gt)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[Rt,[Ut,Gr(Gt)],(i,[e,r])=>r.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[Rt,[Ut,Gr(Gt)],(i,[e,r])=>function(n,a,c,h){for(;c<=h;){const p=c+h>>1;if(a[p]===n)return!0;a[p]>n?h=p-1:c=p+1}return!1}(i.properties()[e.value],r.value,0,r.value.length-1)],all:{type:Rt,overloads:[[[Rt,Rt],(i,[e,r])=>e.evaluate(i)&&r.evaluate(i)],[Gn(Rt),(i,e)=>{for(const r of e)if(!r.evaluate(i))return!1;return!0}]]},any:{type:Rt,overloads:[[[Rt,Rt],(i,[e,r])=>e.evaluate(i)||r.evaluate(i)],[Gn(Rt),(i,e)=>{for(const r of e)if(r.evaluate(i))return!0;return!1}]]},"!":[Rt,[Rt],(i,[e])=>!e.evaluate(i)],"is-supported-script":[Rt,[Ut],(i,[e])=>{const r=i.globals&&i.globals.isSupportedScript;return!r||r(e.evaluate(i))}],upcase:[Ut,[Ut],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[Ut,[Ut],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[Ut,Gn(Gt),(i,e)=>e.map(r=>bn(r.evaluate(i))).join("")],"resolved-locale":[Ut,[Ao],(i,[e])=>e.evaluate(i).resolvedLocale()]});class Ra{constructor(e,r){this.expression=e,this._warningHistory={},this._evaluator=new du,this._defaultValue=r?function(n){return n.type==="color"&&vo(n.default)?new $t(0,0,0,0):n.type==="color"?$t.parse(n.default)||null:n.default===void 0?null:n.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(e,r,n,a,c,h,p,A){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=n,this._evaluator.canonical=a||null,this._evaluator.availableImages=c||null,this._evaluator.formattedSection=h,this._evaluator.featureTileCoord=p||null,this._evaluator.featureDistanceData=A||null,this.expression.evaluate(this._evaluator)}evaluate(e,r,n,a,c,h,p,A){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=n||null,this._evaluator.canonical=a||null,this._evaluator.availableImages=c||null,this._evaluator.formattedSection=h||null,this._evaluator.featureTileCoord=p||null,this._evaluator.featureDistanceData=A||null;try{const y=this.expression.evaluate(this._evaluator);if(y==null||typeof y=="number"&&y!=y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new tr(`Expected value to be one of ${Object.keys(this._enumValues).map(v=>JSON.stringify(v)).join(", ")}, but found ${JSON.stringify(y)} instead.`);return y}catch(y){return this._warningHistory[y.message]||(this._warningHistory[y.message]=!0,typeof console!="undefined"&&console.warn(y.message)),this._defaultValue}}}function Ho(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in yo}function Ns(i,e){const r=new Nn(yo,[],e?function(a){const c={color:fn,string:Ut,number:qe,enum:Ut,boolean:Rt,formatted:Go,resolvedImage:pr};return a.type==="array"?Gr(c[a.value]||Gt,a.length):c[a.type]}(e):void 0),n=r.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?Yl(new Ra(n,e)):xo(r.errors)}class Kl{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!Is(r.expression)}evaluateWithoutErrorHandling(e,r,n,a,c,h){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,a,c,h)}evaluate(e,r,n,a,c,h){return this._styleExpression.evaluate(e,r,n,a,c,h)}}class Xl{constructor(e,r,n,a){this.kind=e,this.zoomStops=n,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Is(r.expression),this.interpolationType=a}evaluateWithoutErrorHandling(e,r,n,a,c,h){return this._styleExpression.evaluateWithoutErrorHandling(e,r,n,a,c,h)}evaluate(e,r,n,a,c,h){return this._styleExpression.evaluate(e,r,n,a,c,h)}interpolationFactor(e,r,n){return this.interpolationType?Ir.interpolationFactor(this.interpolationType,e,r,n):0}}function Su(i,e){if((i=Ns(i,e)).result==="error")return i;const r=i.value.expression,n=yr(r);if(!n&&!Yo(e))return xo([new ii("","data expressions not supported")]);const a=Ds(r,["zoom","pitch","distance-from-center"]);if(!a&&!Eu(e))return xo([new ii("","zoom expressions not supported")]);const c=Oa(r);return c||a?c instanceof ii?xo([c]):c instanceof Ir&&!Hl(e)?xo([new ii("",'"interpolate" expressions cannot be used with this property')]):Yl(c?new Xl(n?"camera":"composite",i.value,c.labels,c instanceof Ir?c.interpolation:void 0):new Kl(n?"constant":"source",i.value)):xo([new ii("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Na{constructor(e,r){this._parameters=e,this._specification=r,ti(this,ql(this._parameters,this._specification))}static deserialize(e){return new Na(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Oa(i){let e=null;if(i instanceof Ps)e=Oa(i.result);else if(i instanceof Ls){for(const r of i.args)if(e=Oa(r),e)break}else(i instanceof zs||i instanceof Ir)&&i.input instanceof Er&&i.input.name==="zoom"&&(e=i);return e instanceof ii||i.eachChild(r=>{const n=Oa(r);n instanceof ii?e=n:!e&&n?e=new ii("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new ii("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class Je{constructor(e,r,n,a){this.message=(e?`${e}: `:"")+n,a&&(this.identifier=a),r!=null&&r.__line__&&(this.line=r.__line__)}}function Fr(i){const e=i.key,r=i.value,n=i.valueSpec||{},a=i.objectElementValidators||{},c=i.style,h=i.styleSpec;let p=[];const A=li(r);if(A!=="object")return[new Je(e,r,`object expected, ${A} found`)];for(const y in r){const v=y.split(".")[0],w=n[v]||n["*"];let T;a[v]?T=a[v]:n[v]?T=Qi:a["*"]?T=a["*"]:n["*"]&&(T=Qi),T?p=p.concat(T({key:(e&&`${e}.`)+y,value:r[y],valueSpec:w,style:c,styleSpec:h,object:r,objectKey:y},r)):p.push(new Je(e,r[y],`unknown property "${y}"`))}for(const y in n)a[y]||n[y].required&&n[y].default===void 0&&r[y]===void 0&&p.push(new Je(e,r,`missing required property "${y}"`));return p}function Os(i){const e=i.value,r=i.valueSpec,n=i.style,a=i.styleSpec,c=i.key,h=i.arrayElementValidator||Qi;if(li(e)!=="array")return[new Je(c,e,`array expected, ${li(e)} found`)];if(r.length&&e.length!==r.length)return[new Je(c,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new Je(c,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let p={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};a.$version<7&&(p.function=r.function),li(r.value)==="object"&&(p=r.value);let A=[];for(let y=0;y<e.length;y++)A=A.concat(h({array:e,arrayIndex:y,value:e[y],valueSpec:p,style:n,styleSpec:a,key:`${c}[${y}]`}));return A}function zu(i){const e=i.key,r=i.value,n=i.valueSpec;let a=li(r);if(a==="number"&&r!=r&&(a="NaN"),a!=="number")return[new Je(e,r,`number expected, ${a} found`)];if("minimum"in n){let c=n.minimum;if(li(n.minimum)==="array"&&(c=n.minimum[i.arrayIndex]),r<c)return[new Je(e,r,`${r} is less than the minimum value ${c}`)]}if("maximum"in n){let c=n.maximum;if(li(n.maximum)==="array"&&(c=n.maximum[i.arrayIndex]),r>c)return[new Je(e,r,`${r} is greater than the maximum value ${c}`)]}return[]}function Bu(i){const e=i.valueSpec,r=at(i.value.type);let n,a,c,h={};const p=r!=="categorical"&&i.value.property===void 0,A=!p,y=li(i.value.stops)==="array"&&li(i.value.stops[0])==="array"&&li(i.value.stops[0][0])==="object",v=Fr({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(S){if(r==="identity")return[new Je(S.key,S.value,'identity function may not have a "stops" property')];let k=[];const N=S.value;return k=k.concat(Os({key:S.key,value:N,valueSpec:S.valueSpec,style:S.style,styleSpec:S.styleSpec,arrayElementValidator:w})),li(N)==="array"&&N.length===0&&k.push(new Je(S.key,N,"array must have at least one stop")),k},default:function(S){return Qi({key:S.key,value:S.value,valueSpec:e,style:S.style,styleSpec:S.styleSpec})}}});return r==="identity"&&p&&v.push(new Je(i.key,i.value,'missing required property "property"')),r==="identity"||i.value.stops||v.push(new Je(i.key,i.value,'missing required property "stops"')),r==="exponential"&&i.valueSpec.expression&&!Hl(i.valueSpec)&&v.push(new Je(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(A&&!Yo(i.valueSpec)?v.push(new Je(i.key,i.value,"property functions not supported")):p&&!Eu(i.valueSpec)&&v.push(new Je(i.key,i.value,"zoom functions not supported"))),r!=="categorical"&&!y||i.value.property!==void 0||v.push(new Je(i.key,i.value,'"property" property is required')),v;function w(S){let k=[];const N=S.value,F=S.key;if(li(N)!=="array")return[new Je(F,N,`array expected, ${li(N)} found`)];if(N.length!==2)return[new Je(F,N,`array length 2 expected, length ${N.length} found`)];if(y){if(li(N[0])!=="object")return[new Je(F,N,`object expected, ${li(N[0])} found`)];if(N[0].zoom===void 0)return[new Je(F,N,"object stop key must have zoom")];if(N[0].value===void 0)return[new Je(F,N,"object stop key must have value")];const Q=at(N[0].zoom);if(typeof Q!="number")return[new Je(F,N[0].zoom,"stop zoom values must be numbers")];if(c&&c>Q)return[new Je(F,N[0].zoom,"stop zoom values must appear in ascending order")];Q!==c&&(c=Q,a=void 0,h={}),k=k.concat(Fr({key:`${F}[0]`,value:N[0],valueSpec:{zoom:{}},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{zoom:zu,value:T}}))}else k=k.concat(T({key:`${F}[0]`,value:N[0],valueSpec:{},style:S.style,styleSpec:S.styleSpec},N));return Ho(Jt(N[1]))?k.concat([new Je(`${F}[1]`,N[1],"expressions are not allowed in function stops.")]):k.concat(Qi({key:`${F}[1]`,value:N[1],valueSpec:e,style:S.style,styleSpec:S.styleSpec}))}function T(S,k){const N=li(S.value),F=at(S.value),Q=S.value!==null?S.value:k;if(n){if(N!==n)return[new Je(S.key,Q,`${N} stop domain type must match previous stop domain type ${n}`)]}else n=N;if(N!=="number"&&N!=="string"&&N!=="boolean"&&typeof F!="number"&&typeof F!="string"&&typeof F!="boolean")return[new Je(S.key,Q,"stop domain value must be a number, string, or boolean")];if(N!=="number"&&r!=="categorical"){let ie=`number expected, ${N} found`;return Yo(e)&&r===void 0&&(ie+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Je(S.key,Q,ie)]}return r!=="categorical"||N!=="number"||typeof F=="number"&&isFinite(F)&&Math.floor(F)===F?r!=="categorical"&&N==="number"&&typeof F=="number"&&typeof a=="number"&&a!==void 0&&F<a?[new Je(S.key,Q,"stop domain values must appear in ascending order")]:(a=F,r==="categorical"&&F in h?[new Je(S.key,Q,"stop domain values must be unique")]:(h[F]=!0,[])):[new Je(S.key,Q,`integer expected, found ${String(F)}`)]}}function qo(i){const e=(i.expressionContext==="property"?Su:Ns)(Jt(i.value),i.valueSpec);if(e.result==="error")return e.value.map(n=>new Je(`${i.key}${n.key}`,i.value,n.message));const r=e.value.expression||e.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!r.outputDefined())return[new Je(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!Is(r))return[new Je(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter")return Cn(r,i);if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!Ds(r,["zoom","feature-state"]))return[new Je(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!yr(r))return[new Je(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cn(i,e){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const a of e.valueSpec.expression.parameters)r.delete(a);if(r.size===0)return[];const n=[];return i instanceof Er&&r.has(i.name)?[new Je(e.key,e.value,`["${i.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(i.eachChild(a=>{n.push(...Cn(a,e))}),n)}function Gs(i){const e=i.key,r=i.value,n=i.valueSpec,a=[];return Array.isArray(n.values)?n.values.indexOf(at(r))===-1&&a.push(new Je(e,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(n.values).indexOf(at(r))===-1&&a.push(new Je(e,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),a}function Fn(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!Fn(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Vn(i,e="fill"){if(i==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Fn(i)||(i=Fs(i));const r=i;let n=!0;try{n=function(y){if(!Un(y))return y;let v=Jt(y);return ku(v),v=Jl(v),v}(r)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(r,null,2)}
        `)}const a=ye[`filter_${e}`],c=Ns(n,a);let h=null;if(c.result==="error")throw new Error(c.value.map(y=>`${y.key}: ${y.message}`).join(", "));h=(y,v,w)=>c.value.evaluate(y,v,{},w);let p=null,A=null;if(n!==r){const y=Ns(r,a);if(y.result==="error")throw new Error(y.value.map(v=>`${v.key}: ${v.message}`).join(", "));p=(v,w,T,S,k)=>y.value.evaluate(v,w,{},T,void 0,void 0,S,k),A=!yr(y.value.expression)}return h=h,{filter:h,dynamicFilter:p||void 0,needGeometry:Ga(n),needFeature:!!A}}function Jl(i){if(!Array.isArray(i))return i;const e=function(r){if(Lu.has(r[0])){for(let n=1;n<r.length;n++)if(Un(r[n]))return!0}return r}(i);return e===!0?e:e.map(r=>Jl(r))}function ku(i){let e=!1;const r=[];if(i[0]==="case"){for(let n=1;n<i.length-1;n+=2)e=e||Un(i[n]),r.push(i[n+1]);r.push(i[i.length-1])}else if(i[0]==="match"){e=e||Un(i[1]);for(let n=2;n<i.length-1;n+=2)r.push(i[n+1]);r.push(i[i.length-1])}else if(i[0]==="step"){e=e||Un(i[1]);for(let n=1;n<i.length-1;n+=2)r.push(i[n+1])}e&&(i.length=0,i.push("any",...r));for(let n=1;n<i.length;n++)ku(i[n])}function Un(i){if(!Array.isArray(i))return!1;if((e=i[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let r=1;r<i.length;r++)if(Un(i[r]))return!0;return!1}const Lu=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function $l(i,e){return i<e?-1:i>e?1:0}function Ga(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let e=1;e<i.length;e++)if(Ga(i[e]))return!0;return!1}function Fs(i){if(!i)return!0;const e=i[0];return i.length<=1?e!=="any":e==="=="?Vs(i[1],i[2],"=="):e==="!="?Us(Vs(i[1],i[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Vs(i[1],i[2],e):e==="any"?(r=i.slice(1),["any"].concat(r.map(Fs))):e==="all"?["all"].concat(i.slice(1).map(Fs)):e==="none"?["all"].concat(i.slice(1).map(Fs).map(Us)):e==="in"?ec(i[1],i.slice(2)):e==="!in"?Us(ec(i[1],i.slice(2))):e==="has"?tc(i[1]):e==="!has"?Us(tc(i[1])):e!=="within"||i;var r}function Vs(i,e,r){switch(i){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,i,e]}}function ec(i,e){if(e.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",i,["literal",e.sort($l)]]:["filter-in-small",i,["literal",e]]}}function tc(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Us(i){return["!",i]}function Zn(i){return Fn(Jt(i.value))?qo(ti({},i,{expressionContext:"filter",valueSpec:i.styleSpec[`filter_${i.layerType||"fill"}`]})):ic(i)}function ic(i){const e=i.value,r=i.key;if(li(e)!=="array")return[new Je(r,e,`array expected, ${li(e)} found`)];const n=i.styleSpec;let a,c=[];if(e.length<1)return[new Je(r,e,"filter array must have at least 1 element")];switch(c=c.concat(Gs({key:`${r}[0]`,value:e[0],valueSpec:n.filter_operator,style:i.style,styleSpec:i.styleSpec})),at(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&at(e[1])==="$type"&&c.push(new Je(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&c.push(new Je(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(a=li(e[1]),a!=="string"&&c.push(new Je(`${r}[1]`,e[1],`string expected, ${a} found`)));for(let h=2;h<e.length;h++)a=li(e[h]),at(e[1])==="$type"?c=c.concat(Gs({key:`${r}[${h}]`,value:e[h],valueSpec:n.geometry_type,style:i.style,styleSpec:i.styleSpec})):a!=="string"&&a!=="number"&&a!=="boolean"&&c.push(new Je(`${r}[${h}]`,e[h],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let h=1;h<e.length;h++)c=c.concat(ic({key:`${r}[${h}]`,value:e[h],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":a=li(e[1]),e.length!==2?c.push(new Je(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):a!=="string"&&c.push(new Je(`${r}[1]`,e[1],`string expected, ${a} found`));break;case"within":a=li(e[1]),e.length!==2?c.push(new Je(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):a!=="object"&&c.push(new Je(`${r}[1]`,e[1],`object expected, ${a} found`))}return c}function rc(i,e){const r=i.key,n=i.style,a=i.styleSpec,c=i.value,h=i.objectKey,p=a[`${e}_${i.layerType}`];if(!p)return[];const A=h.match(/^(.*)-transition$/);if(e==="paint"&&A&&p[A[1]]&&p[A[1]].transition)return Qi({key:r,value:c,valueSpec:a.transition,style:n,styleSpec:a});const y=i.valueSpec||p[h];if(!y)return[new Je(r,c,`unknown property "${h}"`)];let v;if(li(c)==="string"&&Yo(y)&&!y.tokens&&(v=/^{([^}]+)}$/.exec(c)))return[new Je(r,c,`"${h}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(v[1])} }\`.`)];const w=[];return i.layerType==="symbol"&&(h==="text-field"&&n&&!n.glyphs&&w.push(new Je(r,c,'use of "text-field" requires a style "glyphs" property')),h==="text-font"&&vo(Jt(c))&&at(c.type)==="identity"&&w.push(new Je(r,c,'"text-font" does not support identity functions'))),w.concat(Qi({key:i.key,value:c,valueSpec:y,style:n,styleSpec:a,expressionContext:"property",propertyType:e,propertyKey:h}))}function Fa(i){return rc(i,"paint")}function nc(i){return rc(i,"layout")}function Pu(i){let e=[];const r=i.value,n=i.key,a=i.style,c=i.styleSpec;r.type||r.ref||e.push(new Je(n,r,'either "type" or "ref" is required'));let h=at(r.type);const p=at(r.ref);if(r.id){const A=at(r.id);for(let y=0;y<i.arrayIndex;y++){const v=a.layers[y];at(v.id)===A&&e.push(new Je(n,r.id,`duplicate layer id "${r.id}", previously used at line ${v.id.__line__}`))}}if("ref"in r){let A;["type","source","source-layer","filter","layout"].forEach(y=>{y in r&&e.push(new Je(n,r[y],`"${y}" is prohibited for ref layers`))}),a.layers.forEach(y=>{at(y.id)===p&&(A=y)}),A?A.ref?e.push(new Je(n,r.ref,"ref cannot reference another ref layer")):h=at(A.type):typeof p=="string"&&e.push(new Je(n,r.ref,`ref layer "${p}" not found`))}else if(h!=="background"&&h!=="sky")if(r.source){const A=a.sources&&a.sources[r.source],y=A&&at(A.type);A?y==="vector"&&h==="raster"?e.push(new Je(n,r.source,`layer "${r.id}" requires a raster source`)):y==="raster"&&h!=="raster"?e.push(new Je(n,r.source,`layer "${r.id}" requires a vector source`)):y!=="vector"||r["source-layer"]?y==="raster-dem"&&h!=="hillshade"?e.push(new Je(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):h!=="line"||!r.paint||!r.paint["line-gradient"]||y==="geojson"&&A.lineMetrics||e.push(new Je(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Je(n,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new Je(n,r.source,`source "${r.source}" not found`))}else e.push(new Je(n,r,'missing required property "source"'));return e=e.concat(Fr({key:n,value:r,valueSpec:c.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Qi({key:`${n}.type`,value:r.type,valueSpec:c.layer.type,style:i.style,styleSpec:i.styleSpec,object:r,objectKey:"type"}),filter:A=>Zn(ti({layerType:h},A)),layout:A=>Fr({layer:r,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":y=>nc(ti({layerType:h},y))}}),paint:A=>Fr({layer:r,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":y=>Fa(ti({layerType:h},y))}})}})),e}function Tn(i){const e=i.value,r=i.key,n=li(e);return n!=="string"?[new Je(r,e,`string expected, ${n} found`)]:[]}const Ru={promoteId:function({key:i,value:e}){if(li(e)==="string")return Tn({key:i,value:e});{const r=[];for(const n in e)r.push(...Tn({key:`${i}.${n}`,value:e[n]}));return r}}};function Nu(i){const e=i.value,r=i.key,n=i.styleSpec,a=i.style;if(!e.type)return[new Je(r,e,'"type" is required')];const c=at(e.type);let h;switch(c){case"vector":case"raster":case"raster-dem":return h=Fr({key:r,value:e,valueSpec:n[`source_${c.replace("-","_")}`],style:i.style,styleSpec:n,objectElementValidators:Ru}),h;case"geojson":if(h=Fr({key:r,value:e,valueSpec:n.source_geojson,style:a,styleSpec:n,objectElementValidators:Ru}),e.cluster)for(const p in e.clusterProperties){const[A,y]=e.clusterProperties[p],v=typeof A=="string"?[A,["accumulated"],["get",p]]:A;h.push(...qo({key:`${r}.${p}.map`,value:y,expressionContext:"cluster-map"})),h.push(...qo({key:`${r}.${p}.reduce`,value:v,expressionContext:"cluster-reduce"}))}return h;case"video":return Fr({key:r,value:e,valueSpec:n.source_video,style:a,styleSpec:n});case"image":return Fr({key:r,value:e,valueSpec:n.source_image,style:a,styleSpec:n});case"canvas":return[new Je(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gs({key:`${r}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,styleSpec:n})}}function Ou(i){const e=i.value,r=i.styleSpec,n=r.light,a=i.style;let c=[];const h=li(e);if(e===void 0)return c;if(h!=="object")return c=c.concat([new Je("light",e,`object expected, ${h} found`)]),c;for(const p in e){const A=p.match(/^(.*)-transition$/);c=c.concat(A&&n[A[1]]&&n[A[1]].transition?Qi({key:p,value:e[p],valueSpec:r.transition,style:a,styleSpec:r}):n[p]?Qi({key:p,value:e[p],valueSpec:n[p],style:a,styleSpec:r}):[new Je(p,e[p],`unknown property "${p}"`)])}return c}function Gu(i){const e=i.value,r=i.key,n=i.style,a=i.styleSpec,c=a.terrain;let h=[];const p=li(e);if(e===void 0)return h;if(p!=="object")return h=h.concat([new Je("terrain",e,`object expected, ${p} found`)]),h;for(const A in e){const y=A.match(/^(.*)-transition$/);h=h.concat(y&&c[y[1]]&&c[y[1]].transition?Qi({key:A,value:e[A],valueSpec:a.transition,style:n,styleSpec:a}):c[A]?Qi({key:A,value:e[A],valueSpec:c[A],style:n,styleSpec:a}):[new Je(A,e[A],`unknown property "${A}"`)])}if(e.source){const A=n.sources&&n.sources[e.source],y=A&&at(A.type);A?y!=="raster-dem"&&h.push(new Je(r,e.source,`terrain cannot be used with a source of type ${String(y)}, it only be used with a "raster-dem" source type`)):h.push(new Je(r,e.source,`source "${e.source}" not found`))}else h.push(new Je(r,e,'terrain is missing required property "source"'));return h}function Fu(i){const e=i.value,r=i.style,n=i.styleSpec,a=n.fog;let c=[];const h=li(e);if(e===void 0)return c;if(h!=="object")return c=c.concat([new Je("fog",e,`object expected, ${h} found`)]),c;for(const p in e){const A=p.match(/^(.*)-transition$/);c=c.concat(A&&a[A[1]]&&a[A[1]].transition?Qi({key:p,value:e[p],valueSpec:n.transition,style:r,styleSpec:n}):a[p]?Qi({key:p,value:e[p],valueSpec:a[p],style:r,styleSpec:n}):[new Je(p,e[p],`unknown property "${p}"`)])}return c}const Zs={"*":()=>[],array:Os,boolean:function(i){const e=i.value,r=i.key,n=li(e);return n!=="boolean"?[new Je(r,e,`boolean expected, ${n} found`)]:[]},number:zu,color:function(i){const e=i.key,r=i.value,n=li(r);return n!=="string"?[new Je(e,r,`color expected, ${n} found`)]:zl.parseCSSColor(r)===null?[new Je(e,r,`color expected, "${r}" found`)]:[]},enum:Gs,filter:Zn,function:Bu,layer:Pu,object:Fr,source:Nu,light:Ou,terrain:Gu,fog:Fu,string:Tn,formatted:function(i){return Tn(i).length===0?[]:qo(i)},resolvedImage:function(i){return Tn(i).length===0?[]:qo(i)},projection:function(i){const e=i.value,r=i.styleSpec,n=r.projection,a=i.style;let c=[];const h=li(e);if(h==="object")for(const p in e)c=c.concat(Qi({key:p,value:e[p],valueSpec:n[p],style:a,styleSpec:r}));else h!=="string"&&(c=c.concat([new Je("projection",e,`object or string expected, ${h} found`)]));return c}};function Qi(i){const e=i.value,r=i.valueSpec,n=i.styleSpec;return r.expression&&vo(at(e))?Bu(i):r.expression&&Ho(Jt(e))?qo(i):r.type&&Zs[r.type]?Zs[r.type](i):Fr(ti({},i,{valueSpec:r.type?n[r.type]:r}))}function Dr(i){const e=i.value,r=i.key,n=Tn(i);return n.length||(e.indexOf("{fontstack}")===-1&&n.push(new Je(r,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&n.push(new Je(r,e,'"glyphs" url must include a "{range}" token'))),n}function js(i,e=ye){return Mn(Qi({key:"",value:i,valueSpec:e.$root,styleSpec:e,style:i,objectElementValidators:{glyphs:Dr,"*":()=>[]}}))}const Ed=i=>Mn(Fa(i)),Id=i=>Mn(nc(i));function Mn(i){return i.slice().sort((e,r)=>e.line&&r.line?e.line-r.line:0)}function Vu(i,e){let r=!1;if(e&&e.length)for(const n of e)i.fire(new At(new Error(n.message))),r=!0;return r}var jn=mn;function mn(i,e,r){var n=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var a=new Int32Array(this.arrayBuffer);i=a[0],this.d=(e=a[1])+2*(r=a[2]);for(var c=0;c<this.d*this.d;c++){var h=a[3+c],p=a[3+c+1];n.push(h===p?null:a.subarray(h,p))}var A=a[3+n.length+1];this.keys=a.subarray(a[3+n.length],A),this.bboxes=a.subarray(A),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var y=0;y<this.d*this.d;y++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=i,this.padding=r,this.scale=e/i,this.uid=0;var v=r/e*i;this.min=-v,this.max=i+v}mn.prototype.insert=function(i,e,r,n,a){this._forEachCell(e,r,n,a,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(a)},mn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},mn.prototype._insertCell=function(i,e,r,n,a,c){this.cells[a].push(c)},mn.prototype.query=function(i,e,r,n,a){var c=this.min,h=this.max;if(i<=c&&e<=c&&h<=r&&h<=n&&!a)return Array.prototype.slice.call(this.keys);var p=[];return this._forEachCell(i,e,r,n,this._queryCell,p,{},a),p},mn.prototype._queryCell=function(i,e,r,n,a,c,h,p){var A=this.cells[a];if(A!==null)for(var y=this.keys,v=this.bboxes,w=0;w<A.length;w++){var T=A[w];if(h[T]===void 0){var S=4*T;(p?p(v[S+0],v[S+1],v[S+2],v[S+3]):i<=v[S+2]&&e<=v[S+3]&&r>=v[S+0]&&n>=v[S+1])?(h[T]=!0,c.push(y[T])):h[T]=!1}}},mn.prototype._forEachCell=function(i,e,r,n,a,c,h,p){for(var A=this._convertToCellCoord(i),y=this._convertToCellCoord(e),v=this._convertToCellCoord(r),w=this._convertToCellCoord(n),T=A;T<=v;T++)for(var S=y;S<=w;S++){var k=this.d*S+T;if((!p||p(this._convertFromCellCoord(T),this._convertFromCellCoord(S),this._convertFromCellCoord(T+1),this._convertFromCellCoord(S+1)))&&a.call(this,i,e,r,n,k,c,h,p))return}},mn.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},mn.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},mn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,e=3+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var a=new Int32Array(e+r+this.keys.length+this.bboxes.length);a[0]=this.extent,a[1]=this.n,a[2]=this.padding;for(var c=e,h=0;h<i.length;h++){var p=i[h];a[3+h]=c,a.set(p,c),c+=p.length}return a[3+i.length]=c,a.set(this.keys,c),a[3+i.length+1]=c+=this.keys.length,a.set(this.bboxes,c),c+=this.bboxes.length,a.buffer};const bo={};function tt(i,e={}){bo[i.name]={klass:i,omit:e.omit||[]}}tt(Object),jn.serialize=function(i,e){const r=i.toArrayBuffer();return e&&e.push(r),{buffer:r}},jn.deserialize=function(i){return new jn(i.buffer)},Object.defineProperty(jn,"name",{value:"Grid"}),tt(jn),tt($t),tt(Error),tt(z),tt(Mr),tt(Na),tt(Ra,{omit:["_evaluator"]}),tt(Xl),tt(Kl),tt(Er,{omit:["_evaluate"]});for(const i in yo)bo[yo[i].name]||tt(yo[i]);function Uu(i){return i&&typeof ArrayBuffer!="undefined"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Va(i){return Te.ImageBitmap&&i instanceof Te.ImageBitmap}function Qs(i,e){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(Uu(i)||Va(i))return e&&e.push(i),i;if(ArrayBuffer.isView(i)){const r=i;return e&&e.push(r.buffer),r}if(i instanceof Te.ImageData)return e&&e.push(i.data.buffer),i;if(Array.isArray(i)){const r=[];for(const n of i)r.push(Qs(n,e));return r}if(typeof i=="object"){const r=i.constructor,n=r.name;if(!bo[n])throw new Error(`can't serialize object of unregistered class ${n}`);const a=r.serialize?r.serialize(i,e):{};if(!r.serialize){for(const c in i)i.hasOwnProperty(c)&&(bo[n].omit.indexOf(c)>=0||(a[c]=Qs(i[c],e)));i instanceof Error&&(a.message=i.message)}if(a.$name)throw new Error("$name property is reserved for worker serialization logic.");return n!=="Object"&&(a.$name=n),a}throw new Error("can't serialize object of type "+typeof i)}function Wo(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||Uu(i)||Va(i)||ArrayBuffer.isView(i)||i instanceof Te.ImageData)return i;if(Array.isArray(i))return i.map(Wo);if(typeof i=="object"){const e=i.$name||"Object",{klass:r}=bo[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(i);const n=Object.create(r.prototype);for(const a of Object.keys(i))a!=="$name"&&(n[a]=Wo(i[a]));return n}throw new Error("can't deserialize object of type "+typeof i)}class oc{constructor(){this.first=!0}update(e,r){const n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=r),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}const Zu=i=>i>=1536&&i<=1791,Ua=i=>i>=1872&&i<=1919,Ys=i=>i>=2208&&i<=2303,sc=i=>i>=11904&&i<=12031,ju=i=>i>=12032&&i<=12255,ac=i=>i>=12272&&i<=12287,Za=i=>i>=12288&&i<=12351,Hs=i=>i>=12352&&i<=12447,ja=i=>i>=12448&&i<=12543,Qu=i=>i>=12544&&i<=12591,Yu=i=>i>=12704&&i<=12735,Hu=i=>i>=12736&&i<=12783,lc=i=>i>=12784&&i<=12799,qu=i=>i>=12800&&i<=13055,Wu=i=>i>=13056&&i<=13311,Ku=i=>i>=13312&&i<=19903,cc=i=>i>=19968&&i<=40959,Xu=i=>i>=40960&&i<=42127,Ju=i=>i>=42128&&i<=42191,$u=i=>i>=44032&&i<=55215,qs=i=>i>=63744&&i<=64255,uc=i=>i>=64336&&i<=65023,eh=i=>i>=65040&&i<=65055,Ko=i=>i>=65072&&i<=65103,th=i=>i>=65104&&i<=65135,Qa=i=>i>=65136&&i<=65279,hc=i=>i>=65280&&i<=65519;function Ya(i){for(const e of i)if(Ha(e.charCodeAt(0)))return!0;return!1}function ih(i){for(const e of i)if(!rh(e.charCodeAt(0)))return!1;return!0}function rh(i){return!(Zu(i)||Ua(i)||Ys(i)||uc(i)||Qa(i))}function Ha(i){return!(i!==746&&i!==747&&(i<4352||!(Yu(i)||Qu(i)||Ko(i)&&!(i>=65097&&i<=65103)||qs(i)||Wu(i)||sc(i)||Hu(i)||!(!Za(i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Ku(i)||cc(i)||qu(i)||(e=>e>=12592&&e<=12687)(i)||(e=>e>=43360&&e<=43391)(i)||(e=>e>=55216&&e<=55295)(i)||(e=>e>=4352&&e<=4607)(i)||$u(i)||Hs(i)||ac(i)||(e=>e>=12688&&e<=12703)(i)||ju(i)||lc(i)||ja(i)&&i!==12540||!(!hc(i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!th(i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||(e=>e>=5120&&e<=5759)(i)||(e=>e>=6320&&e<=6399)(i)||eh(i)||(e=>e>=19904&&e<=19967)(i)||Xu(i)||Ju(i))))}function qa(i){return!(Ha(i)||function(e){return!!((r=>r>=128&&r<=255)(e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||(r=>r>=8192&&r<=8303)(e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||(r=>r>=8448&&r<=8527)(e)||(r=>r>=8528&&r<=8591)(e)||(r=>r>=8960&&r<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||(r=>r>=9216&&r<=9279)(e)&&e!==9251||(r=>r>=9280&&r<=9311)(e)||(r=>r>=9312&&r<=9471)(e)||(r=>r>=9632&&r<=9727)(e)||(r=>r>=9728&&r<=9983)(e)&&!(e>=9754&&e<=9759)||(r=>r>=11008&&r<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Za(e)||ja(e)||(r=>r>=57344&&r<=63743)(e)||Ko(e)||th(e)||hc(e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(i))}function Wa(i){return i>=1424&&i<=2303||uc(i)||Qa(i)}function Dd(i,e){return!(!e&&Wa(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||(r=>r>=6016&&r<=6143)(i))}function Sd(i){for(const e of i)if(Wa(e.charCodeAt(0)))return!0;return!1}const dc="deferred",Ws="loading",pc="loaded";let fc=null,xr="unavailable",Sr=null;const Ks=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(xr="error"),fc&&fc(i)};function wo(){mc.fire(new mt("pluginStateChange",{pluginStatus:xr,pluginURL:Sr}))}const mc=new Ct,Ka=function(){return xr},Xo=function(){if(xr!==dc||!Sr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xr=Ws,wo(),Sr&&J({url:Sr},i=>{i?Ks(i):(xr=pc,wo())})},Vr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>xr===pc||Vr.applyArabicShaping!=null,isLoading:()=>xr===Ws,setState(i){xr=i.pluginStatus,Sr=i.pluginURL},isParsed:()=>Vr.applyArabicShaping!=null&&Vr.processBidirectionalText!=null&&Vr.processStyledBidirectionalText!=null,getPluginURL:()=>Sr};class gi{constructor(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition,this.pitch=r.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new oc,this.transition={},this.pitch=0)}isSupportedScript(e){return function(r,n){for(const a of r)if(!Dd(a.charCodeAt(0),n))return!1;return!0}(e,Vr.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,r=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*r}}}class Xs{constructor(e,r){this.property=e,this.value=r,this.expression=function(n,a){if(vo(n))return new Na(n,a);if(Ho(n)){const c=Su(n,a);if(c.result==="error")throw new Error(c.value.map(h=>`${h.key}: ${h.message}`).join(", "));return c.value}{let c=n;return typeof n=="string"&&a.type==="color"&&(c=$t.parse(n)),{kind:"constant",evaluate:()=>c}}}(r===void 0?e.specification.default:r,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,r,n){return this.property.possiblyEvaluate(this,e,r,n)}}class Jo{constructor(e){this.property=e,this.value=new Xs(e,void 0)}transitioned(e,r){return new t(this.property,this.value,r,mi({},e.transition,this.transition),e.now)}untransitioned(){return new t(this.property,this.value,null,{},0)}}class l{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return Pi(this._values[e].value.value)}setValue(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new Jo(this._values[e].property)),this._values[e].value=new Xs(this._values[e].property,r===null?void 0:Pi(r))}getTransition(e){return Pi(this._values[e].transition)}setTransition(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new Jo(this._values[e].property)),this._values[e].transition=Pi(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const n=this.getValue(r);n!==void 0&&(e[r]=n);const a=this.getTransition(r);a!==void 0&&(e[`${r}-transition`]=a)}return e}transitioned(e,r){const n=new o(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].transitioned(e,r._values[a]);return n}untransitioned(){const e=new o(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class t{constructor(e,r,n,a,c){const h=a.delay||0,p=a.duration||0;c=c||0,this.property=e,this.value=r,this.begin=c+h,this.end=this.begin+p,e.specification.transition&&(a.delay||a.duration)&&(this.prior=n)}possiblyEvaluate(e,r,n){const a=e.now||0,c=this.value.possiblyEvaluate(e,r,n),h=this.prior;if(h){if(a>this.end)return this.prior=null,c;if(this.value.isDataDriven())return this.prior=null,c;if(a<this.begin)return h.possiblyEvaluate(e,r,n);{const p=(a-this.begin)/(this.end-this.begin);return this.property.interpolate(h.possiblyEvaluate(e,r,n),c,Kt(p))}}return c}}class o{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,n){const a=new m(this._properties);for(const c of Object.keys(this._values))a._values[c]=this._values[c].possiblyEvaluate(e,r,n);return a}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class u{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return Pi(this._values[e].value)}setValue(e,r){this._values[e]=new Xs(this._values[e].property,r===null?void 0:Pi(r))}serialize(){const e={};for(const r of Object.keys(this._values)){const n=this.getValue(r);n!==void 0&&(e[r]=n)}return e}possiblyEvaluate(e,r,n){const a=new m(this._properties);for(const c of Object.keys(this._values))a._values[c]=this._values[c].possiblyEvaluate(e,r,n);return a}}class f{constructor(e,r,n){this.property=e,this.value=r,this.parameters=n}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,r,n,a){return this.property.evaluate(this.value,this.parameters,e,r,n,a)}}class m{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class _{constructor(e){this.specification=e}possiblyEvaluate(e,r){return e.expression.evaluate(r)}interpolate(e,r,n){const a=Ma[this.specification.type];return a?a(e,r,n):e}}class x{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,n,a){return new f(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},n,a)}:e.expression,r)}interpolate(e,r,n){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new f(this,{kind:"constant",value:void 0},e.parameters);const a=Ma[this.specification.type];return a?new f(this,{kind:"constant",value:a(e.value.value,r.value.value,n)},e.parameters):e}evaluate(e,r,n,a,c,h){return e.kind==="constant"?e.value:e.evaluate(r,n,a,c,h)}}class C extends x{possiblyEvaluate(e,r,n,a){if(e.value===void 0)return new f(this,{kind:"constant",value:void 0},r);if(e.expression.kind==="constant"){const c=e.expression.evaluate(r,null,{},n,a),h=e.property.specification.type==="resolvedImage"&&typeof c!="string"?c.name:c,p=this._calculate(h,h,h,r);return new f(this,{kind:"constant",value:p},r)}if(e.expression.kind==="camera"){const c=this._calculate(e.expression.evaluate({zoom:r.zoom-1}),e.expression.evaluate({zoom:r.zoom}),e.expression.evaluate({zoom:r.zoom+1}),r);return new f(this,{kind:"constant",value:c},r)}return new f(this,e.expression,r)}evaluate(e,r,n,a,c,h){if(e.kind==="source"){const p=e.evaluate(r,n,a,c,h);return this._calculate(p,p,p,r)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(r.zoom)-1},n,a),e.evaluate({zoom:Math.floor(r.zoom)},n,a),e.evaluate({zoom:Math.floor(r.zoom)+1},n,a),r):e.value}_calculate(e,r,n,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:e,to:r,other:n}:{from:n,to:r,other:e}}interpolate(e){return e}}class M{constructor(e){this.specification=e}possiblyEvaluate(e,r,n,a){if(e.value!==void 0){if(e.expression.kind==="constant"){const c=e.expression.evaluate(r,null,{},n,a);return this._calculate(c,c,c,r)}return this._calculate(e.expression.evaluate(new gi(Math.floor(r.zoom-1),r)),e.expression.evaluate(new gi(Math.floor(r.zoom),r)),e.expression.evaluate(new gi(Math.floor(r.zoom+1),r)),r)}}_calculate(e,r,n,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:n,to:r}}interpolate(e){return e}}class D{constructor(e){this.specification=e}possiblyEvaluate(e,r,n,a){return!!e.expression.evaluate(r,null,{},n,a)}interpolate(){return!1}}class B{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const r in e){const n=e[r];n.specification.overridable&&this.overridableProperties.push(r);const a=this.defaultPropertyValues[r]=new Xs(n,void 0),c=this.defaultTransitionablePropertyValues[r]=new Jo(n);this.defaultTransitioningPropertyValues[r]=c.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=a.possiblyEvaluate({})}}}function O(i,e){return 256*(i=Dt(Math.floor(i),0,255))+Dt(Math.floor(e),0,255)}tt(x),tt(_),tt(C),tt(M),tt(D);const U={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class G{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class R{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function X(i,e=1){let r=0,n=0;return{members:i.map(a=>{const c=U[a.type].BYTES_PER_ELEMENT,h=r=j(r,Math.max(e,c)),p=a.components||1;return n=Math.max(n,c),r+=c*p,{name:a.name,type:a.type,components:p,offset:h}}),size:j(r,Math.max(n,e)),alignment:e}}function j(i,e){return Math.ceil(i/e)*e}class q extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,r)}emplace(e,r,n){const a=2*e;return this.int16[a+0]=r,this.int16[a+1]=n,e}}q.prototype.bytesPerElement=4,tt(q);class K extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n){const a=this.length;return this.resize(a+1),this.emplace(a,e,r,n)}emplace(e,r,n,a){const c=3*e;return this.int16[c+0]=r,this.int16[c+1]=n,this.int16[c+2]=a,e}}K.prototype.bytesPerElement=6,tt(K);class ee extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n,a){const c=this.length;return this.resize(c+1),this.emplace(c,e,r,n,a)}emplace(e,r,n,a,c){const h=4*e;return this.int16[h+0]=r,this.int16[h+1]=n,this.int16[h+2]=a,this.int16[h+3]=c,e}}ee.prototype.bytesPerElement=8,tt(ee);class H extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c,h,p){const A=this.length;return this.resize(A+1),this.emplace(A,e,r,n,a,c,h,p)}emplace(e,r,n,a,c,h,p,A){const y=6*e,v=12*e,w=3*e;return this.int16[y+0]=r,this.int16[y+1]=n,this.uint8[v+4]=a,this.uint8[v+5]=c,this.uint8[v+6]=h,this.uint8[v+7]=p,this.float32[w+2]=A,e}}H.prototype.bytesPerElement=12,tt(H);class re extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n){const a=this.length;return this.resize(a+1),this.emplace(a,e,r,n)}emplace(e,r,n,a){const c=3*e;return this.float32[c+0]=r,this.float32[c+1]=n,this.float32[c+2]=a,e}}re.prototype.bytesPerElement=12,tt(re);class Ae extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c,h,p,A,y,v){const w=this.length;return this.resize(w+1),this.emplace(w,e,r,n,a,c,h,p,A,y,v)}emplace(e,r,n,a,c,h,p,A,y,v,w){const T=10*e;return this.uint16[T+0]=r,this.uint16[T+1]=n,this.uint16[T+2]=a,this.uint16[T+3]=c,this.uint16[T+4]=h,this.uint16[T+5]=p,this.uint16[T+6]=A,this.uint16[T+7]=y,this.uint16[T+8]=v,this.uint16[T+9]=w,e}}Ae.prototype.bytesPerElement=20,tt(Ae);class ve extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c,h,p,A){const y=this.length;return this.resize(y+1),this.emplace(y,e,r,n,a,c,h,p,A)}emplace(e,r,n,a,c,h,p,A,y){const v=8*e;return this.uint16[v+0]=r,this.uint16[v+1]=n,this.uint16[v+2]=a,this.uint16[v+3]=c,this.uint16[v+4]=h,this.uint16[v+5]=p,this.uint16[v+6]=A,this.uint16[v+7]=y,e}}ve.prototype.bytesPerElement=16,tt(ve);class Ie extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,n,a,c,h)}emplace(e,r,n,a,c,h,p){const A=6*e;return this.int16[A+0]=r,this.int16[A+1]=n,this.int16[A+2]=a,this.int16[A+3]=c,this.int16[A+4]=h,this.int16[A+5]=p,e}}Ie.prototype.bytesPerElement=12,tt(Ie);class Me extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c,h,p,A,y,v,w,T,S,k,N,F){const Q=this.length;return this.resize(Q+1),this.emplace(Q,e,r,n,a,c,h,p,A,y,v,w,T,S,k,N,F)}emplace(e,r,n,a,c,h,p,A,y,v,w,T,S,k,N,F,Q){const ie=16*e;return this.int16[ie+0]=r,this.int16[ie+1]=n,this.int16[ie+2]=a,this.int16[ie+3]=c,this.uint16[ie+4]=h,this.uint16[ie+5]=p,this.uint16[ie+6]=A,this.uint16[ie+7]=y,this.int16[ie+8]=v,this.int16[ie+9]=w,this.int16[ie+10]=T,this.int16[ie+11]=S,this.int16[ie+12]=k,this.int16[ie+13]=N,this.int16[ie+14]=F,this.int16[ie+15]=Q,e}}Me.prototype.bytesPerElement=32,tt(Me);class Ze extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}Ze.prototype.bytesPerElement=4,tt(Ze);class ge extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c,h,p,A,y,v,w,T,S){const k=this.length;return this.resize(k+1),this.emplace(k,e,r,n,a,c,h,p,A,y,v,w,T,S)}emplace(e,r,n,a,c,h,p,A,y,v,w,T,S,k){const N=20*e,F=10*e;return this.int16[N+0]=r,this.int16[N+1]=n,this.int16[N+2]=a,this.int16[N+3]=c,this.int16[N+4]=h,this.float32[F+3]=p,this.float32[F+4]=A,this.float32[F+5]=y,this.float32[F+6]=v,this.int16[N+14]=w,this.uint32[F+8]=T,this.uint16[N+18]=S,this.uint16[N+19]=k,e}}ge.prototype.bytesPerElement=40,tt(ge);class Ve extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c,h,p){const A=this.length;return this.resize(A+1),this.emplace(A,e,r,n,a,c,h,p)}emplace(e,r,n,a,c,h,p,A){const y=8*e;return this.int16[y+0]=r,this.int16[y+1]=n,this.int16[y+2]=a,this.int16[y+4]=c,this.int16[y+5]=h,this.int16[y+6]=p,this.int16[y+7]=A,e}}Ve.prototype.bytesPerElement=16,tt(Ve);class Ge extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,n,a,c)}emplace(e,r,n,a,c,h){const p=4*e,A=8*e;return this.float32[p+0]=r,this.float32[p+1]=n,this.float32[p+2]=a,this.int16[A+6]=c,this.int16[A+7]=h,e}}Ge.prototype.bytesPerElement=16,tt(Ge);class st extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n,a){const c=this.length;return this.resize(c+1),this.emplace(c,e,r,n,a)}emplace(e,r,n,a,c){const h=12*e,p=3*e;return this.uint8[h+0]=r,this.uint8[h+1]=n,this.float32[p+1]=a,this.float32[p+2]=c,e}}st.prototype.bytesPerElement=12,tt(st);class be extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,n){const a=this.length;return this.resize(a+1),this.emplace(a,e,r,n)}emplace(e,r,n,a){const c=3*e;return this.uint16[c+0]=r,this.uint16[c+1]=n,this.uint16[c+2]=a,e}}be.prototype.bytesPerElement=6,tt(be);class pt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c,h,p,A,y,v,w,T,S,k,N,F,Q,ie,oe,ae,ce){const ue=this.length;return this.resize(ue+1),this.emplace(ue,e,r,n,a,c,h,p,A,y,v,w,T,S,k,N,F,Q,ie,oe,ae,ce)}emplace(e,r,n,a,c,h,p,A,y,v,w,T,S,k,N,F,Q,ie,oe,ae,ce,ue){const we=30*e,Ee=15*e,ze=60*e;return this.int16[we+0]=r,this.int16[we+1]=n,this.int16[we+2]=a,this.float32[Ee+2]=c,this.float32[Ee+3]=h,this.uint16[we+8]=p,this.uint16[we+9]=A,this.uint32[Ee+5]=y,this.uint32[Ee+6]=v,this.uint32[Ee+7]=w,this.uint16[we+16]=T,this.uint16[we+17]=S,this.uint16[we+18]=k,this.float32[Ee+10]=N,this.float32[Ee+11]=F,this.uint8[ze+48]=Q,this.uint8[ze+49]=ie,this.uint8[ze+50]=oe,this.uint32[Ee+13]=ae,this.int16[we+28]=ce,this.uint8[ze+58]=ue,e}}pt.prototype.bytesPerElement=60,tt(pt);class gt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c,h,p,A,y,v,w,T,S,k,N,F,Q,ie,oe,ae,ce,ue,we,Ee,ze,ke,xe,De,Ne,Qe){const Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,e,r,n,a,c,h,p,A,y,v,w,T,S,k,N,F,Q,ie,oe,ae,ce,ue,we,Ee,ze,ke,xe,De,Ne,Qe)}emplace(e,r,n,a,c,h,p,A,y,v,w,T,S,k,N,F,Q,ie,oe,ae,ce,ue,we,Ee,ze,ke,xe,De,Ne,Qe,Fe){const je=38*e,Et=19*e;return this.int16[je+0]=r,this.int16[je+1]=n,this.int16[je+2]=a,this.float32[Et+2]=c,this.float32[Et+3]=h,this.int16[je+8]=p,this.int16[je+9]=A,this.int16[je+10]=y,this.int16[je+11]=v,this.int16[je+12]=w,this.int16[je+13]=T,this.uint16[je+14]=S,this.uint16[je+15]=k,this.uint16[je+16]=N,this.uint16[je+17]=F,this.uint16[je+18]=Q,this.uint16[je+19]=ie,this.uint16[je+20]=oe,this.uint16[je+21]=ae,this.uint16[je+22]=ce,this.uint16[je+23]=ue,this.uint16[je+24]=we,this.uint16[je+25]=Ee,this.uint16[je+26]=ze,this.uint16[je+27]=ke,this.uint16[je+28]=xe,this.uint32[Et+15]=De,this.float32[Et+16]=Ne,this.float32[Et+17]=Qe,this.float32[Et+18]=Fe,e}}gt.prototype.bytesPerElement=76,tt(gt);class rt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}rt.prototype.bytesPerElement=4,tt(rt);class nt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c,h,p){const A=this.length;return this.resize(A+1),this.emplace(A,e,r,n,a,c,h,p)}emplace(e,r,n,a,c,h,p,A){const y=7*e;return this.float32[y+0]=r,this.float32[y+1]=n,this.float32[y+2]=a,this.float32[y+3]=c,this.float32[y+4]=h,this.float32[y+5]=p,this.float32[y+6]=A,e}}nt.prototype.bytesPerElement=28,tt(nt);class vt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,n,a,c)}emplace(e,r,n,a,c,h){const p=5*e;return this.float32[p+0]=r,this.float32[p+1]=n,this.float32[p+2]=a,this.float32[p+3]=c,this.float32[p+4]=h,e}}vt.prototype.bytesPerElement=20,tt(vt);class kt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,n,a){const c=this.length;return this.resize(c+1),this.emplace(c,e,r,n,a)}emplace(e,r,n,a,c){const h=6*e;return this.uint32[3*e+0]=r,this.uint16[h+2]=n,this.uint16[h+3]=a,this.uint16[h+4]=c,e}}kt.prototype.bytesPerElement=12,tt(kt);class ct extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,r)}emplace(e,r,n){const a=2*e;return this.uint16[a+0]=r,this.uint16[a+1]=n,e}}ct.prototype.bytesPerElement=4,tt(ct);class Mt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}Mt.prototype.bytesPerElement=2,tt(Mt);class qt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,r)}emplace(e,r,n){const a=2*e;return this.float32[a+0]=r,this.float32[a+1]=n,e}}qt.prototype.bytesPerElement=8,tt(qt);class Ii extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n,a){const c=this.length;return this.resize(c+1),this.emplace(c,e,r,n,a)}emplace(e,r,n,a,c){const h=4*e;return this.float32[h+0]=r,this.float32[h+1]=n,this.float32[h+2]=a,this.float32[h+3]=c,e}}Ii.prototype.bytesPerElement=16,tt(Ii);class nr extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,n,a,c,h,p){const A=this.length;return this.resize(A+1),this.emplace(A,e,r,n,a,c,h,p)}emplace(e,r,n,a,c,h,p,A){const y=8*e,v=4*e;return this.int16[y+0]=r,this.int16[y+1]=n,this.int16[y+2]=a,this.int16[y+3]=c,this.int16[y+4]=h,this.int16[y+5]=p,this.float32[v+3]=A,e}}nr.prototype.bytesPerElement=16,tt(nr);class or extends G{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}or.prototype.size=12;class zr extends Ie{get(e){return new or(this,e)}}tt(zr);class sn extends G{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}sn.prototype.size=40;class En extends ge{get(e){return new sn(this,e)}}tt(En);class Qn extends G{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Qn.prototype.size=60;class In extends pt{get(e){return new Qn(this,e)}}tt(In);class Di extends G{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Di.prototype.size=76;class zi extends gt{get(e){return new Di(this,e)}}tt(zi);class ri extends rt{getoffsetX(e){return this.float32[1*e+0]}}tt(ri);class Ni extends K{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}tt(Ni);class Br extends G{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Br.prototype.size=12;class Ti extends kt{get(e){return new Br(this,e)}}tt(Ti);class Ur extends G{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Ur.prototype.size=4;class Js extends ct{get(e){return new Ur(this,e)}}tt(Js);class kr extends G{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}get a_scale(){return this._structArray.float32[this._pos4+3]}}kr.prototype.size=16;class Co extends nr{get(e){return new kr(this,e)}}tt(Co);const nh=X([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Ac=X([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var $o=ya(function(i){i.exports=function(e,r){var n,a,c,h,p,A,y,v;for(a=e.length-(n=3&e.length),c=r,p=3432918353,A=461845907,v=0;v<a;)y=255&e.charCodeAt(v)|(255&e.charCodeAt(++v))<<8|(255&e.charCodeAt(++v))<<16|(255&e.charCodeAt(++v))<<24,++v,c=27492+(65535&(h=5*(65535&(c=(c^=y=(65535&(y=(y=(65535&y)*p+(((y>>>16)*p&65535)<<16)&4294967295)<<15|y>>>17))*A+(((y>>>16)*A&65535)<<16)&4294967295)<<13|c>>>19))+((5*(c>>>16)&65535)<<16)&4294967295))+((58964+(h>>>16)&65535)<<16);switch(y=0,n){case 3:y^=(255&e.charCodeAt(v+2))<<16;case 2:y^=(255&e.charCodeAt(v+1))<<8;case 1:c^=y=(65535&(y=(y=(65535&(y^=255&e.charCodeAt(v)))*p+(((y>>>16)*p&65535)<<16)&4294967295)<<15|y>>>17))*A+(((y>>>16)*A&65535)<<16)&4294967295}return c^=e.length,c=2246822507*(65535&(c^=c>>>16))+((2246822507*(c>>>16)&65535)<<16)&4294967295,c=3266489909*(65535&(c^=c>>>13))+((3266489909*(c>>>16)&65535)<<16)&4294967295,(c^=c>>>16)>>>0}}),zd=ya(function(i){i.exports=function(e,r){for(var n,a=e.length,c=r^a,h=0;a>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(h)|(255&e.charCodeAt(++h))<<8|(255&e.charCodeAt(++h))<<16|(255&e.charCodeAt(++h))<<24))+((1540483477*(n>>>16)&65535)<<16),c=1540483477*(65535&c)+((1540483477*(c>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),a-=4,++h;switch(a){case 3:c^=(255&e.charCodeAt(h+2))<<16;case 2:c^=(255&e.charCodeAt(h+1))<<8;case 1:c=1540483477*(65535&(c^=255&e.charCodeAt(h)))+((1540483477*(c>>>16)&65535)<<16)}return c=1540483477*(65535&(c^=c>>>13))+((1540483477*(c>>>16)&65535)<<16),(c^=c>>>15)>>>0}}),Yn=$o,gc=zd;Yn.murmur3=$o,Yn.murmur2=gc;class oh{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,r,n,a){this.ids.push(Pf(e)),this.positions.push(r,n,a)}getPositions(e){const r=Pf(e);let n=0,a=this.ids.length-1;for(;n<a;){const h=n+a>>1;this.ids[h]>=r?a=h:n=h+1}const c=[];for(;this.ids[n]===r;)c.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return c}static serialize(e,r){const n=new Float64Array(e.ids),a=new Uint32Array(e.positions);return Bd(n,a,0,n.length-1),r&&r.push(n.buffer,a.buffer),{ids:n,positions:a}}static deserialize(e){const r=new oh;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r}}function Pf(i){const e=+i;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:Yn(String(i))}function Bd(i,e,r,n){for(;r<n;){const a=i[r+n>>1];let c=r-1,h=n+1;for(;;){do c++;while(i[c]<a);do h--;while(i[h]>a);if(c>=h)break;sh(i,c,h),sh(e,3*c,3*h),sh(e,3*c+1,3*h+1),sh(e,3*c+2,3*h+2)}h-r<n-h?(Bd(i,e,r,h),r=h+1):(Bd(i,e,h+1,n),n=h)}}function sh(i,e,r){const n=i[e];i[e]=i[r],i[r]=n}tt(oh);class To{constructor(e,r){this.gl=e.gl,this.location=r}}class ah extends To{constructor(e,r){super(e,r),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Rf extends To{constructor(e,r){super(e,r),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Nf extends To{constructor(e,r){super(e,r),this.current=$t.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Hg=new Float32Array(16),qg=new Float32Array(9),Wg=new Float32Array(4);function kd(i){return[O(255*i.r,255*i.g),O(255*i.b,255*i.a)]}class _c{constructor(e,r,n){this.value=e,this.uniformNames=r.map(a=>`u_${a}`),this.type=n}setUniform(e,r,n){e.set(n.constantOr(this.value))}getBinding(e,r,n){return this.type==="color"?new Nf(e,r):new ah(e,r)}}class Xa{constructor(e,r){this.uniformNames=r.map(n=>`u_${n}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,r){this.pixelRatioFrom=r.pixelRatio||1,this.pixelRatioTo=e.pixelRatio||1,this.patternFrom=r.tl.concat(r.br),this.patternTo=e.tl.concat(e.br)}setUniform(e,r,n,a){const c=a==="u_pattern_to"||a==="u_dash_to"?this.patternTo:a==="u_pattern_from"||a==="u_dash_from"?this.patternFrom:a==="u_pixel_ratio_to"?this.pixelRatioTo:a==="u_pixel_ratio_from"?this.pixelRatioFrom:null;c&&e.set(c)}getBinding(e,r,n){return n==="u_pattern_from"||n==="u_pattern_to"||n==="u_dash_from"||n==="u_dash_to"?new Rf(e,r):new ah(e,r)}}class Mo{constructor(e,r,n,a){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=r.map(c=>({name:`a_${c}`,type:"Float32",components:n==="color"?2:1,offset:0})),this.paintVertexArray=new a}populatePaintArray(e,r,n,a,c,h){const p=this.paintVertexArray.length,A=this.expression.evaluate(new gi(0),r,{},c,a,h);this.paintVertexArray.resize(e),this._setPaintValue(p,e,A)}updatePaintArray(e,r,n,a,c){const h=this.expression.evaluate({zoom:0},n,a,void 0,c);this._setPaintValue(e,r,h)}_setPaintValue(e,r,n){if(this.type==="color"){const a=kd(n);for(let c=e;c<r;c++)this.paintVertexArray.emplace(c,a[0],a[1])}else{for(let a=e;a<r;a++)this.paintVertexArray.emplace(a,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Dn{constructor(e,r,n,a,c,h){this.expression=e,this.uniformNames=r.map(p=>`u_${p}_t`),this.type=n,this.useIntegerZoom=a,this.zoom=c,this.maxValue=0,this.paintVertexAttributes=r.map(p=>({name:`a_${p}`,type:"Float32",components:n==="color"?4:2,offset:0})),this.paintVertexArray=new h}populatePaintArray(e,r,n,a,c,h){const p=this.expression.evaluate(new gi(this.zoom),r,{},c,a,h),A=this.expression.evaluate(new gi(this.zoom+1),r,{},c,a,h),y=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(y,e,p,A)}updatePaintArray(e,r,n,a,c){const h=this.expression.evaluate({zoom:this.zoom},n,a,void 0,c),p=this.expression.evaluate({zoom:this.zoom+1},n,a,void 0,c);this._setPaintValue(e,r,h,p)}_setPaintValue(e,r,n,a){if(this.type==="color"){const c=kd(n),h=kd(a);for(let p=e;p<r;p++)this.paintVertexArray.emplace(p,c[0],c[1],h[0],h[1])}else{for(let c=e;c<r;c++)this.paintVertexArray.emplace(c,n,a);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(a))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r){const n=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,a=Dt(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(a)}getBinding(e,r,n){return new ah(e,r)}}class es{constructor(e,r,n,a,c,h,p){this.expression=e,this.type=n,this.useIntegerZoom=a,this.zoom=c,this.layerId=p,this.paintVertexAttributes=(n==="array"?Ac:nh).members;for(let A=0;A<r.length;++A);this.zoomInPaintVertexArray=new h,this.zoomOutPaintVertexArray=new h}populatePaintArray(e,r,n){const a=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(a,e,r.patterns&&r.patterns[this.layerId],n)}updatePaintArray(e,r,n,a,c,h){this._setPaintValues(e,r,n.patterns&&n.patterns[this.layerId],h)}_setPaintValues(e,r,n,a){if(!a||!n)return;const{min:c,mid:h,max:p}=n,A=a[c],y=a[h],v=a[p];if(A&&y&&v)for(let w=e;w<r;w++)this._setPaintValue(this.zoomInPaintVertexArray,w,y,A),this._setPaintValue(this.zoomOutPaintVertexArray,w,y,v)}_setPaintValue(e,r,n,a){e.emplace(r,n.tl[0],n.tl[1],n.br[0],n.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],n.pixelRatio,a.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ts{constructor(e,r,n=()=>!0){this.binders={},this._buffers=[];const a=[];for(const c in e.paint._values){if(!n(c))continue;const h=e.paint.get(c);if(!(h instanceof f&&Yo(h.property.specification)))continue;const p=Xg(c,e.type),A=h.value,y=h.property.specification.type,v=h.property.useIntegerZoom,w=h.property.specification["property-type"],T=w==="cross-faded"||w==="cross-faded-data-driven",S=String(c)==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant";if(A.kind!=="constant"||S)if(A.kind==="source"||S||T){const k=Of(c,y,"source");this.binders[c]=T?new es(A,p,y,v,r,k,e.id):new Mo(A,p,y,k),a.push(`/a_${c}`)}else{const k=Of(c,y,"composite");this.binders[c]=new Dn(A,p,y,v,r,k),a.push(`/z_${c}`)}else this.binders[c]=T?new Xa(A.value,p):new _c(A.value,p,y),a.push(`/u_${c}`)}this.cacheKey=a.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof Mo||r instanceof Dn?r.maxValue:0}populatePaintArrays(e,r,n,a,c,h){for(const p in this.binders){const A=this.binders[p];(A instanceof Mo||A instanceof Dn||A instanceof es)&&A.populatePaintArray(e,r,n,a,c,h)}}setConstantPatternPositions(e,r){for(const n in this.binders){const a=this.binders[n];a instanceof Xa&&a.setConstantPatternPositions(e,r)}}updatePaintArrays(e,r,n,a,c,h){let p=!1;for(const A in e){const y=r.getPositions(A);for(const v of y){const w=n.feature(v.index);for(const T in this.binders){const S=this.binders[T];if((S instanceof Mo||S instanceof Dn||S instanceof es)&&S.expression.isStateDependent===!0){const k=a.paint.get(T);S.expression=k.value,S.updatePaintArray(v.start,v.end,w,e[A],c,h),p=!0}}}}return p}defines(){const e=[];for(const r in this.binders){const n=this.binders[r];(n instanceof _c||n instanceof Xa)&&e.push(...n.uniformNames.map(a=>`#define HAS_UNIFORM_${a}`))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof Mo||n instanceof Dn||n instanceof es)for(let a=0;a<n.paintVertexAttributes.length;a++)e.push(n.paintVertexAttributes[a].name)}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const n=this.binders[r];if(n instanceof _c||n instanceof Xa||n instanceof Dn)for(const a of n.uniformNames)e.push(a)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,r){const n=[];for(const a in this.binders){const c=this.binders[a];if(c instanceof _c||c instanceof Xa||c instanceof Dn){for(const h of c.uniformNames)if(r[h]){const p=c.getBinding(e,r[h],h);n.push({name:h,property:a,binding:p})}}}return n}setUniforms(e,r,n,a){for(const{name:c,property:h,binding:p}of r)this.binders[h].setUniform(p,a,n.get(h),c)}updatePaintBuffers(e){this._buffers=[];for(const r in this.binders){const n=this.binders[r];if(e&&n instanceof es){const a=e.fromScale===2?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;a&&this._buffers.push(a)}else(n instanceof Mo||n instanceof Dn)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(e){for(const r in this.binders){const n=this.binders[r];(n instanceof Mo||n instanceof Dn||n instanceof es)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof Mo||r instanceof Dn||r instanceof es)&&r.destroy()}}}class $s{constructor(e,r,n=()=>!0){this.programConfigurations={};for(const a of e)this.programConfigurations[a.id]=new ts(a,r,n);this.needsUpload=!1,this._featureMap=new oh,this._bufferOffset=0}populatePaintArrays(e,r,n,a,c,h,p){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(e,r,a,c,h,p);r.id!==void 0&&this._featureMap.add(r.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,n,a,c){for(const h of n)this.needsUpload=this.programConfigurations[h.id].updatePaintArrays(e,this._featureMap,r,h,a,c)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Kg={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Xg(i,e){return Kg[i]||[i.replace(`${e}-`,"").replace(/-/g,"_")]}const Jg={"line-pattern":{source:Ae,composite:Ae},"fill-pattern":{source:Ae,composite:Ae},"fill-extrusion-pattern":{source:Ae,composite:Ae},"line-dasharray":{source:ve,composite:ve}},$g={color:{source:qt,composite:Ii},number:{source:rt,composite:qt}};function Of(i,e,r){const n=Jg[i];return n&&n[r]||$g[e][r]}tt(_c),tt(Xa),tt(Mo),tt(es),tt(Dn),tt(ts,{omit:["_buffers"]}),tt($s);const lh="-transition";class Sn extends Ct{constructor(e,r){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,e.type!=="custom"&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&e.type!=="sky"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new u(r.layout)),r.paint)){this._transitionablePaint=new l(r.paint);for(const n in e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(const n in e.layout)this.setLayoutProperty(n,e.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new m(r.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,r,n={}){r!=null&&this._validate(Id,`layers.${this.id}.layout.${e}`,e,r,n)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,r):this.visibility=r)}getPaintProperty(e){return Ht(e,lh)?this._transitionablePaint.getTransition(e.slice(0,-lh.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,n={}){if(r!=null&&this._validate(Ed,`layers.${this.id}.paint.${e}`,e,r,n))return!1;if(Ht(e,lh))return this._transitionablePaint.setTransition(e.slice(0,-lh.length),r||void 0),!1;{const a=this._transitionablePaint._values[e],c=a.property.specification["property-type"]==="cross-faded-data-driven",h=a.value.isDataDriven(),p=a.value;this._transitionablePaint.setValue(e,r),this._handleSpecialPaintPropertyUpdate(e);const A=this._transitionablePaint._values[e].value;return A.isDataDriven()||h||c||this._handleOverridablePaintPropertyUpdate(e,p,A)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,r,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,r){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Or(e,(r,n)=>!(r===void 0||n==="layout"&&!Object.keys(r).length||n==="paint"&&!Object.keys(r).length))}_validate(e,r,n,a,c={}){return(!c||c.validate!==!1)&&Vu(this,e.call(js,{key:r,layerType:this.type,objectKey:n,value:a,styleSpec:ye,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof f&&Yo(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Vn(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const e_=X([{name:"a_pos",components:2,type:"Int16"}],4),t_=X([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"},{name:"a_scale",components:1,type:"Float32"}]);class Bi{constructor(e=[]){this.segments=e}prepareSegment(e,r,n,a){let c=this.segments[this.segments.length-1];return e>Bi.MAX_VERTEX_ARRAY_LENGTH&&Ot(`Max vertices per segment is ${Bi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!c||c.vertexLength+e>Bi.MAX_VERTEX_ARRAY_LENGTH||c.sortKey!==a)&&(c={vertexOffset:r.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},a!==void 0&&(c.sortKey=a),this.segments.push(c)),c}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,n,a){return new Bi([{vertexOffset:e,primitiveOffset:r,vertexLength:n,primitiveLength:a,vaos:{},sortKey:0}])}}Bi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,tt(Bi);var St=8192;class is{constructor(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof di?new di(e.lng,e.lat):di.convert(e),this}setSouthWest(e){return this._sw=e instanceof di?new di(e.lng,e.lat):di.convert(e),this}extend(e){const r=this._sw,n=this._ne;let a,c;if(e instanceof di)a=e,c=e;else{if(!(e instanceof is))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(is.convert(e)):this.extend(di.convert(e)):this;if(a=e._sw,c=e._ne,!a||!c)return this}return r||n?(r.lng=Math.min(a.lng,r.lng),r.lat=Math.min(a.lat,r.lat),n.lng=Math.max(c.lng,n.lng),n.lat=Math.max(c.lat,n.lat)):(this._sw=new di(a.lng,a.lat),this._ne=new di(c.lng,c.lat)),this}getCenter(){return new di((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new di(this.getWest(),this.getNorth())}getSouthEast(){return new di(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:n}=di.convert(e);let a=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(a=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&a}static convert(e){return!e||e instanceof is?e:new is(e)}}const Ld=63710088e-1;class di{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new di(Xi(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,n=this.lat*r,a=e.lat*r,c=Math.sin(n)*Math.sin(a)+Math.cos(n)*Math.cos(a)*Math.cos((e.lng-this.lng)*r);return Ld*Math.acos(Math.min(c,1))}toBounds(e=0){const r=360*e/40075017,n=r/Math.cos(Math.PI/180*this.lat);return new is(new di(this.lng-n,this.lat-r),new di(this.lng+n,this.lat+r))}static convert(e){if(e instanceof di)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new di(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new di(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Gf=2*Math.PI*Ld;function Pd(i){return Gf*Math.cos(i*Math.PI/180)}function yc(i){return(180+i)/360}function Ja(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function $a(i,e){return i/Pd(e)}function An(i){return 360*i-180}function sr(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function Ff(i,e){return i*Pd(sr(e))}const Hn=85.051129;class ch{constructor(e,r,n=0){this.x=+e,this.y=+r,this.z=+n}static fromLngLat(e,r=0){const n=di.convert(e);return new ch(yc(n.lng),Ja(n.lat),$a(r,n.lat))}toLngLat(){return new di(An(this.x),sr(this.y))}toAltitude(){return Ff(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Gf*(e=sr(this.y),1/Math.cos(e*Math.PI/180));var e}}function Rd(i,e,r,n,a,c,h,p,A){const y=(e+n)/2,v=(r+a)/2,w=new $(y,v);p(w),function(T,S,k,N,F,Q){const ie=k-F,oe=N-Q;return Math.abs((N-S)*ie-(k-T)*oe)/Math.hypot(ie,oe)}(w.x,w.y,c.x,c.y,h.x,h.y)>=A?(Rd(i,e,r,y,v,c,w,p,A),Rd(i,y,v,n,a,w,h,p,A)):i.push(h)}function i_(i,e,r){let n=i[0],a=n.x,c=n.y;e(n);const h=[n];for(let p=1;p<i.length;p++){const A=i[p],{x:y,y:v}=A;e(A),Rd(h,a,c,y,v,n,A,e,r),a=y,c=v,n=A}return h}const Nd=Math.pow(2,14)-1,Vf=-Nd-1;function r_(i,e){const r=Math.round(i.x*e),n=Math.round(i.y*e);return i.x=Dt(r,Vf,Nd),i.y=Dt(n,Vf,Nd),(r<i.x||r>i.x+1||n<i.y||n>i.y+1)&&Ot("Geometry exceeds allowed extent, reduce your vector tile buffer size"),i}function Eo(i,e,r){const n=i.loadGeometry(),a=i.extent,c=St/a;if(e&&r&&r.projection.isReprojectedInTileSpace){const h=1<<e.z,{scale:p,x:A,y,projection:v}=r,w=T=>{const S=An((e.x+T.x/a)/h),k=sr((e.y+T.y/a)/h),N=v.project(S,k);T.x=(N.x*p-A)*a,T.y=(N.y*p-y)*a};for(let T=0;T<n.length;T++)if(i.type!==1)n[T]=i_(n[T],w,1);else{const S=[];for(const k of n[T])k.x<0||k.x>=a||k.y<0||k.y>=a||(w(k),S.push(k));n[T]=S}}for(const h of n)for(const p of h)r_(p,c);return n}function ea(i,e){return{type:i.type,id:i.id,properties:i.properties,geometry:e?Eo(i):[]}}function uh(i,e,r,n,a){i.emplaceBack(2*e+(n+1)/2,2*r+(a+1)/2)}function hh(i,e,r,n){i.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384,n)}class Od{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new q,this.indexArray=new be,this.segments=new Bi,this.programConfigurations=new $s(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,n,a){const c=this.layers[0],h=[];let p=null;c.type==="circle"&&(p=c.layout.get("circle-sort-key"));for(const{feature:y,id:v,index:w,sourceLayerIndex:T}of e){const S=this.layers[0]._featureFilter.needGeometry,k=ea(y,S);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),k,n))continue;const N=p?p.evaluate(k,{},n):void 0,F={id:v,properties:y.properties,type:y.type,sourceLayerIndex:T,index:w,geometry:S?k.geometry:Eo(y,n,a),patterns:{},sortKey:N};h.push(F)}p&&h.sort((y,v)=>y.sortKey-v.sortKey);let A=null;a.projection.name==="globe"&&(this.globeExtVertexArray=new Co,A=a.projection);for(const y of h){const{geometry:v,index:w,sourceLayerIndex:T}=y,S=e[w].feature;this.addFeature(y,v,w,r.availableImages,n,A),r.featureIndex.insert(S,v,w,T,this.index)}}update(e,r,n,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,n,a)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,e_.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,t_.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,r,n,a,c,h){for(const p of r)for(const A of p){const y=A.x,v=A.y;if(y<0||y>=St||v<0||v>=St)continue;if(h){const S=h.projectTilePoint(y,v,c),k=h.upVector(c,y,v),N=sr((v/St+c.y)/(1<<c.z)),F=h.pixelsPerMeter(N,1)/$a(1,N),Q=this.globeExtVertexArray;hh(Q,S,k,F),hh(Q,S,k,F),hh(Q,S,k,F),hh(Q,S,k,F)}const w=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),T=w.vertexLength;uh(this.layoutVertexArray,y,v,-1,-1),uh(this.layoutVertexArray,y,v,1,-1),uh(this.layoutVertexArray,y,v,1,1),uh(this.layoutVertexArray,y,v,-1,1),this.indexArray.emplaceBack(T,T+1,T+2),this.indexArray.emplaceBack(T,T+3,T+2),w.vertexLength+=4,w.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},a,c)}}function Uf(i,e){for(let r=0;r<i.length;r++)if(el(e,i[r]))return!0;for(let r=0;r<e.length;r++)if(el(i,e[r]))return!0;return!!Gd(i,e)}function n_(i,e,r){return!!el(i,e)||!!Fd(e,i,r)}function Zf(i,e){if(i.length===1)return Qf(e,i[0]);for(let r=0;r<e.length;r++){const n=e[r];for(let a=0;a<n.length;a++)if(el(i,n[a]))return!0}for(let r=0;r<i.length;r++)if(Qf(e,i[r]))return!0;for(let r=0;r<e.length;r++)if(Gd(i,e[r]))return!0;return!1}function o_(i,e,r){if(i.length>1){if(Gd(i,e))return!0;for(let n=0;n<e.length;n++)if(Fd(e[n],i,r))return!0}for(let n=0;n<i.length;n++)if(Fd(i[n],e,r))return!0;return!1}function Gd(i,e){if(i.length===0||e.length===0)return!1;for(let r=0;r<i.length-1;r++){const n=i[r],a=i[r+1];for(let c=0;c<e.length-1;c++)if(s_(n,a,e[c],e[c+1]))return!0}return!1}function s_(i,e,r,n){return Fi(i,r,n)!==Fi(e,r,n)&&Fi(i,e,r)!==Fi(i,e,n)}function Fd(i,e,r){const n=r*r;if(e.length===1)return i.distSqr(e[0])<n;for(let a=1;a<e.length;a++)if(jf(i,e[a-1],e[a])<n)return!0;return!1}function jf(i,e,r){const n=e.distSqr(r);if(n===0)return i.distSqr(e);const a=((i.x-e.x)*(r.x-e.x)+(i.y-e.y)*(r.y-e.y))/n;return i.distSqr(a<0?e:a>1?r:r.sub(e)._mult(a)._add(e))}function Qf(i,e){let r,n,a,c=!1;for(let h=0;h<i.length;h++){r=i[h];for(let p=0,A=r.length-1;p<r.length;A=p++)n=r[p],a=r[A],n.y>e.y!=a.y>e.y&&e.x<(a.x-n.x)*(e.y-n.y)/(a.y-n.y)+n.x&&(c=!c)}return c}function el(i,e){let r=!1;for(let n=0,a=i.length-1;n<i.length;a=n++){const c=i[n],h=i[a];c.y>e.y!=h.y>e.y&&e.x<(h.x-c.x)*(e.y-c.y)/(h.y-c.y)+c.x&&(r=!r)}return r}function Yf(i,e,r,n,a){for(const h of i)if(e<=h.x&&r<=h.y&&n>=h.x&&a>=h.y)return!0;const c=[new $(e,r),new $(e,a),new $(n,a),new $(n,r)];if(i.length>2){for(const h of c)if(el(i,h))return!0}for(let h=0;h<i.length-1;h++)if(a_(i[h],i[h+1],c))return!0;return!1}function a_(i,e,r){const n=r[0],a=r[2];if(i.x<n.x&&e.x<n.x||i.x>a.x&&e.x>a.x||i.y<n.y&&e.y<n.y||i.y>a.y&&e.y>a.y)return!1;const c=Fi(i,e,r[0]);return c!==Fi(i,e,r[1])||c!==Fi(i,e,r[2])||c!==Fi(i,e,r[3])}function tl(i,e,r){const n=e.paint.get(i).value;return n.kind==="constant"?n.value:r.programConfigurations.get(e.id).getMaxValue(i)}function dh(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Hf(i,e,r,n,a){if(!e[0]&&!e[1])return i;const c=$.convert(e)._mult(a);r==="viewport"&&c._rotate(-n);const h=[];for(let p=0;p<i.length;p++)h.push(i[p].sub(c));return h}function qf(i,e,r,n){const a=$.convert(i)._mult(n);return e==="viewport"&&a._rotate(-r),a}tt(Od,{omit:["layers"]});const l_=new B({"circle-sort-key":new x(ye.layout_circle["circle-sort-key"])});var c_={paint:new B({"circle-radius":new x(ye.paint_circle["circle-radius"]),"circle-color":new x(ye.paint_circle["circle-color"]),"circle-blur":new x(ye.paint_circle["circle-blur"]),"circle-opacity":new x(ye.paint_circle["circle-opacity"]),"circle-translate":new _(ye.paint_circle["circle-translate"]),"circle-translate-anchor":new _(ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new _(ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new _(ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new x(ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new x(ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new x(ye.paint_circle["circle-stroke-opacity"])}),layout:l_},Vd=1e-6,Zr=typeof Float32Array!="undefined"?Float32Array:Array;function Wf(){var i=new Zr(9);return Zr!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function qn(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Ud(i,e,r){var n=e[0],a=e[1],c=e[2],h=e[3],p=e[4],A=e[5],y=e[6],v=e[7],w=e[8],T=e[9],S=e[10],k=e[11],N=e[12],F=e[13],Q=e[14],ie=e[15],oe=r[0],ae=r[1],ce=r[2],ue=r[3];return i[0]=oe*n+ae*p+ce*w+ue*N,i[1]=oe*a+ae*A+ce*T+ue*F,i[2]=oe*c+ae*y+ce*S+ue*Q,i[3]=oe*h+ae*v+ce*k+ue*ie,i[4]=(oe=r[4])*n+(ae=r[5])*p+(ce=r[6])*w+(ue=r[7])*N,i[5]=oe*a+ae*A+ce*T+ue*F,i[6]=oe*c+ae*y+ce*S+ue*Q,i[7]=oe*h+ae*v+ce*k+ue*ie,i[8]=(oe=r[8])*n+(ae=r[9])*p+(ce=r[10])*w+(ue=r[11])*N,i[9]=oe*a+ae*A+ce*T+ue*F,i[10]=oe*c+ae*y+ce*S+ue*Q,i[11]=oe*h+ae*v+ce*k+ue*ie,i[12]=(oe=r[12])*n+(ae=r[13])*p+(ce=r[14])*w+(ue=r[15])*N,i[13]=oe*a+ae*A+ce*T+ue*F,i[14]=oe*c+ae*y+ce*S+ue*Q,i[15]=oe*h+ae*v+ce*k+ue*ie,i}function ta(i,e,r){var n,a,c,h,p,A,y,v,w,T,S,k,N=r[0],F=r[1],Q=r[2];return e===i?(i[12]=e[0]*N+e[4]*F+e[8]*Q+e[12],i[13]=e[1]*N+e[5]*F+e[9]*Q+e[13],i[14]=e[2]*N+e[6]*F+e[10]*Q+e[14],i[15]=e[3]*N+e[7]*F+e[11]*Q+e[15]):(a=e[1],c=e[2],h=e[3],p=e[4],A=e[5],y=e[6],v=e[7],w=e[8],T=e[9],S=e[10],k=e[11],i[0]=n=e[0],i[1]=a,i[2]=c,i[3]=h,i[4]=p,i[5]=A,i[6]=y,i[7]=v,i[8]=w,i[9]=T,i[10]=S,i[11]=k,i[12]=n*N+p*F+w*Q+e[12],i[13]=a*N+A*F+T*Q+e[13],i[14]=c*N+y*F+S*Q+e[14],i[15]=h*N+v*F+k*Q+e[15]),i}function rs(i,e,r){var n=r[0],a=r[1],c=r[2];return i[0]=e[0]*n,i[1]=e[1]*n,i[2]=e[2]*n,i[3]=e[3]*n,i[4]=e[4]*a,i[5]=e[5]*a,i[6]=e[6]*a,i[7]=e[7]*a,i[8]=e[8]*c,i[9]=e[9]*c,i[10]=e[10]*c,i[11]=e[11]*c,i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i}function Zd(i,e,r){var n=Math.sin(r),a=Math.cos(r),c=e[4],h=e[5],p=e[6],A=e[7],y=e[8],v=e[9],w=e[10],T=e[11];return e!==i&&(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[4]=c*a+y*n,i[5]=h*a+v*n,i[6]=p*a+w*n,i[7]=A*a+T*n,i[8]=y*a-c*n,i[9]=v*a-h*n,i[10]=w*a-p*n,i[11]=T*a-A*n,i}function jd(i,e,r){var n=Math.sin(r),a=Math.cos(r),c=e[0],h=e[1],p=e[2],A=e[3],y=e[8],v=e[9],w=e[10],T=e[11];return e!==i&&(i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=c*a-y*n,i[1]=h*a-v*n,i[2]=p*a-w*n,i[3]=A*a-T*n,i[8]=c*n+y*a,i[9]=h*n+v*a,i[10]=p*n+w*a,i[11]=A*n+T*a,i}Math.hypot||(Math.hypot=function(){for(var i=0,e=arguments.length;e--;)i+=arguments[e]*arguments[e];return Math.sqrt(i)});var u_=Ud;function Qd(){var i=new Zr(3);return Zr!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function Kf(i){var e=new Zr(3);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e}function Xf(i){return Math.hypot(i[0],i[1],i[2])}function xc(i,e,r){var n=new Zr(3);return n[0]=i,n[1]=e,n[2]=r,n}function Jf(i,e,r){return i[0]=e[0]+r[0],i[1]=e[1]+r[1],i[2]=e[2]+r[2],i}function $f(i,e,r){return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],i}function em(i,e,r){return i[0]=e[0]*r[0],i[1]=e[1]*r[1],i[2]=e[2]*r[2],i}function Yd(i,e,r){return i[0]=Math.min(e[0],r[0]),i[1]=Math.min(e[1],r[1]),i[2]=Math.min(e[2],r[2]),i}function Hd(i,e,r){return i[0]=Math.max(e[0],r[0]),i[1]=Math.max(e[1],r[1]),i[2]=Math.max(e[2],r[2]),i}function vc(i,e,r){return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i}function qd(i,e,r,n){return i[0]=e[0]+r[0]*n,i[1]=e[1]+r[1]*n,i[2]=e[2]+r[2]*n,i}function bc(i,e){var r=e[0],n=e[1],a=e[2],c=r*r+n*n+a*a;return c>0&&(c=1/Math.sqrt(c)),i[0]=e[0]*c,i[1]=e[1]*c,i[2]=e[2]*c,i}function wc(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function tm(i,e,r){var n=e[0],a=e[1],c=e[2],h=r[0],p=r[1],A=r[2];return i[0]=a*A-c*p,i[1]=c*h-n*A,i[2]=n*p-a*h,i}function ia(i,e,r){var n=e[0],a=e[1],c=e[2],h=r[3]*n+r[7]*a+r[11]*c+r[15];return i[0]=(r[0]*n+r[4]*a+r[8]*c+r[12])/(h=h||1),i[1]=(r[1]*n+r[5]*a+r[9]*c+r[13])/h,i[2]=(r[2]*n+r[6]*a+r[10]*c+r[14])/h,i}function im(i,e,r){var n=r[0],a=r[1],c=r[2],h=e[0],p=e[1],A=e[2],y=a*A-c*p,v=c*h-n*A,w=n*p-a*h,T=a*w-c*v,S=c*y-n*w,k=n*v-a*y,N=2*r[3];return v*=N,w*=N,S*=2,k*=2,i[0]=h+(y*=N)+(T*=2),i[1]=p+v+S,i[2]=A+w+k,i}var Cc,il=$f,h_=em,d_=Xf;function rl(i,e,r){var n=e[0],a=e[1],c=e[2],h=e[3];return i[0]=r[0]*n+r[4]*a+r[8]*c+r[12]*h,i[1]=r[1]*n+r[5]*a+r[9]*c+r[13]*h,i[2]=r[2]*n+r[6]*a+r[10]*c+r[14]*h,i[3]=r[3]*n+r[7]*a+r[11]*c+r[15]*h,i}function rm(){var i=new Zr(4);return Zr!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function nm(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i}function om(i,e,r){r*=.5;var n=e[0],a=e[1],c=e[2],h=e[3],p=Math.sin(r),A=Math.cos(r);return i[0]=n*A+h*p,i[1]=a*A+c*p,i[2]=c*A-a*p,i[3]=h*A-n*p,i}Qd(),Cc=new Zr(4),Zr!=Float32Array&&(Cc[0]=0,Cc[1]=0,Cc[2]=0,Cc[3]=0),Qd(),xc(1,0,0),xc(0,1,0),rm(),rm(),Wf();class Wd{constructor(e,r){this.points=e,this.planes=r}static fromInvProjectionMatrix(e,r,n,a){const c=Math.pow(2,n),h=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const y=rl([],A,e),v=1/y[3]/r*c;return function(w,T,S){return w[0]=T[0]*S[0],w[1]=T[1]*S[1],w[2]=T[2]*S[2],w[3]=T[3]*S[3],w}(y,y,[v,v,a?1/y[3]:v,v])}),p=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const y=bc([],tm([],il([],h[A[0]],h[A[1]]),il([],h[A[2]],h[A[1]]))),v=-wc(y,h[A[1]]);return y.concat(v)});return new Wd(h,p)}}class an{constructor(e,r){this.min=e,this.max=r,this.center=vc([],Jf([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],n=Kf(this.min),a=Kf(this.max);for(let c=0;c<r.length;c++)n[c]=r[c]?this.min[c]:this.center[c],a[c]=r[c]?this.center[c]:this.max[c];return a[2]=this.max[2],new an(n,a)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,r=this.max;return[[e[0],e[1],e[2]],[r[0],e[1],e[2]],[r[0],r[1],e[2]],[e[0],r[1],e[2]],[e[0],e[1],r[2]],[r[0],e[1],r[2]],[r[0],r[1],r[2]],[e[0],r[1],r[2]]]}intersects(e){const r=this.getCorners();let n=!0;for(let a=0;a<e.planes.length;a++){const c=e.planes[a];let h=0;for(let p=0;p<r.length;p++)h+=wc(c,r[p])+c[3]>=0;if(h===0)return 0;h!==r.length&&(n=!1)}if(n)return 2;for(let a=0;a<3;a++){let c=Number.MAX_VALUE,h=-Number.MAX_VALUE;for(let p=0;p<e.points.length;p++){const A=e.points[p][a]-this.min[a];c=Math.min(c,A),h=Math.max(h,A)}if(h<0||c>this.max[a]-this.min[a])return 0}return 1}}function sm(i,e,r,n,a,c,h,p,A){if(c&&i.queryGeometry.isAboveHorizon)return!1;c&&(A*=i.pixelToTileUnitsFactor);for(const y of e)for(const v of y){const w=v.add(p),T=a&&r.elevation?r.elevation.exaggeration()*a.getElevationAt(w.x,w.y,!0):0,S=c?w:p_(w,T,n),k=c?i.tilespaceRays.map(F=>m_(F,T)):i.queryGeometry.screenGeometry,N=rl([],[v.x,v.y,T,1],n);if(!h&&c?A*=N[3]/r.cameraToCenterDistance:h&&!c&&(A*=r.cameraToCenterDistance/N[3]),n_(k,S,A))return!0}return!1}function p_(i,e,r){const n=rl([],[i.x,i.y,e,1],r);return new $(n[0]/n[3],n[1]/n[3])}const am=xc(0,0,0),f_=xc(0,0,1);function m_(i,e){const r=Qd();return am[2]=e,i.intersectsPlane(am,f_,r),new $(r[0],r[1])}class lm extends Od{}function cm(i,{width:e,height:r},n,a){if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==e*r*n)throw new RangeError("mismatched image size")}else a=new Uint8Array(e*r*n);return i.width=e,i.height=r,i.data=a,i}function um(i,e,r){const{width:n,height:a}=e;n===i.width&&a===i.height||(Kd(i,e,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,n),height:Math.min(i.height,a)},r),i.width=n,i.height=a,i.data=e.data)}function Kd(i,e,r,n,a,c){if(a.width===0||a.height===0)return e;if(a.width>i.width||a.height>i.height||r.x>i.width-a.width||r.y>i.height-a.height)throw new RangeError("out of range source coordinates for image copy");if(a.width>e.width||a.height>e.height||n.x>e.width-a.width||n.y>e.height-a.height)throw new RangeError("out of range destination coordinates for image copy");const h=i.data,p=e.data;for(let A=0;A<a.height;A++){const y=((r.y+A)*i.width+r.x)*c,v=((n.y+A)*e.width+n.x)*c;for(let w=0;w<a.width*c;w++)p[v+w]=h[y+w]}return e}tt(lm,{omit:["layers"]});class Io{constructor(e,r){cm(this,e,1,r)}resize(e){um(this,new Io(e),1)}clone(){return new Io({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,n,a,c){Kd(e,r,n,a,c,1)}}class jr{constructor(e,r){cm(this,e,4,r)}resize(e){um(this,new jr(e),4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new jr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,n,a,c){Kd(e,r,n,a,c,4)}}tt(Io),tt(jr);var A_={paint:new B({"heatmap-radius":new x(ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new x(ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new _(ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new D(ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new _(ye.paint_heatmap["heatmap-opacity"])})};function Xd(i){const e={},r=i.resolution||256,n=i.clips?i.clips.length:1,a=i.image||new jr({width:r,height:n}),c=(h,p,A)=>{e[i.evaluationKey]=A;const y=i.expression.evaluate(e);a.data[h+p+0]=Math.floor(255*y.r/y.a),a.data[h+p+1]=Math.floor(255*y.g/y.a),a.data[h+p+2]=Math.floor(255*y.b/y.a),a.data[h+p+3]=Math.floor(255*y.a)};if(i.clips)for(let h=0,p=0;h<n;++h,p+=4*r)for(let A=0,y=0;A<r;A++,y+=4){const v=A/(r-1),{start:w,end:T}=i.clips[h];c(p,y,w*(1-v)+T*v)}else for(let h=0,p=0;h<r;h++,p+=4)c(0,p,h/(r-1));return a}var g_={paint:new B({"hillshade-illumination-direction":new _(ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new _(ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new _(ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new _(ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new _(ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new _(ye.paint_hillshade["hillshade-accent-color"])})};const __=X([{name:"a_pos",components:2,type:"Int16"}],4),{members:y_}=__;var ph=fh,x_=fh;function fh(i,e,r){r=r||2;var n,a,c,h,p,A,y,v=e&&e.length,w=v?e[0]*r:i.length,T=hm(i,0,w,r,!0),S=[];if(!T||T.next===T.prev)return S;if(v&&(T=function(N,F,Q,ie){var oe,ae,ce,ue=[];for(oe=0,ae=F.length;oe<ae;oe++)(ce=hm(N,F[oe]*ie,oe<ae-1?F[oe+1]*ie:N.length,ie,!1))===ce.next&&(ce.steiner=!0),ue.push(I_(ce));for(ue.sort(T_),oe=0;oe<ue.length;oe++)Q=ns(Q=M_(ue[oe],Q),Q.next);return Q}(i,e,T,r)),i.length>80*r){n=c=i[0],a=h=i[1];for(var k=r;k<w;k+=r)(p=i[k])<n&&(n=p),(A=i[k+1])<a&&(a=A),p>c&&(c=p),A>h&&(h=A);y=(y=Math.max(c-n,h-a))!==0?1/y:0}return Tc(T,S,r,n,a,y),S}function hm(i,e,r,n,a){var c,h;if(a===ep(i,e,r,n)>0)for(c=e;c<r;c+=n)h=fm(c,i[c],i[c+1],h);else for(c=r-n;c>=e;c-=n)h=fm(c,i[c],i[c+1],h);return h&&mh(h,h.next)&&(Ec(h),h=h.next),h}function ns(i,e){if(!i)return i;e||(e=i);var r,n=i;do if(r=!1,n.steiner||!mh(n,n.next)&&Oi(n.prev,n,n.next)!==0)n=n.next;else{if(Ec(n),(n=e=n.prev)===n.next)break;r=!0}while(r||n!==e);return e}function Tc(i,e,r,n,a,c,h){if(i){!h&&c&&function(v,w,T,S){var k=v;do k.z===null&&(k.z=Jd(k.x,k.y,w,T,S)),k.prevZ=k.prev,k.nextZ=k.next,k=k.next;while(k!==v);k.prevZ.nextZ=null,k.prevZ=null,function(N){var F,Q,ie,oe,ae,ce,ue,we,Ee=1;do{for(Q=N,N=null,ae=null,ce=0;Q;){for(ce++,ie=Q,ue=0,F=0;F<Ee&&(ue++,ie=ie.nextZ);F++);for(we=Ee;ue>0||we>0&&ie;)ue!==0&&(we===0||!ie||Q.z<=ie.z)?(oe=Q,Q=Q.nextZ,ue--):(oe=ie,ie=ie.nextZ,we--),ae?ae.nextZ=oe:N=oe,oe.prevZ=ae,ae=oe;Q=ie}ae.nextZ=null,Ee*=2}while(ce>1)}(k)}(i,n,a,c);for(var p,A,y=i;i.prev!==i.next;)if(p=i.prev,A=i.next,c?b_(i,n,a,c):v_(i))e.push(p.i/r),e.push(i.i/r),e.push(A.i/r),Ec(i),i=A.next,y=A.next;else if((i=A)===y){h?h===1?Tc(i=w_(ns(i),e,r),e,r,n,a,c,2):h===2&&C_(i,e,r,n,a,c):Tc(ns(i),e,r,n,a,c,1);break}}}function v_(i){var e=i.prev,r=i,n=i.next;if(Oi(e,r,n)>=0)return!1;for(var a=i.next.next;a!==i.prev;){if(nl(e.x,e.y,r.x,r.y,n.x,n.y,a.x,a.y)&&Oi(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function b_(i,e,r,n){var a=i.prev,c=i,h=i.next;if(Oi(a,c,h)>=0)return!1;for(var p=a.x>c.x?a.x>h.x?a.x:h.x:c.x>h.x?c.x:h.x,A=a.y>c.y?a.y>h.y?a.y:h.y:c.y>h.y?c.y:h.y,y=Jd(a.x<c.x?a.x<h.x?a.x:h.x:c.x<h.x?c.x:h.x,a.y<c.y?a.y<h.y?a.y:h.y:c.y<h.y?c.y:h.y,e,r,n),v=Jd(p,A,e,r,n),w=i.prevZ,T=i.nextZ;w&&w.z>=y&&T&&T.z<=v;){if(w!==i.prev&&w!==i.next&&nl(a.x,a.y,c.x,c.y,h.x,h.y,w.x,w.y)&&Oi(w.prev,w,w.next)>=0||(w=w.prevZ,T!==i.prev&&T!==i.next&&nl(a.x,a.y,c.x,c.y,h.x,h.y,T.x,T.y)&&Oi(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;w&&w.z>=y;){if(w!==i.prev&&w!==i.next&&nl(a.x,a.y,c.x,c.y,h.x,h.y,w.x,w.y)&&Oi(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;T&&T.z<=v;){if(T!==i.prev&&T!==i.next&&nl(a.x,a.y,c.x,c.y,h.x,h.y,T.x,T.y)&&Oi(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function w_(i,e,r){var n=i;do{var a=n.prev,c=n.next.next;!mh(a,c)&&dm(a,n,n.next,c)&&Mc(a,c)&&Mc(c,a)&&(e.push(a.i/r),e.push(n.i/r),e.push(c.i/r),Ec(n),Ec(n.next),n=i=c),n=n.next}while(n!==i);return ns(n)}function C_(i,e,r,n,a,c){var h=i;do{for(var p=h.next.next;p!==h.prev;){if(h.i!==p.i&&D_(h,p)){var A=pm(h,p);return h=ns(h,h.next),A=ns(A,A.next),Tc(h,e,r,n,a,c),void Tc(A,e,r,n,a,c)}p=p.next}h=h.next}while(h!==i)}function T_(i,e){return i.x-e.x}function M_(i,e){var r=function(c,h){var p,A=h,y=c.x,v=c.y,w=-1/0;do{if(v<=A.y&&v>=A.next.y&&A.next.y!==A.y){var T=A.x+(v-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(T<=y&&T>w){if(w=T,T===y){if(v===A.y)return A;if(v===A.next.y)return A.next}p=A.x<A.next.x?A:A.next}}A=A.next}while(A!==h);if(!p)return null;if(y===w)return p;var S,k=p,N=p.x,F=p.y,Q=1/0;A=p;do y>=A.x&&A.x>=N&&y!==A.x&&nl(v<F?y:w,v,N,F,v<F?w:y,v,A.x,A.y)&&(S=Math.abs(v-A.y)/(y-A.x),Mc(A,c)&&(S<Q||S===Q&&(A.x>p.x||A.x===p.x&&E_(p,A)))&&(p=A,Q=S)),A=A.next;while(A!==k);return p}(i,e);if(!r)return e;var n=pm(r,i),a=ns(r,r.next);return ns(n,n.next),e===r?a:e}function E_(i,e){return Oi(i.prev,i,e.prev)<0&&Oi(e.next,i,i.next)<0}function Jd(i,e,r,n,a){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-r)*a)|i<<8))|i<<4))|i<<2))|i<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function I_(i){var e=i,r=i;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==i);return r}function nl(i,e,r,n,a,c,h,p){return(a-h)*(e-p)-(i-h)*(c-p)>=0&&(i-h)*(n-p)-(r-h)*(e-p)>=0&&(r-h)*(c-p)-(a-h)*(n-p)>=0}function D_(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!function(r,n){var a=r;do{if(a.i!==r.i&&a.next.i!==r.i&&a.i!==n.i&&a.next.i!==n.i&&dm(a,a.next,r,n))return!0;a=a.next}while(a!==r);return!1}(i,e)&&(Mc(i,e)&&Mc(e,i)&&function(r,n){var a=r,c=!1,h=(r.x+n.x)/2,p=(r.y+n.y)/2;do a.y>p!=a.next.y>p&&a.next.y!==a.y&&h<(a.next.x-a.x)*(p-a.y)/(a.next.y-a.y)+a.x&&(c=!c),a=a.next;while(a!==r);return c}(i,e)&&(Oi(i.prev,i,e.prev)||Oi(i,e.prev,e))||mh(i,e)&&Oi(i.prev,i,i.next)>0&&Oi(e.prev,e,e.next)>0)}function Oi(i,e,r){return(e.y-i.y)*(r.x-e.x)-(e.x-i.x)*(r.y-e.y)}function mh(i,e){return i.x===e.x&&i.y===e.y}function dm(i,e,r,n){var a=gh(Oi(i,e,r)),c=gh(Oi(i,e,n)),h=gh(Oi(r,n,i)),p=gh(Oi(r,n,e));return a!==c&&h!==p||!(a!==0||!Ah(i,r,e))||!(c!==0||!Ah(i,n,e))||!(h!==0||!Ah(r,i,n))||!(p!==0||!Ah(r,e,n))}function Ah(i,e,r){return e.x<=Math.max(i.x,r.x)&&e.x>=Math.min(i.x,r.x)&&e.y<=Math.max(i.y,r.y)&&e.y>=Math.min(i.y,r.y)}function gh(i){return i>0?1:i<0?-1:0}function Mc(i,e){return Oi(i.prev,i,i.next)<0?Oi(i,e,i.next)>=0&&Oi(i,i.prev,e)>=0:Oi(i,e,i.prev)<0||Oi(i,i.next,e)<0}function pm(i,e){var r=new $d(i.i,i.x,i.y),n=new $d(e.i,e.x,e.y),a=i.next,c=e.prev;return i.next=e,e.prev=i,r.next=a,a.prev=r,n.next=r,r.prev=n,c.next=n,n.prev=c,n}function fm(i,e,r,n){var a=new $d(i,e,r);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function Ec(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function $d(i,e,r){this.i=i,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ep(i,e,r,n){for(var a=0,c=e,h=r-n;c<r;c+=n)a+=(i[h]-i[c])*(i[c+1]+i[h+1]),h=c;return a}function S_(i,e,r,n,a){mm(i,e,r||0,n||i.length-1,a||z_)}function mm(i,e,r,n,a){for(;n>r;){if(n-r>600){var c=n-r+1,h=e-r+1,p=Math.log(c),A=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*A*(c-A)/c)*(h-c/2<0?-1:1);mm(i,e,Math.max(r,Math.floor(e-h*A/c+y)),Math.min(n,Math.floor(e+(c-h)*A/c+y)),a)}var v=i[e],w=r,T=n;for(Ic(i,r,e),a(i[n],v)>0&&Ic(i,r,n);w<T;){for(Ic(i,w,T),w++,T--;a(i[w],v)<0;)w++;for(;a(i[T],v)>0;)T--}a(i[r],v)===0?Ic(i,r,T):Ic(i,++T,n),T<=e&&(r=T+1),e<=T&&(n=T-1)}}function Ic(i,e,r){var n=i[e];i[e]=i[r],i[r]=n}function z_(i,e){return i<e?-1:i>e?1:0}function tp(i,e){const r=i.length;if(r<=1)return[i];const n=[];let a,c;for(let h=0;h<r;h++){const p=Pe(i[h]);p!==0&&(i[h].area=Math.abs(p),c===void 0&&(c=p<0),c===p<0?(a&&n.push(a),a=[i[h]]):a.push(i[h]))}if(a&&n.push(a),e>1)for(let h=0;h<n.length;h++)n[h].length<=e||(S_(n[h],e,1,n[h].length-1,B_),n[h]=n[h].slice(0,e));return n}function B_(i,e){return e.area-i.area}function ip(i,e,r){const n=r.patternDependencies;let a=!1;for(const c of e){const h=c.paint.get(`${i}-pattern`);h.isConstant()||(a=!0);const p=h.constantOr(null);p&&(a=!0,n[p.to]=!0,n[p.from]=!0)}return a}function rp(i,e,r,n,a){const c=a.patternDependencies;for(const h of e){const p=h.paint.get(`${i}-pattern`).value;if(p.kind!=="constant"){let A=p.evaluate({zoom:n-1},r,{},a.availableImages),y=p.evaluate({zoom:n},r,{},a.availableImages),v=p.evaluate({zoom:n+1},r,{},a.availableImages);A=A&&A.name?A.name:A,y=y&&y.name?y.name:y,v=v&&v.name?v.name:v,c[A]=!0,c[y]=!0,c[v]=!0,r.patterns[h.id]={min:A,mid:y,max:v}}}return r}fh.deviation=function(i,e,r,n){var a=e&&e.length,c=Math.abs(ep(i,0,a?e[0]*r:i.length,r));if(a)for(var h=0,p=e.length;h<p;h++)c-=Math.abs(ep(i,e[h]*r,h<p-1?e[h+1]*r:i.length,r));var A=0;for(h=0;h<n.length;h+=3){var y=n[h]*r,v=n[h+1]*r,w=n[h+2]*r;A+=Math.abs((i[y]-i[w])*(i[v+1]-i[y+1])-(i[y]-i[v])*(i[w+1]-i[y+1]))}return c===0&&A===0?0:Math.abs((A-c)/c)},fh.flatten=function(i){for(var e=i[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,a=0;a<i.length;a++){for(var c=0;c<i[a].length;c++)for(var h=0;h<e;h++)r.vertices.push(i[a][c][h]);a>0&&r.holes.push(n+=i[a-1].length)}return r},ph.default=x_;class _h{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new q,this.indexArray=new be,this.indexArray2=new ct,this.programConfigurations=new $s(e.layers,e.zoom),this.segments=new Bi,this.segments2=new Bi,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.projection=e.projection}populate(e,r,n,a){this.hasPattern=ip("fill",this.layers,r);const c=this.layers[0].layout.get("fill-sort-key"),h=[];for(const{feature:p,id:A,index:y,sourceLayerIndex:v}of e){const w=this.layers[0]._featureFilter.needGeometry,T=ea(p,w);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),T,n))continue;const S=c?c.evaluate(T,{},n,r.availableImages):void 0,k={id:A,properties:p.properties,type:p.type,sourceLayerIndex:v,index:y,geometry:w?T.geometry:Eo(p,n,a),patterns:{},sortKey:S};h.push(k)}c&&h.sort((p,A)=>p.sortKey-A.sortKey);for(const p of h){const{geometry:A,index:y,sourceLayerIndex:v}=p;if(this.hasPattern){const w=rp("fill",this.layers,p,this.zoom,r);this.patternFeatures.push(w)}else this.addFeature(p,A,y,n,{},r.availableImages);r.featureIndex.insert(e[y].feature,A,y,v,this.index)}}update(e,r,n,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,n,a)}addFeatures(e,r,n,a,c){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,r,n,a)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,y_),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,n,a,c,h=[]){for(const p of tp(r,500)){let A=0;for(const k of p)A+=k.length;const y=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),v=y.vertexLength,w=[],T=[];for(const k of p){if(k.length===0)continue;k!==p[0]&&T.push(w.length/2);const N=this.segments2.prepareSegment(k.length,this.layoutVertexArray,this.indexArray2),F=N.vertexLength;this.layoutVertexArray.emplaceBack(k[0].x,k[0].y),this.indexArray2.emplaceBack(F+k.length-1,F),w.push(k[0].x),w.push(k[0].y);for(let Q=1;Q<k.length;Q++)this.layoutVertexArray.emplaceBack(k[Q].x,k[Q].y),this.indexArray2.emplaceBack(F+Q-1,F+Q),w.push(k[Q].x),w.push(k[Q].y);N.vertexLength+=k.length,N.primitiveLength+=k.length}const S=ph(w,T);for(let k=0;k<S.length;k+=3)this.indexArray.emplaceBack(v+S[k],v+S[k+1],v+S[k+2]);y.vertexLength+=A,y.primitiveLength+=S.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,c,h,a)}}tt(_h,{omit:["layers","patternFeatures"]});const k_=new B({"fill-sort-key":new x(ye.layout_fill["fill-sort-key"])});var L_={paint:new B({"fill-antialias":new _(ye.paint_fill["fill-antialias"]),"fill-opacity":new x(ye.paint_fill["fill-opacity"]),"fill-color":new x(ye.paint_fill["fill-color"]),"fill-outline-color":new x(ye.paint_fill["fill-outline-color"]),"fill-translate":new _(ye.paint_fill["fill-translate"]),"fill-translate-anchor":new _(ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new C(ye.paint_fill["fill-pattern"])}),layout:k_};const P_=X([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),R_=X([{name:"a_centroid_pos",components:2,type:"Uint16"}]),N_=X([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:O_}=P_;var Am=ol;function ol(i,e,r,n,a){this.properties={},this.extent=r,this.type=0,this._pbf=i,this._geometry=-1,this._keys=n,this._values=a,i.readFields(G_,this,e)}function G_(i,e,r){i==1?e.id=r.readVarint():i==2?function(n,a){for(var c=n.readVarint()+n.pos;n.pos<c;){var h=a._keys[n.readVarint()],p=a._values[n.readVarint()];a.properties[h]=p}}(r,e):i==3?e.type=r.readVarint():i==4&&(e._geometry=r.pos)}function F_(i){for(var e,r,n=0,a=0,c=i.length,h=c-1;a<c;h=a++)n+=((r=i[h]).x-(e=i[a]).x)*(e.y+r.y);return n}ol.types=["Unknown","Point","LineString","Polygon"],ol.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var e,r=i.readVarint()+i.pos,n=1,a=0,c=0,h=0,p=[];i.pos<r;){if(a<=0){var A=i.readVarint();n=7&A,a=A>>3}if(a--,n===1||n===2)c+=i.readSVarint(),h+=i.readSVarint(),n===1&&(e&&p.push(e),e=[]),e.push(new $(c,h));else{if(n!==7)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&p.push(e),p},ol.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var e=i.readVarint()+i.pos,r=1,n=0,a=0,c=0,h=1/0,p=-1/0,A=1/0,y=-1/0;i.pos<e;){if(n<=0){var v=i.readVarint();r=7&v,n=v>>3}if(n--,r===1||r===2)(a+=i.readSVarint())<h&&(h=a),a>p&&(p=a),(c+=i.readSVarint())<A&&(A=c),c>y&&(y=c);else if(r!==7)throw new Error("unknown command "+r)}return[h,A,p,y]},ol.prototype.toGeoJSON=function(i,e,r){var n,a,c=this.extent*Math.pow(2,r),h=this.extent*i,p=this.extent*e,A=this.loadGeometry(),y=ol.types[this.type];function v(S){for(var k=0;k<S.length;k++){var N=S[k];S[k]=[360*(N.x+h)/c-180,360/Math.PI*Math.atan(Math.exp((180-360*(N.y+p)/c)*Math.PI/180))-90]}}switch(this.type){case 1:var w=[];for(n=0;n<A.length;n++)w[n]=A[n][0];v(A=w);break;case 2:for(n=0;n<A.length;n++)v(A[n]);break;case 3:for(A=function(S){var k=S.length;if(k<=1)return[S];for(var N,F,Q=[],ie=0;ie<k;ie++){var oe=F_(S[ie]);oe!==0&&(F===void 0&&(F=oe<0),F===oe<0?(N&&Q.push(N),N=[S[ie]]):N.push(S[ie]))}return N&&Q.push(N),Q}(A),n=0;n<A.length;n++)for(a=0;a<A[n].length;a++)v(A[n][a])}A.length===1?A=A[0]:y="Multi"+y;var T={type:"Feature",geometry:{type:y,coordinates:A},properties:this.properties};return"id"in this&&(T.id=this.id),T};var gm=_m;function _m(i,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(V_,this,e),this.length=this._features.length}function V_(i,e,r){i===15?e.version=r.readVarint():i===1?e.name=r.readString():i===5?e.extent=r.readVarint():i===2?e._features.push(r.pos):i===3?e._keys.push(r.readString()):i===4&&e._values.push(function(n){for(var a=null,c=n.readVarint()+n.pos;n.pos<c;){var h=n.readVarint()>>3;a=h===1?n.readString():h===2?n.readFloat():h===3?n.readDouble():h===4?n.readVarint64():h===5?n.readVarint():h===6?n.readSVarint():h===7?n.readBoolean():null}return a}(r))}function U_(i,e,r){if(i===3){var n=new gm(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}_m.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var e=this._pbf.readVarint()+this._pbf.pos;return new Am(this._pbf,e,this.extent,this._keys,this._values)};var ra={VectorTile:function(i,e){this.layers=i.readFields(U_,{},e)},VectorTileFeature:Am,VectorTileLayer:gm};function yh(i,e,r,n){const a=[],c=n===0?(h,p,A,y,v,w)=>{h.push(new $(w,A+(w-p)/(y-p)*(v-A)))}:(h,p,A,y,v,w)=>{h.push(new $(p+(w-A)/(v-A)*(y-p),w))};for(const h of i){const p=[];for(const A of h){if(A.length<=2)continue;const y=[];for(let T=0;T<A.length-1;T++){const S=A[T].x,k=A[T].y,N=A[T+1].x,F=A[T+1].y,Q=n===0?S:k,ie=n===0?N:F;Q<e?ie>e&&c(y,S,k,N,F,e):Q>r?ie<r&&c(y,S,k,N,F,r):y.push(A[T]),ie<e&&Q>=e&&c(y,S,k,N,F,e),ie>r&&Q<=r&&c(y,S,k,N,F,r)}let v=A[A.length-1];const w=n===0?v.x:v.y;w>=e&&w<=r&&y.push(v),y.length&&(v=y[y.length-1],y[0].x===v.x&&y[0].y===v.y||y.push(y[0]),p.push(y))}p.length&&a.push(p)}return a}const Z_=ra.VectorTileFeature.types,j_=Math.pow(2,13);function Dc(i,e,r,n,a,c,h,p){i.emplaceBack((e<<1)+h,(r<<1)+c,(Math.floor(n*j_)<<1)+a,Math.round(p))}function Sc(i,e,r){i.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class ym{constructor(){this.acc=new $(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new $(e.x,e.y),this.max=new $(e.x,e.y))}append(e,r){this.currentPolyCount.edges++,this.acc._add(e);const n=this.min,a=this.max;e.x<n.x?n.x=e.x:e.x>a.x&&(a.x=e.x),e.y<n.y?n.y=e.y:e.y>a.y&&(a.y=e.y),((e.x===0||e.x===St)&&e.x===r.x)!=((e.y===0||e.y===St)&&e.y===r.y)&&this.processBorderOverlap(e,r),r.x<0!=e.x<0&&this.addBorderIntersection(0,_t(r.y,e.y,(0-r.x)/(e.x-r.x))),r.x>St!=e.x>St&&this.addBorderIntersection(1,_t(r.y,e.y,(St-r.x)/(e.x-r.x))),r.y<0!=e.y<0&&this.addBorderIntersection(2,_t(r.x,e.x,(0-r.y)/(e.y-r.y))),r.y>St!=e.y>St&&this.addBorderIntersection(3,_t(r.x,e.x,(St-r.y)/(e.y-r.y)))}addBorderIntersection(e,r){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[e];r<n[0]&&(n[0]=r),r>n[1]&&(n[1]=r)}processBorderOverlap(e,r){if(e.x===r.x){if(e.y===r.y)return;const n=e.x===0?0:1;this.addBorderIntersection(n,r.y),this.addBorderIntersection(n,e.y)}else{const n=e.y===0?2:3;this.addBorderIntersection(n,r.x),this.addBorderIntersection(n,e.x)}}centroid(){const e=this.polyCount.reduce((r,n)=>r+n.edges,0);return e!==0?this.acc.div(e)._round():new $(0,0)}span(){return new $(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,r)=>e+ +(r[0]!==Number.MAX_VALUE),0)}}class zc{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new ee,this.centroidVertexArray=new Js,this.indexArray=new be,this.programConfigurations=new $s(e.layers,e.zoom),this.segments=new Bi,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.enableTerrain=e.enableTerrain}populate(e,r,n,a){this.features=[],this.hasPattern=ip("fill-extrusion",this.layers,r),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(c){const h=Math.exp(Math.PI*(1-c.y/(1<<c.z)*2));return 80150034*h/(h*h+1)/St/(1<<c.z)}(n);for(const{feature:c,id:h,index:p,sourceLayerIndex:A}of e){const y=this.layers[0]._featureFilter.needGeometry,v=ea(c,y);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),v,n))continue;const w={id:h,sourceLayerIndex:A,index:p,geometry:y?v.geometry:Eo(c,n,a),properties:c.properties,type:c.type,patterns:{}},T=this.layoutVertexArray.length;this.hasPattern?this.features.push(rp("fill-extrusion",this.layers,w,this.zoom,r)):this.addFeature(w,w.geometry,p,n,{},r.availableImages,a),r.featureIndex.insert(c,w.geometry,p,A,this.index,T)}this.sortBorders()}addFeatures(e,r,n,a,c){for(const h of this.features){const{geometry:p}=h;this.addFeature(h,p,h.index,r,n,a,c)}this.sortBorders()}update(e,r,n,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,n,a)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,O_),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,N_.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,R_.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,n,a,c,h,p){const A=[new $(0,0),new $(St,St)],y=p.projection,v=y.name==="globe",w=this.enableTerrain&&!v?new ym:null;v&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new zr);const T=tp(r,500);for(let N=T.length-1;N>=0;N--){const F=T[N];(F.length===0||(S=F[0]).every(Q=>Q.x<=0)||S.every(Q=>Q.x>=St)||S.every(Q=>Q.y<=0)||S.every(Q=>Q.y>=St))&&T.splice(N,1)}var S;let k;if(v){const F=1<<a.z,Q=An(a.x/F),ie=An((a.x+1)/F),oe=sr(a.y/F),ae=sr((a.y+1)/F);k=function(ce,ue,we,Ee,ze=0,ke){const xe=[];if(!ce.length||!we||!Ee)return xe;const De=(It,Lt)=>{for(const lt of It)xe.push({polygon:lt,bounds:Lt})},Ne=Math.ceil(Math.log2(we)),Qe=Math.ceil(Math.log2(Ee)),Fe=Ne-Qe,je=[];for(let It=0;It<Math.abs(Fe);It++)je.push(Fe>0?0:1);for(let It=0;It<Math.min(Ne,Qe);It++)je.push(0),je.push(1);let Et=ce;if(Et=yh(Et,ue[0].y-ze,ue[1].y+ze,1),Et=yh(Et,ue[0].x-ze,ue[1].x+ze,0),!Et.length)return xe;const Nt=[];for(je.length?Nt.push({polygons:Et,bounds:ue,depth:0}):De(Et,ue);Nt.length;){const It=Nt.pop(),Lt=It.depth,lt=je[Lt],et=It.bounds[0],Vt=It.bounds[1],ni=lt===0?et.x:et.y,Ui=lt===0?Vt.x:Vt.y,_i=ke?ke(lt,ni,Ui):.5*(ni+Ui),Zi=yh(It.polygons,ni-ze,_i+ze,lt),oi=yh(It.polygons,_i-ze,Ui+ze,lt);if(Zi.length){const Zt=[et,new $(lt===0?_i:Vt.x,lt===1?_i:Vt.y)];je.length>Lt+1?Nt.push({polygons:Zi,bounds:Zt,depth:Lt+1}):De(Zi,Zt)}if(oi.length){const Zt=[new $(lt===0?_i:et.x,lt===1?_i:et.y),Vt];je.length>Lt+1?Nt.push({polygons:oi,bounds:Zt,depth:Lt+1}):De(oi,Zt)}}return xe}(T,A,Math.ceil((ie-Q)/11.25),Math.ceil((oe-ae)/11.25),1,(ce,ue,we)=>{if(ce===0)return .5*(ue+we);{const Ee=sr((a.y+ue/St)/F);return(Ja(.5*(sr((a.y+we/St)/F)+Ee))*F-a.y)*St}})}else{k=[];for(const N of T)k.push({polygon:N,bounds:A})}for(const N of k){const F=N.polygon;let Q=0,ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let we=0;we<F.length;we++){const Ee=F[we];if(Ee.length===0)continue;Q+=Ee.length;let ze=0;w&&w.startRing(Ee[0]);for(let ke=0;ke<Ee.length;ke++){const xe=Ee[ke];if(ke>=1){const De=Ee[ke-1];if(!Q_(xe,De,N.bounds)){w&&w.append(xe,De),ie.vertexLength+4>Bi.MAX_VERTEX_ARRAY_LENGTH&&(ie=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ne=xe.sub(De)._perp(),Qe=Ne.x/(Math.abs(Ne.x)+Math.abs(Ne.y)),Fe=Ne.y>0?1:0,je=De.dist(xe);ze+je>32768&&(ze=0),Dc(this.layoutVertexArray,xe.x,xe.y,Qe,Fe,0,0,ze),Dc(this.layoutVertexArray,xe.x,xe.y,Qe,Fe,0,1,ze),ze+=je,Dc(this.layoutVertexArray,De.x,De.y,Qe,Fe,0,0,ze),Dc(this.layoutVertexArray,De.x,De.y,Qe,Fe,0,1,ze);const Et=ie.vertexLength;if(this.indexArray.emplaceBack(Et,Et+2,Et+1),this.indexArray.emplaceBack(Et+1,Et+2,Et+3),ie.vertexLength+=4,ie.primitiveLength+=2,v){const Nt=this.layoutVertexExtArray,It=y.projectTilePoint(xe.x,xe.y,a),Lt=y.projectTilePoint(De.x,De.y,a),lt=y.upVector(a,xe.x,xe.y),et=y.upVector(a,De.x,De.y);Sc(Nt,It,lt),Sc(Nt,It,lt),Sc(Nt,Lt,et),Sc(Nt,Lt,et)}}}}}if(ie.vertexLength+Q>Bi.MAX_VERTEX_ARRAY_LENGTH&&(ie=this.segments.prepareSegment(Q,this.layoutVertexArray,this.indexArray)),Z_[e.type]!=="Polygon")continue;const oe=[],ae=[],ce=ie.vertexLength;for(let we=0;we<F.length;we++){const Ee=F[we];if(Ee.length!==0){Ee!==F[0]&&ae.push(oe.length/2);for(let ze=0;ze<Ee.length;ze++){const ke=Ee[ze];Dc(this.layoutVertexArray,ke.x,ke.y,0,0,1,1,0),oe.push(ke.x),oe.push(ke.y),w&&w.currentPolyCount.top++,v&&Sc(this.layoutVertexExtArray,y.projectTilePoint(ke.x,ke.y,a),y.upVector(a,ke.x,ke.y))}}}const ue=ph(oe,ae);for(let we=0;we<ue.length;we+=3)this.indexArray.emplaceBack(ce+ue[we],ce+ue[we+2],ce+ue[we+1]);ie.primitiveLength+=ue.length/3,ie.vertexLength+=Q}if(w&&w.polyCount.length>0){if(w.borders){w.vertexArrayOffset=this.centroidVertexArray.length;const N=w.borders,F=this.featuresOnBorder.push(w)-1;for(let Q=0;Q<4;Q++)N[Q][0]!==Number.MAX_VALUE&&this.borders[Q].push(F)}this.encodeCentroid(w.borders?void 0:w.centroid(),w)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,c,h,a)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((r,n)=>this.featuresOnBorder[r].borders[e][0]-this.featuresOnBorder[n].borders[e][0])}encodeCentroid(e,r,n=!0){let a,c;if(e)if(e.y!==0){const p=r.span()._mult(this.tileToMeter);a=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(p.x/10)),c=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(p.y/10))}else a=Math.ceil(7*(e.x+450)),c=0;else a=0,c=+n;let h=n?this.centroidVertexArray.length:r.vertexArrayOffset;for(const p of r.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*p.edges+p.top);for(let A=0;A<2*p.edges;A++)this.centroidVertexArray.emplace(h++,0,c),this.centroidVertexArray.emplace(h++,a,c);for(let A=0;A<p.top;A++)this.centroidVertexArray.emplace(h++,a,c)}}}function Q_(i,e,r){return i.x===e.x&&(i.x<r[0].x||i.x>r[1].x)||i.y===e.y&&(i.y<r[0].y||i.y>r[1].y)}tt(zc,{omit:["layers","features"]}),tt(ym);var Y_={paint:new B({"fill-extrusion-opacity":new _(ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new x(ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new _(ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new _(ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new C(ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new x(ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new x(ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new _(ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Bc(i,e){return i.x*e.x+i.y*e.y}function xm(i,e){if(i.length===1){let r=0;const n=e[r++];let a;for(;!a||n.equals(a);)if(a=e[r++],!a)return 1/0;for(;r<e.length;r++){const c=e[r],h=i[0],p=a.sub(n),A=c.sub(n),y=h.sub(n),v=Bc(p,p),w=Bc(p,A),T=Bc(A,A),S=Bc(y,p),k=Bc(y,A),N=v*T-w*w,F=(T*S-w*k)/N,Q=(v*k-w*S)/N,ie=n.z*(1-F-Q)+a.z*F+c.z*Q;if(isFinite(ie))return ie}return 1/0}{let r=1/0;for(const n of e)r=Math.min(r,n.z);return r}}function vm(i){const e=new $(i[0],i[1]);return e.z=i[2],e}function H_(i,e,r,n,a,c,h,p){const A=h*a.getElevationAt(i,e,!0,!0),y=c[0]!==0,v=y?c[1]===0?h*(c[0]/7-450):h*function(w,T,S){const k=Math.floor(T[0]/8),N=Math.floor(T[1]/8),F=10*(T[0]-8*k),Q=10*(T[1]-8*N),ie=w.getElevationAt(k,N,!0,!0),oe=w.getMeterToDEM(S),ae=Math.floor(.5*(F*oe-1)),ce=Math.floor(.5*(Q*oe-1)),ue=w.tileCoordToPixel(k,N),we=2*ae+1,Ee=2*ce+1,ze=function(Fe,je,Et,Nt,It){return[Fe.getElevationAtPixel(je,Et,!0),Fe.getElevationAtPixel(je+It,Et,!0),Fe.getElevationAtPixel(je,Et+It,!0),Fe.getElevationAtPixel(je+Nt,Et+It,!0)]}(w,ue.x-ae,ue.y-ce,we,Ee),ke=Math.abs(ze[0]-ze[1]),xe=Math.abs(ze[2]-ze[3]),De=Math.abs(ze[0]-ze[2])+Math.abs(ze[1]-ze[3]),Ne=Math.min(.25,.5*oe*(ke+xe)/we),Qe=Math.min(.25,.5*oe*De/Ee);return ie+Math.max(Ne*F,Qe*Q)}(a,c,p):A;return{base:A+(r===0)?-1:r,top:y?Math.max(v+n,A+r+2):A+n}}const q_=X([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:W_}=q_,K_=X([{name:"a_packed",components:3,type:"Float32"}]),{members:X_}=K_,J_=ra.VectorTileFeature.types,$_=Math.cos(Math.PI/180*37.5);class xh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new H,this.layoutVertexArray2=new re,this.indexArray=new be,this.programConfigurations=new $s(e.layers,e.zoom),this.segments=new Bi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,n,a){this.hasPattern=ip("line",this.layers,r);const c=this.layers[0].layout.get("line-sort-key"),h=[];for(const{feature:v,id:w,index:T,sourceLayerIndex:S}of e){const k=this.layers[0]._featureFilter.needGeometry,N=ea(v,k);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),N,n))continue;const F=c?c.evaluate(N,{},n):void 0,Q={id:w,properties:v.properties,type:v.type,sourceLayerIndex:S,index:T,geometry:k?N.geometry:Eo(v,n,a),patterns:{},sortKey:F};h.push(Q)}c&&h.sort((v,w)=>v.sortKey-w.sortKey);const{lineAtlas:p,featureIndex:A}=r,y=this.addConstantDashes(p);for(const v of h){const{geometry:w,index:T,sourceLayerIndex:S}=v;if(y&&this.addFeatureDashes(v,p),this.hasPattern){const k=rp("line",this.layers,v,this.zoom,r);this.patternFeatures.push(k)}else this.addFeature(v,w,T,n,p.positions,r.availableImages);A.insert(e[T].feature,w,T,S,this.index)}}addConstantDashes(e){let r=!1;for(const n of this.layers){const a=n.paint.get("line-dasharray").value,c=n.layout.get("line-cap").value;if(a.kind!=="constant"||c.kind!=="constant")r=!0;else{const h=c.value,p=a.value;if(!p)continue;e.addDash(p.from,h),e.addDash(p.to,h),p.other&&e.addDash(p.other,h)}}return r}addFeatureDashes(e,r){const n=this.zoom;for(const a of this.layers){const c=a.paint.get("line-dasharray").value,h=a.layout.get("line-cap").value;if(c.kind==="constant"&&h.kind==="constant")continue;let p,A,y,v,w,T;if(c.kind==="constant"){const F=c.value;if(!F)continue;p=F.other||F.to,A=F.to,y=F.from}else p=c.evaluate({zoom:n-1},e),A=c.evaluate({zoom:n},e),y=c.evaluate({zoom:n+1},e);h.kind==="constant"?v=w=T=h.value:(v=h.evaluate({zoom:n-1},e),w=h.evaluate({zoom:n},e),T=h.evaluate({zoom:n+1},e)),r.addDash(p,v),r.addDash(A,w),r.addDash(y,T);const S=r.getKey(p,v),k=r.getKey(A,w),N=r.getKey(y,T);e.patterns[a.id]={min:S,mid:k,max:N}}}update(e,r,n,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,n,a)}addFeatures(e,r,n,a,c){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,r,n,a)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,X_)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,W_),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,n,a,c,h){const p=this.layers[0].layout,A=p.get("line-join").evaluate(e,{}),y=p.get("line-cap").evaluate(e,{}),v=p.get("line-miter-limit"),w=p.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const T of r)this.addLine(T,e,A,y,v,w);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,c,h,a)}addLine(e,r,n,a,c,h){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Q=0;Q<e.length-1;Q++)this.totalDistance+=e[Q].dist(e[Q+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const p=J_[r.type]==="Polygon";let A=e.length;for(;A>=2&&e[A-1].equals(e[A-2]);)A--;let y=0;for(;y<A-1&&e[y].equals(e[y+1]);)y++;if(A<(p?3:2))return;n==="bevel"&&(c=1.05);const v=this.overscaling<=16?122880/(512*this.overscaling):0,w=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray);let T,S,k,N,F;this.e1=this.e2=-1,p&&(T=e[A-2],F=e[y].sub(T)._unit()._perp());for(let Q=y;Q<A;Q++){if(k=Q===A-1?p?e[y+1]:void 0:e[Q+1],k&&e[Q].equals(k))continue;F&&(N=F),T&&(S=T),T=e[Q],F=k?k.sub(T)._unit()._perp():N,N=N||F;let ie=N.add(F);ie.x===0&&ie.y===0||ie._unit();const oe=N.x*F.x+N.y*F.y,ae=ie.x*F.x+ie.y*F.y,ce=ae!==0?1/ae:1/0,ue=2*Math.sqrt(2-2*ae),we=ae<$_&&S&&k,Ee=N.x*F.y-N.y*F.x>0;if(we&&Q>y){const xe=T.dist(S);if(xe>2*v){const De=T.sub(T.sub(S)._mult(v/xe)._round());this.updateDistance(S,De),this.addCurrentVertex(De,N,0,0,w),S=De}}const ze=S&&k;let ke=ze?n:p?"butt":a;if(ze&&ke==="round"&&(ce<h?ke="miter":ce<=2&&(ke="fakeround")),ke==="miter"&&ce>c&&(ke="bevel"),ke==="bevel"&&(ce>2&&(ke="flipbevel"),ce<c&&(ke="miter")),S&&this.updateDistance(S,T),ke==="miter")ie._mult(ce),this.addCurrentVertex(T,ie,0,0,w);else if(ke==="flipbevel"){if(ce>100)ie=F.mult(-1);else{const xe=ce*N.add(F).mag()/N.sub(F).mag();ie._perp()._mult(xe*(Ee?-1:1))}this.addCurrentVertex(T,ie,0,0,w),this.addCurrentVertex(T,ie.mult(-1),0,0,w)}else if(ke==="bevel"||ke==="fakeround"){const xe=-Math.sqrt(ce*ce-1),De=Ee?xe:0,Ne=Ee?0:xe;if(S&&this.addCurrentVertex(T,N,De,Ne,w),ke==="fakeround"){const Qe=Math.round(180*ue/Math.PI/20);for(let Fe=1;Fe<Qe;Fe++){let je=Fe/Qe;if(je!==.5){const Nt=je-.5;je+=je*Nt*(je-1)*((1.0904+oe*(oe*(3.55645-1.43519*oe)-3.2452))*Nt*Nt+(.848013+oe*(.215638*oe-1.06021)))}const Et=F.sub(N)._mult(je)._add(N)._unit()._mult(Ee?-1:1);this.addHalfVertex(T,Et.x,Et.y,!1,Ee,0,w)}}k&&this.addCurrentVertex(T,F,-De,-Ne,w)}else if(ke==="butt")this.addCurrentVertex(T,ie,0,0,w);else if(ke==="square"){const xe=S?1:-1;S||this.addCurrentVertex(T,ie,xe,xe,w),this.addCurrentVertex(T,ie,0,0,w),S&&this.addCurrentVertex(T,ie,xe,xe,w)}else ke==="round"&&(S&&(this.addCurrentVertex(T,N,0,0,w),this.addCurrentVertex(T,N,1,1,w,!0)),k&&(this.addCurrentVertex(T,F,-1,-1,w,!0),this.addCurrentVertex(T,F,0,0,w)));if(we&&Q<A-1){const xe=T.dist(k);if(xe>2*v){const De=T.add(k.sub(T)._mult(v/xe)._round());this.updateDistance(T,De),this.addCurrentVertex(De,F,0,0,w),T=De}}}}addCurrentVertex(e,r,n,a,c,h=!1){const p=r.y*a-r.x,A=-r.y-r.x*a;this.addHalfVertex(e,r.x+r.y*n,r.y-r.x*n,h,!1,n,c),this.addHalfVertex(e,p,A,h,!0,-a,c)}addHalfVertex({x:e,y:r},n,a,c,h,p,A){this.layoutVertexArray.emplaceBack((e<<1)+(c?1:0),(r<<1)+(h?1:0),Math.round(63*n)+128,Math.round(63*a)+128,1+(p===0?0:p<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineSoFar);const y=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,y),A.primitiveLength++),h?this.e2=y:this.e1=y}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}}tt(xh,{omit:["layers","patternFeatures"]});const e0=new B({"line-cap":new x(ye.layout_line["line-cap"]),"line-join":new x(ye.layout_line["line-join"]),"line-miter-limit":new _(ye.layout_line["line-miter-limit"]),"line-round-limit":new _(ye.layout_line["line-round-limit"]),"line-sort-key":new x(ye.layout_line["line-sort-key"])});var bm={paint:new B({"line-opacity":new x(ye.paint_line["line-opacity"]),"line-color":new x(ye.paint_line["line-color"]),"line-translate":new _(ye.paint_line["line-translate"]),"line-translate-anchor":new _(ye.paint_line["line-translate-anchor"]),"line-width":new x(ye.paint_line["line-width"]),"line-gap-width":new x(ye.paint_line["line-gap-width"]),"line-offset":new x(ye.paint_line["line-offset"]),"line-blur":new x(ye.paint_line["line-blur"]),"line-dasharray":new C(ye.paint_line["line-dasharray"]),"line-pattern":new C(ye.paint_line["line-pattern"]),"line-gradient":new D(ye.paint_line["line-gradient"])}),layout:e0};const wm=new class extends x{possiblyEvaluate(i,e){return e=new gi(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(i,e)}evaluate(i,e,r,n){return e=mi({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(i,e,r,n)}}(bm.paint.properties["line-width"].specification);function Cm(i,e){return e>0?e+2*i:i}wm.useIntegerZoom=!0;const t0=X([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"},{name:"a_z_tile_anchor",components:4,type:"Int16"}],4),i0=X([{name:"a_projected_pos",components:3,type:"Float32"}],4);X([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const r0=X([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),n0=X([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);X([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Tm=X([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),o0=X([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);X([{name:"triangle",components:3,type:"Uint16"}]),X([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),X([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),X([{type:"Float32",name:"offsetX"}]),X([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ar=24;const Wn=128;function np(i,e){const{expression:r}=e;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new gi(i+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:n,interpolationType:a}=r;let c=0;for(;c<n.length&&n[c]<=i;)c++;c=Math.max(0,c-1);let h=c;for(;h<n.length&&n[h]<i+1;)h++;h=Math.min(n.length-1,h);const p=n[c],A=n[h];return r.kind==="composite"?{kind:"composite",minZoom:p,maxZoom:A,interpolationType:a}:{kind:"camera",minZoom:p,maxZoom:A,minSize:r.evaluate(new gi(p)),maxSize:r.evaluate(new gi(A)),interpolationType:a}}}function vh(i,{uSize:e,uSizeT:r},{lowerSize:n,upperSize:a}){return i.kind==="source"?n/Wn:i.kind==="composite"?_t(n/Wn,a/Wn,r):e}function sl(i,e){let r=0,n=0;if(i.kind==="constant")n=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:a,minZoom:c,maxZoom:h}=i,p=a?Dt(Ir.interpolationFactor(a,e,c,h),0,1):0;i.kind==="camera"?n=_t(i.minSize,i.maxSize,p):r=p}return{uSizeT:r,uSize:n}}var s0=Object.freeze({__proto__:null,getSizeData:np,evaluateSizeForFeature:vh,evaluateSizeForZoom:sl,SIZE_PACK_FACTOR:Wn});function a0(i,e,r){return i.sections.forEach(n=>{n.text=function(a,c,h){const p=c.layout.get("text-transform").evaluate(h,{});return p==="uppercase"?a=a.toLocaleUpperCase():p==="lowercase"&&(a=a.toLocaleLowerCase()),Vr.applyArabicShaping&&(a=Vr.applyArabicShaping(a)),a}(n.text,e,r)}),i}const kc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function l0(i){return i==="\uFE36"||i==="\uFE48"||i==="\uFE38"||i==="\uFE44"||i==="\uFE42"||i==="\uFE3E"||i==="\uFE3C"||i==="\uFE3A"||i==="\uFE18"||i==="\uFE40"||i==="\uFE10"||i==="\uFE13"||i==="\uFE14"||i==="\uFF40"||i==="\uFFE3"||i==="\uFE11"||i==="\uFE12"}function c0(i){return i==="\uFE35"||i==="\uFE47"||i==="\uFE37"||i==="\uFE43"||i==="\uFE41"||i==="\uFE3D"||i==="\uFE3B"||i==="\uFE39"||i==="\uFE17"||i==="\uFE3F"}var Mm=function(i,e,r,n,a){var c,h,p=8*a-n-1,A=(1<<p)-1,y=A>>1,v=-7,w=r?a-1:0,T=r?-1:1,S=i[e+w];for(w+=T,c=S&(1<<-v)-1,S>>=-v,v+=p;v>0;c=256*c+i[e+w],w+=T,v-=8);for(h=c&(1<<-v)-1,c>>=-v,v+=n;v>0;h=256*h+i[e+w],w+=T,v-=8);if(c===0)c=1-y;else{if(c===A)return h?NaN:1/0*(S?-1:1);h+=Math.pow(2,n),c-=y}return(S?-1:1)*h*Math.pow(2,c-n)},Em=function(i,e,r,n,a,c){var h,p,A,y=8*c-a-1,v=(1<<y)-1,w=v>>1,T=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=n?0:c-1,k=n?1:-1,N=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(p=isNaN(e)?1:0,h=v):(h=Math.floor(Math.log(e)/Math.LN2),e*(A=Math.pow(2,-h))<1&&(h--,A*=2),(e+=h+w>=1?T/A:T*Math.pow(2,1-w))*A>=2&&(h++,A/=2),h+w>=v?(p=0,h=v):h+w>=1?(p=(e*A-1)*Math.pow(2,a),h+=w):(p=e*Math.pow(2,w-1)*Math.pow(2,a),h=0));a>=8;i[r+S]=255&p,S+=k,p/=256,a-=8);for(h=h<<a|p,y+=a;y>0;i[r+S]=255&h,S+=k,h/=256,y-=8);i[r+S-k]|=128*N},Lc=Ai;function Ai(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Ai.Varint=0,Ai.Fixed64=1,Ai.Bytes=2,Ai.Fixed32=5;var op=4294967296,Im=1/op,Dm=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Do(i){return i.type===Ai.Bytes?i.readVarint()+i.pos:i.pos+1}function al(i,e,r){return r?4294967296*e+(i>>>0):4294967296*(e>>>0)+(i>>>0)}function Sm(i,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var a=r.pos-1;a>=i;a--)r.buf[a+n]=r.buf[a]}function u0(i,e){for(var r=0;r<i.length;r++)e.writeVarint(i[r])}function h0(i,e){for(var r=0;r<i.length;r++)e.writeSVarint(i[r])}function d0(i,e){for(var r=0;r<i.length;r++)e.writeFloat(i[r])}function p0(i,e){for(var r=0;r<i.length;r++)e.writeDouble(i[r])}function f0(i,e){for(var r=0;r<i.length;r++)e.writeBoolean(i[r])}function m0(i,e){for(var r=0;r<i.length;r++)e.writeFixed32(i[r])}function A0(i,e){for(var r=0;r<i.length;r++)e.writeSFixed32(i[r])}function g0(i,e){for(var r=0;r<i.length;r++)e.writeFixed64(i[r])}function _0(i,e){for(var r=0;r<i.length;r++)e.writeSFixed64(i[r])}function bh(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+16777216*i[e+3]}function ll(i,e,r){i[r]=e,i[r+1]=e>>>8,i[r+2]=e>>>16,i[r+3]=e>>>24}function zm(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}function y0(i,e,r){e.glyphs=[],i===1&&r.readMessage(x0,e)}function x0(i,e,r){if(i===3){const{id:n,bitmap:a,width:c,height:h,left:p,top:A,advance:y}=r.readMessage(v0,{});e.glyphs.push({id:n,bitmap:new Io({width:c+6,height:h+6},a),metrics:{width:c,height:h,left:p,top:A,advance:y}})}else i===4?e.ascender=r.readSVarint():i===5&&(e.descender=r.readSVarint())}function v0(i,e,r){i===1?e.id=r.readVarint():i===2?e.bitmap=r.readBytes():i===3?e.width=r.readVarint():i===4?e.height=r.readVarint():i===5?e.left=r.readSVarint():i===6?e.top=r.readSVarint():i===7&&(e.advance=r.readVarint())}function sp(i){let e=0,r=0;for(const h of i)e+=h.w*h.h,r=Math.max(r,h.w);i.sort((h,p)=>p.h-h.h);const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let a=0,c=0;for(const h of i)for(let p=n.length-1;p>=0;p--){const A=n[p];if(!(h.w>A.w||h.h>A.h)){if(h.x=A.x,h.y=A.y,c=Math.max(c,h.y+h.h),a=Math.max(a,h.x+h.w),h.w===A.w&&h.h===A.h){const y=n.pop();p<n.length&&(n[p]=y)}else h.h===A.h?(A.x+=h.w,A.w-=h.w):h.w===A.w?(A.y+=h.h,A.h-=h.h):(n.push({x:A.x+h.w,y:A.y,w:A.w-h.w,h:h.h}),A.y+=h.h,A.h-=h.h);break}}return{w:a,h:c,fill:e/(a*c)||0}}Ai.prototype={destroy:function(){this.buf=null},readFields:function(i,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),a=n>>3,c=this.pos;this.type=7&n,i(a,e,this),this.pos===c&&this.skip(n)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=bh(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=zm(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=bh(this.buf,this.pos)+bh(this.buf,this.pos+4)*op;return this.pos+=8,i},readSFixed64:function(){var i=bh(this.buf,this.pos)+zm(this.buf,this.pos+4)*op;return this.pos+=8,i},readFloat:function(){var i=Mm(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=Mm(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(a,c,h){var p,A,y=h.buf;if(p=(112&(A=y[h.pos++]))>>4,A<128||(p|=(127&(A=y[h.pos++]))<<3,A<128)||(p|=(127&(A=y[h.pos++]))<<10,A<128)||(p|=(127&(A=y[h.pos++]))<<17,A<128)||(p|=(127&(A=y[h.pos++]))<<24,A<128)||(p|=(1&(A=y[h.pos++]))<<31,A<128))return al(a,p,c);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=12&&Dm?function(r,n,a){return Dm.decode(r.subarray(n,a))}(this.buf,e,i):function(r,n,a){for(var c="",h=n;h<a;){var p,A,y,v=r[h],w=null,T=v>239?4:v>223?3:v>191?2:1;if(h+T>a)break;T===1?v<128&&(w=v):T===2?(192&(p=r[h+1]))==128&&(w=(31&v)<<6|63&p)<=127&&(w=null):T===3?(A=r[h+2],(192&(p=r[h+1]))==128&&(192&A)==128&&((w=(15&v)<<12|(63&p)<<6|63&A)<=2047||w>=55296&&w<=57343)&&(w=null)):T===4&&(A=r[h+2],y=r[h+3],(192&(p=r[h+1]))==128&&(192&A)==128&&(192&y)==128&&((w=(15&v)<<18|(63&p)<<12|(63&A)<<6|63&y)<=65535||w>=1114112)&&(w=null)),w===null?(w=65533,T=1):w>65535&&(w-=65536,c+=String.fromCharCode(w>>>10&1023|55296),w=56320|1023&w),c+=String.fromCharCode(w),h+=T}return c}(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==Ai.Bytes)return i.push(this.readVarint(e));var r=Do(this);for(i=i||[];this.pos<r;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==Ai.Bytes)return i.push(this.readSVarint());var e=Do(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Ai.Bytes)return i.push(this.readBoolean());var e=Do(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Ai.Bytes)return i.push(this.readFloat());var e=Do(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Ai.Bytes)return i.push(this.readDouble());var e=Do(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Ai.Bytes)return i.push(this.readFixed32());var e=Do(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Ai.Bytes)return i.push(this.readSFixed32());var e=Do(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Ai.Bytes)return i.push(this.readFixed64());var e=Do(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Ai.Bytes)return i.push(this.readSFixed64());var e=Do(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=7&i;if(e===Ai.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ai.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ai.Fixed32)this.pos+=4;else{if(e!==Ai.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),ll(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),ll(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),ll(this.buf,-1&i,this.pos),ll(this.buf,Math.floor(i*Im),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),ll(this.buf,-1&i,this.pos),ll(this.buf,Math.floor(i*Im),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(e,r){var n,a;if(e>=0?(n=e%4294967296|0,a=e/4294967296|0):(a=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(c,h,p){p.buf[p.pos++]=127&c|128,c>>>=7,p.buf[p.pos++]=127&c|128,c>>>=7,p.buf[p.pos++]=127&c|128,c>>>=7,p.buf[p.pos++]=127&c|128,p.buf[p.pos]=127&(c>>>=7)}(n,0,r),function(c,h){var p=(7&c)<<4;h.buf[h.pos++]|=p|((c>>>=3)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c|((c>>>=7)?128:0),c&&(h.buf[h.pos++]=127&c)))))}(a,r)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(Boolean(i))},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var e=this.pos;this.pos=function(n,a,c){for(var h,p,A=0;A<a.length;A++){if((h=a.charCodeAt(A))>55295&&h<57344){if(!p){h>56319||A+1===a.length?(n[c++]=239,n[c++]=191,n[c++]=189):p=h;continue}if(h<56320){n[c++]=239,n[c++]=191,n[c++]=189,p=h;continue}h=p-55296<<10|h-56320|65536,p=null}else p&&(n[c++]=239,n[c++]=191,n[c++]=189,p=null);h<128?n[c++]=h:(h<2048?n[c++]=h>>6|192:(h<65536?n[c++]=h>>12|224:(n[c++]=h>>18|240,n[c++]=h>>12&63|128),n[c++]=h>>6&63|128),n[c++]=63&h|128)}return c}(this.buf,i,this.pos);var r=this.pos-e;r>=128&&Sm(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(i){this.realloc(4),Em(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Em(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=i[r]},writeRawMessage:function(i,e){this.pos++;var r=this.pos;i(e,this);var n=this.pos-r;n>=128&&Sm(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(i,e,r){this.writeTag(i,Ai.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,u0,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,h0,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,f0,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,d0,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,p0,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,m0,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,A0,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,g0,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,_0,e)},writeBytesField:function(i,e){this.writeTag(i,Ai.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,Ai.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,Ai.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,Ai.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,Ai.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,Ai.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,Ai.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,Ai.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,Ai.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,Ai.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,Boolean(e))}};class ap{constructor(e,{pixelRatio:r,version:n,stretchX:a,stretchY:c,content:h}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=a,this.stretchY=c,this.content=h,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Bm{constructor(e,r){const n={},a={};this.haveRenderCallbacks=[];const c=[];this.addImages(e,n,c),this.addImages(r,a,c);const{w:h,h:p}=sp(c),A=new jr({width:h||1,height:p||1});for(const y in e){const v=e[y],w=n[y].paddedRect;jr.copy(v.data,A,{x:0,y:0},{x:w.x+1,y:w.y+1},v.data)}for(const y in r){const v=r[y],w=a[y].paddedRect,T=w.x+1,S=w.y+1,k=v.data.width,N=v.data.height;jr.copy(v.data,A,{x:0,y:0},{x:T,y:S},v.data),jr.copy(v.data,A,{x:0,y:N-1},{x:T,y:S-1},{width:k,height:1}),jr.copy(v.data,A,{x:0,y:0},{x:T,y:S+N},{width:k,height:1}),jr.copy(v.data,A,{x:k-1,y:0},{x:T-1,y:S},{width:1,height:N}),jr.copy(v.data,A,{x:0,y:0},{x:T+k,y:S},{width:1,height:N})}this.image=A,this.iconPositions=n,this.patternPositions=a}addImages(e,r,n){for(const a in e){const c=e[a],h={x:0,y:0,w:c.data.width+2,h:c.data.height+2};n.push(h),r[a]=new ap(h,c),c.hasRenderCallback&&this.haveRenderCallbacks.push(a)}}patchUpdatedImages(e,r){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(n=>e.hasImage(n)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),r),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),r)}patchUpdatedImage(e,r,n){if(!e||!r||e.version===r.version)return;e.version=r.version;const[a,c]=e.tl;n.update(r.data,void 0,{x:a,y:c})}}tt(ap),tt(Bm);const ln={horizontal:1,vertical:2,horizontalOnly:3};class Pc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,r){const n=new Pc;return n.scale=e||1,n.fontStack=r,n}static forImage(e){const r=new Pc;return r.imageName=e,r}}class cl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,r){const n=new cl;for(let a=0;a<e.sections.length;a++){const c=e.sections[a];c.image?n.addImageSection(c):n.addTextSection(c,r)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(r,n){let a="";for(let c=0;c<r.length;c++){const h=r.charCodeAt(c+1)||null,p=r.charCodeAt(c-1)||null;a+=!n&&(h&&qa(h)&&!kc[r[c+1]]||p&&qa(p)&&!kc[r[c-1]])||!kc[r[c]]?r[c]:kc[r[c]]}return a}(this.text,e)}trim(){let e=0;for(let n=0;n<this.text.length&&wh[this.text.charCodeAt(n)];n++)e++;let r=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&wh[this.text.charCodeAt(n)];n--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)}substring(e,r){const n=new cl;return n.text=this.text.substring(e,r),n.sectionIndex=this.sectionIndex.slice(e,r),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,r)=>Math.max(e,this.sections[r].scale),0)}addTextSection(e,r){this.text+=e.text,this.sections.push(Pc.forText(e.scale,e.fontStack||r));const n=this.sections.length-1;for(let a=0;a<e.text.length;++a)this.sectionIndex.push(n)}addImageSection(e){const r=e.image?e.image.name:"";if(r.length===0)return void Ot("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Pc.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Ot("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function lp(i,e,r,n,a,c,h,p,A,y,v,w,T,S,k,N){const F=cl.fromFeature(i,a);let Q;w===ln.vertical&&F.verticalizePunctuation(T);const{processBidirectionalText:ie,processStyledBidirectionalText:oe}=Vr;if(ie&&F.sections.length===1){Q=[];const ue=ie(F.toString(),cp(F,y,c,e,n,S,k));for(const we of ue){const Ee=new cl;Ee.text=we,Ee.sections=F.sections;for(let ze=0;ze<we.length;ze++)Ee.sectionIndex.push(0);Q.push(Ee)}}else if(oe){Q=[];const ue=oe(F.text,F.sectionIndex,cp(F,y,c,e,n,S,k));for(const we of ue){const Ee=new cl;Ee.text=we[0],Ee.sectionIndex=we[1],Ee.sections=F.sections,Q.push(Ee)}}else Q=function(ue,we){const Ee=[],ze=ue.text;let ke=0;for(const xe of we)Ee.push(ue.substring(ke,xe)),ke=xe;return ke<ze.length&&Ee.push(ue.substring(ke,ze.length)),Ee}(F,cp(F,y,c,e,n,S,k));const ae=[],ce={positionedLines:ae,text:F.toString(),top:v[1],bottom:v[1],left:v[0],right:v[0],writingMode:w,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(ue,we,Ee,ze,ke,xe,De,Ne,Qe,Fe,je,Et){let Nt=0,It=0,Lt=0;const lt=Ne==="right"?1:Ne==="left"?0:.5;let et=!1;for(const oi of ke){const Zt=oi.getSections();for(const pi of Zt){if(pi.imageName)continue;const Si=we[pi.fontStack];if(Si&&(et=Si.ascender!==void 0&&Si.descender!==void 0,!et))break}if(!et)break}let Vt=0;for(const oi of ke){oi.trim();const Zt=oi.getMaxScale(),pi=(Zt-1)*ar,Si={positionedGlyphs:[],lineOffset:0};ue.positionedLines[Vt]=Si;const ki=Si.positionedGlyphs;let ji=0;if(!oi.length()){It+=xe,++Vt;continue}let Hi=0,Hr=0;for(let fi=0;fi<oi.length();fi++){const br=oi.getSection(fi),qr=oi.getSectionIndex(fi),ir=oi.getCharCode(fi);let qi=br.scale,bi=null,yi=null,Pr=null,wr=ar,Gi=0;const Cr=!(Qe===ln.horizontal||!je&&!Ha(ir)||je&&(wh[ir]||(ni=ir,Zu(ni)||Ua(ni)||Ys(ni)||uc(ni)||Qa(ni))));if(br.imageName){const fr=ze[br.imageName];if(!fr)continue;Pr=br.imageName,ue.iconsInText=ue.iconsInText||!0,yi=fr.paddedRect;const Wi=fr.displaySize;qi=qi*ar/Et,bi={width:Wi[0],height:Wi[1],left:1,top:-3,advance:Cr?Wi[1]:Wi[0],localGlyph:!1},Gi=et?-bi.height*qi:Zt*ar-17-Wi[1]*qi,wr=bi.advance;const _n=(Cr?Wi[0]:Wi[1])*qi-ar*Zt;_n>0&&_n>ji&&(ji=_n)}else{const fr=Ee[br.fontStack];if(!fr)continue;fr[ir]&&(yi=fr[ir]);const Wi=we[br.fontStack];if(!Wi)continue;const _n=Wi.glyphs[ir];if(!_n)continue;if(bi=_n.metrics,wr=ir!==8203?ar:0,et){const hs=Wi.ascender!==void 0?Math.abs(Wi.ascender):0,Qc=Wi.descender!==void 0?Math.abs(Wi.descender):0,Yc=(hs+Qc)*qi;Hi<Yc&&(Hi=Yc,Hr=(hs-Qc)/2*qi),Gi=-hs*qi}else Gi=(Zt-qi)*ar-17}Cr?(ue.verticalizable=!0,ki.push({glyph:ir,imageName:Pr,x:Nt,y:It+Gi,vertical:Cr,scale:qi,localGlyph:bi.localGlyph,fontStack:br.fontStack,sectionIndex:qr,metrics:bi,rect:yi}),Nt+=wr*qi+Fe):(ki.push({glyph:ir,imageName:Pr,x:Nt,y:It+Gi,vertical:Cr,scale:qi,localGlyph:bi.localGlyph,fontStack:br.fontStack,sectionIndex:qr,metrics:bi,rect:yi}),Nt+=bi.advance*qi+Fe)}ki.length!==0&&(Lt=Math.max(Nt-Fe,Lt),et?Nm(ki,lt,ji,Hr,xe*Zt/2):Nm(ki,lt,ji,0,xe/2)),Nt=0;const Lr=xe*Zt+ji;Si.lineOffset=Math.max(ji,pi),It+=Lr,++Vt}var ni;const Ui=It,{horizontalAlign:_i,verticalAlign:Zi}=up(De);(function(oi,Zt,pi,Si,ki,ji){const Hi=(Zt-pi)*ki,Hr=-ji*Si;for(const Lr of oi)for(const fi of Lr.positionedGlyphs)fi.x+=Hi,fi.y+=Hr})(ue.positionedLines,lt,_i,Zi,Lt,Ui),ue.top+=-Zi*Ui,ue.bottom=ue.top+Ui,ue.left+=-_i*Lt,ue.right=ue.left+Lt,ue.hasBaseline=et}(ce,e,r,n,Q,h,p,A,w,y,T,N),!function(ue){for(const we of ue)if(we.positionedGlyphs.length!==0)return!1;return!0}(ae)&&ce}const wh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},b0={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function km(i,e,r,n,a,c){if(e.imageName){const h=n[e.imageName];return h?h.displaySize[0]*e.scale*ar/c+a:0}{const h=r[e.fontStack],p=h&&h.glyphs[i];return p?p.metrics.advance*e.scale+a:0}}function Lm(i,e,r,n){const a=Math.pow(i-e,2);return n?i<e?a/2:2*a:a+Math.abs(r)*r}function w0(i,e,r){let n=0;return i===10&&(n-=1e4),r&&(n+=150),i!==40&&i!==65288||(n+=50),e!==41&&e!==65289||(n+=50),n}function Pm(i,e,r,n,a,c){let h=null,p=Lm(e,r,a,c);for(const A of n){const y=Lm(e-A.x,r,a,c)+A.badness;y<=p&&(h=A,p=y)}return{index:i,x:e,priorBreak:h,badness:p}}function Rm(i){return i?Rm(i.priorBreak).concat(i.index):[]}function cp(i,e,r,n,a,c,h){if(c!=="point")return[];if(!i)return[];const p=[],A=function(T,S,k,N,F,Q){let ie=0;for(let oe=0;oe<T.length();oe++){const ae=T.getSection(oe);ie+=km(T.getCharCode(oe),ae,N,F,S,Q)}return ie/Math.max(1,Math.ceil(ie/k))}(i,e,r,n,a,h),y=i.text.indexOf("\u200B")>=0;let v=0;for(let T=0;T<i.length();T++){const S=i.getSection(T),k=i.getCharCode(T);if(wh[k]||(v+=km(k,S,n,a,e,h)),T<i.length()-1){const N=!((w=k)<11904||!(Yu(w)||Qu(w)||Ko(w)||qs(w)||Wu(w)||sc(w)||Hu(w)||Za(w)||Ku(w)||cc(w)||qu(w)||hc(w)||Hs(w)||ac(w)||ju(w)||lc(w)||ja(w)||eh(w)||Ju(w)||Xu(w)));(b0[k]||N||S.imageName)&&p.push(Pm(T+1,v,A,p,w0(k,i.getCharCode(T+1),N&&y),!1))}}var w;return Rm(Pm(i.length(),v,A,p,0,!0))}function up(i){let e=.5,r=.5;switch(i){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Nm(i,e,r,n,a){if(!(e||r||n||a))return;const c=i.length-1,h=i[c],p=(h.x+h.metrics.advance*h.scale)*e;for(let A=0;A<=c;A++)i[A].x-=p,i[A].y+=r+n+a}function C0(i,e,r){const{horizontalAlign:n,verticalAlign:a}=up(r),c=e[0]-i.displaySize[0]*n,h=e[1]-i.displaySize[1]*a;return{image:i,top:h,bottom:h+i.displaySize[1],left:c,right:c+i.displaySize[0]}}function Om(i,e,r,n,a,c){const h=i.image;let p;if(h.content){const F=h.content,Q=h.pixelRatio||1;p=[F[0]/Q,F[1]/Q,h.displaySize[0]-F[2]/Q,h.displaySize[1]-F[3]/Q]}const A=e.left*c,y=e.right*c;let v,w,T,S;r==="width"||r==="both"?(S=a[0]+A-n[3],w=a[0]+y+n[1]):(S=a[0]+(A+y-h.displaySize[0])/2,w=S+h.displaySize[0]);const k=e.top*c,N=e.bottom*c;return r==="height"||r==="both"?(v=a[1]+k-n[0],T=a[1]+N+n[2]):(v=a[1]+(k+N-h.displaySize[1])/2,T=v+h.displaySize[1]),{image:h,top:v,right:w,bottom:T,left:S,collisionPadding:p}}class So extends ${constructor(e,r,n,a,c){super(e,r),this.angle=a,this.z=n,c!==void 0&&(this.segment=c)}clone(){return new So(this.x,this.y,this.z,this.angle,this.segment)}}function Gm(i,e,r,n,a){if(e.segment===void 0)return!0;let c=e,h=e.segment+1,p=0;for(;p>-r/2;){if(h--,h<0)return!1;p-=i[h].dist(c),c=i[h]}p+=i[h].dist(i[h+1]),h++;const A=[];let y=0;for(;p<r/2;){const v=i[h],w=i[h+1];if(!w)return!1;let T=i[h-1].angleTo(v)-v.angleTo(w);for(T=Math.abs((T+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:p,angleDelta:T}),y+=T;p-A[0].distance>n;)y-=A.shift().angleDelta;if(y>a)return!1;h++,p+=v.dist(w)}return!0}function Fm(i){let e=0;for(let r=0;r<i.length-1;r++)e+=i[r].dist(i[r+1]);return e}function Vm(i,e,r){return i?.6*e*r:0}function Um(i,e){return Math.max(i?i.right-i.left:0,e?e.right-e.left:0)}function T0(i,e,r,n,a,c){const h=Vm(r,a,c),p=Um(r,n)*c;let A=0;const y=Fm(i)/2;for(let v=0;v<i.length-1;v++){const w=i[v],T=i[v+1],S=w.dist(T);if(A+S>y){const k=(y-A)/S,N=_t(w.x,T.x,k),F=_t(w.y,T.y,k),Q=new So(N,F,0,T.angleTo(w),v);return!h||Gm(i,Q,p,h,e)?Q:void 0}A+=S}}function M0(i,e,r,n,a,c,h,p,A){const y=Vm(n,c,h),v=Um(n,a),w=v*h,T=i[0].x===0||i[0].x===A||i[0].y===0||i[0].y===A;return e-w<e/4&&(e=w+e/4),Zm(i,T?e/2*p%e:(v/2+2*c)*h*p%e,e,y,r,w,T,!1,A)}function Zm(i,e,r,n,a,c,h,p,A){const y=c/2,v=Fm(i);let w=0,T=e-r,S=[];for(let k=0;k<i.length-1;k++){const N=i[k],F=i[k+1],Q=N.dist(F),ie=F.angleTo(N);for(;T+r<w+Q;){T+=r;const oe=(T-w)/Q,ae=_t(N.x,F.x,oe),ce=_t(N.y,F.y,oe);if(ae>=0&&ae<A&&ce>=0&&ce<A&&T-y>=0&&T+y<=v){const ue=new So(ae,ce,0,ie,k);ue._round(),n&&!Gm(i,ue,c,n,a)||S.push(ue)}}w+=Q}return p||S.length||h||(S=Zm(i,w/2,r,n,a,c,h,!0,A)),S}function jm(i,e,r,n,a){const c=[];for(let h=0;h<i.length;h++){const p=i[h];let A;for(let y=0;y<p.length-1;y++){let v=p[y],w=p[y+1];v.x<e&&w.x<e||(v.x<e?v=new $(e,v.y+(e-v.x)/(w.x-v.x)*(w.y-v.y))._round():w.x<e&&(w=new $(e,v.y+(e-v.x)/(w.x-v.x)*(w.y-v.y))._round()),v.y<r&&w.y<r||(v.y<r?v=new $(v.x+(r-v.y)/(w.y-v.y)*(w.x-v.x),r)._round():w.y<r&&(w=new $(v.x+(r-v.y)/(w.y-v.y)*(w.x-v.x),r)._round()),v.x>=n&&w.x>=n||(v.x>=n?v=new $(n,v.y+(n-v.x)/(w.x-v.x)*(w.y-v.y))._round():w.x>=n&&(w=new $(n,v.y+(n-v.x)/(w.x-v.x)*(w.y-v.y))._round()),v.y>=a&&w.y>=a||(v.y>=a?v=new $(v.x+(a-v.y)/(w.y-v.y)*(w.x-v.x),a)._round():w.y>=a&&(w=new $(v.x+(a-v.y)/(w.y-v.y)*(w.x-v.x),a)._round()),A&&v.equals(A[A.length-1])||(A=[v],c.push(A)),A.push(w)))))}}return c}tt(So);const Rc=1e20;function Qm(i,e,r,n,a,c,h,p,A){for(let y=e;y<e+n;y++)Ym(i,r*c+y,c,a,h,p,A);for(let y=r;y<r+a;y++)Ym(i,y*c+e,1,n,h,p,A)}function Ym(i,e,r,n,a,c,h){c[0]=0,h[0]=-Rc,h[1]=Rc,a[0]=i[e];for(let p=1,A=0,y=0;p<n;p++){a[p]=i[e+p*r];const v=p*p;do{const w=c[A];y=(a[p]-a[w]+v-w*w)/(p-w)/2}while(y<=h[A]&&--A>-1);A++,c[A]=p,h[A]=y,h[A+1]=Rc}for(let p=0,A=0;p<n;p++){for(;h[A+1]<p;)A++;const y=c[A],v=p-y;i[e+p*r]=a[y]+v*v}}const hp={none:0,ideographs:1,all:2};class ul{constructor(e,r,n){this.requestManager=e,this.localGlyphMode=r,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,r){const n=[];for(const a in e)for(const c of e[a])n.push({stack:a,id:c});Ji(n,({stack:a,id:c},h)=>{let p=this.entries[a];p||(p=this.entries[a]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let A=p.glyphs[c];if(A!==void 0)return void h(null,{stack:a,id:c,glyph:A});if(A=this._tinySDF(p,a,c),A)return p.glyphs[c]=A,void h(null,{stack:a,id:c,glyph:A});const y=Math.floor(c/256);if(256*y>65535)return void h(new Error("glyphs > 65535 not supported"));if(p.ranges[y])return void h(null,{stack:a,id:c,glyph:A});let v=p.requests[y];v||(v=p.requests[y]=[],ul.loadGlyphRange(a,y,this.url,this.requestManager,(w,T)=>{if(T){p.ascender=T.ascender,p.descender=T.descender;for(const S in T.glyphs)this._doesCharSupportLocalGlyph(+S)||(p.glyphs[+S]=T.glyphs[+S]);p.ranges[y]=!0}for(const S of v)S(w,T);delete p.requests[y]})),v.push((w,T)=>{w?h(w):T&&h(null,{stack:a,id:c,glyph:T.glyphs[c]||null})})},(a,c)=>{if(a)r(a);else if(c){const h={};for(const{stack:p,id:A,glyph:y}of c)h[p]===void 0&&(h[p]={}),h[p].glyphs===void 0&&(h[p].glyphs={}),h[p].glyphs[A]=y&&{id:y.id,bitmap:y.bitmap.clone(),metrics:y.metrics},h[p].ascender=this.entries[p].ascender,h[p].descender=this.entries[p].descender;r(null,h)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==hp.none&&(this.localGlyphMode===hp.all?!!this.localFontFamily:!!this.localFontFamily&&(cc(e)||$u(e)||Hs(e)||ja(e)||Za(e)))}_tinySDF(e,r,n){const a=this.localFontFamily;if(!a||!this._doesCharSupportLocalGlyph(n))return;let c=e.tinySDF;if(!c){let N="400";/bold/i.test(r)?N="900":/medium/i.test(r)?N="500":/light/i.test(r)&&(N="200"),c=e.tinySDF=new ul.TinySDF({fontFamily:a,fontWeight:N,fontSize:48,buffer:6,radius:16}),c.fontWeight=N}if(this.localGlyphs[c.fontWeight][n])return this.localGlyphs[c.fontWeight][n];const h=String.fromCharCode(n),{data:p,width:A,height:y,glyphWidth:v,glyphHeight:w,glyphLeft:T,glyphTop:S,glyphAdvance:k}=c.draw(h);return this.localGlyphs[c.fontWeight][n]={id:n,bitmap:new Io({width:A,height:y},p),metrics:{width:v/2,height:w/2,left:T/2,top:S/2-27,advance:k/2,localGlyph:!0}}}}function Hm(i,e,r,n){const a=[],c=i.image,h=c.pixelRatio,p=c.paddedRect.w-2,A=c.paddedRect.h-2,y=i.right-i.left,v=i.bottom-i.top,w=c.stretchX||[[0,p]],T=c.stretchY||[[0,A]],S=(xe,De)=>xe+De[1]-De[0],k=w.reduce(S,0),N=T.reduce(S,0),F=p-k,Q=A-N;let ie=0,oe=k,ae=0,ce=N,ue=0,we=F,Ee=0,ze=Q;if(c.content&&n){const xe=c.content;ie=Ch(w,0,xe[0]),ae=Ch(T,0,xe[1]),oe=Ch(w,xe[0],xe[2]),ce=Ch(T,xe[1],xe[3]),ue=xe[0]-ie,Ee=xe[1]-ae,we=xe[2]-xe[0]-oe,ze=xe[3]-xe[1]-ce}const ke=(xe,De,Ne,Qe)=>{const Fe=Th(xe.stretch-ie,oe,y,i.left),je=Mh(xe.fixed-ue,we,xe.stretch,k),Et=Th(De.stretch-ae,ce,v,i.top),Nt=Mh(De.fixed-Ee,ze,De.stretch,N),It=Th(Ne.stretch-ie,oe,y,i.left),Lt=Mh(Ne.fixed-ue,we,Ne.stretch,k),lt=Th(Qe.stretch-ae,ce,v,i.top),et=Mh(Qe.fixed-Ee,ze,Qe.stretch,N),Vt=new $(Fe,Et),ni=new $(It,Et),Ui=new $(It,lt),_i=new $(Fe,lt),Zi=new $(je/h,Nt/h),oi=new $(Lt/h,et/h),Zt=e*Math.PI/180;if(Zt){const ki=Math.sin(Zt),ji=Math.cos(Zt),Hi=[ji,-ki,ki,ji];Vt._matMult(Hi),ni._matMult(Hi),_i._matMult(Hi),Ui._matMult(Hi)}const pi=xe.stretch+xe.fixed,Si=De.stretch+De.fixed;return{tl:Vt,tr:ni,bl:_i,br:Ui,tex:{x:c.paddedRect.x+1+pi,y:c.paddedRect.y+1+Si,w:Ne.stretch+Ne.fixed-pi,h:Qe.stretch+Qe.fixed-Si},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zi,pixelOffsetBR:oi,minFontScaleX:we/h/y,minFontScaleY:ze/h/v,isSDF:r}};if(n&&(c.stretchX||c.stretchY)){const xe=qm(w,F,k),De=qm(T,Q,N);for(let Ne=0;Ne<xe.length-1;Ne++){const Qe=xe[Ne],Fe=xe[Ne+1];for(let je=0;je<De.length-1;je++)a.push(ke(Qe,De[je],Fe,De[je+1]))}}else a.push(ke({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:p+1},{fixed:0,stretch:A+1}));return a}function Ch(i,e,r){let n=0;for(const a of i)n+=Math.max(e,Math.min(r,a[1]))-Math.max(e,Math.min(r,a[0]));return n}function qm(i,e,r){const n=[{fixed:-1,stretch:0}];for(const[a,c]of i){const h=n[n.length-1];n.push({fixed:a-h.stretch,stretch:h.stretch}),n.push({fixed:a-h.stretch,stretch:h.stretch+(c-a)})}return n.push({fixed:e+1,stretch:r}),n}function Th(i,e,r,n){return i/e*r+n}function Mh(i,e,r,n){return i-e*r/n}function E0(i,e,r,n){const a=e+i.positionedLines[n].lineOffset;return n===0?r+a/2:r+(a+(e+i.positionedLines[n-1].lineOffset))/2}ul.loadGlyphRange=function(i,e,r,n,a){const c=256*e,h=c+255,p=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",i).replace("{range}",`${c}-${h}`),Y.Glyphs);J(p,(A,y)=>{if(A)a(A);else if(y){const v={},w=function(T){return new Lc(T).readFields(y0,{})}(y);for(const T of w.glyphs)v[T.id]=T;a(null,{glyphs:v,ascender:w.ascender,descender:w.descender})}})},ul.TinySDF=class{constructor({fontSize:i=24,buffer:e=3,radius:r=8,cutoff:n=.25,fontFamily:a="sans-serif",fontWeight:c="normal",fontStyle:h="normal"}){this.buffer=e,this.cutoff=n,this.radius=r;const p=this.size=i+4*e,A=this._createCanvas(p),y=this.ctx=A.getContext("2d",{willReadFrequently:!0});y.font=`${h} ${c} ${i}px ${a}`,y.textBaseline="alphabetic",y.textAlign="left",y.fillStyle="black",this.gridOuter=new Float64Array(p*p),this.gridInner=new Float64Array(p*p),this.f=new Float64Array(p),this.z=new Float64Array(p+1),this.v=new Uint16Array(p)}_createCanvas(i){const e=document.createElement("canvas");return e.width=e.height=i,e}draw(i){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:n,actualBoundingBoxLeft:a,actualBoundingBoxRight:c}=this.ctx.measureText(i),h=Math.floor(r),p=Math.min(this.size-this.buffer,Math.ceil(c-a)),A=Math.min(this.size-this.buffer,Math.ceil(r)+Math.ceil(n)),y=p+2*this.buffer,v=A+2*this.buffer,w=y*v,T=new Uint8ClampedArray(w),S={data:T,width:y,height:v,glyphWidth:p,glyphHeight:A,glyphTop:h,glyphLeft:0,glyphAdvance:e};if(p===0||A===0)return S;const{ctx:k,buffer:N,gridInner:F,gridOuter:Q}=this;k.clearRect(N,N,p,A),k.fillText(i,N,N+h+1);const ie=k.getImageData(N,N,p,A);Q.fill(Rc,0,w),F.fill(0,0,w);for(let oe=0;oe<A;oe++)for(let ae=0;ae<p;ae++){const ce=ie.data[4*(oe*p+ae)+3]/255;if(ce===0)continue;const ue=(oe+N)*y+ae+N;if(ce===1)Q[ue]=0,F[ue]=Rc;else{const we=.5-ce;Q[ue]=we>0?we*we:0,F[ue]=we<0?we*we:0}}Qm(Q,0,0,y,v,y,this.f,this.v,this.z),Qm(F,N,N,p,A,y,this.f,this.v,this.z);for(let oe=0;oe<w;oe++){const ae=Math.sqrt(Q[oe])-Math.sqrt(F[oe]);T[oe]=Math.round(255-255*(ae/this.radius+this.cutoff))}return S}};class I0{constructor(e=[],r=D0){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:n}=this,a=r[e];for(;e>0;){const c=e-1>>1,h=r[c];if(n(a,h)>=0)break;r[e]=h,e=c}r[e]=a}_down(e){const{data:r,compare:n}=this,a=this.length>>1,c=r[e];for(;e<a;){let h=1+(e<<1),p=r[h];const A=h+1;if(A<this.length&&n(r[A],p)<0&&(h=A,p=r[A]),n(p,c)>=0)break;r[e]=p,e=h}r[e]=c}}function D0(i,e){return i<e?-1:i>e?1:0}function S0(i,e=1,r=!1){let n=1/0,a=1/0,c=-1/0,h=-1/0;const p=i[0];for(let S=0;S<p.length;S++){const k=p[S];(!S||k.x<n)&&(n=k.x),(!S||k.y<a)&&(a=k.y),(!S||k.x>c)&&(c=k.x),(!S||k.y>h)&&(h=k.y)}const A=Math.min(c-n,h-a);let y=A/2;const v=new I0([],z0);if(A===0)return new $(n,a);for(let S=n;S<c;S+=A)for(let k=a;k<h;k+=A)v.push(new hl(S+y,k+y,y,i));let w=function(S){let k=0,N=0,F=0;const Q=S[0];for(let ie=0,oe=Q.length,ae=oe-1;ie<oe;ae=ie++){const ce=Q[ie],ue=Q[ae],we=ce.x*ue.y-ue.x*ce.y;N+=(ce.x+ue.x)*we,F+=(ce.y+ue.y)*we,k+=3*we}return new hl(N/k,F/k,0,S)}(i),T=v.length;for(;v.length;){const S=v.pop();(S.d>w.d||!w.d)&&(w=S,r&&console.log("found best %d after %d probes",Math.round(1e4*S.d)/1e4,T)),S.max-w.d<=e||(y=S.h/2,v.push(new hl(S.p.x-y,S.p.y-y,y,i)),v.push(new hl(S.p.x+y,S.p.y-y,y,i)),v.push(new hl(S.p.x-y,S.p.y+y,y,i)),v.push(new hl(S.p.x+y,S.p.y+y,y,i)),T+=4)}return r&&(console.log(`num probes: ${T}`),console.log(`best distance: ${w.d}`)),w.p}function z0(i,e){return e.max-i.max}function hl(i,e,r,n){this.p=new $(i,e),this.h=r,this.d=function(a,c){let h=!1,p=1/0;for(let A=0;A<c.length;A++){const y=c[A];for(let v=0,w=y.length,T=w-1;v<w;T=v++){const S=y[v],k=y[T];S.y>a.y!=k.y>a.y&&a.x<(k.x-S.x)*(a.y-S.y)/(k.y-S.y)+S.x&&(h=!h),p=Math.min(p,jf(a,S,k))}}return(h?1:-1)*Math.sqrt(p)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}const dp=Number.POSITIVE_INFINITY,B0=Math.sqrt(2);function Wm(i,e){return e[1]!==dp?function(r,n,a){let c=0,h=0;switch(n=Math.abs(n),a=Math.abs(a),r){case"top-right":case"top-left":case"top":h=a-7;break;case"bottom-right":case"bottom-left":case"bottom":h=7-a}switch(r){case"top-right":case"bottom-right":case"right":c=-n;break;case"top-left":case"bottom-left":case"left":c=n}return[c,h]}(i,e[0],e[1]):function(r,n){let a=0,c=0;n<0&&(n=0);const h=n/B0;switch(r){case"top-right":case"top-left":c=h-7;break;case"bottom-right":case"bottom-left":c=7-h;break;case"bottom":c=7-n;break;case"top":c=n-7}switch(r){case"top-right":case"bottom-right":a=-h;break;case"top-left":case"bottom-left":a=h;break;case"left":a=n;break;case"right":a=-n}return[a,c]}(i,e[0])}function k0(i,e,r,n,a,c,h,p,A,y){i.createArrays(),i.tilePixelRatio=St/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const v=i.layers[0].layout,w=i.layers[0]._unevaluatedLayout._values,T={};if(i.textSizeData.kind==="composite"){const{minZoom:N,maxZoom:F}=i.textSizeData;T.compositeTextSizes=[w["text-size"].possiblyEvaluate(new gi(N),p),w["text-size"].possiblyEvaluate(new gi(F),p)]}if(i.iconSizeData.kind==="composite"){const{minZoom:N,maxZoom:F}=i.iconSizeData;T.compositeIconSizes=[w["icon-size"].possiblyEvaluate(new gi(N),p),w["icon-size"].possiblyEvaluate(new gi(F),p)]}T.layoutTextSize=w["text-size"].possiblyEvaluate(new gi(A+1),p),T.layoutIconSize=w["icon-size"].possiblyEvaluate(new gi(A+1),p),T.textMaxSize=w["text-size"].possiblyEvaluate(new gi(18),p);const S=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point",k=v.get("text-size");for(const N of i.features){const F=v.get("text-font").evaluate(N,{},p).join(","),Q=k.evaluate(N,{},p),ie=T.layoutTextSize.evaluate(N,{},p),oe=(T.layoutIconSize.evaluate(N,{},p),{horizontal:{},vertical:void 0}),ae=N.text;let ce,ue=[0,0];if(ae){const ze=ae.toString(),ke=v.get("text-letter-spacing").evaluate(N,{},p)*ar,xe=v.get("text-line-height").evaluate(N,{},p)*ar,De=ih(ze)?ke:0,Ne=v.get("text-anchor").evaluate(N,{},p),Qe=v.get("text-variable-anchor");if(!Qe){const Lt=v.get("text-radial-offset").evaluate(N,{},p);ue=Lt?Wm(Ne,[Lt*ar,dp]):v.get("text-offset").evaluate(N,{},p).map(lt=>lt*ar)}let Fe=S?"center":v.get("text-justify").evaluate(N,{},p);const je=v.get("symbol-placement"),Et=je==="point",Nt=je==="point"?v.get("text-max-width").evaluate(N,{},p)*ar:0,It=Lt=>{i.allowVerticalPlacement&&Ya(ze)&&(oe.vertical=lp(ae,e,r,a,F,Nt,xe,Ne,Lt,De,ue,ln.vertical,!0,je,ie,Q))};if(!S&&Qe){const Lt=Fe==="auto"?Qe.map(et=>pp(et)):[Fe];let lt=!1;for(let et=0;et<Lt.length;et++){const Vt=Lt[et];if(!oe.horizontal[Vt])if(lt)oe.horizontal[Vt]=oe.horizontal[0];else{const ni=lp(ae,e,r,a,F,Nt,xe,"center",Vt,De,ue,ln.horizontal,!1,je,ie,Q);ni&&(oe.horizontal[Vt]=ni,lt=ni.positionedLines.length===1)}}It("left")}else{if(Fe==="auto"&&(Fe=pp(Ne)),Et||v.get("text-writing-mode").indexOf("horizontal")>=0||!Ya(ze)){const Lt=lp(ae,e,r,a,F,Nt,xe,Ne,Fe,De,ue,ln.horizontal,!1,je,ie,Q);Lt&&(oe.horizontal[Fe]=Lt)}It(je==="point"?"left":Fe)}}let we=!1;if(N.icon&&N.icon.name){const ze=n[N.icon.name];ze&&(ce=C0(a[N.icon.name],v.get("icon-offset").evaluate(N,{},p),v.get("icon-anchor").evaluate(N,{},p)),we=ze.sdf,i.sdfIcons===void 0?i.sdfIcons=ze.sdf:i.sdfIcons!==ze.sdf&&Ot("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ze.pixelRatio!==i.pixelRatio||v.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const Ee=Xm(oe.horizontal)||oe.vertical;i.iconsInText||(i.iconsInText=!!Ee&&Ee.iconsInText),(Ee||ce)&&L0(i,N,oe,ce,n,T,ie,0,ue,we,h,p,y)}c&&i.generateCollisionDebugBuffers(A,i.collisionBoxArray)}function pp(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function L0(i,e,r,n,a,c,h,p,A,y,v,w,T){let S=c.textMaxSize.evaluate(e,{},w);S===void 0&&(S=h);const k=i.layers[0].layout,N=k.get("icon-offset").evaluate(e,{},w),F=Xm(r.horizontal)||r.vertical,Q=h/24,ie=i.tilePixelRatio*S/24,oe=(xe=i.overscaling,i.zoom>18&&xe>2&&(xe>>=1),Math.max(St/(512*xe),1)*k.get("symbol-spacing")),ae=k.get("text-padding")*i.tilePixelRatio,ce=k.get("icon-padding")*i.tilePixelRatio,ue=He(k.get("text-max-angle")),we=k.get("text-rotation-alignment")==="map"&&k.get("symbol-placement")!=="point",Ee=k.get("icon-rotation-alignment")==="map"&&k.get("symbol-placement")!=="point",ze=k.get("symbol-placement"),ke=oe/2;var xe;const De=k.get("icon-text-fit");let Ne;n&&De!=="none"&&(i.allowVerticalPlacement&&r.vertical&&(Ne=Om(n,r.vertical,De,k.get("icon-text-fit-padding"),N,Q)),F&&(n=Om(n,F,De,k.get("icon-text-fit-padding"),N,Q)));const Qe=(Fe,je,Et)=>{if(je.x<0||je.x>=St||je.y<0||je.y>=St)return;const{x:Nt,y:It,z:Lt}=T.projectTilePoint(je.x,je.y,Et),lt=new So(Nt,It,Lt,0,void 0);(function(et,Vt,ni,Ui,_i,Zi,oi,Zt,pi,Si,ki,ji,Hi,Hr,Lr,fi,br,qr,ir,qi,bi,yi,Pr,wr,Gi){const Cr=et.addToLineVertexArray(Vt,Ui);let fr,Wi,_n,hs,Qc,Yc,k1,L1=0,P1=0,R1=0,N1=0,Sp=-1,zp=-1;const $n={};let O1=Yn(""),Bp=0,kp=0;if(pi._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Bp,kp]=pi.layout.get("text-offset").evaluate(bi,{},Gi).map(Wr=>Wr*ar):(Bp=pi.layout.get("text-radial-offset").evaluate(bi,{},Gi)*ar,kp=dp),et.allowVerticalPlacement&&_i.vertical){const Wr=_i.vertical;if(Lr)Yc=fp(Wr),Zt&&(k1=fp(Zt));else{const Kr=pi.layout.get("text-rotate").evaluate(bi,{},Gi)+90;_n=Eh(Si,ni,Vt,ki,ji,Hi,Wr,Hr,Kr,fi),Zt&&(hs=Eh(Si,ni,Vt,ki,ji,Hi,Zt,qr,Kr))}}if(Zi){const Wr=pi.layout.get("icon-rotate").evaluate(bi,{},Gi),Kr=pi.layout.get("icon-text-fit")!=="none",Hc=Hm(Zi,Wr,Pr,Kr),Pp=Zt?Hm(Zt,Wr,Pr,Kr):void 0;Wi=Eh(Si,ni,Vt,ki,ji,Hi,Zi,qr,Wr),L1=4*Hc.length;const G1=et.iconSizeData;let sa=null;G1.kind==="source"?(sa=[Wn*pi.layout.get("icon-size").evaluate(bi,{},Gi)],sa[0]>os&&Ot(`${et.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):G1.kind==="composite"&&(sa=[Wn*yi.compositeIconSizes[0].evaluate(bi,{},Gi),Wn*yi.compositeIconSizes[1].evaluate(bi,{},Gi)],(sa[0]>os||sa[1]>os)&&Ot(`${et.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),et.addSymbols(et.icon,Hc,sa,qi,ir,bi,!1,ni,Vt,Cr.lineStartIndex,Cr.lineLength,-1,wr,Gi),Sp=et.icon.placedSymbolArray.length-1,Pp&&(P1=4*Pp.length,et.addSymbols(et.icon,Pp,sa,qi,ir,bi,ln.vertical,ni,Vt,Cr.lineStartIndex,Cr.lineLength,-1,wr,Gi),zp=et.icon.placedSymbolArray.length-1)}for(const Wr in _i.horizontal){const Kr=_i.horizontal[Wr];fr||(O1=Yn(Kr.text),Lr?Qc=fp(Kr):fr=Eh(Si,ni,Vt,ki,ji,Hi,Kr,Hr,pi.layout.get("text-rotate").evaluate(bi,{},Gi),fi));const Hc=Kr.positionedLines.length===1;if(R1+=Km(et,ni,Vt,Kr,oi,pi,Lr,bi,fi,Cr,_i.vertical?ln.horizontal:ln.horizontalOnly,Hc?Object.keys(_i.horizontal):[Wr],$n,Sp,yi,wr,Gi),Hc)break}_i.vertical&&(N1+=Km(et,ni,Vt,_i.vertical,oi,pi,Lr,bi,fi,Cr,ln.vertical,["vertical"],$n,zp,yi,wr,Gi));let ds=-1;const Lp=(Wr,Kr)=>Wr?Math.max(Wr,Kr):Kr;ds=Lp(Qc,ds),ds=Lp(Yc,ds),ds=Lp(k1,ds);const f2=ds>-1?1:0;et.glyphOffsetArray.length>=ss.MAX_GLYPHS&&Ot("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),bi.sortKey!==void 0&&et.addToSortKeyRanges(et.symbolInstances.length,bi.sortKey),et.symbolInstances.emplaceBack(ni.x,ni.y,ni.z,Vt.x,Vt.y,$n.right>=0?$n.right:-1,$n.center>=0?$n.center:-1,$n.left>=0?$n.left:-1,$n.vertical>=0?$n.vertical:-1,Sp,zp,O1,fr!==void 0?fr:et.collisionBoxArray.length,fr!==void 0?fr+1:et.collisionBoxArray.length,_n!==void 0?_n:et.collisionBoxArray.length,_n!==void 0?_n+1:et.collisionBoxArray.length,Wi!==void 0?Wi:et.collisionBoxArray.length,Wi!==void 0?Wi+1:et.collisionBoxArray.length,hs||et.collisionBoxArray.length,hs?hs+1:et.collisionBoxArray.length,ki,R1,N1,L1,P1,f2,0,Bp,kp,ds)})(i,je,lt,Fe,r,n,a,Ne,i.layers[0],i.collisionBoxArray,e.index,e.sourceLayerIndex,i.index,ae,we,A,0,ce,Ee,N,e,c,y,v,w)};if(ze==="line")for(const Fe of jm(e.geometry,0,0,St,St)){const je=M0(Fe,oe,ue,r.vertical||F,n,24,ie,i.overscaling,St);for(const Et of je){const Nt=F;Nt&&P0(i,Nt.text,ke,Et)||Qe(Fe,Et,w)}}else if(ze==="line-center"){for(const Fe of e.geometry)if(Fe.length>1){const je=T0(Fe,ue,r.vertical||F,n,24,ie);je&&Qe(Fe,je,w)}}else if(e.type==="Polygon")for(const Fe of tp(e.geometry,0)){const je=S0(Fe,16);Qe(Fe[0],new So(je.x,je.y,0,0,void 0),w)}else if(e.type==="LineString")for(const Fe of e.geometry)Qe(Fe,new So(Fe[0].x,Fe[0].y,0,0,void 0),w);else if(e.type==="Point")for(const Fe of e.geometry)for(const je of Fe)Qe([je],new So(je.x,je.y,0,0,void 0),w)}const os=32640;function Km(i,e,r,n,a,c,h,p,A,y,v,w,T,S,k,N,F){const Q=function(ae,ce,ue,we,Ee,ze,ke,xe){const De=[];if(ce.positionedLines.length===0)return De;const Ne=we.layout.get("text-rotate").evaluate(ze,{})*Math.PI/180,Qe=function(It){const Lt=It[0],lt=It[1],et=Lt*lt;return et>0?[Lt,-lt]:et<0?[-Lt,lt]:Lt===0?[lt,Lt]:[lt,-Lt]}(ue);let Fe=Math.abs(ce.top-ce.bottom);for(const It of ce.positionedLines)Fe-=It.lineOffset;const je=ce.positionedLines.length,Et=Fe/je;let Nt=ce.top-ue[1];for(let It=0;It<je;++It){const Lt=ce.positionedLines[It];Nt=E0(ce,Et,Nt,It);for(const lt of Lt.positionedGlyphs){if(!lt.rect)continue;const et=lt.rect||{};let Vt=4,ni=!0,Ui=1,_i=0;if(lt.imageName){const yi=ke[lt.imageName];if(!yi)continue;if(yi.sdf){Ot("SDF images are not supported in formatted text and will be ignored.");continue}ni=!1,Ui=yi.pixelRatio,Vt=1/Ui}const Zi=(Ee||xe)&&lt.vertical,oi=lt.metrics.advance*lt.scale/2,Zt=lt.metrics,pi=lt.rect;if(pi===null)continue;xe&&ce.verticalizable&&(_i=lt.imageName?oi-lt.metrics.width*lt.scale/2:0);const Si=Ee?[lt.x+oi,lt.y]:[0,0];let ki=[0,0],ji=[0,0],Hi=!1;Ee||(Zi?(ji=[lt.x+oi+Qe[0],lt.y+Qe[1]-_i],Hi=!0):ki=[lt.x+oi+ue[0],lt.y+ue[1]-_i]);const Hr=pi.w*lt.scale/(Ui*(lt.localGlyph?2:1)),Lr=pi.h*lt.scale/(Ui*(lt.localGlyph?2:1));let fi,br,qr,ir;if(Zi){const yi=lt.y-Nt,Pr=new $(-oi,oi-yi),wr=-Math.PI/2,Gi=new $(...ji);fi=new $(-oi+ki[0],ki[1]),fi._rotateAround(wr,Pr)._add(Gi),fi.x+=-yi+oi,fi.y-=(Zt.left-Vt)*lt.scale;const Cr=lt.imageName?Zt.advance*lt.scale:ar*lt.scale,fr=String.fromCharCode(lt.glyph);l0(fr)?fi.x+=(1-Vt)*lt.scale:c0(fr)?fi.x+=Cr-Zt.height*lt.scale+(-Vt-1)*lt.scale:fi.x+=lt.imageName||Zt.width+2*Vt===pi.w&&Zt.height+2*Vt===pi.h?(Cr-Lr)/2:(Cr-(Zt.height+2*Vt)*lt.scale)/2,br=new $(fi.x,fi.y-Hr),qr=new $(fi.x+Lr,fi.y),ir=new $(fi.x+Lr,fi.y-Hr)}else{const yi=(Zt.left-Vt)*lt.scale-oi+ki[0],Pr=(-Zt.top-Vt)*lt.scale+ki[1],wr=yi+Hr,Gi=Pr+Lr;fi=new $(yi,Pr),br=new $(wr,Pr),qr=new $(yi,Gi),ir=new $(wr,Gi)}if(Ne){let yi;yi=Ee?new $(0,0):Hi?new $(Qe[0],Qe[1]):new $(ue[0],ue[1]),fi._rotateAround(Ne,yi),br._rotateAround(Ne,yi),qr._rotateAround(Ne,yi),ir._rotateAround(Ne,yi)}const qi=new $(0,0),bi=new $(0,0);De.push({tl:fi,tr:br,bl:qr,br:ir,tex:et,writingMode:ce.writingMode,glyphOffset:Si,sectionIndex:lt.sectionIndex,isSDF:ni,pixelOffsetTL:qi,pixelOffsetBR:bi,minFontScaleX:0,minFontScaleY:0})}}return De}(0,n,A,c,h,p,a,i.allowVerticalPlacement),ie=i.textSizeData;let oe=null;ie.kind==="source"?(oe=[Wn*c.layout.get("text-size").evaluate(p,{},F)],oe[0]>os&&Ot(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ie.kind==="composite"&&(oe=[Wn*k.compositeTextSizes[0].evaluate(p,{},F),Wn*k.compositeTextSizes[1].evaluate(p,{},F)],(oe[0]>os||oe[1]>os)&&Ot(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),i.addSymbols(i.text,Q,oe,A,h,p,v,e,r,y.lineStartIndex,y.lineLength,S,N,F);for(const ae of w)T[ae]=i.text.placedSymbolArray.length-1;return 4*Q.length}function Xm(i){for(const e in i)return i[e];return null}function Eh(i,e,r,n,a,c,h,p,A,y){let v=h.top,w=h.bottom,T=h.left,S=h.right;const k=h.collisionPadding;if(k&&(T-=k[0],v-=k[1],S+=k[2],w+=k[3]),A){const N=new $(T,v),F=new $(S,v),Q=new $(T,w),ie=new $(S,w),oe=He(A);let ae=new $(0,0);y&&(ae=new $(y[0],y[1])),N._rotateAround(oe,ae),F._rotateAround(oe,ae),Q._rotateAround(oe,ae),ie._rotateAround(oe,ae),T=Math.min(N.x,F.x,Q.x,ie.x),S=Math.max(N.x,F.x,Q.x,ie.x),v=Math.min(N.y,F.y,Q.y,ie.y),w=Math.max(N.y,F.y,Q.y,ie.y)}return i.emplaceBack(e.x,e.y,e.z,r.x,r.y,T,v,S,w,p,n,a,c),i.length-1}function fp(i){i.collisionPadding&&(i.top-=i.collisionPadding[1],i.bottom+=i.collisionPadding[3]);const e=i.bottom-i.top;return e>0?Math.max(10,e):null}function P0(i,e,r,n){const a=i.compareText;if(e in a){const c=a[e];for(let h=c.length-1;h>=0;h--)if(n.dist(c[h])<r)return!0}else a[e]=[];return a[e].push(n),!1}const R0=ra.VectorTileFeature.types,N0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ih(i,e,r,n,a,c,h,p,A,y,v,w,T,S,k,N){const F=v?Math.min(os,Math.round(v[0])):0,Q=v?Math.min(os,Math.round(v[1])):0;i.emplaceBack(e,r,Math.round(32*h),Math.round(32*p),A,y,(F<<1)+(w?1:0),Q,16*T,16*S,256*k,256*N,n,a,c,0)}function mp(i,e,r){i.emplaceBack(e.x,e.y,r),i.emplaceBack(e.x,e.y,r),i.emplaceBack(e.x,e.y,r),i.emplaceBack(e.x,e.y,r)}function O0(i){for(const e of i.sections)if(Sd(e.text))return!0;return!1}class Ap{constructor(e){this.layoutVertexArray=new Me,this.indexArray=new be,this.programConfigurations=e,this.segments=new Bi,this.dynamicLayoutVertexArray=new re,this.opacityVertexArray=new Ze,this.placedSymbolArray=new In}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,r,n,a){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,t0.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,i0.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,N0,!0),this.opacityVertexBuffer.itemSize=1),(n||a)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}tt(Ap);class gp{constructor(e,r,n){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new n,this.segments=new Bi,this.collisionVertexArray=new st,this.collisionVertexArrayExt=new re}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,r0.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,n0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}tt(gp);class ss{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(h=>h.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=qn([]),this.placementViewportMatrix=qn([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=np(this.zoom,r["text-size"]),this.iconSizeData=np(this.zoom,r["icon-size"]);const n=this.layers[0].layout,a=n.get("symbol-sort-key"),c=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey=c!=="viewport-y"&&a.constantOr(1)!==void 0,this.sortFeaturesByY=(c==="viewport-y"||c==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map(h=>ln[h]),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new Ap(new $s(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Ap(new $s(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new ri,this.lineVertexArray=new Ni,this.symbolInstances=new zi}calculateGlyphDependencies(e,r,n,a,c){for(let h=0;h<e.length;h++)if(r[e.charCodeAt(h)]=!0,a&&c){const p=kc[e.charAt(h)];p&&(r[p.charCodeAt(0)]=!0)}}populate(e,r,n,a){const c=this.layers[0],h=c.layout,p=h.get("text-font"),A=h.get("text-field"),y=h.get("icon-image"),v=(A.value.kind!=="constant"||A.value.value instanceof Vi&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(p.value.kind!=="constant"||p.value.value.length>0),w=y.value.kind!=="constant"||!!y.value.value||Object.keys(y.parameters).length>0,T=h.get("symbol-sort-key");if(this.features=[],!v&&!w)return;const S=r.iconDependencies,k=r.glyphDependencies,N=r.availableImages,F=new gi(this.zoom);for(const{feature:Q,id:ie,index:oe,sourceLayerIndex:ae}of e){const ce=c._featureFilter.needGeometry,ue=ea(Q,ce);if(!c._featureFilter.filter(F,ue,n))continue;let we,Ee;if(ce||(ue.geometry=Eo(Q,n,a)),v){const ke=c.getValueAndResolveTokens("text-field",ue,n,N),xe=Vi.factory(ke);O0(xe)&&(this.hasRTLText=!0),(!this.hasRTLText||Ka()==="unavailable"||this.hasRTLText&&Vr.isParsed())&&(we=a0(xe,c,ue))}if(w){const ke=c.getValueAndResolveTokens("icon-image",ue,n,N);Ee=ke instanceof Mr?ke:Mr.fromString(ke)}if(!we&&!Ee)continue;const ze=this.sortFeaturesByKey?T.evaluate(ue,{},n):void 0;if(this.features.push({id:ie,text:we,icon:Ee,index:oe,sourceLayerIndex:ae,geometry:ue.geometry,properties:Q.properties,type:R0[Q.type],sortKey:ze}),Ee&&(S[Ee.name]=!0),we){const ke=p.evaluate(ue,{},n).join(","),xe=h.get("text-rotation-alignment")==="map"&&h.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ln.vertical)>=0;for(const De of we.sections)if(De.image)S[De.image.name]=!0;else{const Ne=Ya(we.toString()),Qe=De.fontStack||ke,Fe=k[Qe]=k[Qe]||{};this.calculateGlyphDependencies(De.text,Fe,xe,this.allowVerticalPlacement,Ne)}}}h.get("symbol-placement")==="line"&&(this.features=function(Q){const ie={},oe={},ae=[];let ce=0;function ue(ke){ae.push(Q[ke]),ce++}function we(ke,xe,De){const Ne=oe[ke];return delete oe[ke],oe[xe]=Ne,ae[Ne].geometry[0].pop(),ae[Ne].geometry[0]=ae[Ne].geometry[0].concat(De[0]),Ne}function Ee(ke,xe,De){const Ne=ie[xe];return delete ie[xe],ie[ke]=Ne,ae[Ne].geometry[0].shift(),ae[Ne].geometry[0]=De[0].concat(ae[Ne].geometry[0]),Ne}function ze(ke,xe,De){const Ne=De?xe[0][xe[0].length-1]:xe[0][0];return`${ke}:${Ne.x}:${Ne.y}`}for(let ke=0;ke<Q.length;ke++){const xe=Q[ke],De=xe.geometry,Ne=xe.text?xe.text.toString():null;if(!Ne){ue(ke);continue}const Qe=ze(Ne,De),Fe=ze(Ne,De,!0);if(Qe in oe&&Fe in ie&&oe[Qe]!==ie[Fe]){const je=Ee(Qe,Fe,De),Et=we(Qe,Fe,ae[je].geometry);delete ie[Qe],delete oe[Fe],oe[ze(Ne,ae[Et].geometry,!0)]=Et,ae[je].geometry=null}else Qe in oe?we(Qe,Fe,De):Fe in ie?Ee(Qe,Fe,De):(ue(ke),ie[Qe]=ce-1,oe[Fe]=ce-1)}return ae.filter(ke=>ke.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Q,ie)=>Q.sortKey-ie.sortKey)}update(e,r,n,a){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,n,a),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,n,a))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const n=this.lineVertexArray.length,a=e.segment;if(a!==void 0){let c=e.dist(r[a+1]),h=e.dist(r[a]);const p={};for(let A=a+1;A<r.length;A++)p[A]={x:r[A].x,y:r[A].y,tileUnitDistanceFromAnchor:c},A<r.length-1&&(c+=r[A+1].dist(r[A]));for(let A=a||0;A>=0;A--)p[A]={x:r[A].x,y:r[A].y,tileUnitDistanceFromAnchor:h},A>0&&(h+=r[A-1].dist(r[A]));for(let A=0;A<r.length;A++){const y=p[A];this.lineVertexArray.emplaceBack(y.x,y.y,y.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,r,n,a,c,h,p,A,y,v,w,T,S,k){const N=e.indexArray,F=e.layoutVertexArray,Q=e.segments.prepareSegment(4*r.length,F,N,this.canOverlap?h.sortKey:void 0),ie=this.glyphOffsetArray.length,oe=Q.vertexLength,ae=this.allowVerticalPlacement&&p===ln.vertical?Math.PI/2:0,ce=h.text&&h.text.sections;for(let ue=0;ue<r.length;ue++){const{tl:we,tr:Ee,bl:ze,br:ke,tex:xe,pixelOffsetTL:De,pixelOffsetBR:Ne,minFontScaleX:Qe,minFontScaleY:Fe,glyphOffset:je,isSDF:Et,sectionIndex:Nt}=r[ue],It=Q.vertexLength,Lt=je[1];Ih(F,A.x,A.y,A.z,y.x,y.y,we.x,Lt+we.y,xe.x,xe.y,n,Et,De.x,De.y,Qe,Fe),Ih(F,A.x,A.y,A.z,y.x,y.y,Ee.x,Lt+Ee.y,xe.x+xe.w,xe.y,n,Et,Ne.x,De.y,Qe,Fe),Ih(F,A.x,A.y,A.z,y.x,y.y,ze.x,Lt+ze.y,xe.x,xe.y+xe.h,n,Et,De.x,Ne.y,Qe,Fe),Ih(F,A.x,A.y,A.z,y.x,y.y,ke.x,Lt+ke.y,xe.x+xe.w,xe.y+xe.h,n,Et,Ne.x,Ne.y,Qe,Fe),mp(e.dynamicLayoutVertexArray,A,ae),N.emplaceBack(It,It+1,It+2),N.emplaceBack(It+1,It+2,It+3),Q.vertexLength+=4,Q.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(je[0]),ue!==r.length-1&&Nt===r[ue+1].sectionIndex||e.programConfigurations.populatePaintArrays(F.length,h,h.index,{},S,k,ce&&ce[Nt])}e.placedSymbolArray.emplaceBack(A.x,A.y,A.z,y.x,y.y,ie,this.glyphOffsetArray.length-ie,oe,v,w,y.segment,n?n[0]:0,n?n[1]:0,a[0],a[1],p,0,!1,0,T,0)}_commitLayoutVertex(e,r,n,a,c,h,p){e.emplaceBack(r,n,a,c,h,Math.round(p.x),Math.round(p.y))}_addCollisionDebugVertices(e,r,n,a,c,h,p){const A=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),y=A.vertexLength,v=p.tileAnchorX,w=p.tileAnchorY;for(let S=0;S<4;S++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(r,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(r,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(r,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(r,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,a,c,h,v,w,new $(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,a,c,h,v,w,new $(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,a,c,h,v,w,new $(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,a,c,h,v,w,new $(e.x1,e.y2)),A.vertexLength+=4;const T=n.indexArray;T.emplaceBack(y,y+1),T.emplaceBack(y+1,y+2),T.emplaceBack(y+2,y+3),T.emplaceBack(y+3,y),A.primitiveLength+=4}_addTextDebugCollisionBoxes(e,r,n,a,c,h){for(let p=a;p<c;p++){const A=n.get(p),y=this.getSymbolInstanceTextSize(e,h,r,p);this._addCollisionDebugVertices(A,y,this.textCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,h)}}_addIconDebugCollisionBoxes(e,r,n,a,c,h){for(let p=a;p<c;p++){const A=n.get(p),y=this.getSymbolInstanceIconSize(e,r,p);this._addCollisionDebugVertices(A,y,this.iconCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,h)}}generateCollisionDebugBuffers(e,r){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gp(Ve,Tm.members,ct),this.iconCollisionBox=new gp(Ve,Tm.members,ct);const n=sl(this.iconSizeData,e),a=sl(this.textSizeData,e);for(let c=0;c<this.symbolInstances.length;c++){const h=this.symbolInstances.get(c);this._addTextDebugCollisionBoxes(a,e,r,h.textBoxStartIndex,h.textBoxEndIndex,h),this._addTextDebugCollisionBoxes(a,e,r,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h),this._addIconDebugCollisionBoxes(n,e,r,h.iconBoxStartIndex,h.iconBoxEndIndex,h),this._addIconDebugCollisionBoxes(n,e,r,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h)}}getSymbolInstanceTextSize(e,r,n,a){const c=this.text.placedSymbolArray.get(r.rightJustifiedTextSymbolIndex>=0?r.rightJustifiedTextSymbolIndex:r.centerJustifiedTextSymbolIndex>=0?r.centerJustifiedTextSymbolIndex:r.leftJustifiedTextSymbolIndex>=0?r.leftJustifiedTextSymbolIndex:r.verticalPlacedTextSymbolIndex>=0?r.verticalPlacedTextSymbolIndex:a),h=vh(this.textSizeData,e,c)/ar;return this.tilePixelRatio*h}getSymbolInstanceIconSize(e,r,n){const a=this.icon.placedSymbolArray.get(n),c=vh(this.iconSizeData,e,a);return this.tilePixelRatio*c}_commitDebugCollisionVertexUpdate(e,r,n){e.emplaceBack(r,-n,-n),e.emplaceBack(r,n,-n),e.emplaceBack(r,n,n),e.emplaceBack(r,-n,n)}_updateTextDebugCollisionBoxes(e,r,n,a,c,h){for(let p=a;p<c;p++){const A=n.get(p),y=this.getSymbolInstanceTextSize(e,h,r,p);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,y,A.padding)}}_updateIconDebugCollisionBoxes(e,r,n,a,c){for(let h=a;h<c;h++){const p=n.get(h),A=this.getSymbolInstanceIconSize(e,r,h);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,A,p.padding)}}updateCollisionDebugBuffers(e,r){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=sl(this.iconSizeData,e),a=sl(this.textSizeData,e);for(let c=0;c<this.symbolInstances.length;c++){const h=this.symbolInstances.get(c);this._updateTextDebugCollisionBoxes(a,e,r,h.textBoxStartIndex,h.textBoxEndIndex,h),this._updateTextDebugCollisionBoxes(a,e,r,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h),this._updateIconDebugCollisionBoxes(n,e,r,h.iconBoxStartIndex,h.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,e,r,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,r,n,a,c,h,p,A,y){const v={};for(let w=r;w<n;w++){const T=e.get(w);v.textBox={x1:T.x1,y1:T.y1,x2:T.x2,y2:T.y2,padding:T.padding,projectedAnchorX:T.projectedAnchorX,projectedAnchorY:T.projectedAnchorY,projectedAnchorZ:T.projectedAnchorZ,tileAnchorX:T.tileAnchorX,tileAnchorY:T.tileAnchorY},v.textFeatureIndex=T.featureIndex;break}for(let w=a;w<c;w++){const T=e.get(w);v.verticalTextBox={x1:T.x1,y1:T.y1,x2:T.x2,y2:T.y2,padding:T.padding,projectedAnchorX:T.projectedAnchorX,projectedAnchorY:T.projectedAnchorY,projectedAnchorZ:T.projectedAnchorZ,tileAnchorX:T.tileAnchorX,tileAnchorY:T.tileAnchorY},v.verticalTextFeatureIndex=T.featureIndex;break}for(let w=h;w<p;w++){const T=e.get(w);v.iconBox={x1:T.x1,y1:T.y1,x2:T.x2,y2:T.y2,padding:T.padding,projectedAnchorX:T.projectedAnchorX,projectedAnchorY:T.projectedAnchorY,projectedAnchorZ:T.projectedAnchorZ,tileAnchorX:T.tileAnchorX,tileAnchorY:T.tileAnchorY},v.iconFeatureIndex=T.featureIndex;break}for(let w=A;w<y;w++){const T=e.get(w);v.verticalIconBox={x1:T.x1,y1:T.y1,x2:T.x2,y2:T.y2,padding:T.padding,projectedAnchorX:T.projectedAnchorX,projectedAnchorY:T.projectedAnchorY,projectedAnchorZ:T.projectedAnchorZ,tileAnchorX:T.tileAnchorX,tileAnchorY:T.tileAnchorY},v.verticalIconFeatureIndex=T.featureIndex;break}return v}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const n=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,r){const n=e.placedSymbolArray.get(r),a=n.vertexStartIndex+4*n.numGlyphs;for(let c=n.vertexStartIndex;c<a;c+=4)e.indexArray.emplaceBack(c,c+1,c+2),e.indexArray.emplaceBack(c+1,c+2,c+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(e),n=Math.cos(e),a=[],c=[],h=[];for(let p=0;p<this.symbolInstances.length;++p){h.push(p);const A=this.symbolInstances.get(p);a.push(0|Math.round(r*A.tileAnchorX+n*A.tileAnchorY)),c.push(A.featureIndex)}return h.sort((p,A)=>a[p]-a[A]||c[A]-c[p]),h}addToSortKeyRanges(e,r){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===r?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const n=this.symbolInstances.get(r);this.featureSortOrder.push(n.featureIndex),[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((a,c,h)=>{a>=0&&h.indexOf(a)===c&&this.addIndicesForPlacedSymbol(this.text,a)}),n.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,n.verticalPlacedTextSymbolIndex),n.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.placedIconSymbolIndex),n.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}tt(ss,{omit:["layers","collisionBoxArray","features","compareText"]}),ss.MAX_GLYPHS=65535,ss.addDynamicAttributes=mp;const G0=new B({"symbol-placement":new _(ye.layout_symbol["symbol-placement"]),"symbol-spacing":new _(ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new _(ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new x(ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new _(ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new _(ye.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new _(ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new _(ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new _(ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new x(ye.layout_symbol["icon-size"]),"icon-text-fit":new _(ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new _(ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new x(ye.layout_symbol["icon-image"]),"icon-rotate":new x(ye.layout_symbol["icon-rotate"]),"icon-padding":new _(ye.layout_symbol["icon-padding"]),"icon-keep-upright":new _(ye.layout_symbol["icon-keep-upright"]),"icon-offset":new x(ye.layout_symbol["icon-offset"]),"icon-anchor":new x(ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new _(ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new _(ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new _(ye.layout_symbol["text-rotation-alignment"]),"text-field":new x(ye.layout_symbol["text-field"]),"text-font":new x(ye.layout_symbol["text-font"]),"text-size":new x(ye.layout_symbol["text-size"]),"text-max-width":new x(ye.layout_symbol["text-max-width"]),"text-line-height":new x(ye.layout_symbol["text-line-height"]),"text-letter-spacing":new x(ye.layout_symbol["text-letter-spacing"]),"text-justify":new x(ye.layout_symbol["text-justify"]),"text-radial-offset":new x(ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new _(ye.layout_symbol["text-variable-anchor"]),"text-anchor":new x(ye.layout_symbol["text-anchor"]),"text-max-angle":new _(ye.layout_symbol["text-max-angle"]),"text-writing-mode":new _(ye.layout_symbol["text-writing-mode"]),"text-rotate":new x(ye.layout_symbol["text-rotate"]),"text-padding":new _(ye.layout_symbol["text-padding"]),"text-keep-upright":new _(ye.layout_symbol["text-keep-upright"]),"text-transform":new x(ye.layout_symbol["text-transform"]),"text-offset":new x(ye.layout_symbol["text-offset"]),"text-allow-overlap":new _(ye.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new _(ye.layout_symbol["text-ignore-placement"]),"text-optional":new _(ye.layout_symbol["text-optional"])});var _p={paint:new B({"icon-opacity":new x(ye.paint_symbol["icon-opacity"]),"icon-color":new x(ye.paint_symbol["icon-color"]),"icon-halo-color":new x(ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new x(ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new x(ye.paint_symbol["icon-halo-blur"]),"icon-translate":new _(ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new _(ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new x(ye.paint_symbol["text-opacity"]),"text-color":new x(ye.paint_symbol["text-color"],{runtimeType:fn,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new x(ye.paint_symbol["text-halo-color"]),"text-halo-width":new x(ye.paint_symbol["text-halo-width"]),"text-halo-blur":new x(ye.paint_symbol["text-halo-blur"]),"text-translate":new _(ye.paint_symbol["text-translate"]),"text-translate-anchor":new _(ye.paint_symbol["text-translate-anchor"])}),layout:G0};class Jm{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:vn,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}tt(Jm,{omit:["defaultValue"]});class Dh extends Sn{constructor(e){super(e,_p)}recalculate(e,r){super.recalculate(e,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const a=[];for(const c of n)a.indexOf(c)<0&&a.push(c);this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,r,n,a){const c=this.layout.get(e).evaluate(r,{},n,a),h=this._unevaluatedLayout._values[e];return h.isDataDriven()||Ho(h.value)||!c?c:function(p,A){return A.replace(/{([^{}]+)}/g,(y,v)=>v in p?String(p[v]):"")}(r.properties,c)}createBucket(e){return new ss(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of _p.paint.overridableProperties){if(!Dh.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),n=new Jm(r),a=new Ra(n,r.property.specification);let c=null;c=r.value.kind==="constant"||r.value.kind==="source"?new Kl("source",a):new Xl("composite",a,r.value.zoomStops,r.value._interpolationType),this.paint._values[e]=new f(r.property,c,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,n){return!(!this.layout||r.isDataDriven()||n.isDataDriven())&&Dh.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const n=e.get("text-field"),a=_p.paint.properties[r];let c=!1;const h=p=>{for(const A of p)if(a.overrides&&a.overrides.hasOverride(A))return void(c=!0)};if(n.value.kind==="constant"&&n.value.value instanceof Vi)h(n.value.value.sections);else if(n.value.kind==="source"){const p=y=>{c||(y instanceof wn&&Ri(y.value)===Go?h(y.value.sections):y instanceof Uo?h(y.sections):y.eachChild(p))},A=n.value;A._styleExpression&&p(A._styleExpression.expression)}return c}getProgramConfiguration(e){return new ts(this,e)}}var F0={paint:new B({"background-color":new _(ye.paint_background["background-color"]),"background-pattern":new M(ye.paint_background["background-pattern"]),"background-opacity":new _(ye.paint_background["background-opacity"])})},V0={paint:new B({"raster-opacity":new _(ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new _(ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new _(ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new _(ye.paint_raster["raster-brightness-max"]),"raster-saturation":new _(ye.paint_raster["raster-saturation"]),"raster-contrast":new _(ye.paint_raster["raster-contrast"]),"raster-resampling":new _(ye.paint_raster["raster-resampling"]),"raster-fade-duration":new _(ye.paint_raster["raster-fade-duration"])})};class U0 extends Sn{constructor(e){super(e,{}),this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var Z0={paint:new B({"sky-type":new _(ye.paint_sky["sky-type"]),"sky-atmosphere-sun":new _(ye.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new _(ye.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new _(ye.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new _(ye.paint_sky["sky-gradient-radius"]),"sky-gradient":new D(ye.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new _(ye.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new _(ye.paint_sky["sky-atmosphere-color"]),"sky-opacity":new _(ye.paint_sky["sky-opacity"])})};function yp(i,e,r){const n=[0,0,1],a=nm([]);return function(c,h,p){p*=.5;var A=h[0],y=h[1],v=h[2],w=h[3],T=Math.sin(p),S=Math.cos(p);c[0]=A*S-v*T,c[1]=y*S+w*T,c[2]=v*S+A*T,c[3]=w*S-y*T}(a,a,r?-He(i)+Math.PI:He(i)),om(a,a,-He(e)),im(n,n,a),bc(n,n)}const j0={circle:class extends Sn{constructor(i){super(i,c_)}createBucket(i){return new Od(i)}queryRadius(i){const e=i;return tl("circle-radius",this,e)+tl("circle-stroke-width",this,e)+dh(this.paint.get("circle-translate"))}queryIntersectsFeature(i,e,r,n,a,c,h,p){const A=qf(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),c.angle,i.pixelToTileUnitsFactor),y=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r);return sm(i,n,c,h,p,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",A,y)}getProgramIds(){return["circle"]}getProgramConfiguration(i){return new ts(this,i)}},heatmap:class extends Sn{createBucket(i){return new lm(i)}constructor(i){super(i,A_),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Xd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(i){return tl("heatmap-radius",this,i)}queryIntersectsFeature(i,e,r,n,a,c,h,p){const A=this.paint.get("heatmap-radius").evaluate(e,r);return sm(i,n,c,h,p,!0,!0,new $(0,0),A)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(i){return new ts(this,i)}},hillshade:class extends Sn{constructor(i){super(i,g_)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Sn{constructor(i){super(i,L_)}getProgramIds(){const i=this.paint.get("fill-pattern"),e=i&&i.constantOr(1),r=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(i){return new ts(this,i)}recalculate(i,e){super.recalculate(i,e);const r=this.paint._values["fill-outline-color"];r.value.kind==="constant"&&r.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new _h(i)}queryRadius(){return dh(this.paint.get("fill-translate"))}queryIntersectsFeature(i,e,r,n,a,c){return!i.queryGeometry.isAboveHorizon&&Zf(Hf(i.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),c.angle,i.pixelToTileUnitsFactor),n)}isTileClipped(){return!0}},"fill-extrusion":class extends Sn{constructor(i){super(i,Y_)}createBucket(i){return new zc(i)}queryRadius(){return dh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(i){return new ts(this,i)}queryIntersectsFeature(i,e,r,n,a,c,h,p,A){const y=qf(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),c.angle,i.pixelToTileUnitsFactor),v=this.paint.get("fill-extrusion-height").evaluate(e,r),w=this.paint.get("fill-extrusion-base").evaluate(e,r),T=[0,0],S=p&&c.elevation,k=c.elevation?c.elevation.exaggeration():1,N=i.tile.getBucket(this);if(S&&N instanceof zc){const ie=N.centroidVertexArray,oe=A+1;if(oe<ie.length){const ae=ie.get(oe);T[0]=ae.a_centroid_pos0,T[1]=ae.a_centroid_pos1}}if(T[0]===0&&T[1]===1)return!1;const F=function(ie,oe,ae,ce,ue,we,Ee,ze,ke){return we?function(xe,De,Ne,Qe,Fe,je,Et,Nt,It){const Lt=[],lt=[],et=[0,0,0,1];for(const Vt of xe){const ni=[],Ui=[];for(const _i of Vt){const Zi=_i.x+Qe.x,oi=_i.y+Qe.y,Zt=H_(Zi,oi,De,Ne,je,Et,Nt,It);et[0]=Zi,et[1]=oi,et[2]=Zt.base,et[3]=1,rl(et,et,Fe),et[3]=Math.max(et[3],1e-5);const pi=vm([et[0]/et[3],et[1]/et[3],et[2]/et[3]]);et[0]=Zi,et[1]=oi,et[2]=Zt.top,et[3]=1,rl(et,et,Fe),et[3]=Math.max(et[3],1e-5);const Si=vm([et[0]/et[3],et[1]/et[3],et[2]/et[3]]);ni.push(pi),Ui.push(Si)}Lt.push(ni),lt.push(Ui)}return[Lt,lt]}(ie,oe,ae,ce,ue,we,Ee,ze,ke):function(xe,De,Ne,Qe,Fe){const je=[],Et=[],Nt=Fe[8]*De,It=Fe[9]*De,Lt=Fe[10]*De,lt=Fe[11]*De,et=Fe[8]*Ne,Vt=Fe[9]*Ne,ni=Fe[10]*Ne,Ui=Fe[11]*Ne;for(const _i of xe){const Zi=[],oi=[];for(const Zt of _i){const pi=Zt.x+Qe.x,Si=Zt.y+Qe.y,ki=Fe[0]*pi+Fe[4]*Si+Fe[12],ji=Fe[1]*pi+Fe[5]*Si+Fe[13],Hi=Fe[2]*pi+Fe[6]*Si+Fe[14],Hr=Fe[3]*pi+Fe[7]*Si+Fe[15],Lr=ki+Nt,fi=ji+It,br=Hi+Lt,qr=Math.max(Hr+lt,1e-5),ir=ki+et,qi=ji+Vt,bi=Hi+ni,yi=Math.max(Hr+Ui,1e-5),Pr=new $(Lr/qr,fi/qr);Pr.z=br/qr,Zi.push(Pr);const wr=new $(ir/yi,qi/yi);wr.z=bi/yi,oi.push(wr)}je.push(Zi),Et.push(oi)}return[je,Et]}(ie,oe,ae,ce,ue)}(n,w,v,y,h,S?p:null,T,k,c.center.lat),Q=i.queryGeometry;return function(ie,oe,ae){let ce=1/0;Zf(ae,oe)&&(ce=xm(ae,oe[0]));for(let ue=0;ue<oe.length;ue++){const we=oe[ue],Ee=ie[ue];for(let ze=0;ze<we.length-1;ze++){const ke=we[ze],xe=[ke,we[ze+1],Ee[ze+1],Ee[ze],ke];Uf(ae,xe)&&(ce=Math.min(ce,xm(ae,xe)))}}return ce!==1/0&&ce}(F[0],F[1],Q.isPointQuery()?Q.screenBounds:Q.screenGeometry)}},line:class extends Sn{constructor(i){super(i,bm),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof zs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,e){super.recalculate(i,e),this.paint._values["line-floorwidth"]=wm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new xh(i)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(i){return new ts(this,i)}queryRadius(i){const e=i,r=Cm(tl("line-width",this,e),tl("line-gap-width",this,e)),n=tl("line-offset",this,e);return r/2+Math.abs(n)+dh(this.paint.get("line-translate"))}queryIntersectsFeature(i,e,r,n,a,c){if(i.queryGeometry.isAboveHorizon)return!1;const h=Hf(i.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),c.angle,i.pixelToTileUnitsFactor),p=i.pixelToTileUnitsFactor/2*Cm(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),A=this.paint.get("line-offset").evaluate(e,r);return A&&(n=function(y,v){const w=[],T=new $(0,0);for(let S=0;S<y.length;S++){const k=y[S],N=[];for(let F=0;F<k.length;F++){const Q=k[F-1],ie=k[F],oe=k[F+1],ae=F===0?T:ie.sub(Q)._unit()._perp(),ce=F===k.length-1?T:oe.sub(ie)._unit()._perp(),ue=ae._add(ce)._unit();ue._mult(1/(ue.x*ce.x+ue.y*ce.y)),N.push(ue._mult(v)._add(ie))}w.push(N)}return w}(n,A*i.pixelToTileUnitsFactor)),function(y,v,w){for(let T=0;T<v.length;T++){const S=v[T];if(y.length>=3){for(let k=0;k<S.length;k++)if(el(y,S[k]))return!0}if(o_(y,S,w))return!0}return!1}(h,n,p)}isTileClipped(){return!0}},symbol:Dh,background:class extends Sn{constructor(i){super(i,F0)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Sn{constructor(i){super(i,V0)}getProgramIds(){return["raster"]}},sky:class extends Sn{constructor(i){super(i,Z0),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="sky-gradient"?this._updateColorRamp():i!=="sky-atmosphere-sun"&&i!=="sky-atmosphere-halo-color"&&i!=="sky-atmosphere-color"&&i!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Xd({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(i){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=i.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(i,e){if(this.paint.get("sky-type")==="atmosphere"){const n=this.paint.get("sky-atmosphere-sun"),a=!n,c=i.style.light,h=c.properties.get("position");return a&&c.properties.get("anchor")==="viewport"&&Ot("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),a?yp(h.azimuthal,90-h.polar,e):yp(n[0],90-n[1],e)}const r=this.paint.get("sky-gradient-center");return yp(r[0],90-r[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(i){this._skyboxInvalidated=!1,this._lightPosition=i.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const i=this.paint.get("sky-type");return i==="atmosphere"?["skyboxCapture","skybox"]:i==="gradient"?["skyboxGradient"]:null}}};class Nc{constructor(e,r,n,a){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(r,a)}update(e,r,n){const{width:a,height:c}=e,{context:h}=this,{gl:p}=h,{HTMLImageElement:A,HTMLCanvasElement:y,HTMLVideoElement:v,ImageData:w,ImageBitmap:T}=Te;if(p.bindTexture(p.TEXTURE_2D,this.texture),h.pixelStoreUnpackFlipY.set(!1),h.pixelStoreUnpack.set(1),h.pixelStoreUnpackPremultiplyAlpha.set(this.format===p.RGBA&&(!r||r.premultiply!==!1)),n||this.size&&this.size[0]===a&&this.size[1]===c){const{x:S,y:k}=n||{x:0,y:0};e instanceof A||e instanceof y||e instanceof v||e instanceof w||T&&e instanceof T?p.texSubImage2D(p.TEXTURE_2D,0,S,k,p.RGBA,p.UNSIGNED_BYTE,e):p.texSubImage2D(p.TEXTURE_2D,0,S,k,a,c,p.RGBA,p.UNSIGNED_BYTE,e.data)}else this.size=[a,c],e instanceof A||e instanceof y||e instanceof v||e instanceof w||T&&e instanceof T?p.texImage2D(p.TEXTURE_2D,0,this.format,this.format,p.UNSIGNED_BYTE,e):p.texImage2D(p.TEXTURE_2D,0,this.format,a,c,0,this.format,p.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&p.generateMipmap(p.TEXTURE_2D)}bind(e,r){const{context:n}=this,{gl:a}=n;a.bindTexture(a.TEXTURE_2D,this.texture),e!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,this.useMipmap?e===a.NEAREST?a.NEAREST_MIPMAP_NEAREST:a.LINEAR_MIPMAP_NEAREST:e),this.filter=e),r!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,r),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class xp{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.image=new Io({width:e,height:r}),this.positions={},this.uploaded=!1}getDash(e,r){const n=this.getKey(e,r);return this.positions[n]}trim(){const e=this.width,r=this.height=en(this.nextRow);this.image.resize({width:e,height:r})}getKey(e,r){return e.join(",")+r}getDashRanges(e,r,n){const a=[];let c=e.length%2==1?-e[e.length-1]*n:0,h=e[0]*n,p=!0;a.push({left:c,right:h,isDash:p,zeroLength:e[0]===0});let A=e[0];for(let y=1;y<e.length;y++){p=!p;const v=e[y];c=A*n,A+=v,h=A*n,a.push({left:c,right:h,isDash:p,zeroLength:v===0})}return a}addRoundDash(e,r,n){const a=r/2;for(let c=-n;c<=n;c++){const h=this.width*(this.nextRow+n+c);let p=0,A=e[p];for(let y=0;y<this.width;y++){y/A.right>1&&(A=e[++p]);const v=Math.abs(y-A.left),w=Math.abs(y-A.right),T=Math.min(v,w);let S;const k=c/n*(a+1);if(A.isDash){const N=a-Math.abs(k);S=Math.sqrt(T*T+N*N)}else S=a-Math.sqrt(T*T+k*k);this.image.data[h+y]=Math.max(0,Math.min(255,S+128))}}}addRegularDash(e,r){for(let A=e.length-1;A>=0;--A){const y=e[A],v=e[A+1];y.zeroLength?e.splice(A,1):v&&v.isDash===y.isDash&&(v.left=y.left,e.splice(A,1))}const n=e[0],a=e[e.length-1];n.isDash===a.isDash&&(n.left=a.left-this.width,a.right=n.right+this.width);const c=this.width*this.nextRow;let h=0,p=e[h];for(let A=0;A<this.width;A++){A/p.right>1&&(p=e[++h]);const y=Math.abs(A-p.left),v=Math.abs(A-p.right),w=Math.min(y,v);this.image.data[c+A]=Math.max(0,Math.min(255,(p.isDash?w:-w)+r+128))}}addDash(e,r){const n=this.getKey(e,r);if(this.positions[n])return this.positions[n];const a=r==="round",c=a?7:0,h=2*c+1;if(this.nextRow+h>this.height)return Ot("LineAtlas out of space"),null;e.length===0&&e.push(1);let p=0;for(let v=0;v<e.length;v++)e[v]<0&&(Ot("Negative value is found in line dasharray, replacing values with 0"),e[v]=0),p+=e[v];if(p!==0){const v=this.width/p,w=this.getDashRanges(e,this.width,v);a?this.addRoundDash(w,v,c):this.addRegularDash(w,r==="square"?.5*v:0)}const A=this.nextRow+c;this.nextRow+=h;const y={tl:[A,c],br:[p,0]};return this.positions[n]=y,y}}tt(xp);class Q0{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}const Y0=Te.performance;function $m(i){const e=i?i.url.toString():void 0;return Y0.getEntriesByName(e)}class H0{constructor(){this.tasks={},this.taskQueue=[],ci(["process"],this),this.invoker=new Q0(this.process),this.nextId=0}add(e,r){const n=this.nextId++,a=function({type:c,isSymbolTile:h,zoom:p}){return p=p||0,c==="message"?0:c!=="maybePrepare"||h?c!=="parseTile"||h?c==="parseTile"&&h?300-p:c==="maybePrepare"&&h?400-p:500:200-p:100-p}(r);if(a===0){ht();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:e,metadata:r,priority:a,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){ht();try{if(this.taskQueue=this.taskQueue.filter(n=>!!this.tasks[n]),!this.taskQueue.length)return;const e=this.pick();if(e===null)return;const r=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!r)return;r.fn()}finally{}}pick(){let e=null,r=1/0;for(let a=0;a<this.taskQueue.length;a++){const c=this.tasks[this.taskQueue[a]];c.priority<r&&(r=c.priority,e=a)}if(e===null)return null;const n=this.taskQueue[e];return this.taskQueue.splice(e,1),n}remove(){this.invoker.remove()}}const q0=X([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_merc_pos",components:2},{type:"Float32",name:"a_uv",components:2}]),W0=X([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:e1}=q0,t1=X([{name:"a_pos_3",components:3,type:"Int16"}]);var Oc=X([{name:"a_pos",type:"Int16",components:2}]);const dl=St/Math.PI/2,Qr=-dl,Yr=dl,K0=[new an([Qr,Qr,Qr],[Yr,Yr,Yr]),new an([Qr,Qr,Qr],[0,0,Yr]),new an([0,Qr,Qr],[Yr,0,Yr]),new an([Qr,0,Qr],[0,Yr,Yr]),new an([0,0,Qr],[Yr,Yr,Yr])];class X0{constructor(e,r,n){this.a=il([],e,n),this.b=il([],r,n),this.center=n;const a=bc([],this.a),c=bc([],this.b);this.angle=Math.acos(wc(a,c))}}function vp(i,e){if(i.angle===0)return null;let r;return r=i.a[e]===0?1/i.angle*.5*Math.PI:1/i.angle*Math.atan(i.b[e]/i.a[e]/Math.sin(i.angle)-1/Math.tan(i.angle)),r<0||r>1?null:function(n,a,c,h){const p=Math.sin(c);return n*(Math.sin((1-h)*c)/p)+a*(Math.sin(h*c)/p)}(i.a[e],i.b[e],i.angle,Dt(r,0,1))+i.center[e]}function Gc(i){if(i.z<=1)return K0[i.z+2*i.y+i.x];const[e,r]=bp(i),n=[zo(e[0],e[1]),zo(e[0],r[1]),zo(r[0],e[1]),zo(r[0],r[1])],a=[Yr,Yr,Yr],c=[Qr,Qr,Qr];for(const h of n)a[0]=Math.min(a[0],h[0]),a[1]=Math.min(a[1],h[1]),a[2]=Math.min(a[2],h[2]),c[0]=Math.max(c[0],h[0]),c[1]=Math.max(c[1],h[1]),c[2]=Math.max(c[2],h[2]);return new an(a,c)}function J0(i,e,r){const n=e/i.worldSize,a=(De,Ne)=>{vc(De,De,n),vc(Ne,Ne,n)},c=Number.MAX_VALUE,h=[-c,-c,-c],p=[c,c,c],A=s1(i);if(r.z<=1){const De=Gc(r).getCorners();for(let Ne=0;Ne<De.length;Ne++)ia(De[Ne],De[Ne],A),Yd(p,p,De[Ne]),Hd(h,h,De[Ne]);return a(p,h),new an(p,h)}const[y,v]=bp(r),w=new is;w.setSouthWest([y[1],v[0]]),w.setNorthEast([v[1],y[0]]);const T=[zo(w.getSouth(),w.getWest()),zo(w.getSouth(),w.getEast()),zo(w.getNorth(),w.getEast()),zo(w.getNorth(),w.getWest())];for(let De=0;De<T.length;De++)ia(T[De],T[De],A),Yd(p,p,T[De]),Hd(h,h,T[De]);if(w.contains(i.center))return h[2]=0,a(p,h),new an(p,h);const S=[A[12],A[13],A[14]],k=i.center.lng,N=Dt(i.center.lat,-85.051129,Hn),F=[yc(k),Ja(N)],Q=w.getCenter().lng,ie=Dt(w.getCenter().lat,-85.051129,Hn),oe=[yc(Q),Ja(ie)];let ae=new Array(3),ce=0;const ue=F[0]-oe[0],we=F[1]-oe[1];if(Math.abs(ue)>Math.abs(we))ce=ue>=0?1:3,ae=S;else{ce=we>=0?0:2;const De=[A[4],A[5],A[6]];let Ne;Ne=we>=0?-Math.sin(He(w.getSouth()))*dl:-Math.sin(He(w.getNorth()))*dl,ae=qd(ae,S,De,Ne)}const Ee=T[ce],ze=T[(ce+1)%4],ke=new X0(Ee,ze,ae),xe=[vp(ke,0)||Ee[0],vp(ke,1)||Ee[1],vp(ke,2)||Ee[2]];return p[2]=Math.min(Ee[2],ze[2]),Yd(p,p,xe),Hd(h,h,xe),a(p,h),new an(p,h)}function bp(i){const e=1<<i.z,r=i.x/e,n=(i.x+1)/e,a=(i.y+1)/e;return[[sr(i.y/e),An(r)],[sr(a),An(n)]]}function i1(i,e,r,n=dl){return r=He(r),[i*Math.sin(r)*n,-e*n,i*Math.cos(r)*n]}function zo(i,e,r){return i1(Math.cos(He(i)),Math.sin(He(i)),e,r)}function r1(i,e,r){const n=Math.pow(2,r.z),a=(i/St+r.x)/n;return zo(sr((e/St+r.y)/n),An(a))}function wp(i){return 16383/Math.max(...il([],i.max,i.min))}function n1(i){const e=qn(new Float64Array(16)),r=wp(i);var n,a;return rs(e,e,[r,r,r]),ta(e,e,((n=[])[0]=-(a=i.min)[0],n[1]=-a[1],n[2]=-a[2],n)),e}function o1(i,e,r,n,a){const c=function(A){const y=St/(2*Math.PI);return A/(2*Math.PI)/y}(r),h=[i,e,-r/(2*Math.PI)],p=qn(new Float64Array(16));return ta(p,p,h),rs(p,p,[c,c,c]),Zd(p,p,He(-a)),jd(p,p,He(-n)),p}function s1(i){const{x:e,y:r}=i.point,{lng:n,lat:a}=i._center;return o1(e,r,i.worldSize,n,a)}const a1=He(85),$0=Math.cos(a1),e2=Math.sin(a1);function l1(i,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[i*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}class Sh{constructor(e,r,n){this.z=e,this.x=r,this.y=n,this.key=Fc(0,e,e,r,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r){const n=function(c,h,p){var A=l1(256*c,256*(h=Math.pow(2,p)-h-1),p),y=l1(256*(c+1),256*(h+1),p);return A[0]+","+A[1]+","+y[0]+","+y[1]}(this.x,this.y,this.z),a=function(c,h,p){let A,y="";for(let v=c;v>0;v--)A=1<<v-1,y+=(h&A?1:0)+(p&A?2:0);return y}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",a).replace("{bbox-epsg-3857}",n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class c1{constructor(e,r){this.wrap=e,this.canonical=r,this.key=Fc(e,r.z,r.z,r.x,r.y)}}class vr{constructor(e,r,n,a,c){this.overscaledZ=e,this.wrap=r,this.canonical=new Sh(n,+a,+c),this.key=r===0&&e===n?this.canonical.key:Fc(r,e,n,a,c)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const r=this.canonical.z-e;return e>this.canonical.z?new vr(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new vr(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(e,r=!0){if(this.overscaledZ===e&&r)return this.key;if(e>this.canonical.z)return Fc(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-e;return Fc(this.wrap*+r,e,e,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new vr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,n=2*this.canonical.x,a=2*this.canonical.y;return[new vr(r,this.wrap,r,n,a),new vr(r,this.wrap,r,n+1,a),new vr(r,this.wrap,r,n,a+1),new vr(r,this.wrap,r,n+1,a+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new vr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new vr(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new c1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Fc(i,e,r,n,a){const c=1<<Math.min(r,22);let h=c*(a%c)+n%c;return i&&r<22&&(h+=c*c*((i<0?-2*i-1:2*i)%(1<<2*(22-r)))),16*(32*h+r)+(e-r)}function na(i,e){if(!e.isReprojectedInTileSpace)return{scale:1<<i.z,x:i.x,y:i.y,x2:i.x+1,y2:i.y+1,projection:e};const r=Math.pow(2,-i.z),n=i.x*r,a=(i.x+1)*r,c=i.y*r,h=(i.y+1)*r,p=An(n),A=An(a),y=sr(c),v=sr(h),w=e.project(p,y),T=e.project(A,y),S=e.project(A,v),k=e.project(p,v);let N=Math.min(w.x,T.x,S.x,k.x),F=Math.min(w.y,T.y,S.y,k.y),Q=Math.max(w.x,T.x,S.x,k.x),ie=Math.max(w.y,T.y,S.y,k.y);const oe=r/16;function ae(ue,we,Ee,ze,ke,xe){const De=(Ee+ke)/2,Ne=(ze+xe)/2,Qe=e.project(An(De),sr(Ne)),Fe=Math.max(0,N-Qe.x,F-Qe.y,Qe.x-Q,Qe.y-ie);N=Math.min(N,Qe.x),Q=Math.max(Q,Qe.x),F=Math.min(F,Qe.y),ie=Math.max(ie,Qe.y),Fe>oe&&(ae(ue,Qe,Ee,ze,De,Ne),ae(Qe,we,De,Ne,ke,xe))}ae(w,T,n,c,a,c),ae(T,S,a,c,a,h),ae(S,k,a,h,n,h),ae(k,w,n,h,n,c),N-=oe,F-=oe,Q+=oe,ie+=oe;const ce=1/Math.max(Q-N,ie-F);return{scale:ce,x:N*ce,y:F*ce,x2:Q*ce,y2:ie*ce,projection:e}}tt(Sh),tt(vr,{omit:["projMatrix"]});class u1{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const n=e[r];this._stringToNumber[n]=r,this._numberToString[r]=n}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const t2=["tile","layer","source","sourceLayer","state"];class h1{constructor(e,r,n,a,c){this.type="Feature",this._vectorTileFeature=e,this._z=r,this._x=n,this._y=a,this.properties=e.properties,this.id=c}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(e.id=this.id);for(const r of t2)this[r]!==void 0&&(e[r]=this[r]);return e}}const gn=32,Kn=33,as=new Uint16Array(8184);for(let i=0;i<2046;i++){let e=i+2,r=0,n=0,a=0,c=0,h=0,p=0;for(1&e?a=c=h=gn:r=n=p=gn;(e>>=1)>1;){const y=r+a>>1,v=n+c>>1;1&e?(a=r,c=n,r=h,n=p):(r=a,n=c,a=h,c=p),h=y,p=v}const A=4*i;as[A+0]=r,as[A+1]=n,as[A+2]=a,as[A+3]=c}const Xn=new Uint16Array(2178),ls=new Uint8Array(1089),zh=new Uint16Array(1089);function d1(i){return i===0?-.03125:i===32?.03125:0}var p1=X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const f1={type:2,extent:St,loadGeometry:()=>[[new $(0,0),new $(8193,0),new $(8193,8193),new $(0,8193),new $(0,0)]]};class Cp{constructor(e,r,n,a,c){this.tileID=e,this.uid=Tr(),this.uses=0,this.tileSize=r,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=c,this.expiredRequestCount=0,this.state="loading",a&&a.transform&&(this.projection=a.transform.projection)}registerFadeDuration(e){const r=e+this.timeAdded;r<Ce.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=na(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,r,n){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(a,c){const h={};if(!c)return h;for(const p of a){const A=p.layerIds.map(y=>c.getLayer(y)).filter(Boolean);if(A.length!==0){p.layers=A,p.stateDependentLayerIds&&(p.stateDependentLayers=p.stateDependentLayerIds.map(y=>A.filter(v=>v.id===y)[0]));for(const y of A)h[y.id]=p}}return h}(e.buckets,r.style),this.hasSymbolBuckets=!1;for(const a in this.buckets){const c=this.buckets[a];if(c instanceof ss){if(this.hasSymbolBuckets=!0,!n)break;c.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const a in this.buckets){const c=this.buckets[a];if(c instanceof ss&&c.hasRTLText){this.hasRTLText=!0,Vr.isLoading()||Vr.isLoaded()||Ka()!=="deferred"||Xo();break}}this.queryPadding=0;for(const a in this.buckets){const c=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(a).queryRadius(c))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new En}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const n in this.buckets){const a=this.buckets[n];a.uploadPending()&&a.upload(e)}const r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Nc(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Nc(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Nc(e,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,r,n,a,c,h,p,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:a,pixelPosMatrix:p,transform:h,params:c,tileTransform:this.tileTransform},e,r,n):{}}querySourceFeatures(e,r){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const a=n.loadVTLayers(),c=r?r.sourceLayer:"",h=a._geojsonTileLayer||a[c];if(!h)return;const p=Vn(r&&r.filter),{z:A,x:y,y:v}=this.tileID.canonical,w={z:A,x:y,y:v};for(let T=0;T<h.length;T++){const S=h.feature(T);if(p.needGeometry){const F=ea(S,!0);if(!p.filter(new gi(this.tileID.overscaledZ),F,this.tileID.canonical))continue}else if(!p.filter(new gi(this.tileID.overscaledZ),S))continue;const k=n.getId(S,c),N=new h1(S,A,y,v,k);N.tile=w,e.push(N)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const n=$e(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const n=Date.now();let a=!1;if(this.expirationTime>n)a=!1;else if(r)if(this.expirationTime<r)a=!0;else{const c=this.expirationTime-r;c?this.expirationTime=n+Math.max(c,3e4):a=!0}else a=!0;a?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0||!r)return;const n=this.latestFeatureIndex.loadVTLayers(),a=r.style.listImages();for(const c in this.buckets){if(!r.style.hasLayer(c))continue;const h=this.buckets[c],p=h.layers[0].sourceLayer||"_geojsonTileLayer",A=n[p],y=e[p];if(!A||!y||Object.keys(y).length===0)continue;if(h.update(y,A,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),h instanceof xh||h instanceof _h){const w=r.style._getSourceCache(h.layers[0].source);r._terrain&&r._terrain.enabled&&w&&h.programConfigurations.needsUpload&&r._terrain._clearRenderCacheForTile(w.id,this.tileID)}const v=r&&r.style&&r.style.getLayer(c);v&&(this.queryPadding=Math.max(this.queryPadding,v.queryRadius(h)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ce.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Ce.now()+e}setTexture(e,r){const n=r.context,a=n.gl;this.texture=r.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Nc(n,e,a.RGBA,{useMipmap:!0}),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),n.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax))}setDependencies(e,r){const n={};for(const a of r)n[a]=!0;this.dependencies[e]=n}hasDependency(e,r){for(const n of e){const a=this.dependencies[n];if(a){for(const c of r)if(a[c])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,r){if(!r||r.name==="mercator"||this._tileDebugBuffer)return;const n=Eo(f1,this.tileID.canonical,this.tileTransform)[0],a=new q,c=new Mt;for(let h=0;h<n.length;h++){const{x:p,y:A}=n[h];a.emplaceBack(p,A),c.emplaceBack(h)}c.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(c),this._tileDebugBuffer=e.createVertexBuffer(a,Oc.members),this._tileDebugSegments=Bi.simpleSegment(0,0,a.length,c.length)}_makeTileBoundsBuffers(e,r){if(this._tileBoundsBuffer||!r||r.name==="mercator")return;const n=Eo(f1,this.tileID.canonical,this.tileTransform)[0];let a,c;if(this.isRaster){const h=function(p,A){const y=na(p,A),v=Math.pow(2,p.z);for(let F=0;F<Kn;F++)for(let Q=0;Q<Kn;Q++){const ie=An((p.x+(Q+d1(Q))/gn)/v),oe=sr((p.y+(F+d1(F))/gn)/v),ae=A.project(ie,oe),ce=F*Kn+Q;Xn[2*ce+0]=Math.round((ae.x*y.scale-y.x)*St),Xn[2*ce+1]=Math.round((ae.y*y.scale-y.y)*St)}ls.fill(0),zh.fill(0);for(let F=2045;F>=0;F--){const Q=4*F,ie=as[Q+0],oe=as[Q+1],ae=as[Q+2],ce=as[Q+3],ue=ie+ae>>1,we=oe+ce>>1,Ee=ue+we-oe,ze=we+ie-ue,ke=oe*Kn+ie,xe=ce*Kn+ae,De=we*Kn+ue,Ne=Math.hypot((Xn[2*ke+0]+Xn[2*xe+0])/2-Xn[2*De+0],(Xn[2*ke+1]+Xn[2*xe+1])/2-Xn[2*De+1])>=16;if(ls[De]=ls[De]||(Ne?1:0),F<1022){const Qe=(oe+ze>>1)*Kn+(ie+Ee>>1),Fe=(ce+ze>>1)*Kn+(ae+Ee>>1);ls[De]=ls[De]||ls[Qe]||ls[Fe]}}const w=new ee,T=new be;let S=0;function k(F,Q){const ie=Q*Kn+F;return zh[ie]===0&&(w.emplaceBack(Xn[2*ie+0],Xn[2*ie+1],F*St/gn,Q*St/gn),zh[ie]=++S),zh[ie]-1}function N(F,Q,ie,oe,ae,ce){const ue=F+ie>>1,we=Q+oe>>1;if(Math.abs(F-ae)+Math.abs(Q-ce)>1&&ls[we*Kn+ue])N(ae,ce,F,Q,ue,we),N(ie,oe,ae,ce,ue,we);else{const Ee=k(F,Q),ze=k(ie,oe),ke=k(ae,ce);T.emplaceBack(Ee,ze,ke)}}return N(0,0,gn,gn,gn,0),N(gn,gn,0,0,0,gn),{vertices:w,indices:T}}(this.tileID.canonical,r);a=h.vertices,c=h.indices}else{a=new ee,c=new be;for(const{x:p,y:A}of n)a.emplaceBack(p,A,0,0);const h=ph(a.int16,void 0,4);for(let p=0;p<h.length;p+=3)c.emplaceBack(h[p],h[p+1],h[p+2])}this._tileBoundsBuffer=e.createVertexBuffer(a,p1.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(c),this._tileBoundsSegments=Bi.simpleSegment(0,0,a.length,c.length)}_makeGlobeTileDebugBuffers(e,r){if(this._globeTileDebugBorderBuffer||this._globeTileDebugTextBuffer||!r||r.name!=="globe")return;const n=this.tileID.canonical,a=n1(Gc(n));this._makeGlobeTileDebugBorderBuffer(e,n,a),this._makeGlobeTileDebugTextBuffer(e,n,a)}_makeGlobeTileDebugBorderBuffer(e,r,n){const a=new q,c=new Mt,h=new K,p=(y,v,w,T,S)=>{const k=(w-y)/(S-1),N=(T-v)/(S-1),F=a.length;for(let Q=0;Q<S;Q++){const ie=y+Q*k,oe=v+Q*N;a.emplaceBack(ie,oe);const ae=r1(ie,oe,r),ce=ia(ae,ae,n);h.emplaceBack(ce[0],ce[1],ce[2]),c.emplaceBack(F+Q)}},A=St;p(0,0,A,0,16),p(A,0,A,A,16),p(A,A,0,A,16),p(0,A,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(c),this._tileDebugBuffer=e.createVertexBuffer(a,Oc.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(h,t1.members),this._tileDebugSegments=Bi.simpleSegment(0,0,a.length,c.length)}_makeGlobeTileDebugTextBuffer(e,r,n){const a=new q,c=new be,h=new K,p=25;c.reserve(32),a.reserve(p),h.reserve(p);const A=(y,v)=>p*y+v;for(let y=0;y<p;y++){const v=2048*y;for(let w=0;w<p;w++){const T=2048*w;a.emplaceBack(T,v);const S=r1(T,v,r),k=ia(S,S,n);h.emplaceBack(k[0],k[1],k[2])}}for(let y=0;y<4;y++)for(let v=0;v<4;v++){const w=A(y,v),T=A(y,v+1),S=A(y+1,v),k=A(y+1,v+1);c.emplaceBack(w,T,S),c.emplaceBack(S,T,k)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(c),this._tileDebugTextBuffer=e.createVertexBuffer(a,Oc.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(h,t1.members),this._tileDebugTextSegments=Bi.simpleSegment(0,0,p,32)}}class i2{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,n){const a=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][a]=this.stateChanges[e][a]||{},mi(this.stateChanges[e][a],n),this.deletedStates[e]===null){this.deletedStates[e]={};for(const c in this.state[e])c!==a&&(this.deletedStates[e][c]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][a]===null){this.deletedStates[e][a]={};for(const c in this.state[e][a])n[c]||(this.deletedStates[e][a][c]=null)}else for(const c in n)this.deletedStates[e]&&this.deletedStates[e][a]&&this.deletedStates[e][a][c]===null&&delete this.deletedStates[e][a][c]}removeFeatureState(e,r,n){if(this.deletedStates[e]===null)return;const a=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&r!==void 0)this.deletedStates[e][a]!==null&&(this.deletedStates[e][a]=this.deletedStates[e][a]||{},this.deletedStates[e][a][n]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][a])for(n in this.deletedStates[e][a]={},this.stateChanges[e][a])this.deletedStates[e][a][n]=null;else this.deletedStates[e][a]=null;else this.deletedStates[e]=null}getState(e,r){const n=String(r),a=mi({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const c=this.deletedStates[e][r];if(c===null)return{};for(const h in c)delete a[h]}return a}initializeTileState(e,r){e.setFeatureState(this.state,r)}coalesceChanges(e,r){const n={};for(const a in this.stateChanges){this.state[a]=this.state[a]||{};const c={};for(const h in this.stateChanges[a])this.state[a][h]||(this.state[a][h]={}),mi(this.state[a][h],this.stateChanges[a][h]),c[h]=this.state[a][h];n[a]=c}for(const a in this.deletedStates){this.state[a]=this.state[a]||{};const c={};if(this.deletedStates[a]===null)for(const h in this.state[a])c[h]={},this.state[a][h]={};else for(const h in this.deletedStates[a]){if(this.deletedStates[a][h]===null)this.state[a][h]={};else for(const p of Object.keys(this.deletedStates[a][h]))delete this.state[a][h][p];c[h]=this.state[a][h]}n[a]=n[a]||{},mi(n[a],c)}if(this.stateChanges={},this.deletedStates={},Object.keys(n).length!==0)for(const a in e)e[a].setFeatureState(n,r)}}class m1{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,r){const n=this.toIdx(e,r);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(e,r){return this.leaves[this.toIdx(e,r)]}toIdx(e,r){return r*this.size+e}}function A1(i,e,r,n){let a=0,c=Number.MAX_VALUE;for(let h=0;h<3;h++)if(Math.abs(n[h])<1e-15){if(r[h]<i[h]||r[h]>e[h])return null}else{const p=1/n[h];let A=(i[h]-r[h])*p,y=(e[h]-r[h])*p;if(A>y){const v=A;A=y,y=v}if(A>a&&(a=A),y<c&&(c=y),a>c)return null}return a}function g1(i,e,r,n,a,c,h,p,A,y,v){const w=n-i,T=a-e,S=c-r,k=h-i,N=p-e,F=A-r,Q=v[1]*F-v[2]*N,ie=v[2]*k-v[0]*F,oe=v[0]*N-v[1]*k,ae=w*Q+T*ie+S*oe;if(Math.abs(ae)<1e-15)return null;const ce=1/ae,ue=y[0]-i,we=y[1]-e,Ee=y[2]-r,ze=(ue*Q+we*ie+Ee*oe)*ce;if(ze<0||ze>1)return null;const ke=we*S-Ee*T,xe=Ee*w-ue*S,De=ue*T-we*w,Ne=(v[0]*ke+v[1]*xe+v[2]*De)*ce;return Ne<0||ze+Ne>1?null:(k*ke+N*xe+F*De)*ce}function _1(i,e,r){return(i-e)/(r-e)}function y1(i,e,r,n,a,c,h,p,A){const y=1<<r,v=c-n,w=h-a,T=(i+1)/y*v+n,S=(e+0)/y*w+a,k=(e+1)/y*w+a;p[0]=(i+0)/y*v+n,p[1]=S,A[0]=T,A[1]=k}class x1{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const r=function(c){const h=Math.ceil(Math.log2(c.dim/8)),p=[];let A=Math.ceil(Math.pow(2,h));const y=1/A,v=(S,k,N,F,Q)=>{const ie=F?1:0,oe=(S+1)*N-ie,ae=k*N,ce=(k+1)*N-ie;Q[0]=S*N,Q[1]=ae,Q[2]=oe,Q[3]=ce};let w=new m1(A);const T=[];for(let S=0;S<A*A;S++){v(S%A,Math.floor(S/A),y,!1,T);const k=cs(T[0],T[1],c),N=cs(T[2],T[1],c),F=cs(T[2],T[3],c),Q=cs(T[0],T[3],c);w.minimums.push(Math.min(k,N,F,Q)),w.maximums.push(Math.max(k,N,F,Q)),w.leaves.push(1)}for(p.push(w),A/=2;A>=1;A/=2){const S=p[p.length-1];w=new m1(A);for(let k=0;k<A*A;k++){v(k%A,Math.floor(k/A),2,!0,T);const N=S.getElevation(T[0],T[1]),F=S.getElevation(T[2],T[1]),Q=S.getElevation(T[2],T[3]),ie=S.getElevation(T[0],T[3]),oe=S.isLeaf(T[0],T[1]),ae=S.isLeaf(T[2],T[1]),ce=S.isLeaf(T[2],T[3]),ue=S.isLeaf(T[0],T[3]),we=Math.min(N.min,F.min,Q.min,ie.min),Ee=Math.max(N.max,F.max,Q.max,ie.max),ze=oe&&ae&&ce&&ue;w.maximums.push(Ee),w.minimums.push(we),w.leaves.push(Ee-we<=5&&ze?1:0)}p.push(w)}return p}(this.dem),n=r.length-1,a=r[n];this._addNode(a.minimums[0],a.maximums[0],a.leaves[0]),this._construct(r,0,0,n,0)}raycastRoot(e,r,n,a,c,h,p=1){return A1([e,r,-100],[n,a,this.maximums[0]*p],c,h)}raycast(e,r,n,a,c,h,p=1){if(!this.nodeCount)return null;const A=this.raycastRoot(e,r,n,a,c,h,p);if(A==null)return null;const y=[],v=[],w=[],T=[],S=[{idx:0,t:A,nodex:0,nodey:0,depth:0}];for(;S.length>0;){const{idx:k,t:N,nodex:F,nodey:Q,depth:ie}=S.pop();if(this.leaves[k]){y1(F,Q,ie,e,r,n,a,w,T);const ae=1<<ie,ce=(F+0)/ae,ue=(F+1)/ae,we=(Q+0)/ae,Ee=(Q+1)/ae,ze=cs(ce,we,this.dem)*p,ke=cs(ue,we,this.dem)*p,xe=cs(ue,Ee,this.dem)*p,De=cs(ce,Ee,this.dem)*p,Ne=g1(w[0],w[1],ze,T[0],w[1],ke,T[0],T[1],xe,c,h),Qe=g1(T[0],T[1],xe,w[0],T[1],De,w[0],w[1],ze,c,h),Fe=Math.min(Ne!==null?Ne:Number.MAX_VALUE,Qe!==null?Qe:Number.MAX_VALUE);if(Fe!==Number.MAX_VALUE)return Fe;{const je=qd([],c,h,N);if(v1(ze,ke,De,xe,_1(je[0],w[0],T[0]),_1(je[1],w[1],T[1]))>=je[2])return N}continue}let oe=0;for(let ae=0;ae<this._siblingOffset.length;ae++){y1((F<<1)+this._siblingOffset[ae][0],(Q<<1)+this._siblingOffset[ae][1],ie+1,e,r,n,a,w,T),w[2]=-100,T[2]=this.maximums[this.childOffsets[k]+ae]*p;const ce=A1(w,T,c,h);if(ce!=null){const ue=ce;y[ae]=ue;let we=!1;for(let Ee=0;Ee<oe&&!we;Ee++)ue>=y[v[Ee]]&&(v.splice(Ee,0,ae),we=!0);we||(v[oe]=ae),oe++}}for(let ae=0;ae<oe;ae++){const ce=v[ae];S.push({idx:this.childOffsets[k]+ce,t:y[ce],nodex:(F<<1)+this._siblingOffset[ce][0],nodey:(Q<<1)+this._siblingOffset[ce][1],depth:ie+1})}}return null}_addNode(e,r,n){return this.minimums.push(e),this.maximums.push(r),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(e,r,n,a,c){if(e[a].isLeaf(r,n)===1)return;this.childOffsets[c]||(this.childOffsets[c]=this.nodeCount);const h=a-1,p=e[h];let A=0,y=0;for(let v=0;v<this._siblingOffset.length;v++){const w=2*r+this._siblingOffset[v][0],T=2*n+this._siblingOffset[v][1],S=p.getElevation(w,T),k=p.isLeaf(w,T),N=this._addNode(S.min,S.max,k);k&&(A|=1<<v),y||(y=N)}for(let v=0;v<this._siblingOffset.length;v++)A&1<<v||this._construct(e,2*r+this._siblingOffset[v][0],2*n+this._siblingOffset[v][1],h,y+v)}}function v1(i,e,r,n,a,c){return _t(_t(i,r,c),_t(e,n,c),a)}function cs(i,e,r){const n=r.dim,a=Dt(i*n-.5,0,n-1),c=Dt(e*n-.5,0,n-1),h=Math.floor(a),p=Math.floor(c),A=Math.min(h+1,n-1),y=Math.min(p+1,n-1);return v1(r.get(h,p),r.get(A,p),r.get(h,y),r.get(A,y),a-h,c-p)}const b1={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Bh{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,r,n,a=!1,c=!1){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(n&&n!=="mapbox"&&n!=="terrarium")return Ot(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=r.height;const h=this.dim=r.height-2,p=new Uint32Array(r.data.buffer);if(this.pixels=new Uint8Array(r.data.buffer),this.encoding=n||"mapbox",this.borderReady=a,!a){for(let A=0;A<h;A++)p[this._idx(-1,A)]=p[this._idx(0,A)],p[this._idx(h,A)]=p[this._idx(h-1,A)],p[this._idx(A,-1)]=p[this._idx(A,0)],p[this._idx(A,h)]=p[this._idx(A,h-1)];p[this._idx(-1,-1)]=p[this._idx(0,0)],p[this._idx(h,-1)]=p[this._idx(h-1,0)],p[this._idx(-1,h)]=p[this._idx(0,h-1)],p[this._idx(h,h)]=p[this._idx(h-1,h-1)],c&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new x1(this)}get(e,r,n=!1){n&&(e=Dt(e,-1,this.dim),r=Dt(r,-1,this.dim));const a=4*this._idx(e,r);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[a],this.pixels[a+1],this.pixels[a+2])}static getUnpackVector(e){return b1[e]}get unpackVector(){return b1[this.encoding]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)}_unpackMapbox(e,r,n){return(256*e*256+256*r+n)/10-1e4}_unpackTerrarium(e,r,n){return 256*e+r+n/256-32768}static pack(e,r){const n=[0,0,0,0],a=Bh.getUnpackVector(r);let c=Math.floor((e+a[3])/a[2]);return n[2]=c%256,c=Math.floor(c/256),n[1]=c%256,c=Math.floor(c/256),n[0]=c,n}getPixels(){return new jr({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,r,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let a=r*this.dim,c=r*this.dim+this.dim,h=n*this.dim,p=n*this.dim+this.dim;switch(r){case-1:a=c-1;break;case 1:c=a+1}switch(n){case-1:h=p-1;break;case 1:p=h+1}const A=-r*this.dim,y=-n*this.dim;for(let v=h;v<p;v++)for(let w=a;w<c;w++){const T=4*this._idx(w,v),S=4*this._idx(w+A,v+y);this.pixels[T+0]=e.pixels[S+0],this.pixels[T+1]=e.pixels[S+1],this.pixels[T+2]=e.pixels[S+2],this.pixels[T+3]=e.pixels[S+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}tt(Bh),tt(x1,{omit:["dem"]});class r2{constructor(e,r){this.max=e,this.onRemove=r,this.reset()}reset(){for(const e in this.data)for(const r of this.data[e])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(e,r,n){const a=e.wrapped().key;this.data[a]===void 0&&(this.data[a]=[]);const c={value:r,timeout:void 0};if(n!==void 0&&(c.timeout=setTimeout(()=>{this.remove(e,c)},n)),this.data[a].push(c),this.order.push(a),this.order.length>this.max){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const r=this.data[e].shift();return r.timeout&&clearTimeout(r.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),r.value}getByKey(e){const r=this.data[e];return r?r[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,r){if(!this.has(e))return this;const n=e.wrapped().key,a=r===void 0?0:this.data[n].indexOf(r),c=this.data[n][a];return this.data[n].splice(a,1),c.timeout&&clearTimeout(c.timeout),this.data[n].length===0&&delete this.data[n],this.onRemove(c.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(e){const r=[];for(const n in this.data)for(const a of this.data[n])e(a.value)||r.push(a);for(const n of r)this.remove(n.value.tileID,n)}}class pl{constructor(e,r,n){this.func=e,this.mask=r,this.range=n}}pl.ReadOnly=!1,pl.ReadWrite=!0,pl.disabled=new pl(519,pl.ReadOnly,[0,1]);const Tp=7680;class Mp{constructor(e,r,n,a,c,h){this.test=e,this.ref=r,this.mask=n,this.fail=a,this.depthFail=c,this.pass=h}}Mp.disabled=new Mp({func:519,mask:0},0,0,Tp,Tp,Tp);class Jn{constructor(e,r,n){this.blendFunction=e,this.blendColor=r,this.mask=n}}Jn.Replace=[1,0],Jn.disabled=new Jn(Jn.Replace,$t.transparent,[!1,!1,!1,!1]),Jn.unblended=new Jn(Jn.Replace,$t.transparent,[!0,!0,!0,!0]),Jn.alphaBlended=new Jn([1,771],$t.transparent,[!0,!0,!0,!0]);const Ep=1029,Ip=2305;class zn{constructor(e,r,n){this.enable=e,this.mode=r,this.frontFace=n}}zn.disabled=new zn(!1,Ep,Ip),zn.backCCW=new zn(!0,Ep,Ip),zn.backCW=new zn(!0,Ep,2304),zn.frontCW=new zn(!0,1028,2304),zn.frontCCW=new zn(!0,1028,Ip);class oa extends Ct{constructor(e,r,n){super(),this.id=e,this._onlySymbols=n,r.on("data",a=>{a.dataType==="source"&&a.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&a.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),r.on("error",()=>{this._sourceErrored=!0}),this._source=r,this._tiles={},this._cache=new r2(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=r.minTileCacheSize,this._maxTileCacheSize=r.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new i2,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(e){this.map=e,this._minTileCacheSize=this._minTileCacheSize===void 0&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const r=this._tiles[e];if(r.state!=="loaded"&&r.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,r){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,r)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const r in this._tiles){const n=this._tiles[r];this._source.prepareTile(n)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,n.tileID),n.upload(e),n.prepare(this.map.style.imageManager)}else for(const r in this._tiles){const n=this._tiles[r];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return gr(this._tiles).map(e=>e.tileID).sort(w1).map(e=>e.key)}getRenderableIds(e){const r=[];for(const n in this._tiles)this._isIdRenderable(+n,e)&&r.push(this._tiles[n]);return e?r.sort((n,a)=>{const c=n.tileID,h=a.tileID,p=new $(c.canonical.x,c.canonical.y)._rotate(this.transform.angle),A=new $(h.canonical.x,h.canonical.y)._rotate(this.transform.angle);return c.overscaledZ-h.overscaledZ||A.y-p.y||A.x-p.x}).map(n=>n.tileID.key):r.map(n=>n.tileID).sort(w1).map(n=>n.key)}hasRenderableParent(e){const r=this.findLoadedParent(e,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(e,r){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(r||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(+e,"reloading")}}_reloadTile(e,r){const n=this._tiles[e];n&&(n.state!=="loading"&&(n.state=r),this._loadTile(n,this._tileLoaded.bind(this,n,e,r)))}_tileLoaded(e,r,n,a){if(a)if(e.state="errored",a.status!==404)this._source.fire(new At(a,{tile:e}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const c=this.map.painter.terrain;this.update(this.transform,c.getScaledDemTileSize(),!0),c.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Ce.now(),n==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),this._source.type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new mt("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const r=this.getRenderableIds();for(let a=0;a<r.length;a++){const c=r[a];if(e.neighboringTiles&&e.neighboringTiles[c]){const h=this.getTileByID(c);n(e,h),n(h,e)}}function n(a,c){if(!a.dem||a.dem.borderReady)return;a.needsHillshadePrepare=!0,a.needsDEMTextureUpload=!0;let h=c.tileID.canonical.x-a.tileID.canonical.x;const p=c.tileID.canonical.y-a.tileID.canonical.y,A=Math.pow(2,a.tileID.canonical.z),y=c.tileID.key;h===0&&p===0||Math.abs(p)>1||(Math.abs(h)>1&&(Math.abs(h+A)===1?h+=A:Math.abs(h-A)===1&&(h-=A)),c.dem&&a.dem&&(a.dem.backfillBorder(c.dem,h,p),a.neighboringTiles&&a.neighboringTiles[y]&&(a.neighboringTiles[y].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,r,n,a){for(const c in this._tiles){let h=this._tiles[c];if(a[c]||!h.hasData()||h.tileID.overscaledZ<=r||h.tileID.overscaledZ>n)continue;let p=h.tileID;for(;h&&h.tileID.overscaledZ>r+1;){const y=h.tileID.scaledTo(h.tileID.overscaledZ-1);h=this._tiles[y.key],h&&h.hasData()&&(p=y)}let A=p;for(;A.overscaledZ>r;)if(A=A.scaledTo(A.overscaledZ-1),e[A.key]){a[p.key]=p;break}}}findLoadedParent(e,r){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=r?n:null}for(let n=e.overscaledZ-1;n>=r;n--){const a=e.scaledTo(n),c=this._getLoadedTile(a);if(c)return c}}_getLoadedTile(e){const r=this._tiles[e.key];return r&&r.hasData()?r:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,r){r=r||this._source.tileSize;const n=Math.ceil(e.width/r)+1,a=Math.ceil(e.height/r)+1,c=Math.floor(n*a*5),h=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,c):c,p=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,h):h;this._cache.setMaxSize(p)}handleWrapJump(e){const r=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,r){const n={};for(const a in this._tiles){const c=this._tiles[a];c.tileID=c.tileID.unwrapTo(c.tileID.wrap+r),n[c.tileID.key]=c}this._tiles=n;for(const a in this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(const a in this._tiles)this._setTileReloadTimer(+a,this._tiles[a])}}update(e,r,n){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!n)return;let a;this.updateCacheSize(e,r),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(p=>new vr(p.canonical.z,p.wrap,p.canonical.z,p.canonical.x,p.canonical.y)):(a=e.coveringTiles({tileSize:r||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(a=a.filter(p=>this._source.hasTile(p)))):a=[];const c=this._updateRetainedTiles(a);if(C1(this._source.type)&&a.length!==0){const p={},A={},y=Object.keys(c);for(const w of y){const T=c[w],S=this._tiles[w];if(!S||S.fadeEndTime&&S.fadeEndTime<=Ce.now())continue;const k=this.findLoadedParent(T,Math.max(T.overscaledZ-oa.maxOverzooming,this._source.minzoom));k&&(this._addTile(k.tileID),p[k.tileID.key]=k.tileID),A[w]=T}const v=a[a.length-1].overscaledZ;for(const w in this._tiles){const T=this._tiles[w];if(c[w]||!T.hasData())continue;let S=T.tileID;for(;S.overscaledZ>v;){S=S.scaledTo(S.overscaledZ-1);const k=this._tiles[S.key];if(k&&k.hasData()&&A[S.key]){c[w]=T.tileID;break}}}for(const w in p)c[w]||(this._coveredTiles[w]=!0,c[w]=p[w])}for(const p in c)this._tiles[p].clearFadeHold();const h=function(p,A){const y=[];for(const v in p)v in A||y.push(v);return y}(this._tiles,c);for(const p of h){const A=this._tiles[p];A.hasSymbolBuckets&&!A.holdingForFade()?A.setHoldDuration(this.map._fadeDuration):A.hasSymbolBuckets&&!A.symbolFadeFinished()||this._removeTile(+p)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const r={};if(e.length===0)return r;const n={},a=e.reduce((y,v)=>Math.min(y,v.overscaledZ),1/0),c=e[0].overscaledZ,h=Math.max(c-oa.maxOverzooming,this._source.minzoom),p=Math.max(c+oa.maxUnderzooming,this._source.minzoom),A={};for(const y of e){const v=this._addTile(y);r[y.key]=y,v.hasData()||a<this._source.maxzoom&&(A[y.key]=y)}this._retainLoadedChildren(A,a,p,r);for(const y of e){let v=this._tiles[y.key];if(v.hasData())continue;if(y.canonical.z>=this._source.maxzoom){const T=y.children(this._source.maxzoom)[0],S=this.getTile(T);if(S&&S.hasData()){r[T.key]=T;continue}}else{const T=y.children(this._source.maxzoom);if(r[T[0].key]&&r[T[1].key]&&r[T[2].key]&&r[T[3].key])continue}let w=v.wasRequested();for(let T=y.overscaledZ-1;T>=h;--T){const S=y.scaledTo(T);if(n[S.key]||(n[S.key]=!0,v=this.getTile(S),!v&&w&&(v=this._addTile(S)),v&&(r[S.key]=S,w=v.wasRequested(),v.hasData())))break}}return r}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const r=[];let n,a=this._tiles[e].tileID;for(;a.overscaledZ>0;){if(a.key in this._loadedParentTiles){n=this._loadedParentTiles[a.key];break}r.push(a.key);const c=a.scaledTo(a.overscaledZ-1);if(n=this._getLoadedTile(c),n)break;a=c}for(const c of r)this._loadedParentTiles[c]=n}}_addTile(e){let r=this._tiles[e.key];if(r)return this._source.prepareTile&&this._source.prepareTile(r),r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const n=Boolean(r);if(!n){const a=this.map?this.map.painter:null;r=new Cp(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,a,this._isRaster),this._source.prepareTile&&this._source.prepareTile(r)||this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))}return r?(r.uses++,this._tiles[e.key]=r,n||this._source.fire(new mt("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null}_setTileReloadTimer(e,r){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=r.getExpiryTimeout();n&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},n))}_removeTile(e){const r=this._tiles[e];r&&(r.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),r.uses>0||(r.hasData()&&r.state!=="reloading"?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,r,n){const a=[],c=this.transform;if(!c)return a;for(const h in this._tiles){const p=this._tiles[h];if(n&&p.clearQueryDebugViz(),p.holdingForFade())continue;const A=e.containsTile(p,c,r);A&&a.push(A)}return a}getVisibleCoordinates(e){const r=this.getRenderableIds(e).map(n=>this._tiles[n].tileID);for(const n of r)n.projMatrix=this.transform.calculateProjMatrix(n.toUnwrapped());return r}hasTransition(){if(this._source.hasTransition())return!0;if(C1(this._source.type))for(const e in this._tiles){const r=this._tiles[e];if(r.fadeEndTime!==void 0&&r.fadeEndTime>=Ce.now())return!0}return!1}setFeatureState(e,r,n){this._state.updateState(e=e||"_geojsonTileLayer",r,n)}removeFeatureState(e,r,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",r,n)}getFeatureState(e,r){return this._state.getState(e=e||"_geojsonTileLayer",r)}setDependencies(e,r,n){const a=this._tiles[e];a&&a.setDependencies(r,n)}reloadTilesForDependencies(e,r){for(const n in this._tiles)this._tiles[n].hasDependency(e,r)&&this._reloadTile(+n,"reloading");this._cache.filter(n=>!n.hasDependency(e,r))}_preloadTiles(e,r){const n=new Map,a=Array.isArray(e)?e:[e],c=this.map.painter.terrain,h=this.usedForTerrain&&c?c.getScaledDemTileSize():this._source.tileSize;for(const p of a){const A=p.coveringTiles({tileSize:h,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const y of A)n.set(y.key,y);this.usedForTerrain&&p.updateElevation(!1)}Ji(Array.from(n.values()),(p,A)=>{const y=new Cp(p,this._source.tileSize*p.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(y,v=>{this._source.type==="raster-dem"&&y.dem&&this._backfillDEM(y),A(v,y)})},r)}}function w1(i,e){const r=Math.abs(2*i.wrap)-+(i.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return i.overscaledZ-e.overscaledZ||n-r||e.canonical.y-i.canonical.y||e.canonical.x-i.canonical.x}function C1(i){return i==="raster"||i==="image"||i==="video"}oa.maxOverzooming=10,oa.maxUnderzooming=3;class kh{constructor(e,r,n){this._demTile=e,this._dem=this._demTile.dem,this._scale=r,this._offset=n}static create(e,r,n){const a=n||e.findDEMTileFor(r);if(!a||!a.dem)return;const c=a.dem,h=a.tileID,p=1<<r.canonical.z-h.canonical.z;return new kh(a,a.tileSize/St/p,[(r.canonical.x/p-h.canonical.x)*c.dim,(r.canonical.y/p-h.canonical.y)*c.dim])}tileCoordToPixel(e,r){const n=r*this._scale+this._offset[1],a=Math.floor(e*this._scale+this._offset[0]),c=Math.floor(n);return new $(a,c)}getElevationAt(e,r,n,a){const c=e*this._scale+this._offset[0],h=r*this._scale+this._offset[1],p=Math.floor(c),A=Math.floor(h),y=this._dem;return a=!!a,n?_t(_t(y.get(p,A,a),y.get(p,A+1,a),h-A),_t(y.get(p+1,A,a),y.get(p+1,A+1,a),h-A),c-p):y.get(p,A,a)}getElevationAtPixel(e,r,n){return this._dem.get(e,r,!!n)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*$a(1,e)*this._dem.stride}}class T1{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new jn(St,16,0),this.featureIndexArray=new Ti,this.promoteId=r}insert(e,r,n,a,c,h=0){const p=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,a,c,h);const A=this.grid;for(let y=0;y<r.length;y++){const v=r[y],w=[1/0,1/0,-1/0,-1/0];for(let T=0;T<v.length;T++){const S=v[T];w[0]=Math.min(w[0],S.x),w[1]=Math.min(w[1],S.y),w[2]=Math.max(w[2],S.x),w[3]=Math.max(w[3],S.y)}w[0]<St&&w[1]<St&&w[2]>=0&&w[3]>=0&&A.insert(p,w[0],w[1],w[2],w[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new ra.VectorTile(new Lc(this.rawTileData)).layers,this.sourceLayerCoder=new u1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,r,n,a){this.loadVTLayers();const c=e.params||{},h=Vn(c.filter),p=e.tileResult,A=e.transform,y=p.bufferedTilespaceBounds,v=this.grid.query(y.min.x,y.min.y,y.max.x,y.max.y,(k,N,F,Q)=>Yf(p.bufferedTilespaceGeometry,k,N,F,Q));v.sort(n2);let w=null;A.elevation&&v.length>0&&(w=kh.create(A.elevation,this.tileID));const T={};let S;for(let k=0;k<v.length;k++){const N=v[k];if(N===S)continue;S=N;const F=this.featureIndexArray.get(N);let Q=null;this.loadMatchingFeature(T,F,h,c.layers,c.availableImages,r,n,a,(ie,oe,ae,ce=0)=>(Q||(Q=Eo(ie,this.tileID.canonical,e.tileTransform)),oe.queryIntersectsFeature(p,ie,ae,Q,this.z,e.transform,e.pixelPosMatrix,w,ce)))}return T}loadMatchingFeature(e,r,n,a,c,h,p,A,y){const{featureIndex:v,bucketIndex:w,sourceLayerIndex:T,layoutVertexArrayOffset:S}=r,k=this.bucketLayerIDs[w];if(a&&!function(ie,oe){for(let ae=0;ae<ie.length;ae++)if(oe.indexOf(ie[ae])>=0)return!0;return!1}(a,k))return;const N=this.sourceLayerCoder.decode(T),F=this.vtLayers[N].feature(v);if(n.needGeometry){const ie=ea(F,!0);if(!n.filter(new gi(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!n.filter(new gi(this.tileID.overscaledZ),F))return;const Q=this.getId(F,N);for(let ie=0;ie<k.length;ie++){const oe=k[ie];if(a&&a.indexOf(oe)<0)continue;const ae=h[oe];if(!ae)continue;let ce={};Q!==void 0&&A&&(ce=A.getState(ae.sourceLayer||"_geojsonTileLayer",Q));const ue=mi({},p[oe]);ue.paint=M1(ue.paint,ae.paint,F,ce,c),ue.layout=M1(ue.layout,ae.layout,F,ce,c);const we=!y||y(F,ae,ce,S);if(!we)continue;const Ee=new h1(F,this.z,this.x,this.y,Q);Ee.layer=ue;let ze=e[oe];ze===void 0&&(ze=e[oe]=[]),ze.push({featureIndex:v,feature:Ee,intersectionZ:we})}}lookupSymbolFeatures(e,r,n,a,c,h,p,A){const y={};this.loadVTLayers();const v=Vn(c);for(const w of e)this.loadMatchingFeature(y,{bucketIndex:n,sourceLayerIndex:a,featureIndex:w,layoutVertexArrayOffset:0},v,h,p,A,r);return y}loadFeature(e){const{featureIndex:r,sourceLayerIndex:n}=e;this.loadVTLayers();const a=this.sourceLayerCoder.decode(n),c=this.vtFeatures[a];if(c[r])return c[r];const h=this.vtLayers[a].feature(r);return c[r]=h,h}hasLayer(e){for(const r of this.bucketLayerIDs)for(const n of r)if(e===n)return!0;return!1}getId(e,r){let n=e.id;return this.promoteId&&(n=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]],typeof n=="boolean"&&(n=Number(n))),n}}function M1(i,e,r,n,a){return Li(i,(c,h)=>{const p=e instanceof m?e.get(h):null;return p&&p.evaluate?p.evaluate(r,n,a):p})}function n2(i,e){return e-i}tt(T1,{omit:["rawTileData","sourceLayerCoder"]});class E1{constructor(e){const r={},n=[];for(const p in e){const A=e[p],y=r[p]={};for(const v in A.glyphs){const w=A.glyphs[+v];if(!w||w.bitmap.width===0||w.bitmap.height===0)continue;const T=w.metrics.localGlyph?2:1,S={x:0,y:0,w:w.bitmap.width+2*T,h:w.bitmap.height+2*T};n.push(S),y[v]=S}}const{w:a,h:c}=sp(n),h=new Io({width:a||1,height:c||1});for(const p in e){const A=e[p];for(const y in A.glyphs){const v=A.glyphs[+y];if(!v||v.bitmap.width===0||v.bitmap.height===0)continue;const w=r[p][y],T=v.metrics.localGlyph?2:1;Io.copy(v.bitmap,h,{x:0,y:0},{x:w.x+T,y:w.y+T},v.bitmap)}}this.image=h,this.positions=r}}tt(E1);class o2{constructor(e){this.tileID=new vr(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=na(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,r,n,a,c){this.status="parsing",this.data=e,this.collisionBoxArray=new En;const h=new u1(Object.keys(e.layers).sort()),p=new T1(this.tileID,this.promoteId);p.bucketLayerIDs=[];const A={},y=new xp(256,256),v={featureIndex:p,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:y,availableImages:n},w=r.familiesBySource[this.source];for(const ce in w){const ue=e.layers[ce];if(!ue)continue;let we=!1,Ee=!1;for(const xe of w[ce])xe[0].type==="symbol"?we=!0:Ee=!0;if(this.isSymbolTile===!0&&!we||this.isSymbolTile===!1&&!Ee)continue;ue.version===1&&Ot(`Vector tile source "${this.source}" layer "${ce}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ze=h.encode(ce),ke=[];for(let xe=0;xe<ue.length;xe++){const De=ue.feature(xe),Ne=p.getId(De,ce);ke.push({feature:De,id:Ne,index:xe,sourceLayerIndex:ze})}for(const xe of w[ce]){const De=xe[0];this.isSymbolTile!==void 0&&De.type==="symbol"!==this.isSymbolTile||De.minzoom&&this.zoom<Math.floor(De.minzoom)||De.maxzoom&&this.zoom>=De.maxzoom||De.visibility!=="none"&&(Dp(xe,this.zoom,n),(A[De.id]=De.createBucket({index:p.bucketLayerIDs.length,layers:xe,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ze,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.name,availableImages:n})).populate(ke,v,this.tileID.canonical,this.tileTransform),p.bucketLayerIDs.push(xe.map(Ne=>Ne.id)))}}let T,S,k,N;y.trim();const F={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Q=Li(v.glyphDependencies,ce=>Object.keys(ce).map(Number));Object.keys(Q).length?a.send("getGlyphs",{uid:this.uid,stacks:Q},(ce,ue)=>{T||(T=ce,S=ue,ae.call(this))},void 0,!1,F):S={};const ie=Object.keys(v.iconDependencies);ie.length?a.send("getImages",{icons:ie,source:this.source,tileID:this.tileID,type:"icons"},(ce,ue)=>{T||(T=ce,k=ue,ae.call(this))},void 0,!1,F):k={};const oe=Object.keys(v.patternDependencies);function ae(){if(T)return c(T);if(S&&k&&N){const ce=new E1(S),ue=new Bm(k,N);for(const we in A){const Ee=A[we];Ee instanceof ss?(Dp(Ee.layers,this.zoom,n),k0(Ee,S,ce.positions,k,ue.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):Ee.hasPattern&&(Ee instanceof xh||Ee instanceof _h||Ee instanceof zc)&&(Dp(Ee.layers,this.zoom,n),Ee.addFeatures(v,this.tileID.canonical,ue.patternPositions,n,this.tileTransform))}this.status="done",c(null,{buckets:gr(A).filter(we=>!we.isEmpty()),featureIndex:p,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ce.image,lineAtlas:y,imageAtlas:ue,glyphMap:this.returnDependencies?S:null,iconMap:this.returnDependencies?k:null,glyphPositions:this.returnDependencies?ce.positions:null})}}oe.length?a.send("getImages",{icons:oe,source:this.source,tileID:this.tileID,type:"patterns"},(ce,ue)=>{T||(T=ce,N=ue,ae.call(this))},void 0,!1,F):N={},ae.call(this)}}function Dp(i,e,r){const n=new gi(e);for(const a of i)a.recalculate(n,r)}class I1{constructor(e){this.entries={},this.scheduler=e}request(e,r,n,a){const c=this.entries[e]=this.entries[e]||{callbacks:[]};if(c.result){const[h,p]=c.result;return this.scheduler?this.scheduler.add(()=>{a(h,p)},r):a(h,p),()=>{}}return c.callbacks.push(a),c.cancel||(c.cancel=n((h,p)=>{c.result=[h,p];for(const A of c.callbacks)this.scheduler?this.scheduler.add(()=>{A(h,p)},r):A(h,p);setTimeout(()=>delete this.entries[e],3e3)})),()=>{c.result||(c.callbacks=c.callbacks.filter(h=>h!==a),c.callbacks.length||(c.cancel(),delete this.entries[e]))}}}function D1(i,e,r){const n=JSON.stringify(i.request);return i.data&&(this.deduped.entries[n]={result:[null,i.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom},a=>{const c=J(i.request,(h,p,A,y)=>{h?a(h):p&&a(null,{vectorTile:r?void 0:new ra.VectorTile(new Lc(p)),rawData:p,cacheControl:A,expires:y})});return()=>{c.cancel(),a()}},e)}const s2=qn(new Float32Array(16));class us{constructor(e){this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,r){return{x:0,y:0,z:0}}unproject(e,r){return new di(0,0)}projectTilePoint(e,r,n){return{x:e,y:r,z:0}}locationPoint(e,r){return e._coordinatePoint(e.locationCoordinate(r),!1)}pixelsPerMeter(e,r){return $a(1,e)*r}farthestPixelDistance(e){return function(r,n){const a=r.fovAboveCenter,c=r.elevation?r.elevation.getMinElevationBelowMSL()*n:0,h=(r._camera.position[2]*r.worldSize-c)/Math.cos(r._pitch),p=Math.sin(a)*h/Math.sin(Math.max(Math.PI/2-r._pitch-a,.01)),A=Math.sin(r._pitch)*p+h;return Math.min(1.01*A,h*(1/r._horizonShift))}(e,e.pixelsPerMeter)}pointCoordinate(e,r,n,a){const c=e.horizonLineFromTop(!1),h=new $(r,Math.max(c,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(h,a))}createInversionMatrix(e,r){return s2}createTileMatrix(e,r,n){let a,c,h;const p=n.canonical,A=qn(new Float64Array(16));if(this.isReprojectedInTileSpace){const y=na(p,this);a=1,c=y.x+n.wrap*y.scale,h=y.y,rs(A,A,[a/y.scale,a/y.scale,e.pixelsPerMeter/r])}else a=r/e.zoomScale(p.z),c=(p.x+Math.pow(2,p.z)*n.wrap)*a,h=p.y*a;return ta(A,A,[c,h,0]),rs(A,A,[a/St,a/St,1]),A}upVector(e,r,n){return[0,0,1]}upVectorScale(e,r,n){return{metersToTile:1,metersToLabelSpace:1}}}class a2 extends us{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,r){return{x:yc(e),y:Ja(r),z:0}}unproject(e,r){const n=An(e),a=sr(r);return new di(n,a)}}class l2 extends us{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[r,n]=this.parallels=e.parallels||[29.5,45.5],a=Math.sin(He(r));this.n=(a+Math.sin(He(n)))/2,this.c=1+a*(2*this.n-a),this.r0=Math.sqrt(this.c)/this.n}project(e,r){const{n,c:a,r0:c}=this,h=He(e-this.center[0]),p=He(r),A=Math.sqrt(a-2*n*Math.sin(p))/n;return{x:A*Math.sin(h*n),y:A*Math.cos(h*n)-c,z:0}}unproject(e,r){const{n,c:a,r0:c}=this,h=c+r;let p=Math.atan2(e,Math.abs(h))*Math.sign(h);h*n<0&&(p-=Math.PI*Math.sign(e)*Math.sign(h));const A=He(this.center[0])*n;p=Xi(p,-Math.PI-A,Math.PI-A);const y=dt(p/n)+this.center[0],v=Math.asin(Dt((a-(e*e+h*h)*n*n)/(2*n),-1,1)),w=Dt(dt(v),-85.051129,Hn);return new di(y,w)}}const Vc=1.340264,Uc=-.081106,Zc=893e-6,jc=.003796,Lh=Math.sqrt(3)/2;class c2 extends us{project(e,r){r=r/180*Math.PI,e=e/180*Math.PI;const n=Math.asin(Lh*Math.sin(r)),a=n*n,c=a*a*a;return{x:.5*(e*Math.cos(n)/(Lh*(Vc+3*Uc*a+c*(7*Zc+9*jc*a)))/Math.PI+.5),y:1-.5*(n*(Vc+Uc*a+c*(Zc+jc*a))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let n=r=(2*(1-r)-1)*Math.PI,a=n*n,c=a*a*a;for(let v,w,T,S=0;S<12&&(w=n*(Vc+Uc*a+c*(Zc+jc*a))-r,T=Vc+3*Uc*a+c*(7*Zc+9*jc*a),v=w/T,n=Dt(n-v,-Math.PI/3,Math.PI/3),a=n*n,c=a*a*a,!(Math.abs(v)<1e-12));++S);const h=Lh*e*(Vc+3*Uc*a+c*(7*Zc+9*jc*a))/Math.cos(n),p=Math.asin(Math.sin(n)/Lh),A=Dt(180*h/Math.PI,-180,180),y=Dt(180*p/Math.PI,-85.051129,Hn);return new di(A,y)}}class u2 extends us{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){return{x:.5+e/360,y:.5-r/360,z:0}}unproject(e,r){const n=360*(e-.5),a=Dt(360*(.5-r),-85.051129,Hn);return new di(n,a)}}const fl=Math.PI/2;function Ph(i){return Math.tan((fl+i)/2)}class h2 extends us{constructor(e){super(e),this.center=e.center||[0,30];const[r,n]=this.parallels=e.parallels||[30,30],a=He(r),c=He(n),h=Math.cos(a);this.n=a===c?Math.sin(a):Math.log(h/Math.cos(c))/Math.log(Ph(c)/Ph(a)),this.f=h*Math.pow(Ph(a),this.n)/this.n}project(e,r){r=He(r),e=He(e-this.center[0]);const n=1e-6,{n:a,f:c}=this;c>0?r<-fl+n&&(r=-fl+n):r>fl-n&&(r=fl-n);const h=c/Math.pow(Ph(r),a),p=h*Math.sin(a*e),A=c-h*Math.cos(a*e);return{x:.5*(p/Math.PI+.5),y:1-.5*(A/Math.PI+.5),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI,r=(2*(1-r)-.5)*Math.PI;const{n,f:a}=this,c=a-r,h=Math.sign(c),p=Math.sign(n)*Math.sqrt(e*e+c*c);let A=Math.atan2(e,Math.abs(c))*h;c*n<0&&(A-=Math.PI*Math.sign(e)*h);const y=Dt(dt(A/n)+this.center[0],-180,180),v=Dt(dt(2*Math.atan(Math.pow(a/p,1/n))-fl),-85.051129,Hn);return new di(y,v)}}const S1=He(Hn);class d2 extends us{project(e,r){const n=(r=He(r))*r,a=n*n;return{x:.5*((e=He(e))*(.8707-.131979*n+a*(a*(.003971*n-.001529*a)-.013791))/Math.PI+.5),y:1-.5*(r*(1.007226+n*(.015085+a*(.028874*n-.044475-.005916*a)))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let n=r=(2*(1-r)-1)*Math.PI,a=25,c=0,h=n*n;do{h=n*n;const y=h*h;c=(n*(1.007226+h*(.015085+y*(.028874*h-.044475-.005916*y)))-r)/(1.007226+h*(.045255+y*(.259866*h-.311325-.005916*11*y))),n=Dt(n-c,-S1,S1)}while(Math.abs(c)>1e-6&&--a>0);h=n*n;const p=Dt(dt(e/(.8707+h*(h*(h*h*h*(.003971-.001529*h)-.013791)-.131979))),-180,180),A=dt(n);return new di(p,A)}}const z1=He(Hn);class p2 extends us{project(e,r){r=He(r),e=He(e);const n=Math.cos(r),a=2/Math.PI,c=Math.acos(n*Math.cos(e/2)),h=Math.sin(c)/c,p=.5*(e*a+2*n*Math.sin(e/2)/h)||0,A=.5*(r+Math.sin(r)/h)||0;return{x:.5*(p/Math.PI+.5),y:1-.5*(A/Math.PI+1),z:0}}unproject(e,r){let n=e=(2*e-.5)*Math.PI,a=r=(2*(1-r)-1)*Math.PI,c=25;const h=1e-6;let p=0,A=0;do{const y=Math.cos(a),v=Math.sin(a),w=2*v*y,T=v*v,S=y*y,k=Math.cos(n/2),N=Math.sin(n/2),F=2*k*N,Q=N*N,ie=1-S*k*k,oe=ie?1/ie:0,ae=ie?Math.acos(y*k)*Math.sqrt(1/ie):0,ce=.5*(2*ae*y*N+2*n/Math.PI)-e,ue=.5*(ae*v+a)-r,we=.5*oe*(S*Q+ae*y*k*T)+1/Math.PI,Ee=oe*(F*w/4-ae*v*N),ze=.125*oe*(w*N-ae*v*S*F),ke=.5*oe*(T*k+ae*Q*y)+.5,xe=Ee*ze-ke*we;p=(ue*Ee-ce*ke)/xe,A=(ce*ze-ue*we)/xe,n=Dt(n-p,-Math.PI,Math.PI),a=Dt(a-A,-z1,z1)}while((Math.abs(p)>h||Math.abs(A)>h)&&--c>0);return new di(dt(n),dt(a))}}class B1 extends us{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(He(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){const{scale:n,cosPhi:a}=this;return{x:He(e)*a*n+.5,y:-Math.sin(He(r))/a*n+.5,z:0}}unproject(e,r){const{scale:n,cosPhi:a}=this,c=-(r-.5)/n,h=Dt(dt((e-.5)/n)/a,-180,180),p=Math.asin(Dt(c*a,-1,1)),A=Dt(dt(p),-85.051129,Hn);return new di(h,A)}}s.ARRAY_TYPE=Zr,s.AUTH_ERR_MSG=bt,s.Aabb=an,s.Actor=class{constructor(i,e,r){this.target=i,this.parent=e,this.mapId=r,this.callbacks={},this.cancelCallbacks={},ci(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=ht()?i:Te,this.scheduler=new H0}send(i,e,r,n,a=!1,c){const h=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=c,this.callbacks[h]=r);const p=te(this.globalScope)?void 0:[];return this.target.postMessage({id:h,type:i,hasCallback:!!r,targetMapId:n,mustQueue:a,sourceMapId:this.mapId,data:Qs(e,p)},p),{cancel:()=>{r&&delete this.callbacks[h],this.target.postMessage({id:h,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(i){const e=i.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){const n=this.cancelCallbacks[r];delete this.cancelCallbacks[r],n&&n.cancel()}else if(e.mustQueue||ht()){const n=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add(()=>this.processTask(r,e),n&&n.metadata||{type:"message"})}else this.processTask(r,e)}processTask(i,e){if(e.type==="<response>"){const r=this.callbacks[i];delete this.callbacks[i],r&&(e.error?r(Wo(e.error)):r(null,Wo(e.data)))}else{const r=te(this.globalScope)?void 0:[],n=e.hasCallback?(c,h)=>{delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:c?Qs(c):null,data:Qs(h,r)},r)}:c=>{},a=Wo(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,a,n);else if(this.parent.getWorkerSource){const c=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,c[0],a.source)[c[1]](a,n)}else n(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=Sh,s.Color=$t,s.ColorMode=Jn,s.CullFaceMode=zn,s.DEMData=Bh,s.DataConstantProperty=_,s.DedupedRequest=I1,s.DepthMode=pl,s.EXTENT=St,s.Elevation=class{isDataAvailableAtPoint(i){const e=this._source();if(!e||i.y<0||i.y>1)return!1;const r=e.getSource().maxzoom,n=1<<r,a=Math.floor(i.x),c=Math.floor((i.x-a)*n),h=Math.floor(i.y*n),p=this.findDEMTileFor(new vr(r,a,r,c,h));return!(!p||!p.dem)}getAtPointOrZero(i,e=0){return this.getAtPoint(i,e)||0}getAtPoint(i,e,r=!0){e==null&&(e=null);const n=this._source();if(!n||i.y<0||i.y>1)return e;const a=n.getSource().maxzoom,c=1<<a,h=Math.floor(i.x),p=i.x-h,A=new vr(a,h,a,Math.floor(p*c),Math.floor(i.y*c)),y=this.findDEMTileFor(A);if(!y||!y.dem)return e;const v=y.dem,w=1<<y.tileID.canonical.z,T=(p*w-y.tileID.canonical.x)*v.dim,S=(i.y*w-y.tileID.canonical.y)*v.dim,k=Math.floor(T),N=Math.floor(S);return(r?this.exaggeration():1)*_t(_t(v.get(k,N),v.get(k,N+1),S-N),_t(v.get(k+1,N),v.get(k+1,N+1),S-N),T-k)}getAtTileOffset(i,e,r){const n=1<<i.canonical.z;return this.getAtPointOrZero(new ch(i.wrap+(i.canonical.x+e/St)/n,(i.canonical.y+r/St)/n))}getAtTileOffsetFunc(i,e,r,n){return a=>{const c=this.getAtTileOffset(i,a.x,a.y),h=n.upVector(i.canonical,a.x,a.y);return vc(h,h,c*n.upVectorScale(i.canonical,e,r).metersToTile),h}}getForTilePoints(i,e,r,n){const a=kh.create(this,i,n);return!!a&&(e.forEach(c=>{c[2]=this.exaggeration()*a.getElevationAt(c[0],c[1],r)}),!0)}getMinMaxForTile(i){const e=this.findDEMTileFor(i);if(!e||!e.dem)return null;const r=e.dem.tree,n=e.tileID,a=1<<i.canonical.z-n.canonical.z;let c=i.canonical.x/a-n.canonical.x,h=i.canonical.y/a-n.canonical.y,p=0;for(let A=0;A<i.canonical.z-n.canonical.z&&!r.leaves[p];A++){c*=2,h*=2;const y=2*Math.floor(h)+Math.floor(c);p=r.childOffsets[p]+y,c%=1,h%=1}return{min:this.exaggeration()*r.minimums[p],max:this.exaggeration()*r.maximums[p]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(i,e,r){throw new Error("Pure virtual method called.")}pointCoordinate(i){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(i){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=At,s.EvaluationParameters=gi,s.Event=mt,s.Evented=Ct,s.FillExtrusionBucket=zc,s.Frustum=Wd,s.GLOBE_RADIUS=dl,s.GlobeSharedBuffers=class{constructor(i){this._createGrid(i),this._createPoles(i),this._createAtmosphere(i)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const i of this._poleSegments)i.destroy();this._gridSegments.destroy(),this.atmosphereVertexBuffer.destroy(),this.atmosphereIndexBuffer.destroy(),this.atmosphereSegments.destroy(),this._wireframeIndexBuffer&&(this._wireframeIndexBuffer.destroy(),this._wireframeSegments.destroy())}_createGrid(i){const e=new q,r=new be,n=65;for(let a=0;a<n;a++)for(let c=0;c<n;c++)e.emplaceBack(c,a);for(let a=0;a<64;a++)for(let c=0;c<64;c++){const h=a*n+c;r.emplaceBack(h+1,h,h+n),r.emplaceBack(h+n,h+n+1,h+1)}this._gridBuffer=i.createVertexBuffer(e,Oc.members),this._gridIndexBuffer=i.createIndexBuffer(r,!0),this._gridSegments=Bi.simpleSegment(0,0,4225,8192)}_createPoles(i){const e=new be;for(let a=0;a<=64;a++)e.emplaceBack(0,a+1,a+2);this._poleIndexBuffer=i.createIndexBuffer(e,!0);const r=new nt,n=new nt;this._poleSegments=[];for(let a=0,c=0;a<5;a++){const h=1<<a,p=512*h/Math.PI/2,A=360/h;r.emplaceBack(0,-p,0,0,0,.5,0),n.emplaceBack(0,-p,0,0,0,.5,1);for(let y=0;y<=64;y++){const v=y/64,w=_t(0,A,v),[T,S,k]=i1($0,e2,w,p);r.emplaceBack(T,S,k,0,0,v,0),n.emplaceBack(T,S,k,0,0,v,1)}this._poleSegments.push(Bi.simpleSegment(c,0,66,64)),c+=66}this._poleNorthVertexBuffer=i.createVertexBuffer(r,e1,!1),this._poleSouthVertexBuffer=i.createVertexBuffer(n,e1,!1)}_createAtmosphere(i){const e=new vt;e.emplaceBack(-1,1,1,0,0),e.emplaceBack(1,1,1,1,0),e.emplaceBack(1,-1,1,1,1),e.emplaceBack(-1,-1,1,0,1);const r=new be;r.emplaceBack(0,1,2),r.emplaceBack(2,3,0),this.atmosphereVertexBuffer=i.createVertexBuffer(e,W0.members),this.atmosphereIndexBuffer=i.createIndexBuffer(r),this.atmosphereSegments=Bi.simpleSegment(0,0,4,2)}getGridBuffers(){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments]}getPoleBuffers(i){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[i]]}getWirefameBuffers(i){if(!this._wireframeSegments){const e=new ct,r=64,n=r+1;for(let a=0;a<r;a++)for(let c=0;c<r;c++){const h=a*n+c;e.emplaceBack(h,h+1),e.emplaceBack(h,h+n),e.emplaceBack(h,h+n+1)}this._wireframeIndexBuffer=i.createIndexBuffer(e),this._wireframeSegments=Bi.simpleSegment(0,0,r*r,e.length)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments]}},s.GlyphManager=ul,s.ImagePosition=ap,s.LineAtlas=xp,s.LngLat=di,s.LngLatBounds=is,s.LocalGlyphMode=hp,s.MAX_MERCATOR_LATITUDE=Hn,s.MercatorCoordinate=ch,s.ONE_EM=ar,s.OverscaledTileID=vr,s.Properties=B,s.RGBAImage=jr,s.Ray=class{constructor(i,e){this.pos=i,this.dir=e}intersectsPlane(i,e,r){const n=wc(e,this.dir);if(Math.abs(n)<1e-6)return!1;const a=((i[0]-this.pos[0])*e[0]+(i[1]-this.pos[1])*e[1]+(i[2]-this.pos[2])*e[2])/n;return r[0]=this.pos[0]+this.dir[0]*a,r[1]=this.pos[1]+this.dir[1]*a,r[2]=this.pos[2]+this.dir[2]*a,!0}closestPointOnSphere(i,e,r){if(function(T,S){var k=T[0],N=T[1],F=T[2],Q=S[0],ie=S[1],oe=S[2];return Math.abs(k-Q)<=Vd*Math.max(1,Math.abs(k),Math.abs(Q))&&Math.abs(N-ie)<=Vd*Math.max(1,Math.abs(N),Math.abs(ie))&&Math.abs(F-oe)<=Vd*Math.max(1,Math.abs(F),Math.abs(oe))}(this.pos,i)||e===0)return r[0]=r[1]=r[2]=0,!1;const[n,a,c]=this.dir,h=this.pos[0]-i[0],p=this.pos[1]-i[1],A=this.pos[2]-i[2],y=n*n+a*a+c*c,v=2*(h*n+p*a+A*c),w=v*v-4*y*(h*h+p*p+A*A-e*e);if(w<0){const T=Math.max(-v/2,0),S=h+n*T,k=p+a*T,N=A+c*T,F=Math.hypot(S,k,N);return r[0]=S*e/F,r[1]=k*e/F,r[2]=N*e/F,!1}{const T=(-v-Math.sqrt(w))/(2*y);if(T<0){const S=Math.hypot(h,p,A);return r[0]=h*e/S,r[1]=p*e/S,r[2]=A*e/S,!1}return r[0]=h+n*T,r[1]=p+a*T,r[2]=A+c*T,!0}}},s.RequestManager=class{constructor(i,e,r){this._transformRequestFn=i,this._customAccessToken=e,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const i=function(){let e="";for(let r=0;r<10;r++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ft,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,e){return this._transformRequestFn&&this._transformRequestFn(i,e)||{url:i}}normalizeStyleURL(i,e){if(!Tt(i))return i;const r=Qt(i);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeGlyphsURL(i,e){if(!Tt(i))return i;const r=Qt(i);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeSourceURL(i,e){if(!Tt(i))return i;const r=Qt(i);return r.path=`/v4/${r.authority}.json`,r.params.push("secure"),this._makeAPIURL(r,this._customAccessToken||e)}normalizeSpriteURL(i,e,r,n){const a=Qt(i);return Tt(i)?(a.path=`/styles/v1${a.path}/sprite${e}${r}`,this._makeAPIURL(a,this._customAccessToken||n)):(a.path+=`${e}${r}`,ai(a))}normalizeTileURL(i,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!Tt(i))return i;const n=Qt(i);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||r&&n.authority!=="raster"&&r===512?"@2x":""}${We.supported?".webp":"$1"}`),n.authority==="raster"?n.path=`/${Se.RASTER_URL_PREFIX}${n.path}`:(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path=`/${Se.TILE_URL_VERSION}${n.path}`);const a=this._customAccessToken||function(c){for(const h of c){const p=h.match(/^access_token=(.*)$/);if(p)return p[1]}return null}(n.params)||Se.ACCESS_TOKEN;return Se.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&n.params.push(`sku=${this._skuToken}`),this._makeAPIURL(n,a)}canonicalizeTileURL(i,e){const r=Qt(i);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return i;let n="mapbox://";r.path.match(/^\/raster\/v1\//)?n+=`raster/${r.path.replace(`/${Se.RASTER_URL_PREFIX}/`,"")}`:n+=`tiles/${r.path.replace(`/${Se.TILE_URL_VERSION}/`,"")}`;let a=r.params;return e&&(a=a.filter(c=>!c.match(/^access_token=/))),a.length&&(n+=`?${a.join("&")}`),n}canonicalizeTileset(i,e){const r=!!e&&Tt(e),n=[];for(const a of i.tiles||[])Ft(a)?n.push(this.canonicalizeTileURL(a,r)):n.push(a);return n}_makeAPIURL(i,e){const r="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=Qt(Se.API_URL);if(i.protocol=n.protocol,i.authority=n.authority,i.protocol==="http"){const a=i.params.indexOf("secure");a>=0&&i.params.splice(a,1)}if(n.path!=="/"&&(i.path=`${n.path}${i.path}`),!Se.REQUIRE_ACCESS_TOKEN)return ai(i);if(e=e||Se.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if(e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return i.params=i.params.filter(a=>a.indexOf("access_token")===-1),i.params.push(`access_token=${e||""}`),ai(i)}},s.ResourceType=Y,s.SegmentVector=Bi,s.SourceCache=oa,s.StencilMode=Mp,s.StructArrayLayout1ui2=Mt,s.StructArrayLayout2f1f2i16=Ge,s.StructArrayLayout2i4=q,s.StructArrayLayout2ui4=ct,s.StructArrayLayout3f12=re,s.StructArrayLayout3ui6=be,s.StructArrayLayout4i8=ee,s.Texture=Nc,s.Tile=Cp,s.Transitionable=l,s.Uniform1f=ah,s.Uniform1i=class extends To{constructor(i,e){super(i,e),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},s.Uniform2f=class extends To{constructor(i,e){super(i,e),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},s.Uniform3f=class extends To{constructor(i,e){super(i,e),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},s.Uniform4f=Rf,s.UniformColor=Nf,s.UniformMatrix2f=class extends To{constructor(i,e){super(i,e),this.current=Wg}set(i){for(let e=0;e<4;e++)if(i[e]!==this.current[e]){this.current=i,this.gl.uniformMatrix2fv(this.location,!1,i);break}}},s.UniformMatrix3f=class extends To{constructor(i,e){super(i,e),this.current=qg}set(i){for(let e=0;e<9;e++)if(i[e]!==this.current[e]){this.current=i,this.gl.uniformMatrix3fv(this.location,!1,i);break}}},s.UniformMatrix4f=class extends To{constructor(i,e){super(i,e),this.current=Hg}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let e=1;e<16;e++)if(i[e]!==this.current[e]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},s.UnwrappedTileID=c1,s.ValidationError=Je,s.VectorTileWorkerSource=class extends Ct{constructor(i,e,r,n,a){super(),this.actor=i,this.layerIndex=e,this.availableImages=r,this.loadVectorData=a||D1,this.loading={},this.loaded={},this.deduped=new I1(i.scheduler),this.isSpriteLoaded=n,this.scheduler=i.scheduler}loadTile(i,e){const r=i.uid,n=i&&i.request,a=n&&n.collectResourceTiming,c=this.loading[r]=new o2(i);c.abort=this.loadVectorData(i,(h,p)=>{const A=!this.loading[r];if(delete this.loading[r],A||h||!p)return c.status="done",A||(this.loaded[r]=c),e(h);const y=p.rawData,v={};p.expires&&(v.expires=p.expires),p.cacheControl&&(v.cacheControl=p.cacheControl),c.vectorTile=p.vectorTile||new ra.VectorTile(new Lc(y));const w=()=>{c.parse(c.vectorTile,this.layerIndex,this.availableImages,this.actor,(T,S)=>{if(T||!S)return e(T);const k={};if(a){const N=$m(n);N.length>0&&(k.resourceTiming=JSON.parse(JSON.stringify(N)))}e(null,mi({rawTileData:y.slice(0)},S,v,k))})};this.isSpriteLoaded?w():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(w,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom}):w()}),this.loaded=this.loaded||{},this.loaded[r]=c})}reloadTile(i,e){const r=this.loaded,n=i.uid,a=this;if(r&&r[n]){const c=r[n];c.showCollisionBoxes=i.showCollisionBoxes,c.enableTerrain=!!i.enableTerrain,c.projection=i.projection,c.tileTransform=na(i.tileID.canonical,i.projection);const h=(p,A)=>{const y=c.reloadCallback;y&&(delete c.reloadCallback,c.parse(c.vectorTile,a.layerIndex,this.availableImages,a.actor,y)),e(p,A)};c.status==="parsing"?c.reloadCallback=h:c.status==="done"&&(c.vectorTile?c.parse(c.vectorTile,this.layerIndex,this.availableImages,this.actor,h):h())}}abortTile(i,e){const r=i.uid,n=this.loading[r];n&&(n.abort&&n.abort(),delete this.loading[r]),e()}removeTile(i,e){const r=this.loaded,n=i.uid;r&&r[n]&&delete r[n],e()}},s.WritingMode=ln,s.ZoomHistory=oc,s.add=Jf,s.addDynamicAttributes=mp,s.adjoint=function(i,e){var r=e[0],n=e[1],a=e[2],c=e[3],h=e[4],p=e[5],A=e[6],y=e[7],v=e[8];return i[0]=h*v-p*y,i[1]=a*y-n*v,i[2]=n*p-a*h,i[3]=p*A-c*v,i[4]=r*v-a*A,i[5]=a*c-r*p,i[6]=c*y-h*A,i[7]=n*A-r*y,i[8]=r*h-n*c,i},s.asyncAll=Ji,s.bezier=ei,s.bindAll=ci,s.boundsAttributes=p1,s.bufferConvexPolygon=function(i,e){const r=[];for(let n=0;n<i.length;n++){const a=Xi(n-1,-1,i.length-1),c=Xi(n+1,-1,i.length-1),h=i[n],p=i[c],A=i[a].sub(h).unit(),y=p.sub(h).unit(),v=y.angleWithSep(A.x,A.y),w=A.add(y).unit().mult(-1*e/Math.sin(v/2));r.push(h.add(w))}return r},s.cacheEntryPossiblyAdded=function(i){Oo++,Oo>po&&(i.getActor().send("enforceCacheSizeLimit",ho),Oo=0)},s.calculateGlobeLabelMatrix=function(i,e){const{lng:r,lat:n}=i._center,a=o1(0,0,i.worldSize/i._projectionScaler,r,n);return Ud(a,a,function(c){const h=qn(new Float64Array(16)),p=1/wp(c);return ta(h,h,c.min),rs(h,h,[p,p,p]),h}(Gc(e)))},s.calculateGlobeMatrix=s1,s.calculateGlobeMercatorMatrix=function(i){const e=i.worldSize,r=i.point,n=$a(1,i.center.lat)*e,a=i.pixelsPerMeter,c=e/(n/i.pixelsPerMeter),h=qn(new Float64Array(16));return ta(h,h,[r.x,r.y,0]),rs(h,h,[c,c,a]),Float32Array.from(h)},s.circumferenceAtLatitude=Pd,s.clamp=Dt,s.clearTileCache=function(i){const e=Te.caches.delete(ga);i&&e.catch(i).then(()=>i())},s.clipLine=jm,s.clone=function(i){var e=new Zr(16);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},s.clone$1=Pi,s.collisionCircleLayout=o0,s.config=Se,s.conjugate=function(i,e){return i[0]=-e[0],i[1]=-e[1],i[2]=-e[2],i[3]=e[3],i},s.create=function(){var i=new Zr(16);return Zr!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},s.create$1=Wf,s.createExpression=Ns,s.createLayout=X,s.createStyleLayer=function(i){return i.type==="custom"?new U0(i):new j0[i.type](i)},s.cross=tm,s.degToRad=He,s.div=function(i,e,r){return i[0]=e[0]/r[0],i[1]=e[1]/r[1],i[2]=e[2]/r[2],i},s.dot=wc,s.earthRadius=Ld,s.ease=wi,s.easeCubicInOut=Kt,s.emitValidationErrors=Vu,s.endsWith=Ht,s.enforceCacheSizeLimit=function(i){No(),tn&&tn.then(e=>{e.keys().then(r=>{for(let n=0;n<r.length-i;n++)e.delete(r[n])})})},s.evaluateSizeForFeature=vh,s.evaluateSizeForZoom=sl,s.evaluateVariableOffset=Wm,s.evented=mc,s.exactEquals=function(i,e){return i[0]===e[0]&&i[1]===e[1]&&i[2]===e[2]&&i[3]===e[3]},s.exactEquals$1=function(i,e){return i[0]===e[0]&&i[1]===e[1]&&i[2]===e[2]},s.exported=Ce,s.exported$1=We,s.extend=mi,s.extend$1=ti,s.filterObject=Or,s.fromMat4=function(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[4],i[4]=e[5],i[5]=e[6],i[6]=e[8],i[7]=e[9],i[8]=e[10],i},s.fromQuat=function(i,e){var r=e[0],n=e[1],a=e[2],c=e[3],h=r+r,p=n+n,A=a+a,y=r*h,v=n*h,w=n*p,T=a*h,S=a*p,k=a*A,N=c*h,F=c*p,Q=c*A;return i[0]=1-w-k,i[1]=v+Q,i[2]=T-F,i[3]=0,i[4]=v-Q,i[5]=1-y-k,i[6]=S+N,i[7]=0,i[8]=T+F,i[9]=S-N,i[10]=1-y-w,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},s.fromRotation=function(i,e){var r=Math.sin(e),n=Math.cos(e);return i[0]=n,i[1]=r,i[2]=0,i[3]=-r,i[4]=n,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},s.fromScaling=function(i,e){return i[0]=e[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=e[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},s.furthestTileCorner=function(i){const e=Math.round((i+45+360)%360/90)%4;return Pt[e]},s.getAABBPointSquareDist=function(i,e,r){let n=0;for(let a=0;a<2;++a){const c=r?r[a]:0;i[a]>c&&(n+=(i[a]-c)*(i[a]-c)),e[a]<c&&(n+=(c-e[a])*(c-e[a]))}return n},s.getAnchorAlignment=up,s.getAnchorJustification=pp,s.getBounds=function(i){let e=1/0,r=1/0,n=-1/0,a=-1/0;for(const c of i)e=Math.min(e,c.x),r=Math.min(r,c.y),n=Math.max(n,c.x),a=Math.max(a,c.y);return{min:new $(e,r),max:new $(n,a)}},s.getColumn=function(i,e){return[i[4*e],i[4*e+1],i[4*e+2],i[4*e+3]]},s.getGridMatrix=function(i,e){const[r,n]=e,a=.015625;return[0,(n[1]-r[1])*a,1<<i.z,(n[0]-r[0])*a,0,i.y,r[0],r[1],a]},s.getImage=Xe,s.getJSON=function(i,e){return Z(mi(i,{type:"json"}),e)},s.getMapSessionAPI=co,s.getPerformanceMeasurement=$m,s.getProjection=function(i){const e=i.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(i.name){case"mercator":return new a2(i);case"equirectangular":return new u2(i);case"naturalEarth":return new d2(i);case"equalEarth":return new c2(i);case"winkelTripel":return new p2(i);case"albers":return r?new B1(i):new l2(i);case"lambertConformalConic":return r?new B1(i):new h2(i)}throw new Error(`Invalid projection name: ${i.name}`)},s.getRTLTextPluginStatus=Ka,s.getReferrer=P,s.getTilePoint=function(i,{x:e,y:r},n=0){return new $(((e-n)*i.scale-i.x)*St,(r*i.scale-i.y)*St)},s.getTileVec3=function(i,e,r=0){return xc(((e.x-r)*i.scale-i.x)*St,(e.y*i.scale-i.y)*St,Ff(e.z,e.y))},s.getVideo=function(i,e){const r=Te.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(let n=0;n<i.length;n++){const a=Te.document.createElement("source");fe(i[n])||(r.crossOrigin="Anonymous"),a.src=i[n],r.appendChild(a)}return{cancel:()=>{}}},s.globeECEFOrigin=function(i,e){const r=[0,0,0];return ia(r,r,n1(Gc(e.canonical))),ia(r,r,i),r},s.globePixelsToTileUnits=function(i,e){return St/(512*Math.pow(2,i))*wp(Gc(e))},s.globePoleMatrixForTile=function(i,e,r){const n=qn(new Float64Array(16)),a=1<<i,c=360*(e/a-.5),h=r.point,p=r.worldSize/(r.tileSize*a);return ta(n,n,[h.x,h.y,-r.worldSize/Math.PI/2]),rs(n,n,[p,p,p]),Zd(n,n,He(-r._center.lat)),jd(n,n,He(-r._center.lng+c)),Float32Array.from(n)},s.globeTileLatLngCorners=bp,s.globeToMercatorTransition=function(i){return ur(5,6,i)},s.identity=qn,s.identity$1=nm,s.invert=function(i,e){var r=e[0],n=e[1],a=e[2],c=e[3],h=e[4],p=e[5],A=e[6],y=e[7],v=e[8],w=e[9],T=e[10],S=e[11],k=e[12],N=e[13],F=e[14],Q=e[15],ie=r*p-n*h,oe=r*A-a*h,ae=r*y-c*h,ce=n*A-a*p,ue=n*y-c*p,we=a*y-c*A,Ee=v*N-w*k,ze=v*F-T*k,ke=v*Q-S*k,xe=w*F-T*N,De=w*Q-S*N,Ne=T*Q-S*F,Qe=ie*Ne-oe*De+ae*xe+ce*ke-ue*ze+we*Ee;return Qe?(i[0]=(p*Ne-A*De+y*xe)*(Qe=1/Qe),i[1]=(a*De-n*Ne-c*xe)*Qe,i[2]=(N*we-F*ue+Q*ce)*Qe,i[3]=(T*ue-w*we-S*ce)*Qe,i[4]=(A*ke-h*Ne-y*ze)*Qe,i[5]=(r*Ne-a*ke+c*ze)*Qe,i[6]=(F*ae-k*we-Q*oe)*Qe,i[7]=(v*we-T*ae+S*oe)*Qe,i[8]=(h*De-p*ke+y*Ee)*Qe,i[9]=(n*ke-r*De-c*Ee)*Qe,i[10]=(k*ue-N*ae+Q*ie)*Qe,i[11]=(w*ae-v*ue-S*ie)*Qe,i[12]=(p*ze-h*xe-A*Ee)*Qe,i[13]=(r*xe-n*ze+a*Ee)*Qe,i[14]=(N*oe-k*ce-F*ie)*Qe,i[15]=(v*ce-w*oe+T*ie)*Qe,i):null},s.isMapAuthenticated=function(i){return uo.has(i)},s.isMapboxURL=Tt,s.isSafariWithAntialiasingBug=function(i){const e=i.navigator?i.navigator.userAgent:null;return!!te(i)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=sr,s.len=d_,s.length=Xf,s.length$1=function(i){return Math.hypot(i[0],i[1],i[2],i[3])},s.loadVectorTile=D1,s.makeRequest=Z,s.mercatorXfromLng=yc,s.mercatorYfromLat=Ja,s.mercatorZfromAltitude=$a,s.mul=u_,s.mul$1=h_,s.multiply=function(i,e,r){var n=e[0],a=e[1],c=e[2],h=e[3],p=e[4],A=e[5],y=e[6],v=e[7],w=e[8],T=r[0],S=r[1],k=r[2],N=r[3],F=r[4],Q=r[5],ie=r[6],oe=r[7],ae=r[8];return i[0]=T*n+S*h+k*y,i[1]=T*a+S*p+k*v,i[2]=T*c+S*A+k*w,i[3]=N*n+F*h+Q*y,i[4]=N*a+F*p+Q*v,i[5]=N*c+F*A+Q*w,i[6]=ie*n+oe*h+ae*y,i[7]=ie*a+oe*p+ae*v,i[8]=ie*c+oe*A+ae*w,i},s.multiply$1=Ud,s.multiply$2=em,s.nextPowerOfTwo=en,s.normalize=bc,s.normalize$1=function(i,e){var r=e[0],n=e[1],a=e[2],c=e[3],h=r*r+n*n+a*a+c*c;return h>0&&(h=1/Math.sqrt(h)),i[0]=r*h,i[1]=n*h,i[2]=a*h,i[3]=c*h,i},s.number=_t,s.ortho=function(i,e,r,n,a,c,h){var p=1/(e-r),A=1/(n-a),y=1/(c-h);return i[0]=-2*p,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*A,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*y,i[11]=0,i[12]=(e+r)*p,i[13]=(a+n)*A,i[14]=(h+c)*y,i[15]=1,i},s.pbf=Lc,s.perspective=function(i,e,r,n,a){var c,h=1/Math.tan(e/2);return i[0]=h/r,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=h,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,a!=null&&a!==1/0?(i[10]=(a+n)*(c=1/(n-a)),i[14]=2*a*n*c):(i[10]=-1,i[14]=-2*n),i},s.pick=function(i,e){const r={};for(let n=0;n<e.length;n++){const a=e[n];a in i&&(r[a]=i[a])}return r},s.plugin=Vr,s.pointGeometry=$,s.polygonIntersectsBox=Yf,s.polygonIntersectsPolygon=Uf,s.polygonizeBounds=function(i,e,r=0,n=!0){const a=new $(r,r),c=i.sub(a),h=e.add(a),p=[c,new $(h.x,c.y),h,new $(c.x,h.y)];return n&&p.push(c),p},s.posAttributes=Oc,s.postMapLoadEvent=Yi,s.postTurnstileEvent=xn,s.potpack=sp,s.prevPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},s.radToDeg=dt,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(i){return i({pluginStatus:xr,pluginURL:Sr}),mc.on("pluginStateChange",i),i},s.removeAuthState=function(i){uo.delete(i)},s.renderColorRamp=Xd,s.rotateX=Zd,s.rotateX$1=om,s.rotateY=jd,s.rotateZ=function(i,e,r){var n=Math.sin(r),a=Math.cos(r),c=e[0],h=e[1],p=e[2],A=e[3],y=e[4],v=e[5],w=e[6],T=e[7];return e!==i&&(i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=c*a+y*n,i[1]=h*a+v*n,i[2]=p*a+w*n,i[3]=A*a+T*n,i[4]=y*a-c*n,i[5]=v*a-h*n,i[6]=w*a-p*n,i[7]=T*a-A*n,i},s.rotateZ$1=function(i,e,r){r*=.5;var n=e[0],a=e[1],c=e[2],h=e[3],p=Math.sin(r),A=Math.cos(r);return i[0]=n*A+a*p,i[1]=a*A-n*p,i[2]=c*A+h*p,i[3]=h*A-c*p,i},s.scale=rs,s.scale$1=function(i,e,r){return i[0]=e[0]*r,i[1]=e[1]*r,i[2]=e[2]*r,i[3]=e[3]*r,i},s.scale$2=vc,s.scaleAndAdd=qd,s.setCacheLimits=function(i,e){ho=i,po=e},s.setColumn=function(i,e,r){i[4*e+0]=r[0],i[4*e+1]=r[1],i[4*e+2]=r[2],i[4*e+3]=r[3]},s.setRTLTextPlugin=function(i,e,r=!1){if(xr===dc||xr===Ws||xr===pc)throw new Error("setRTLTextPlugin cannot be called multiple times.");Sr=Ce.resolveURL(i),xr=dc,fc=e,wo(),r||Xo()},s.smoothstep=ur,s.spec=ye,s.storeAuthState=function(i,e){e?uo.add(i):uo.delete(i)},s.sub=il,s.subtract=$f,s.symbolSize=s0,s.tileAABB=function(i,e,r,n,a,c,h,p,A){if(A.name==="globe")return J0(i,e,new Sh(r,n,a));const y=na({z:r,x:n,y:a},A);return new an([(c+y.x/y.scale)*e,e*(y.y/y.scale),h],[(c+y.x2/y.scale)*e,e*(y.y2/y.scale),p])},s.tileTransform=na,s.transformMat3=function(i,e,r){var n=e[0],a=e[1],c=e[2];return i[0]=n*r[0]+a*r[3]+c*r[6],i[1]=n*r[1]+a*r[4]+c*r[7],i[2]=n*r[2]+a*r[5]+c*r[8],i},s.transformMat4=ia,s.transformMat4$1=rl,s.transformQuat=im,s.translate=ta,s.transpose=function(i,e){if(i===e){var r=e[1],n=e[2],a=e[5];i[1]=e[3],i[2]=e[6],i[3]=r,i[5]=e[7],i[6]=n,i[7]=a}else i[0]=e[0],i[1]=e[3],i[2]=e[6],i[3]=e[1],i[4]=e[4],i[5]=e[7],i[6]=e[2],i[7]=e[5],i[8]=e[8];return i},s.triggerPluginCompletionEvent=Ks,s.uniqueId=Tr,s.validateCustomStyleLayer=function(i){const e=[],r=i.id;return r===void 0&&e.push({message:`layers.${r}: missing required property "id"`}),i.render===void 0&&e.push({message:`layers.${r}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},s.validateFilter=i=>Mn(Zn(i)),s.validateFog=i=>Mn(Fu(i)),s.validateLayer=i=>Mn(Pu(i)),s.validateLight=i=>Mn(Ou(i)),s.validateSource=i=>Mn(Nu(i)),s.validateStyle=js,s.validateTerrain=i=>Mn(Gu(i)),s.values=gr,s.vectorTile=ra,s.version=W,s.warnOnce=Ot,s.window=Te,s.wrap=Xi}),L(["./shared"],function(s){function W(Y){if(typeof Y=="number"||typeof Y=="boolean"||typeof Y=="string"||Y==null)return JSON.stringify(Y);if(Array.isArray(Y)){let P="[";for(const Z of Y)P+=`${W(Z)},`;return`${P}]`}let z="{";for(const P of Object.keys(Y).sort())z+=`${P}:${W(Y[P])},`;return`${z}}`}function le(Y){let z="";for(const P of s.refProperties)z+=`/${W(Y[P])}`;return z}class he{constructor(z){this.keyCache={},z&&this.replace(z)}replace(z){this._layerConfigs={},this._layers={},this.update(z,[])}update(z,P){for(const J of z)this._layerConfigs[J.id]=J,(this._layers[J.id]=s.createStyleLayer(J)).compileFilter(),this.keyCache[J.id]&&delete this.keyCache[J.id];for(const J of P)delete this.keyCache[J],delete this._layerConfigs[J],delete this._layers[J];this.familiesBySource={};const Z=function(J,ne){const me={};for(let se=0;se<J.length;se++){const _e=ne&&ne[J[se].id]||le(J[se]);ne&&(ne[J[se].id]=_e);let Be=me[_e];Be||(Be=me[_e]=[]),Be.push(J[se])}const fe=[];for(const se in me)fe.push(me[se]);return fe}(s.values(this._layerConfigs),this.keyCache);for(const J of Z){const ne=J.map(Xe=>this._layers[Xe.id]),me=ne[0];if(me.visibility==="none")continue;const fe=me.source||"";let se=this.familiesBySource[fe];se||(se=this.familiesBySource[fe]={});const _e=me.sourceLayer||"_geojsonTileLayer";let Be=se[_e];Be||(Be=se[_e]=[]),Be.push(ne)}}}class ${loadTile(z,P){const{uid:Z,encoding:J,rawImageData:ne,padding:me,buildQuadTree:fe}=z,se=s.window.ImageBitmap&&ne instanceof s.window.ImageBitmap?this.getImageData(ne,me):ne;P(null,new s.DEMData(Z,se,J,me<1,fe))}getImageData(z,P){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(z.width,z.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=z.width,this.offscreenCanvas.height=z.height,this.offscreenCanvasContext.drawImage(z,0,0,z.width,z.height);const Z=this.offscreenCanvasContext.getImageData(-P,-P,z.width+2*P,z.height+2*P);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Z}}var pe=function Y(z,P){var Z,J=z&&z.type;if(J==="FeatureCollection")for(Z=0;Z<z.features.length;Z++)Y(z.features[Z],P);else if(J==="GeometryCollection")for(Z=0;Z<z.geometries.length;Z++)Y(z.geometries[Z],P);else if(J==="Feature")Y(z.geometry,P);else if(J==="Polygon")Te(z.coordinates,P);else if(J==="MultiPolygon")for(Z=0;Z<z.coordinates.length;Z++)Te(z.coordinates[Z],P);return z};function Te(Y,z){if(Y.length!==0){ut(Y[0],z);for(var P=1;P<Y.length;P++)ut(Y[P],!z)}}function ut(Y,z){for(var P=0,Z=0,J=0,ne=Y.length,me=ne-1;J<ne;me=J++){var fe=(Y[J][0]-Y[me][0])*(Y[me][1]+Y[J][1]),se=P+fe;Z+=Math.abs(P)>=Math.abs(fe)?P-se+fe:fe-se+P,P=se}P+Z>=0!=!!z&&Y.reverse()}const zt=s.vectorTile.VectorTileFeature.prototype.toGeoJSON;class He{constructor(z){this._feature=z,this.extent=s.EXTENT,this.type=z.type,this.properties=z.tags,"id"in z&&!isNaN(z.id)&&(this.id=parseInt(z.id,10))}loadGeometry(){if(this._feature.type===1){const z=[];for(const P of this._feature.geometry)z.push([new s.pointGeometry(P[0],P[1])]);return z}{const z=[];for(const P of this._feature.geometry){const Z=[];for(const J of P)Z.push(new s.pointGeometry(J[0],J[1]));z.push(Z)}return z}}toGeoJSON(z,P,Z){return zt.call(this,z,P,Z)}}class dt{constructor(z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=z.length,this._features=z}feature(z){return new He(this._features[z])}}var Pt=s.vectorTile.VectorTileFeature,Kt=ei;function ei(Y,z){this.options=z||{},this.features=Y,this.length=Y.length}function wi(Y,z){this.id=typeof Y.id=="number"?Y.id:void 0,this.type=Y.type,this.rawGeometry=Y.type===1?[Y.geometry]:Y.geometry,this.properties=Y.tags,this.extent=z||4096}ei.prototype.feature=function(Y){return new wi(this.features[Y],this.options.extent)},wi.prototype.loadGeometry=function(){var Y=this.rawGeometry;this.geometry=[];for(var z=0;z<Y.length;z++){for(var P=Y[z],Z=[],J=0;J<P.length;J++)Z.push(new s.pointGeometry(P[J][0],P[J][1]));this.geometry.push(Z)}return this.geometry},wi.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Y=this.geometry,z=1/0,P=-1/0,Z=1/0,J=-1/0,ne=0;ne<Y.length;ne++)for(var me=Y[ne],fe=0;fe<me.length;fe++){var se=me[fe];z=Math.min(z,se.x),P=Math.max(P,se.x),Z=Math.min(Z,se.y),J=Math.max(J,se.y)}return[z,Z,P,J]},wi.prototype.toGeoJSON=Pt.prototype.toGeoJSON;var Dt=Xi,ur=Kt;function Xi(Y){var z=new s.pbf;return function(P,Z){for(var J in P.layers)Z.writeMessage(3,Ji,P.layers[J])}(Y,z),z.finish()}function Ji(Y,z){var P;z.writeVarintField(15,Y.version||1),z.writeStringField(1,Y.name||""),z.writeVarintField(5,Y.extent||4096);var Z={keys:[],values:[],keycache:{},valuecache:{}};for(P=0;P<Y.length;P++)Z.feature=Y.feature(P),z.writeMessage(2,gr,Z);var J=Z.keys;for(P=0;P<J.length;P++)z.writeStringField(3,J[P]);var ne=Z.values;for(P=0;P<ne.length;P++)z.writeMessage(4,en,ne[P])}function gr(Y,z){var P=Y.feature;P.id!==void 0&&z.writeVarintField(1,P.id),z.writeMessage(2,mi,Y),z.writeVarintField(3,P.type),z.writeMessage(4,$r,P)}function mi(Y,z){var P=Y.feature,Z=Y.keys,J=Y.values,ne=Y.keycache,me=Y.valuecache;for(var fe in P.properties){var se=P.properties[fe],_e=ne[fe];if(se!==null){_e===void 0&&(Z.push(fe),ne[fe]=_e=Z.length-1),z.writeVarint(_e);var Be=typeof se;Be!=="string"&&Be!=="boolean"&&Be!=="number"&&(se=JSON.stringify(se));var Xe=Be+":"+se,Re=me[Xe];Re===void 0&&(J.push(se),me[Xe]=Re=J.length-1),z.writeVarint(Re)}}}function hr(Y,z){return(z<<3)+(7&Y)}function Tr(Y){return Y<<1^Y>>31}function $r(Y,z){for(var P=Y.loadGeometry(),Z=Y.type,J=0,ne=0,me=P.length,fe=0;fe<me;fe++){var se=P[fe],_e=1;Z===1&&(_e=se.length),z.writeVarint(hr(1,_e));for(var Be=Z===3?se.length-1:se.length,Xe=0;Xe<Be;Xe++){Xe===1&&Z!==1&&z.writeVarint(hr(2,Be-1));var Re=se[Xe].x-J,xt=se[Xe].y-ne;z.writeVarint(Tr(Re)),z.writeVarint(Tr(xt)),J+=Re,ne+=xt}Z===3&&z.writeVarint(hr(7,1))}}function en(Y,z){var P=typeof Y;P==="string"?z.writeStringField(1,Y):P==="boolean"?z.writeBooleanField(7,Y):P==="number"&&(Y%1!=0?z.writeDoubleField(3,Y):Y<0?z.writeSVarintField(6,Y):z.writeVarintField(5,Y))}function vi(Y,z,P,Z,J,ne){if(J-Z<=P)return;const me=Z+J>>1;ci(Y,z,me,Z,J,ne%2),vi(Y,z,P,Z,me-1,ne+1),vi(Y,z,P,me+1,J,ne+1)}function ci(Y,z,P,Z,J,ne){for(;J>Z;){if(J-Z>600){const _e=J-Z+1,Be=P-Z+1,Xe=Math.log(_e),Re=.5*Math.exp(2*Xe/3),xt=.5*Math.sqrt(Xe*Re*(_e-Re)/_e)*(Be-_e/2<0?-1:1);ci(Y,z,P,Math.max(Z,Math.floor(P-Be*Re/_e+xt)),Math.min(J,Math.floor(P+(_e-Be)*Re/_e+xt)),ne)}const me=z[2*P+ne];let fe=Z,se=J;for(Ht(Y,z,Z,P),z[2*J+ne]>me&&Ht(Y,z,Z,J);fe<se;){for(Ht(Y,z,fe,se),fe++,se--;z[2*fe+ne]<me;)fe++;for(;z[2*se+ne]>me;)se--}z[2*Z+ne]===me?Ht(Y,z,Z,se):(se++,Ht(Y,z,se,J)),se<=P&&(Z=se+1),P<=se&&(J=se-1)}}function Ht(Y,z,P,Z){Li(Y,P,Z),Li(z,2*P,2*Z),Li(z,2*P+1,2*Z+1)}function Li(Y,z,P){const Z=Y[z];Y[z]=Y[P],Y[P]=Z}function Or(Y,z,P,Z){const J=Y-P,ne=z-Z;return J*J+ne*ne}Dt.fromVectorTileJs=Xi,Dt.fromGeojsonVt=function(Y,z){z=z||{};var P={};for(var Z in Y)P[Z]=new Kt(Y[Z].features,z),P[Z].name=Z,P[Z].version=z.version,P[Z].extent=z.extent;return Xi({layers:P})},Dt.GeoJSONWrapper=ur;const Pi=Y=>Y[0],dr=Y=>Y[1];class Ot{constructor(z,P=Pi,Z=dr,J=64,ne=Float64Array){this.nodeSize=J,this.points=z;const me=z.length<65536?Uint16Array:Uint32Array,fe=this.ids=new me(z.length),se=this.coords=new ne(2*z.length);for(let _e=0;_e<z.length;_e++)fe[_e]=_e,se[2*_e]=P(z[_e]),se[2*_e+1]=Z(z[_e]);vi(fe,se,J,0,fe.length-1,0)}range(z,P,Z,J){return function(ne,me,fe,se,_e,Be,Xe){const Re=[0,ne.length-1,0],xt=[];let mt,At;for(;Re.length;){const Ct=Re.pop(),ye=Re.pop(),ti=Re.pop();if(ye-ti<=Xe){for(let ii=ti;ii<=ye;ii++)mt=me[2*ii],At=me[2*ii+1],mt>=fe&&mt<=_e&&At>=se&&At<=Be&&xt.push(ne[ii]);continue}const at=Math.floor((ti+ye)/2);mt=me[2*at],At=me[2*at+1],mt>=fe&&mt<=_e&&At>=se&&At<=Be&&xt.push(ne[at]);const Jt=(Ct+1)%2;(Ct===0?fe<=mt:se<=At)&&(Re.push(ti),Re.push(at-1),Re.push(Jt)),(Ct===0?_e>=mt:Be>=At)&&(Re.push(at+1),Re.push(ye),Re.push(Jt))}return xt}(this.ids,this.coords,z,P,Z,J,this.nodeSize)}within(z,P,Z){return function(J,ne,me,fe,se,_e){const Be=[0,J.length-1,0],Xe=[],Re=se*se;for(;Be.length;){const xt=Be.pop(),mt=Be.pop(),At=Be.pop();if(mt-At<=_e){for(let Jt=At;Jt<=mt;Jt++)Or(ne[2*Jt],ne[2*Jt+1],me,fe)<=Re&&Xe.push(J[Jt]);continue}const Ct=Math.floor((At+mt)/2),ye=ne[2*Ct],ti=ne[2*Ct+1];Or(ye,ti,me,fe)<=Re&&Xe.push(J[Ct]);const at=(xt+1)%2;(xt===0?me-se<=ye:fe-se<=ti)&&(Be.push(At),Be.push(Ct-1),Be.push(at)),(xt===0?me+se>=ye:fe+se>=ti)&&(Be.push(Ct+1),Be.push(mt),Be.push(at))}return Xe}(this.ids,this.coords,z,P,Z,this.nodeSize)}}const Fi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Y=>Y},Pe=Math.fround||(ht=new Float32Array(1),Y=>(ht[0]=+Y,ht[0]));var ht;class $e{constructor(z){this.options=Ce(Object.create(Fi),z),this.trees=new Array(this.options.maxZoom+1)}load(z){const{log:P,minZoom:Z,maxZoom:J,nodeSize:ne}=this.options;P&&console.time("total time");const me=`prepare ${z.length} points`;P&&console.time(me),this.points=z;let fe=[];for(let se=0;se<z.length;se++)z[se].geometry&&fe.push(ui(z[se],se));this.trees[J+1]=new Ot(fe,Oe,Se,ne,Float32Array),P&&console.timeEnd(me);for(let se=J;se>=Z;se--){const _e=+Date.now();fe=this._cluster(fe,se),this.trees[se]=new Ot(fe,Oe,Se,ne,Float32Array),P&&console.log("z%d: %d clusters in %dms",se,fe.length,+Date.now()-_e)}return P&&console.timeEnd("total time"),this}getClusters(z,P){let Z=((z[0]+180)%360+360)%360-180;const J=Math.max(-90,Math.min(90,z[1]));let ne=z[2]===180?180:((z[2]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,z[3]));if(z[2]-z[0]>=360)Z=-180,ne=180;else if(Z>ne){const Be=this.getClusters([Z,J,180,me],P),Xe=this.getClusters([-180,J,ne,me],P);return Be.concat(Xe)}const fe=this.trees[this._limitZoom(P)],se=fe.range(it(Z),te(me),it(ne),te(J)),_e=[];for(const Be of se){const Xe=fe.points[Be];_e.push(Xe.numPoints?si(Xe):this.points[Xe.index])}return _e}getChildren(z){const P=this._getOriginId(z),Z=this._getOriginZoom(z),J="No cluster with the specified id.",ne=this.trees[Z];if(!ne)throw new Error(J);const me=ne.points[P];if(!me)throw new Error(J);const fe=this.options.radius/(this.options.extent*Math.pow(2,Z-1)),se=ne.within(me.x,me.y,fe),_e=[];for(const Be of se){const Xe=ne.points[Be];Xe.parentId===z&&_e.push(Xe.numPoints?si(Xe):this.points[Xe.index])}if(_e.length===0)throw new Error(J);return _e}getLeaves(z,P,Z){const J=[];return this._appendLeaves(J,z,P=P||10,Z=Z||0,0),J}getTile(z,P,Z){const J=this.trees[this._limitZoom(z)],ne=Math.pow(2,z),{extent:me,radius:fe}=this.options,se=fe/me,_e=(Z-se)/ne,Be=(Z+1+se)/ne,Xe={features:[]};return this._addTileFeatures(J.range((P-se)/ne,_e,(P+1+se)/ne,Be),J.points,P,Z,ne,Xe),P===0&&this._addTileFeatures(J.range(1-se/ne,_e,1,Be),J.points,ne,Z,ne,Xe),P===ne-1&&this._addTileFeatures(J.range(0,_e,se/ne,Be),J.points,-1,Z,ne,Xe),Xe.features.length?Xe:null}getClusterExpansionZoom(z){let P=this._getOriginZoom(z)-1;for(;P<=this.options.maxZoom;){const Z=this.getChildren(z);if(P++,Z.length!==1)break;z=Z[0].properties.cluster_id}return P}_appendLeaves(z,P,Z,J,ne){const me=this.getChildren(P);for(const fe of me){const se=fe.properties;if(se&&se.cluster?ne+se.point_count<=J?ne+=se.point_count:ne=this._appendLeaves(z,se.cluster_id,Z,J,ne):ne<J?ne++:z.push(fe),z.length===Z)break}return ne}_addTileFeatures(z,P,Z,J,ne,me){for(const fe of z){const se=P[fe],_e=se.numPoints;let Be,Xe,Re;if(_e)Be=Bt(se),Xe=se.x,Re=se.y;else{const At=this.points[se.index];Be=At.properties,Xe=it(At.geometry.coordinates[0]),Re=te(At.geometry.coordinates[1])}const xt={type:1,geometry:[[Math.round(this.options.extent*(Xe*ne-Z)),Math.round(this.options.extent*(Re*ne-J))]],tags:Be};let mt;_e?mt=se.id:this.options.generateId?mt=se.index:this.points[se.index].id&&(mt=this.points[se.index].id),mt!==void 0&&(xt.id=mt),me.features.push(xt)}}_limitZoom(z){return Math.max(this.options.minZoom,Math.min(+z,this.options.maxZoom+1))}_cluster(z,P){const Z=[],{radius:J,extent:ne,reduce:me,minPoints:fe}=this.options,se=J/(ne*Math.pow(2,P));for(let _e=0;_e<z.length;_e++){const Be=z[_e];if(Be.zoom<=P)continue;Be.zoom=P;const Xe=this.trees[P+1],Re=Xe.within(Be.x,Be.y,se),xt=Be.numPoints||1;let mt=xt;for(const At of Re){const Ct=Xe.points[At];Ct.zoom>P&&(mt+=Ct.numPoints||1)}if(mt>xt&&mt>=fe){let At=Be.x*xt,Ct=Be.y*xt,ye=me&&xt>1?this._map(Be,!0):null;const ti=(_e<<5)+(P+1)+this.points.length;for(const at of Re){const Jt=Xe.points[at];if(Jt.zoom<=P)continue;Jt.zoom=P;const ii=Jt.numPoints||1;At+=Jt.x*ii,Ct+=Jt.y*ii,Jt.parentId=ti,me&&(ye||(ye=this._map(Be,!0)),me(ye,this._map(Jt)))}Be.parentId=ti,Z.push(yt(At/mt,Ct/mt,ti,mt,ye))}else if(Z.push(Be),mt>1)for(const At of Re){const Ct=Xe.points[At];Ct.zoom<=P||(Ct.zoom=P,Z.push(Ct))}}return Z}_getOriginId(z){return z-this.points.length>>5}_getOriginZoom(z){return(z-this.points.length)%32}_map(z,P){if(z.numPoints)return P?Ce({},z.properties):z.properties;const Z=this.points[z.index].properties,J=this.options.map(Z);return P&&J===Z?Ce({},J):J}}function yt(Y,z,P,Z,J){return{x:Pe(Y),y:Pe(z),zoom:1/0,id:P,parentId:-1,numPoints:Z,properties:J}}function ui(Y,z){const[P,Z]=Y.geometry.coordinates;return{x:Pe(it(P)),y:Pe(te(Z)),zoom:1/0,index:z,parentId:-1}}function si(Y){return{type:"Feature",id:Y.id,properties:Bt(Y),geometry:{type:"Point",coordinates:[(z=Y.x,360*(z-.5)),de(Y.y)]}};var z}function Bt(Y){const z=Y.numPoints,P=z>=1e4?`${Math.round(z/1e3)}k`:z>=1e3?Math.round(z/100)/10+"k":z;return Ce(Ce({},Y.properties),{cluster:!0,cluster_id:Y.id,point_count:z,point_count_abbreviated:P})}function it(Y){return Y/360+.5}function te(Y){const z=Math.sin(Y*Math.PI/180),P=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return P<0?0:P>1?1:P}function de(Y){const z=(180-360*Y)*Math.PI/180;return 360*Math.atan(Math.exp(z))/Math.PI-90}function Ce(Y,z){for(const P in z)Y[P]=z[P];return Y}function Oe(Y){return Y.x}function Se(Y){return Y.y}function We(Y,z,P,Z){for(var J,ne=Z,me=P-z>>1,fe=P-z,se=Y[z],_e=Y[z+1],Be=Y[P],Xe=Y[P+1],Re=z+3;Re<P;Re+=3){var xt=ot(Y[Re],Y[Re+1],se,_e,Be,Xe);if(xt>ne)J=Re,ne=xt;else if(xt===ne){var mt=Math.abs(Re-me);mt<fe&&(J=Re,fe=mt)}}ne>Z&&(J-z>3&&We(Y,z,J,Z),Y[J+2]=ne,P-J>3&&We(Y,J,P,Z))}function ot(Y,z,P,Z,J,ne){var me=J-P,fe=ne-Z;if(me!==0||fe!==0){var se=((Y-P)*me+(z-Z)*fe)/(me*me+fe*fe);se>1?(P=J,Z=ne):se>0&&(P+=me*se,Z+=fe*se)}return(me=Y-P)*me+(fe=z-Z)*fe}function Ye(Y,z,P,Z){var J={id:Y===void 0?null:Y,type:z,geometry:P,tags:Z,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ne){var me=ne.geometry,fe=ne.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")Ke(ne,me);else if(fe==="Polygon"||fe==="MultiLineString")for(var se=0;se<me.length;se++)Ke(ne,me[se]);else if(fe==="MultiPolygon")for(se=0;se<me.length;se++)for(var _e=0;_e<me[se].length;_e++)Ke(ne,me[se][_e])}(J),J}function Ke(Y,z){for(var P=0;P<z.length;P+=3)Y.minX=Math.min(Y.minX,z[P]),Y.minY=Math.min(Y.minY,z[P+1]),Y.maxX=Math.max(Y.maxX,z[P]),Y.maxY=Math.max(Y.maxY,z[P+1])}function Ue(Y,z,P,Z){if(z.geometry){var J=z.geometry.coordinates,ne=z.geometry.type,me=Math.pow(P.tolerance/((1<<P.maxZoom)*P.extent),2),fe=[],se=z.id;if(P.promoteId?se=z.properties[P.promoteId]:P.generateId&&(se=Z||0),ne==="Point")wt(J,fe);else if(ne==="MultiPoint")for(var _e=0;_e<J.length;_e++)wt(J[_e],fe);else if(ne==="LineString")ft(J,fe,me,!1);else if(ne==="MultiLineString"){if(P.lineMetrics){for(_e=0;_e<J.length;_e++)ft(J[_e],fe=[],me,!1),Y.push(Ye(se,"LineString",fe,z.properties));return}bt(J,fe,me,!1)}else if(ne==="Polygon")bt(J,fe,me,!0);else{if(ne!=="MultiPolygon"){if(ne==="GeometryCollection"){for(_e=0;_e<z.geometry.geometries.length;_e++)Ue(Y,{id:se,geometry:z.geometry.geometries[_e],properties:z.properties},P,Z);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<J.length;_e++){var Be=[];bt(J[_e],Be,me,!0),fe.push(Be)}}Y.push(Ye(se,ne,fe,z.properties))}}function wt(Y,z){z.push(Tt(Y[0])),z.push(Ft(Y[1])),z.push(0)}function ft(Y,z,P,Z){for(var J,ne,me=0,fe=0;fe<Y.length;fe++){var se=Tt(Y[fe][0]),_e=Ft(Y[fe][1]);z.push(se),z.push(_e),z.push(0),fe>0&&(me+=Z?(J*_e-se*ne)/2:Math.sqrt(Math.pow(se-J,2)+Math.pow(_e-ne,2))),J=se,ne=_e}var Be=z.length-3;z[2]=1,We(z,0,Be,P),z[Be+2]=1,z.size=Math.abs(me),z.start=0,z.end=z.size}function bt(Y,z,P,Z){for(var J=0;J<Y.length;J++){var ne=[];ft(Y[J],ne,P,Z),z.push(ne)}}function Tt(Y){return Y/360+.5}function Ft(Y){var z=Math.sin(Y*Math.PI/180),P=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return P<0?0:P>1?1:P}function Xt(Y,z,P,Z,J,ne,me,fe){if(Z/=z,ne>=(P/=z)&&me<Z)return Y;if(me<P||ne>=Z)return null;for(var se=[],_e=0;_e<Y.length;_e++){var Be=Y[_e],Xe=Be.geometry,Re=Be.type,xt=J===0?Be.minX:Be.minY,mt=J===0?Be.maxX:Be.maxY;if(xt>=P&&mt<Z)se.push(Be);else if(!(mt<P||xt>=Z)){var At=[];if(Re==="Point"||Re==="MultiPoint")Qt(Xe,At,P,Z,J);else if(Re==="LineString")ai(Xe,At,P,Z,J,!1,fe.lineMetrics);else if(Re==="MultiLineString")_r(Xe,At,P,Z,J,!1);else if(Re==="Polygon")_r(Xe,At,P,Z,J,!0);else if(Re==="MultiPolygon")for(var Ct=0;Ct<Xe.length;Ct++){var ye=[];_r(Xe[Ct],ye,P,Z,J,!0),ye.length&&At.push(ye)}if(At.length){if(fe.lineMetrics&&Re==="LineString"){for(Ct=0;Ct<At.length;Ct++)se.push(Ye(Be.id,Re,At[Ct],Be.tags));continue}Re!=="LineString"&&Re!=="MultiLineString"||(At.length===1?(Re="LineString",At=At[0]):Re="MultiLineString"),Re!=="Point"&&Re!=="MultiPoint"||(Re=At.length===3?"Point":"MultiPoint"),se.push(Ye(Be.id,Re,At,Be.tags))}}}return se.length?se:null}function Qt(Y,z,P,Z,J){for(var ne=0;ne<Y.length;ne+=3){var me=Y[ne+J];me>=P&&me<=Z&&(z.push(Y[ne]),z.push(Y[ne+1]),z.push(Y[ne+2]))}}function ai(Y,z,P,Z,J,ne,me){for(var fe,se,_e=$i(Y),Be=J===0?xn:lo,Xe=Y.start,Re=0;Re<Y.length-3;Re+=3){var xt=Y[Re],mt=Y[Re+1],At=Y[Re+2],Ct=Y[Re+3],ye=Y[Re+4],ti=J===0?xt:mt,at=J===0?Ct:ye,Jt=!1;me&&(fe=Math.sqrt(Math.pow(xt-Ct,2)+Math.pow(mt-ye,2))),ti<P?at>P&&(se=Be(_e,xt,mt,Ct,ye,P),me&&(_e.start=Xe+fe*se)):ti>Z?at<Z&&(se=Be(_e,xt,mt,Ct,ye,Z),me&&(_e.start=Xe+fe*se)):yn(_e,xt,mt,At),at<P&&ti>=P&&(se=Be(_e,xt,mt,Ct,ye,P),Jt=!0),at>Z&&ti<=Z&&(se=Be(_e,xt,mt,Ct,ye,Z),Jt=!0),!ne&&Jt&&(me&&(_e.end=Xe+fe*se),z.push(_e),_e=$i(Y)),me&&(Xe+=fe)}var ii=Y.length-3;xt=Y[ii],mt=Y[ii+1],At=Y[ii+2],(ti=J===0?xt:mt)>=P&&ti<=Z&&yn(_e,xt,mt,At),ii=_e.length-3,ne&&ii>=3&&(_e[ii]!==_e[0]||_e[ii+1]!==_e[1])&&yn(_e,_e[0],_e[1],_e[2]),_e.length&&z.push(_e)}function $i(Y){var z=[];return z.size=Y.size,z.start=Y.start,z.end=Y.end,z}function _r(Y,z,P,Z,J,ne){for(var me=0;me<Y.length;me++)ai(Y[me],z,P,Z,J,ne,!1)}function yn(Y,z,P,Z){Y.push(z),Y.push(P),Y.push(Z)}function xn(Y,z,P,Z,J,ne){var me=(ne-z)/(Z-z);return Y.push(ne),Y.push(P+(J-P)*me),Y.push(1),me}function lo(Y,z,P,Z,J,ne){var me=(ne-P)/(J-P);return Y.push(z+(Z-z)*me),Y.push(ne),Y.push(1),me}function Yi(Y,z){for(var P=[],Z=0;Z<Y.length;Z++){var J,ne=Y[Z],me=ne.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")J=er(ne.geometry,z);else if(me==="MultiLineString"||me==="Polygon"){J=[];for(var fe=0;fe<ne.geometry.length;fe++)J.push(er(ne.geometry[fe],z))}else if(me==="MultiPolygon")for(J=[],fe=0;fe<ne.geometry.length;fe++){for(var se=[],_e=0;_e<ne.geometry[fe].length;_e++)se.push(er(ne.geometry[fe][_e],z));J.push(se)}P.push(Ye(ne.id,me,J,ne.tags))}return P}function er(Y,z){var P=[];P.size=Y.size,Y.start!==void 0&&(P.start=Y.start,P.end=Y.end);for(var Z=0;Z<Y.length;Z+=3)P.push(Y[Z]+z,Y[Z+1],Y[Z+2]);return P}function co(Y,z){if(Y.transformed)return Y;var P,Z,J,ne=1<<Y.z,me=Y.x,fe=Y.y;for(P=0;P<Y.features.length;P++){var se=Y.features[P],_e=se.geometry,Be=se.type;if(se.geometry=[],Be===1)for(Z=0;Z<_e.length;Z+=2)se.geometry.push(uo(_e[Z],_e[Z+1],z,ne,me,fe));else for(Z=0;Z<_e.length;Z++){var Xe=[];for(J=0;J<_e[Z].length;J+=2)Xe.push(uo(_e[Z][J],_e[Z][J+1],z,ne,me,fe));se.geometry.push(Xe)}}return Y.transformed=!0,Y}function uo(Y,z,P,Z,J,ne){return[Math.round(P*(Y*Z-J)),Math.round(P*(z*Z-ne))]}function ga(Y,z,P,Z,J){for(var ne=z===J.maxZoom?0:J.tolerance/((1<<z)*J.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:P,y:Z,z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},fe=0;fe<Y.length;fe++){me.numFeatures++,tn(me,Y[fe],ne,J);var se=Y[fe].minX,_e=Y[fe].minY,Be=Y[fe].maxX,Xe=Y[fe].maxY;se<me.minX&&(me.minX=se),_e<me.minY&&(me.minY=_e),Be>me.maxX&&(me.maxX=Be),Xe>me.maxY&&(me.maxY=Xe)}return me}function tn(Y,z,P,Z){var J=z.geometry,ne=z.type,me=[];if(ne==="Point"||ne==="MultiPoint")for(var fe=0;fe<J.length;fe+=3)me.push(J[fe]),me.push(J[fe+1]),Y.numPoints++,Y.numSimplified++;else if(ne==="LineString")Pn(me,J,Y,P,!1,!1);else if(ne==="MultiLineString"||ne==="Polygon")for(fe=0;fe<J.length;fe++)Pn(me,J[fe],Y,P,ne==="Polygon",fe===0);else if(ne==="MultiPolygon")for(var se=0;se<J.length;se++){var _e=J[se];for(fe=0;fe<_e.length;fe++)Pn(me,_e[fe],Y,P,!0,fe===0)}if(me.length){var Be=z.tags||null;if(ne==="LineString"&&Z.lineMetrics){for(var Xe in Be={},z.tags)Be[Xe]=z.tags[Xe];Be.mapbox_clip_start=J.start/J.size,Be.mapbox_clip_end=J.end/J.size}var Re={geometry:me,type:ne==="Polygon"||ne==="MultiPolygon"?3:ne==="LineString"||ne==="MultiLineString"?2:1,tags:Be};z.id!==null&&(Re.id=z.id),Y.features.push(Re)}}function Pn(Y,z,P,Z,J,ne){var me=Z*Z;if(Z>0&&z.size<(J?me:Z))P.numPoints+=z.length/3;else{for(var fe=[],se=0;se<z.length;se+=3)(Z===0||z[se+2]>me)&&(P.numSimplified++,fe.push(z[se]),fe.push(z[se+1])),P.numPoints++;J&&function(_e,Be){for(var Xe=0,Re=0,xt=_e.length,mt=xt-2;Re<xt;mt=Re,Re+=2)Xe+=(_e[Re]-_e[mt])*(_e[Re+1]+_e[mt+1]);if(Xe>0===Be)for(Re=0,xt=_e.length;Re<xt/2;Re+=2){var At=_e[Re],Ct=_e[Re+1];_e[Re]=_e[xt-2-Re],_e[Re+1]=_e[xt-1-Re],_e[xt-2-Re]=At,_e[xt-1-Re]=Ct}}(fe,ne),Y.push(fe)}}function ho(Y,z){var P=(z=this.options=function(J,ne){for(var me in ne)J[me]=ne[me];return J}(Object.create(this.options),z)).debug;if(P&&console.time("preprocess data"),z.maxZoom<0||z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(z.promoteId&&z.generateId)throw new Error("promoteId and generateId cannot be used together.");var Z=function(J,ne){var me=[];if(J.type==="FeatureCollection")for(var fe=0;fe<J.features.length;fe++)Ue(me,J.features[fe],ne,fe);else Ue(me,J.type==="Feature"?J:{geometry:J},ne);return me}(Y,z);this.tiles={},this.tileCoords=[],P&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",z.indexMaxZoom,z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Z=function(J,ne){var me=ne.buffer/ne.extent,fe=J,se=Xt(J,1,-1-me,me,0,-1,2,ne),_e=Xt(J,1,1-me,2+me,0,-1,2,ne);return(se||_e)&&(fe=Xt(J,1,-me,1+me,0,-1,2,ne)||[],se&&(fe=Yi(se,1).concat(fe)),_e&&(fe=fe.concat(Yi(_e,-1)))),fe}(Z,z)).length&&this.splitTile(Z,0,0,0),P&&(Z.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function po(Y,z,P){return 32*((1<<Y)*P+z)+Y}function No(Y,z){const P=Y.tileID.canonical;if(!this._geoJSONIndex)return z(null,null);const Z=this._geoJSONIndex.getTile(P.z,P.x,P.y);if(!Z)return z(null,null);const J=new dt(Z.features);let ne=Dt(J);ne.byteOffset===0&&ne.byteLength===ne.buffer.byteLength||(ne=new Uint8Array(ne)),z(null,{vectorTile:J,rawData:ne.buffer})}ho.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ho.prototype.splitTile=function(Y,z,P,Z,J,ne,me){for(var fe=[Y,z,P,Z],se=this.options,_e=se.debug;fe.length;){Z=fe.pop(),P=fe.pop(),z=fe.pop(),Y=fe.pop();var Be=1<<z,Xe=po(z,P,Z),Re=this.tiles[Xe];if(!Re&&(_e>1&&console.time("creation"),Re=this.tiles[Xe]=ga(Y,z,P,Z,se),this.tileCoords.push({z,x:P,y:Z}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",z,P,Z,Re.numFeatures,Re.numPoints,Re.numSimplified),console.timeEnd("creation"));var xt="z"+z;this.stats[xt]=(this.stats[xt]||0)+1,this.total++}if(Re.source=Y,J){if(z===se.maxZoom||z===J)continue;var mt=1<<J-z;if(P!==Math.floor(ne/mt)||Z!==Math.floor(me/mt))continue}else if(z===se.indexMaxZoom||Re.numPoints<=se.indexMaxPoints)continue;if(Re.source=null,Y.length!==0){_e>1&&console.time("clipping");var At,Ct,ye,ti,at,Jt,ii=.5*se.buffer/se.extent,fo=.5-ii,vn=.5+ii,qe=1+ii;At=Ct=ye=ti=null,at=Xt(Y,Be,P-ii,P+vn,0,Re.minX,Re.maxX,se),Jt=Xt(Y,Be,P+fo,P+qe,0,Re.minX,Re.maxX,se),Y=null,at&&(At=Xt(at,Be,Z-ii,Z+vn,1,Re.minY,Re.maxY,se),Ct=Xt(at,Be,Z+fo,Z+qe,1,Re.minY,Re.maxY,se),at=null),Jt&&(ye=Xt(Jt,Be,Z-ii,Z+vn,1,Re.minY,Re.maxY,se),ti=Xt(Jt,Be,Z+fo,Z+qe,1,Re.minY,Re.maxY,se),Jt=null),_e>1&&console.timeEnd("clipping"),fe.push(At||[],z+1,2*P,2*Z),fe.push(Ct||[],z+1,2*P,2*Z+1),fe.push(ye||[],z+1,2*P+1,2*Z),fe.push(ti||[],z+1,2*P+1,2*Z+1)}}},ho.prototype.getTile=function(Y,z,P){var Z=this.options,J=Z.extent,ne=Z.debug;if(Y<0||Y>24)return null;var me=1<<Y,fe=po(Y,z=(z%me+me)%me,P);if(this.tiles[fe])return co(this.tiles[fe],J);ne>1&&console.log("drilling down to z%d-%d-%d",Y,z,P);for(var se,_e=Y,Be=z,Xe=P;!se&&_e>0;)_e--,Be=Math.floor(Be/2),Xe=Math.floor(Xe/2),se=this.tiles[po(_e,Be,Xe)];return se&&se.source?(ne>1&&console.log("found parent tile z%d-%d-%d",_e,Be,Xe),ne>1&&console.time("drilling down"),this.splitTile(se.source,_e,Be,Xe,Y,z,P),ne>1&&console.timeEnd("drilling down"),this.tiles[fe]?co(this.tiles[fe],J):null):null};class Ts extends s.VectorTileWorkerSource{constructor(z,P,Z,J,ne){super(z,P,Z,J,No),ne&&(this.loadGeoJSON=ne)}loadData(z,P){const Z=z&&z.request,J=Z&&Z.collectResourceTiming;this.loadGeoJSON(z,(ne,me)=>{if(ne||!me)return P(ne);if(typeof me!="object")return P(new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`));{pe(me,!0);try{if(z.filter){const se=s.createExpression(z.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map(Be=>`${Be.key}: ${Be.message}`).join(", "));const _e=me.features.filter(Be=>se.value.evaluate({zoom:0},Be));me={type:"FeatureCollection",features:_e}}this._geoJSONIndex=z.cluster?new $e(function({superclusterOptions:se,clusterProperties:_e}){if(!_e||!se)return se;const Be={},Xe={},Re={accumulated:null,zoom:0},xt={properties:null},mt=Object.keys(_e);for(const At of mt){const[Ct,ye]=_e[At],ti=s.createExpression(ye),at=s.createExpression(typeof Ct=="string"?[Ct,["accumulated"],["get",At]]:Ct);Be[At]=ti.value,Xe[At]=at.value}return se.map=At=>{xt.properties=At;const Ct={};for(const ye of mt)Ct[ye]=Be[ye].evaluate(Re,xt);return Ct},se.reduce=(At,Ct)=>{xt.properties=Ct;for(const ye of mt)Re.accumulated=At[ye],At[ye]=Xe[ye].evaluate(Re,xt)},se}(z)).load(me.features):function(se,_e){return new ho(se,_e)}(me,z.geojsonVtOptions)}catch(se){return P(se)}this.loaded={};const fe={};if(J){const se=s.getPerformanceMeasurement(Z);se&&(fe.resourceTiming={},fe.resourceTiming[z.source]=JSON.parse(JSON.stringify(se)))}P(null,fe)}})}reloadTile(z,P){const Z=this.loaded;return Z&&Z[z.uid]?super.reloadTile(z,P):this.loadTile(z,P)}loadGeoJSON(z,P){if(z.request)s.getJSON(z.request,P);else{if(typeof z.data!="string")return P(new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`));try{return P(null,JSON.parse(z.data))}catch{return P(new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(z,P){try{P(null,this._geoJSONIndex.getClusterExpansionZoom(z.clusterId))}catch(Z){P(Z)}}getClusterChildren(z,P){try{P(null,this._geoJSONIndex.getChildren(z.clusterId))}catch(Z){P(Z)}}getClusterLeaves(z,P){try{P(null,this._geoJSONIndex.getLeaves(z.clusterId,z.limit,z.offset))}catch(Z){P(Z)}}}class Oo{constructor(z){this.self=z,this.actor=new s.Actor(z,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:Ts},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(P,Z)=>{if(this.workerSourceTypes[P])throw new Error(`Worker source with name "${P}" already registered.`);this.workerSourceTypes[P]=Z},this.self.registerRTLTextPlugin=P=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=P.applyArabicShaping,s.plugin.processBidirectionalText=P.processBidirectionalText,s.plugin.processStyledBidirectionalText=P.processStyledBidirectionalText}}clearCaches(z,P,Z){delete this.layerIndexes[z],delete this.availableImages[z],delete this.workerSources[z],delete this.demWorkerSources[z],Z()}checkIfReady(z,P,Z){Z()}setReferrer(z,P){this.referrer=P}spriteLoaded(z,P){this.isSpriteLoaded[z]=P;for(const Z in this.workerSources[z]){const J=this.workerSources[z][Z];for(const ne in J)J[ne]instanceof s.VectorTileWorkerSource&&(J[ne].isSpriteLoaded=P,J[ne].fire(new s.Event("isSpriteLoaded")))}}setImages(z,P,Z){this.availableImages[z]=P;for(const J in this.workerSources[z]){const ne=this.workerSources[z][J];for(const me in ne)ne[me].availableImages=P}Z()}enableTerrain(z,P,Z){this.terrain=P,Z()}setProjection(z,P){this.projections[z]=s.getProjection(P)}setLayers(z,P,Z){this.getLayerIndex(z).replace(P),Z()}updateLayers(z,P,Z){this.getLayerIndex(z).update(P.layers,P.removedIds),Z()}loadTile(z,P,Z){const J=this.enableTerrain?s.extend({enableTerrain:this.terrain},P):P;J.projection=this.projections[z]||this.defaultProjection,this.getWorkerSource(z,P.type,P.source).loadTile(J,Z)}loadDEMTile(z,P,Z){const J=this.enableTerrain?s.extend({buildQuadTree:this.terrain},P):P;this.getDEMWorkerSource(z,P.source).loadTile(J,Z)}reloadTile(z,P,Z){const J=this.enableTerrain?s.extend({enableTerrain:this.terrain},P):P;J.projection=this.projections[z]||this.defaultProjection,this.getWorkerSource(z,P.type,P.source).reloadTile(J,Z)}abortTile(z,P,Z){this.getWorkerSource(z,P.type,P.source).abortTile(P,Z)}removeTile(z,P,Z){this.getWorkerSource(z,P.type,P.source).removeTile(P,Z)}removeSource(z,P,Z){if(!this.workerSources[z]||!this.workerSources[z][P.type]||!this.workerSources[z][P.type][P.source])return;const J=this.workerSources[z][P.type][P.source];delete this.workerSources[z][P.type][P.source],J.removeSource!==void 0?J.removeSource(P,Z):Z()}loadWorkerSource(z,P,Z){try{this.self.importScripts(P.url),Z()}catch(J){Z(J.toString())}}syncRTLPluginState(z,P,Z){try{s.plugin.setState(P);const J=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&J!=null){this.self.importScripts(J);const ne=s.plugin.isParsed();Z(ne?void 0:new Error(`RTL Text Plugin failed to import scripts from ${J}`),ne)}}catch(J){Z(J.toString())}}getAvailableImages(z){let P=this.availableImages[z];return P||(P=[]),P}getLayerIndex(z){let P=this.layerIndexes[z];return P||(P=this.layerIndexes[z]=new he),P}getWorkerSource(z,P,Z){return this.workerSources[z]||(this.workerSources[z]={}),this.workerSources[z][P]||(this.workerSources[z][P]={}),this.workerSources[z][P][Z]||(this.workerSources[z][P][Z]=new this.workerSourceTypes[P]({send:(J,ne,me,fe,se,_e)=>{this.actor.send(J,ne,me,z,se,_e)},scheduler:this.actor.scheduler},this.getLayerIndex(z),this.getAvailableImages(z),this.isSpriteLoaded[z])),this.workerSources[z][P][Z]}getDEMWorkerSource(z,P){return this.demWorkerSources[z]||(this.demWorkerSources[z]={}),this.demWorkerSources[z][P]||(this.demWorkerSources[z][P]=new $),this.demWorkerSources[z][P]}enforceCacheSizeLimit(z,P){s.enforceCacheSizeLimit(P)}getWorkerPerformanceMetrics(z,P,Z){Z(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Oo(self)),Oo}),L(["./shared"],function(s){var W=le;function le(l){return!function(t){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var u,f,m=new Blob([""],{type:"text/javascript"}),_=URL.createObjectURL(m);try{f=new Worker(_),u=!0}catch{u=!1}return f&&f.terminate(),URL.revokeObjectURL(_),u}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var u=document.createElement("canvas");u.width=u.height=1;var f=u.getContext("2d");if(!f)return!1;var m=f.getImageData(0,0,1,1);return m&&m.width===u.width}()?(he[o=t&&t.failIfMajorPerformanceCaveat]===void 0&&(he[o]=function(u){var f,m=function(_){var x=document.createElement("canvas"),C=Object.create(le.webGLContextAttributes);return C.failIfMajorPerformanceCaveat=_,x.getContext("webgl",C)||x.getContext("experimental-webgl",C)}(u);if(!m)return!1;try{f=m.createShader(m.VERTEX_SHADER)}catch{return!1}return!(!f||m.isContextLost())&&(m.shaderSource(f,"void main() {}"),m.compileShader(f),m.getShaderParameter(f,m.COMPILE_STATUS)===!0)}(o)),he[o]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var o}(l)}var he={};function $(l,t){if(Array.isArray(l)){if(!Array.isArray(t)||l.length!==t.length)return!1;for(let o=0;o<l.length;o++)if(!$(l[o],t[o]))return!1;return!0}if(typeof l=="object"&&l!==null&&t!==null){if(typeof t!="object"||Object.keys(l).length!==Object.keys(t).length)return!1;for(const o in l)if(!$(l[o],t[o]))return!1;return!0}return l===t}function pe(l,t,o){const u=s.window.document.createElement(l);return t!==void 0&&(u.className=t),o&&o.appendChild(u),u}function Te(l,t,o){const u=s.window.document.createElementNS("http://www.w3.org/2000/svg",l);for(const f of Object.keys(t))u.setAttributeNS(null,f,t[f]);return o&&o.appendChild(u),u}le.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const ut=s.window.document&&s.window.document.documentElement.style,zt=ut&&ut.userSelect!==void 0?"userSelect":"WebkitUserSelect";let He;function dt(){ut&&zt&&(He=ut[zt],ut[zt]="none")}function Pt(){ut&&zt&&(ut[zt]=He)}function Kt(l){l.preventDefault(),l.stopPropagation(),s.window.removeEventListener("click",Kt,!0)}function ei(){s.window.addEventListener("click",Kt,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",Kt,!0)},0)}function wi(l,t){const o=l.getBoundingClientRect();return Xi(l,o,t)}function Dt(l,t){const o=l.getBoundingClientRect(),u=[];for(let f=0;f<t.length;f++)u.push(Xi(l,o,t[f]));return u}function ur(l){return s.window.InstallTrigger!==void 0&&l.button===2&&l.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:l.button}function Xi(l,t,o){const u=l.offsetWidth===t.width?1:l.offsetWidth/t.width;return new s.pointGeometry((o.clientX-t.left)*u,(o.clientY-t.top)*u)}function Ji(l,t){var o=t[0],u=t[1],f=t[2],m=t[3],_=o*m-f*u;return _?(l[0]=m*(_=1/_),l[1]=-u*_,l[2]=-f*_,l[3]=o*_,l):null}function gr(l){const{userImage:t}=l;return!!(t&&t.render&&t.render())&&(l.data.replace(new Uint8Array(t.data.buffer)),!0)}class mi extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:o,callback:u}of this.requestors)this._notify(o,u);this.requestors=[]}}hasImage(t){return!!this.getImage(t)}getImage(t){return this.images[t]}addImage(t,o){this._validate(t,o)&&(this.images[t]=o)}_validate(t,o){let u=!0;return this._validateStretch(o.stretchX,o.data&&o.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),u=!1),this._validateStretch(o.stretchY,o.data&&o.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),u=!1),this._validateContent(o.content,o)||(this.fire(new s.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),u=!1),u}_validateStretch(t,o){if(!t)return!0;let u=0;for(const f of t){if(f[0]<u||f[1]<f[0]||o<f[1])return!1;u=f[1]}return!0}_validateContent(t,o){return!(t&&(t.length!==4||t[0]<0||o.data.width<t[0]||t[1]<0||o.data.height<t[1]||t[2]<0||o.data.width<t[2]||t[3]<0||o.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,o){o.version=this.images[t].version+1,this.images[t]=o,this.updatedImages[t]=!0}removeImage(t){const o=this.images[t];delete this.images[t],delete this.patterns[t],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,o){let u=!0;if(!this.isLoaded())for(const f of t)this.images[f]||(u=!1);this.isLoaded()||u?this._notify(t,o):this.requestors.push({ids:t,callback:o})}_notify(t,o){const u={};for(const f of t){this.images[f]||this.fire(new s.Event("styleimagemissing",{id:f}));const m=this.images[f];m?u[f]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,hasRenderCallback:Boolean(m.userImage&&m.userImage.render)}:s.warnOnce(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}o(null,u)}getPixelSize(){const{width:t,height:o}=this.atlasImage;return{width:t,height:o}}getPattern(t){const o=this.patterns[t],u=this.getImage(t);if(!u)return null;if(o&&o.position.version===u.version)return o.position;if(o)o.position.version=u.version;else{const f={w:u.data.width+2,h:u.data.height+2,x:0,y:0},m=new s.ImagePosition(f,u);this.patterns[t]={bin:f,position:m}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const o=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(t,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const m in this.patterns)t.push(this.patterns[m].bin);const{w:o,h:u}=s.potpack(t),f=this.atlasImage;f.resize({width:o||1,height:u||1});for(const m in this.patterns){const{bin:_}=this.patterns[m],x=_.x+1,C=_.y+1,M=this.images[m].data,D=M.width,B=M.height;s.RGBAImage.copy(M,f,{x:0,y:0},{x,y:C},{width:D,height:B}),s.RGBAImage.copy(M,f,{x:0,y:B-1},{x,y:C-1},{width:D,height:1}),s.RGBAImage.copy(M,f,{x:0,y:0},{x,y:C+B},{width:D,height:1}),s.RGBAImage.copy(M,f,{x:D-1,y:0},{x:x-1,y:C},{width:1,height:B}),s.RGBAImage.copy(M,f,{x:0,y:0},{x:x+D,y:C},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const o of t){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const u=this.images[o];gr(u)&&this.updateImage(o,u)}}}const hr=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(l,t){return function([o,u,f]){const m=s.degToRad(u+90),_=s.degToRad(f);return{x:o*Math.cos(m)*Math.sin(_),y:o*Math.sin(m)*Math.sin(_),z:o*Math.cos(_),azimuthal:u,polar:f}}(l.expression.evaluate(t))}interpolate(l,t,o){return{x:s.number(l.x,t.x,o),y:s.number(l.y,t.y,o),z:s.number(l.z,t.z,o),azimuthal:s.number(l.azimuthal,t.azimuthal,o),polar:s.number(l.polar,t.polar,o)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),Tr="-transition";class $r extends s.Evented{constructor(t){super(),this._transitionable=new s.Transitionable(hr),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,o={}){if(!this._validate(s.validateLight,t,o))for(const u in t){const f=t[u];s.endsWith(u,Tr)?this._transitionable.setTransition(u.slice(0,-Tr.length),f):this._transitionable.setValue(u,f)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,u){return(!u||u.validate!==!1)&&s.emitValidationErrors(this,t.call(s.validateStyle,s.extend({value:o,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const en=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)}),vi="-transition";class ci extends s.Evented{constructor(t,o){super(),this._transitionable=new s.Transitionable(en),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(t){for(const o in t){const u=t[o];s.endsWith(o,vi)?this._transitionable.setTransition(o.slice(0,-vi.length),u):this._transitionable.setValue(o,u)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}}function Ht(l,t,o,u){const f=s.smoothstep(45,65,o),[m,_]=Li(l,u),x=s.length(t);let C=1-Math.min(1,Math.exp((x-m)/(_-m)*-6));return C*=C*C,C=Math.min(1,1.00747*C),C*f*l.alpha}function Li(l,t){const o=.5/Math.tan(.5*t);return[l.range[0]+o,l.range[1]+o]}const Or=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"])}),Pi="-transition";class dr extends s.Evented{constructor(t,o){super(),this._transitionable=new s.Transitionable(Or),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=o}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,o={}){if(!this._validate(s.validateFog,t,o))for(const u in t){const f=t[u];s.endsWith(u,Pi)?this._transitionable.setTransition(u.slice(0,-Pi.length),f):this._transitionable.setValue(u,f)}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const o=this.properties&&this.properties.get("color")||1;return s.smoothstep(45,65,t)*o.a}getOpacityAtLatLng(t,o){return this._transform.projection.supportsFog?function(u,f,m){const _=s.MercatorCoordinate.fromLngLat(f),x=m.elevation?m.elevation.getAtPointOrZero(_):0,C=[_.x,_.y,x];return s.transformMat4(C,C,m.mercatorFogMatrix),Ht(u,C,m.pitch,m._fov)}(this.state,t,o):0}getFovAdjustedRange(t){return this._transform.projection.supportsFog?Li(this.state,t):[0,1]}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,u){return(!u||u.validate!==!1)&&s.emitValidationErrors(this,t.call(s.validateStyle,s.extend({value:o,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Ot{constructor(t,o){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const u=this.workerPool.acquire(this.id);for(let f=0;f<u.length;f++){const m=new Ot.Actor(u[f],o,this.id);m.name=`Worker ${f}`,this.actors.push(m)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(t,o,u){s.asyncAll(this.actors,(f,m)=>{f.send(t,o,m)},u=u||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(t=>{t.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Fi(l,t,o){return t*(s.EXTENT/(l.tileSize*Math.pow(2,o-l.tileID.overscaledZ)))}Ot.Actor=s.Actor;class Pe{constructor(t,o,u,f){this.screenBounds=t,this.cameraPoint=o,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=u,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(m=>f.pointCoordinate3D(m)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(t,o){let u,f;if(t instanceof s.pointGeometry||typeof t[0]=="number"){const m=s.pointGeometry.convert(t);u=[s.pointGeometry.convert(t)],f=o.isPointAboveHorizon(m)}else{const m=s.pointGeometry.convert(t[0]),_=s.pointGeometry.convert(t[1]);u=[m,_],f=s.polygonizeBounds(m,_).every(x=>o.isPointAboveHorizon(x))}return new Pe(u,o.getCameraPoint(),f,o)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(t){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const o=this.screenBounds[0],u=this.screenBounds.length===1?this.screenBounds[0].add(new s.pointGeometry(1,1)):this.screenBounds[1],f=s.polygonizeBounds(o,u,0,!1);return this.cameraPoint.y>u.y&&(this.cameraPoint.x>o.x&&this.cameraPoint.x<u.x?f.splice(3,0,this.cameraPoint):this.cameraPoint.x>=u.x?f[2]=this.cameraPoint:this.cameraPoint.x<=o.x&&(f[3]=this.cameraPoint)),s.bufferConvexPolygon(f,t)}containsTile(t,o,u){const f=t.queryPadding+1,m=t.tileID.wrap,_=u?this._bufferedCameraMercator(f,o).map(G=>s.getTilePoint(t.tileTransform,G,m)):this._bufferedScreenMercator(f,o).map(G=>s.getTilePoint(t.tileTransform,G,m)),x=this.screenGeometryMercator.map(G=>s.getTileVec3(t.tileTransform,G,m)),C=x.map(G=>new s.pointGeometry(G[0],G[1])),M=o.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),D=s.getTileVec3(t.tileTransform,M,m),B=x.map(G=>{const R=s.sub(G,G,D);return s.normalize(R,R),new s.Ray(D,R)}),O=Fi(t,1,o.zoom);if(s.polygonIntersectsBox(_,0,0,s.EXTENT,s.EXTENT))return{queryGeometry:this,tilespaceGeometry:C,tilespaceRays:B,bufferedTilespaceGeometry:_,bufferedTilespaceBounds:(U=s.getBounds(_),U.min.x=s.clamp(U.min.x,0,s.EXTENT),U.min.y=s.clamp(U.min.y,0,s.EXTENT),U.max.x=s.clamp(U.max.x,0,s.EXTENT),U.max.y=s.clamp(U.max.y,0,s.EXTENT),U),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:O};var U}_bufferedScreenMercator(t,o){const u=ht(t);if(this._screenRaycastCache[u])return this._screenRaycastCache[u];{const f=this.bufferedScreenGeometry(t).map(m=>o.pointCoordinate3D(m));return this._screenRaycastCache[u]=f,f}}_bufferedCameraMercator(t,o){const u=ht(t);if(this._cameraRaycastCache[u])return this._cameraRaycastCache[u];{const f=this.bufferedCameraGeometry(t).map(m=>o.pointCoordinate3D(m));return this._cameraRaycastCache[u]=f,f}}}function ht(l){return 100*l|0}function $e(l,t,o){const u=function(f,m){if(f)return o(f);if(m){const _=s.pick(s.extend(m,l),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);m.vector_layers&&(_.vectorLayers=m.vector_layers,_.vectorLayerIds=_.vectorLayers.map(x=>x.id)),_.tiles=t.canonicalizeTileset(_,l.url),o(null,_)}};return l.url?s.getJSON(t.transformRequest(t.normalizeSourceURL(l.url),s.ResourceType.Source),u):s.exported.frame(()=>u(null,l))}class yt{constructor(t,o,u){this.bounds=s.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=o||0,this.maxzoom=u||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const o=Math.pow(2,t.z),u=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*o),f=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*o),m=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*o),_=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*o);return t.x>=u&&t.x<m&&t.y>=f&&t.y<_}}class ui{constructor(t,o,u){this.context=t;const f=t.gl;this.buffer=f.createBuffer(),this.dynamicDraw=Boolean(u),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||o.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const o=this.context.gl;this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const si={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Bt{constructor(t,o,u,f){this.length=o.length,this.attributes=u,this.itemSize=o.bytesPerElement,this.dynamicDraw=f,this.context=t;const m=t.gl;this.buffer=m.createBuffer(),t.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||o.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,o){for(let u=0;u<this.attributes.length;u++){const f=o.attributes[this.attributes[u].name];f!==void 0&&t.enableVertexAttribArray(f)}}setVertexAttribPointers(t,o,u){for(let f=0;f<this.attributes.length;f++){const m=this.attributes[f],_=o.attributes[m.name];_!==void 0&&t.vertexAttribPointer(_,m.components,t[si[m.type]],!1,this.itemSize,m.offset+this.itemSize*(u||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class it{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class te extends it{getDefault(){return s.Color.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class de extends it{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Ce extends it{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Oe extends it{getDefault(){return[!0,!0,!0,!0]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Se extends it{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class We extends it{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class ot extends it{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const o=this.current;(t.func!==o.func||t.ref!==o.ref||t.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Ye extends it{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Ke extends it{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=t,this.dirty=!1}}class Ue extends it{getDefault(){return[0,1]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class wt extends it{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=t,this.dirty=!1}}class ft extends it{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class bt extends it{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.BLEND):o.disable(o.BLEND),this.current=t,this.dirty=!1}}class Tt extends it{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Ft extends it{getDefault(){return s.Color.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Xt extends it{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Qt extends it{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=t,this.dirty=!1}}class ai extends it{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class $i extends it{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class _r extends it{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class yn extends it{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class xn extends it{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class lo extends it{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class Yi extends it{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class er extends it{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class co extends it{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class uo extends it{getDefault(){return null}set(t){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ga extends it{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class tn extends it{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Pn extends it{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class ho extends it{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class po extends it{constructor(t,o){super(t),this.context=t,this.parent=o}getDefault(){return null}}class No extends po{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Ts extends po{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,this.attachment(),o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Oo extends Ts{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Y{constructor(t,o,u,f){this.context=t,this.width=o,this.height=u;const m=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new No(t,m),f&&(this.depthAttachment=new Ts(t,m))}destroy(){const t=this.context.gl,o=this.colorAttachment.get();if(o&&t.deleteTexture(o),this.depthAttachment){const u=this.depthAttachment.get();u&&t.deleteRenderbuffer(u)}t.deleteFramebuffer(this.framebuffer)}}class z{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new te(this),this.clearDepth=new de(this),this.clearStencil=new Ce(this),this.colorMask=new Oe(this),this.depthMask=new Se(this),this.stencilMask=new We(this),this.stencilFunc=new ot(this),this.stencilOp=new Ye(this),this.stencilTest=new Ke(this),this.depthRange=new Ue(this),this.depthTest=new wt(this),this.depthFunc=new ft(this),this.blend=new bt(this),this.blendFunc=new Tt(this),this.blendColor=new Ft(this),this.blendEquation=new Xt(this),this.cullFace=new Qt(this),this.cullFaceSide=new ai(this),this.frontFace=new $i(this),this.program=new _r(this),this.activeTexture=new yn(this),this.viewport=new xn(this),this.bindFramebuffer=new lo(this),this.bindRenderbuffer=new Yi(this),this.bindTexture=new er(this),this.bindVertexBuffer=new co(this),this.bindElementBuffer=new uo(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ga(this),this.pixelStoreUnpack=new tn(this),this.pixelStoreUnpackPremultiplyAlpha=new Pn(this),this.pixelStoreUnpackFlipY=new ho(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,o){return new ui(this,t,o)}createVertexBuffer(t,o,u){return new Bt(this,t,o,u)}createRenderbuffer(t,o,u){const f=this.gl,m=f.createRenderbuffer();return this.bindRenderbuffer.set(m),f.renderbufferStorage(f.RENDERBUFFER,t,o,u),this.bindRenderbuffer.set(null),m}createFramebuffer(t,o,u){return new Y(this,t,o,u)}clear({color:t,depth:o,stencil:u}){const f=this.gl;let m=0;t&&(m|=f.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(m|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),u!==void 0&&(m|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(u),this.stencilMask.set(255)),f.clear(m)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){$(t.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class P extends s.Evented{constructor(t,o,u,f){super(),this.id=t,this.dispatcher=u,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},o),s.extend(this,s.pick(o,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=$e(this._options,this.map._requestManager,(t,o)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new s.ErrorEvent(t)):o&&(s.extend(this,o),o.bounds&&(this.tileBounds=new yt(o.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(o.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t,o){const u=s.exported.devicePixelRatio>=2,f=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),u,this.tileSize);t.request=s.getImage(this.map._requestManager.transformRequest(f,s.ResourceType.Tile),(m,_,x,C)=>(delete t.request,t.aborted?(t.state="unloaded",o(null)):m?(t.state="errored",o(m)):_?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:x,expires:C}),t.setTexture(_,this.map.painter),t.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void o(null)):o(null)))}static loadTileData(t,o,u){t.setTexture(o,u)}static unloadTileData(t,o){t.texture&&o.saveTileTexture(t.texture)}abortTile(t,o){t.request&&(t.request.cancel(),delete t.request),o()}unloadTile(t,o){t.texture&&this.map.painter.saveTileTexture(t.texture),o()}hasTransition(){return!1}}let Z;function J(l,t,o,u,f,m,_,x){const C=[l,o,f,t,u,m,1,1,1],M=[_,x,1],D=s.adjoint([],C),[B,O,U]=s.transformMat3(M,M,s.transpose(D,D));return s.multiply(C,[B,0,0,0,O,0,0,0,U],C)}class ne extends s.Evented{constructor(t,o,u,f){super(),this.id=t,this.dispatcher=u,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=o}load(t){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(o,u)=>{if(this._loaded=!0,o)this.fire(new s.ErrorEvent(o));else if(u){const{HTMLImageElement:f}=s.window;this.image=u instanceof f?s.exported.getImageData(u):u,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}})}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const o=t.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(u){let f=1/0,m=1/0,_=-1/0,x=-1/0;for(const B of u)f=Math.min(f,B.x),m=Math.min(m,B.y),_=Math.max(_,B.x),x=Math.max(x,B.y);const C=Math.max(_-f,x-m),M=Math.max(0,Math.floor(-Math.log(C)/Math.LN2)),D=Math.pow(2,M);return new s.CanonicalTileID(M,Math.floor((f+_)/2*D),Math.floor((m+x)/2*D))}(o),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const C in this.tiles){const M=this.tiles[C];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture)}if(this._boundsArray)return;const o=s.tileTransform(this.tileID,this.map.transform.projection),[u,f,m,_]=this.coordinates.map(C=>{const M=o.projection.project(C[0],C[1]);return s.getTilePoint(o,M)._round()});this.perspectiveTransform=function(C,M,D,B,O,U,G,R,X,j){const q=J(0,0,C,0,0,M,C,M),K=J(D,B,O,U,G,R,X,j);return s.multiply(K,s.adjoint(q,q),K),[K[6]/K[8]*C/s.EXTENT,K[7]/K[8]*M/s.EXTENT]}(this.width,this.height,u.x,u.y,f.x,f.y,_.x,_.y,m.x,m.y);const x=this._boundsArray=new s.StructArrayLayout4i8;x.emplaceBack(u.x,u.y,0,0),x.emplaceBack(f.x,f.y,s.EXTENT,0),x.emplaceBack(_.x,_.y,0,s.EXTENT),x.emplaceBack(m.x,m.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(x,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,o=t.gl;this.texture?this.texture.update(this.image):(this.texture=new s.Texture(t,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE)),this._prepareData(t)}loadTile(t,o){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},o(null)):(t.state="errored",o(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const me={vector:class extends s.Evented{constructor(l,t,o,u){if(super(),this.id=l,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(t,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},t),this._collectResourceTiming=t.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(u),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=$e(this._options,this.map._requestManager,(l,t)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new s.ErrorEvent(l)):t&&(s.extend(this,t),t.bounds&&(this.tileBounds=new yt(t.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(t.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l();const t=this.map.style._getSourceCaches(this.id);for(const o of t)o.clearTiles();this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}loadTile(l,t){const o=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),u={request:this.map._requestManager.transformRequest(o,s.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(u.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=t:l.request=l.actor.send("reloadTile",u,f.bind(this));else if(l.actor=this._tileWorkers[o]=this._tileWorkers[o]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",u,f.bind(this),void 0,!0);else{const m=s.loadVectorTile.call({deduped:this._deduped},u,(_,x)=>{_||!x?f.call(this,_):(u.data={cacheControl:x.cacheControl,expires:x.expires,rawData:x.rawData.slice(0)},l.actor&&l.actor.send("loadTile",u,f.bind(this),void 0,!0))},!0);l.request={cancel:m}}function f(m,_){return delete l.request,l.aborted?t(null):m&&m.status!==404?t(m):(_&&_.resourceTiming&&(l.resourceTiming=_.resourceTiming),this.map._refreshExpiredTiles&&_&&l.setExpiryData(_),l.loadVectorData(_,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),t(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:P,"raster-dem":class extends P{constructor(l,t,o,u){super(l,t,o,u),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},t),this.encoding=t.encoding||"mapbox"}loadTile(l,t){const o=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function u(f,m){f&&(l.state="errored",t(f)),m&&(l.dem=m,l.dem.onDeserialize(),l.needsHillshadePrepare=!0,l.needsDEMTextureUpload=!0,l.state="loaded",t(null))}l.request=s.getImage(this.map._requestManager.transformRequest(o,s.ResourceType.Tile),function(f,m,_,x){if(delete l.request,l.aborted)l.state="unloaded",t(null);else if(f)l.state="errored",t(f);else if(m){this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:_,expires:x});const C=s.window.ImageBitmap&&m instanceof s.window.ImageBitmap&&(Z==null&&(Z=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),Z),M=1-(m.width-s.prevPowerOfTwo(m.width))/2;M<1||l.neighboringTiles||(l.neighboringTiles=this._getNeighboringTiles(l.tileID));const D=C?m:s.exported.getImageData(m,M),B={uid:l.uid,coord:l.tileID,source:this.id,rawImageData:D,encoding:this.encoding,padding:M};l.actor&&l.state!=="expired"||(l.actor=this.dispatcher.getActor(),l.actor.send("loadDEMTile",B,u.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(l){const t=l.canonical,o=Math.pow(2,t.z),u=(t.x-1+o)%o,f=t.x===0?l.wrap-1:l.wrap,m=(t.x+1+o)%o,_=t.x+1===o?l.wrap+1:l.wrap,x={};return x[new s.OverscaledTileID(l.overscaledZ,f,t.z,u,t.y).key]={backfilled:!1},x[new s.OverscaledTileID(l.overscaledZ,_,t.z,m,t.y).key]={backfilled:!1},t.y>0&&(x[new s.OverscaledTileID(l.overscaledZ,f,t.z,u,t.y-1).key]={backfilled:!1},x[new s.OverscaledTileID(l.overscaledZ,l.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},x[new s.OverscaledTileID(l.overscaledZ,_,t.z,m,t.y-1).key]={backfilled:!1}),t.y+1<o&&(x[new s.OverscaledTileID(l.overscaledZ,f,t.z,u,t.y+1).key]={backfilled:!1},x[new s.OverscaledTileID(l.overscaledZ,l.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},x[new s.OverscaledTileID(l.overscaledZ,_,t.z,m,t.y+1).key]={backfilled:!1}),x}unloadTile(l){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded"}},geojson:class extends s.Evented{constructor(l,t,o,u){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(u),this._data=t.data,this._options=s.extend({},t),this._collectResourceTiming=t.collectResourceTiming,t.maxzoom!==void 0&&(this.maxzoom=t.maxzoom),t.type&&(this.type=t.type),t.attribution&&(this.attribution=t.attribution),this.promoteId=t.promoteId;const f=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:t.cluster||!1,geojsonVtOptions:{buffer:(t.buffer!==void 0?t.buffer:128)*f,tolerance:(t.tolerance!==void 0?t.tolerance:.375)*f,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:t.lineMetrics||!1,generateId:t.generateId||!1},superclusterOptions:{maxZoom:t.clusterMaxZoom!==void 0?t.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,t.clusterMinPoints||2),extent:s.EXTENT,radius:(t.clusterRadius!==void 0?t.clusterRadius:50)*f,log:!1,generateId:t.generateId||!1},clusterProperties:t.clusterProperties,filter:t.filter},t.workerOptions)}onAdd(l){this.map=l,this.setData(this._data)}setData(l){return this._data=l,this._updateWorkerData(),this}getClusterExpansionZoom(l,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:l,source:this.id},t),this}getClusterChildren(l,t){return this.actor.send("geojson.getClusterChildren",{clusterId:l,source:this.id},t),this}getClusterLeaves(l,t,o,u){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:l,limit:t,offset:o},u),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const l=s.extend({},this.workerOptions),t=this._data;typeof t=="string"?(l.request=this.map._requestManager.transformRequest(s.exported.resolveURL(t),s.ResourceType.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(t),this._pendingLoad=this.actor.send(`${this.type}.loadData`,l,(o,u)=>{if(this._loaded=!0,this._pendingLoad=null,o)this.fire(new s.ErrorEvent(o));else{const f={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&u&&u.resourceTiming&&u.resourceTiming[this.id]&&(f.resourceTiming=u.resourceTiming[this.id]),this.fire(new s.Event("data",f)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(l,t){const o=l.actor?"reloadTile":"loadTile";l.actor=this.actor,l.request=this.actor.send(o,{type:this.type,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(u,f)=>(delete l.request,l.unloadVectorData(),l.aborted?t(null):u?t(u):(l.loadVectorData(f,this.map.painter,o==="reloadTile"),t(null))),void 0,o==="loadTile")}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.aborted=!0}unloadTile(l){l.unloadVectorData(),this.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends ne{constructor(l,t,o,u){super(l,t,o,u),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const l=this.options;this.urls=[];for(const t of l.urls)this.urls.push(this.map._requestManager.transformRequest(t,s.ResourceType.Source).url);s.getVideo(this.urls,(t,o)=>{this._loaded=!0,t?this.fire(new s.ErrorEvent(t)):o&&(this.video=o,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const t=this.video.seekable;l<t.start(0)||l>t.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${t.start(0)} and ${t.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,t=l.gl;this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(l,this.video,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(l)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:ne,canvas:class extends ne{constructor(l,t,o,u){super(l,t,o,u),t.coordinates?Array.isArray(t.coordinates)&&t.coordinates.length===4&&!t.coordinates.some(f=>!Array.isArray(f)||f.length!==2||f.some(m=>typeof m!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'missing required property "coordinates"'))),t.animate&&typeof t.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),t.canvas?typeof t.canvas=="string"||t.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${l}`,null,'missing required property "canvas"'))),this.options=t,this.animate=t.animate===void 0||t.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const t=this.map.painter.context;this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(t,this.canvas,t.gl.RGBA,{premultiply:!0}),this._prepareData(t)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}},custom:class extends s.Evented{constructor(l,t,o,u){super(),this.id=l,this.type="custom",this._dataType="raster",this._dispatcher=o,this._implementation=t,this.setEventedParent(u),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new yt(this._implementation.bounds,this.minzoom,this.maxzoom)),t.update=this._update.bind(this),t.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(t,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(l){this._map=l,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(l),this.load()}onRemove(l){this._implementation.onRemove&&this._implementation.onRemove(l)}hasTile(l){if(this._implementation.hasTile){const{x:t,y:o,z:u}=l.canonical;return this._implementation.hasTile({x:t,y:o,z:u})}return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,t){const{x:o,y:u,z:f}=l.tileID.canonical,m=new s.window.AbortController,_=this._implementation.loadTile({x:o,y:u,z:f},{signal:m.signal});if(!_)return this.loadTileData(l,{width:this.tileSize,height:this.tileSize,data:null}),l.state="loaded",t(null);_.cancel=()=>m.abort(),l.request=_.then(function(x){return delete l.request,l.aborted?(l.state="unloaded",t(null)):x?function(C){return C instanceof s.window.ImageData||C instanceof s.window.ImageBitmap||C instanceof s.window.HTMLCanvasElement}(x)?(this.loadTileData(l,x),l.state="loaded",void t(null)):(l.state="errored",t(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(l,{width:this.tileSize,height:this.tileSize,data:null}),l.state="loaded",t(null))}.bind(this)).catch(x=>{x.code!==20&&(l.state="errored",t(x))})}loadTileData(l,t){P.loadTileData(l,t,this._map.painter)}unloadTileData(l){P.unloadTileData(l,this._map.painter)}prepareTile(l){if(!this._implementation.prepareTile)return null;const{x:t,y:o,z:u}=l.tileID.canonical,f=this._implementation.prepareTile({x:t,y:o,z:u});return f?(this.loadTileData(l,f),l.state="loaded",f):null}unloadTile(l,t){if(this.unloadTileData(l),this._implementation.unloadTile){const{x:o,y:u,z:f}=l.tileID.canonical;this._implementation.unloadTile({x:o,y:u,z:f})}t()}abortTile(l,t){l.request&&l.request.cancel&&(l.request.cancel(),delete l.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(l=>({x:l.canonical.x,y:l.canonical.y,z:l.canonical.z}))}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},fe=function(l,t,o,u){const f=new me[t.type](l,t,o,u);if(f.id!==l)throw new Error(`Expected Source id to be ${l} instead of ${f.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],f),f};function se(l,t){const o=s.identity([]);return s.scale(o,o,[.5*l.width,.5*-l.height,1]),s.translate(o,o,[1,-1,0]),s.multiply$1(o,o,l.calculateProjMatrix(t.toUnwrapped())),Float32Array.from(o)}function _e(l,t,o,u,f,m,_,x=!1){const C=l.tilesIn(u,_,x);C.sort(Xe);const M=[];for(const B of C)M.push({wrappedTileID:B.tile.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(t,o,l._state,B,f,m,se(l.transform,B.tile.tileID),x)});const D=function(B){const O={},U={};for(const G of B){const R=G.queryResults,X=G.wrappedTileID,j=U[X]=U[X]||{};for(const q in R){const K=R[q],ee=j[q]=j[q]||{},H=O[q]=O[q]||[];for(const re of K)ee[re.featureIndex]||(ee[re.featureIndex]=!0,H.push(re))}}return O}(M);for(const B in D)D[B].forEach(O=>{const U=O.feature,G=U.layer;G&&G.type!=="background"&&G.type!=="sky"&&(U.source=G.source,G["source-layer"]&&(U.sourceLayer=G["source-layer"]),U.state=U.id!==void 0?l.getFeatureState(G["source-layer"],U.id):{})});return D}function Be(l,t){const o=l.getRenderableIds().map(m=>l.getTileByID(m)),u=[],f={};for(let m=0;m<o.length;m++){const _=o[m],x=_.tileID.canonical.key;f[x]||(f[x]=!0,_.querySourceFeatures(u,t))}return u}function Xe(l,t){const o=l.tileID,u=t.tileID;return o.overscaledZ-u.overscaledZ||o.canonical.y-u.canonical.y||o.wrap-u.wrap||o.canonical.x-u.canonical.x}function Re(){return Jo.workerClass!=null?new Jo.workerClass:new s.window.Worker(Jo.workerUrl)}const xt="mapboxgl_preloaded_worker_pool";class mt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<mt.workerCount;)this.workers.push(new Re);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[xt]}numActive(){return Object.keys(this.active).length}}let At;function Ct(){return At||(At=new mt),At}function ye(l,t){const o={};for(const u in l)u!=="ref"&&(o[u]=l[u]);return s.refProperties.forEach(u=>{u in t&&(o[u]=t[u])}),o}function ti(l){l=l.slice();const t=Object.create(null);for(let o=0;o<l.length;o++)t[l[o].id]=l[o];for(let o=0;o<l.length;o++)"ref"in l[o]&&(l[o]=ye(l[o],t[l[o].ref]));return l}mt.workerCount=2;const at={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Jt(l,t,o){o.push({command:at.addSource,args:[l,t[l]]})}function ii(l,t,o){t.push({command:at.removeSource,args:[l]}),o[l]=!0}function fo(l,t,o,u){ii(l,o,u),Jt(l,t,o)}function vn(l,t,o){let u;for(u in l[o])if(l[o].hasOwnProperty(u)&&u!=="data"&&!$(l[o][u],t[o][u]))return!1;for(u in t[o])if(t[o].hasOwnProperty(u)&&u!=="data"&&!$(l[o][u],t[o][u]))return!1;return!0}function qe(l,t,o,u,f,m){let _;for(_ in t=t||{},l=l||{})l.hasOwnProperty(_)&&($(l[_],t[_])||o.push({command:m,args:[u,_,t[_],f]}));for(_ in t)t.hasOwnProperty(_)&&!l.hasOwnProperty(_)&&($(l[_],t[_])||o.push({command:m,args:[u,_,t[_],f]}))}function Ut(l){return l.id}function Rt(l,t){return l[t.id]=t,l}class fn{constructor(t,o){this.reset(t,o)}reset(t,o){this.points=t||[],this._distances=[0];for(let u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=s.clamp(t,0,1);let o=1,u=this._distances[o];const f=t*this.paddedLength+this.padding;for(;u<f&&o<this._distances.length;)u=this._distances[++o];const m=o-1,_=this._distances[m],x=u-_,C=x>0?(f-_)/x:0;return this.points[m].mult(1-C).add(this.points[o].mult(C))}}class mo{constructor(t,o,u){const f=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(t/u),this.yCellCount=Math.ceil(o/u);for(let _=0;_<this.xCellCount*this.yCellCount;_++)f.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=o,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,o,u,f,m){this._forEachCell(o,u,f,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(m)}insertCircle(t,o,u,f){this._forEachCell(o-f,u-f,o+f,u+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(o),this.circles.push(u),this.circles.push(f)}_insertBoxCell(t,o,u,f,m,_){this.boxCells[m].push(_)}_insertCircleCell(t,o,u,f,m,_){this.circleCells[m].push(_)}_query(t,o,u,f,m,_){if(u<0||t>this.width||f<0||o>this.height)return!m&&[];const x=[];if(t<=0&&o<=0&&this.width<=u&&this.height<=f){if(m)return!0;for(let C=0;C<this.boxKeys.length;C++)x.push({key:this.boxKeys[C],x1:this.bboxes[4*C],y1:this.bboxes[4*C+1],x2:this.bboxes[4*C+2],y2:this.bboxes[4*C+3]});for(let C=0;C<this.circleKeys.length;C++){const M=this.circles[3*C],D=this.circles[3*C+1],B=this.circles[3*C+2];x.push({key:this.circleKeys[C],x1:M-B,y1:D-B,x2:M+B,y2:D+B})}return _?x.filter(_):x}return this._forEachCell(t,o,u,f,this._queryCell,x,{hitTest:m,seenUids:{box:{},circle:{}}},_),m?x.length>0:x}_queryCircle(t,o,u,f,m){const _=t-u,x=t+u,C=o-u,M=o+u;if(x<0||_>this.width||M<0||C>this.height)return!f&&[];const D=[];return this._forEachCell(_,C,x,M,this._queryCellCircle,D,{hitTest:f,circle:{x:t,y:o,radius:u},seenUids:{box:{},circle:{}}},m),f?D.length>0:D}query(t,o,u,f,m){return this._query(t,o,u,f,!1,m)}hitTest(t,o,u,f,m){return this._query(t,o,u,f,!0,m)}hitTestCircle(t,o,u,f){return this._queryCircle(t,o,u,!0,f)}_queryCell(t,o,u,f,m,_,x,C){const M=x.seenUids,D=this.boxCells[m];if(D!==null){const O=this.bboxes;for(const U of D)if(!M.box[U]){M.box[U]=!0;const G=4*U;if(t<=O[G+2]&&o<=O[G+3]&&u>=O[G+0]&&f>=O[G+1]&&(!C||C(this.boxKeys[U]))){if(x.hitTest)return _.push(!0),!0;_.push({key:this.boxKeys[U],x1:O[G],y1:O[G+1],x2:O[G+2],y2:O[G+3]})}}}const B=this.circleCells[m];if(B!==null){const O=this.circles;for(const U of B)if(!M.circle[U]){M.circle[U]=!0;const G=3*U;if(this._circleAndRectCollide(O[G],O[G+1],O[G+2],t,o,u,f)&&(!C||C(this.circleKeys[U]))){if(x.hitTest)return _.push(!0),!0;{const R=O[G],X=O[G+1],j=O[G+2];_.push({key:this.circleKeys[U],x1:R-j,y1:X-j,x2:R+j,y2:X+j})}}}}}_queryCellCircle(t,o,u,f,m,_,x,C){const M=x.circle,D=x.seenUids,B=this.boxCells[m];if(B!==null){const U=this.bboxes;for(const G of B)if(!D.box[G]){D.box[G]=!0;const R=4*G;if(this._circleAndRectCollide(M.x,M.y,M.radius,U[R+0],U[R+1],U[R+2],U[R+3])&&(!C||C(this.boxKeys[G])))return _.push(!0),!0}}const O=this.circleCells[m];if(O!==null){const U=this.circles;for(const G of O)if(!D.circle[G]){D.circle[G]=!0;const R=3*G;if(this._circlesCollide(U[R],U[R+1],U[R+2],M.x,M.y,M.radius)&&(!C||C(this.circleKeys[G])))return _.push(!0),!0}}}_forEachCell(t,o,u,f,m,_,x,C){const M=this._convertToXCellCoord(t),D=this._convertToYCellCoord(o),B=this._convertToXCellCoord(u),O=this._convertToYCellCoord(f);for(let U=M;U<=B;U++)for(let G=D;G<=O;G++)if(m.call(this,t,o,u,f,this.xCellCount*G+U,_,x,C))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,o,u,f,m,_){const x=f-t,C=m-o,M=u+_;return M*M>x*x+C*C}_circleAndRectCollide(t,o,u,f,m,_,x){const C=(_-f)/2,M=Math.abs(t-(f+C));if(M>C+u)return!1;const D=(x-m)/2,B=Math.abs(o-(m+D));if(B>D+u)return!1;if(M<=C||B<=D)return!0;const O=M-C,U=B-D;return O*O+U*U<=u*u}}const Gt=Math.tan(85*Math.PI/180);function Ao(l,t,o,u,f,m){const _=s.create();if(o){if(f.projection.name==="globe")s.multiply$1(_,_,s.calculateGlobeLabelMatrix(f,t));else{const x=Ji([],m);_[0]=x[0],_[1]=x[1],_[4]=x[2],_[5]=x[3]}u||s.rotateZ(_,_,f.angle)}else s.multiply$1(_,f.labelPlaneMatrix,l);return _}function Go(l,t,o,u,f,m){if(o){if(f.projection.name==="globe"){const _=Ao(l,t,o,u,f,m);return s.invert(_,_),s.multiply$1(_,l,_),_}{const _=s.clone(l),x=s.identity([]);return x[0]=m[0],x[1]=m[1],x[4]=m[2],x[5]=m[3],s.multiply$1(_,_,x),u||s.rotateZ(_,_,-f.angle),_}}return f.glCoordMatrix}function pr(l,t,o=0){const u=[l.x,l.y,o,1];o?s.transformMat4$1(u,u,t):Mr(u,u,t);const f=u[3];return{point:new s.pointGeometry(u[0]/f,u[1]/f),signedDistanceFromCamera:f}}function Gr(l,t){const o=[l[0],l[1],l[2],1];s.transformMat4$1(o,o,t);const u=o[3];return{point:new s.pointGeometry(o[0]/u,o[1]/u),signedDistanceFromCamera:u}}function Ci(l,t){return Math.min(.5+l/t*.5,1.5)}function pd(l,t){const o=l[0]/l[3],u=l[1]/l[3];return o>=-t[0]&&o<=t[0]&&u>=-t[1]&&u<=t[1]}function Ms(l,t,o,u,f,m,_,x,C,M){const D=o.transform,B=u?l.textSizeData:l.iconSizeData,O=s.evaluateSizeForZoom(B,o.transform.zoom),U=[256/o.width*2+1,256/o.height*2+1],G=u?l.text.dynamicLayoutVertexArray:l.icon.dynamicLayoutVertexArray;G.clear();const R=l.lineVertexArray,X=u?l.text.placedSymbolArray:l.icon.placedSymbolArray,j=o.transform.width/o.transform.height;let q=!1;for(let K=0;K<X.length;K++){const ee=X.get(K);if(ee.writingMode!==s.WritingMode.vertical||q||K!==0&&X.get(K-1).writingMode===s.WritingMode.horizontal||(q=!0),(ee.hidden||ee.writingMode===s.WritingMode.vertical)&&!q){Vi(ee.numGlyphs,G);continue}q=!1;const H=new s.pointGeometry(ee.tileAnchorX,ee.tileAnchorY),re=C?C(H):[0,0,0],Ae=D.projection.projectTilePoint(H.x,H.y,M.canonical),ve=[Ae.x+re[0],Ae.y+re[1],Ae.z+re[2]],Ie=[...ve,1];if(s.transformMat4$1(Ie,Ie,t),!pd(Ie,U)){Vi(ee.numGlyphs,G);continue}const Me=Ci(o.transform.cameraToCenterDistance,Ie[3]),Ze=s.evaluateSizeForFeature(B,O,ee),ge=_?Ze/Me:Ze*Me,Ve=pr(new s.pointGeometry(ve[0],ve[1]),f,ve[2]);if(Ve.signedDistanceFromCamera<=0){Vi(ee.numGlyphs,G);continue}let Ge={};const st=_?null:C,be=ya(ee,ge,!1,x,t,f,m,l.glyphOffsetArray,R,G,Ve.point,H,Ge,j,st,D.projection,M);q=be.useVertical,st&&be.needsFlipping&&(Ge={}),(be.notEnoughRoom||q||be.needsFlipping&&ya(ee,ge,!0,x,t,f,m,l.glyphOffsetArray,R,G,Ve.point,H,Ge,j,st,D.projection,M).notEnoughRoom)&&Vi(ee.numGlyphs,G)}u?l.text.dynamicLayoutVertexBuffer.updateData(G):l.icon.dynamicLayoutVertexBuffer.updateData(G)}function _a(l,t,o,u,f,m,_,x,C,M,D,B,O,U,G){const R=x.glyphStartIndex+x.numGlyphs,X=x.lineStartIndex,j=x.lineStartIndex+x.lineLength,q=t.getoffsetX(x.glyphStartIndex),K=t.getoffsetX(R-1),ee=Vo(l*q,o,u,f,m,_,x.segment,X,j,C,M,D,B,O,!0,U,G);if(!ee)return null;const H=Vo(l*K,o,u,f,m,_,x.segment,X,j,C,M,D,B,O,!0,U,G);return H?{first:ee,last:H}:null}function Fo(l,t,o,u){return l.writingMode===s.WritingMode.horizontal&&Math.abs(o.y-t.y)>Math.abs(o.x-t.x)*u?{useVertical:!0}:l.writingMode===s.WritingMode.vertical?t.y<o.y?{needsFlipping:!0}:null:l.flipState!==0&&function(f,m,_){const x=(m.x-f.x)*_;return x===0||Math.abs((m.y-f.y)/x)>Gt}(t,o,u)?l.flipState===1?{needsFlipping:!0}:null:t.x>o.x?{needsFlipping:!0}:null}function ya(l,t,o,u,f,m,_,x,C,M,D,B,O,U,G,R,X){const j=t/24,q=l.lineOffsetX*j,K=l.lineOffsetY*j;let ee;if(l.numGlyphs>1){const H=l.glyphStartIndex+l.numGlyphs,re=l.lineStartIndex,Ae=l.lineStartIndex+l.lineLength,ve=_a(j,x,q,K,o,D,B,l,C,m,O,G,!1,R,X);if(!ve)return{notEnoughRoom:!0};const Ie=pr(ve.first.point,_).point,Me=pr(ve.last.point,_).point;if(u&&!o){const Ze=Fo(l,Ie,Me,U);if(l.flipState=Ze&&Ze.needsFlipping?1:2,Ze)return Ze}ee=[ve.first];for(let Ze=l.glyphStartIndex+1;Ze<H-1;Ze++)ee.push(Vo(j*x.getoffsetX(Ze),q,K,o,D,B,l.segment,re,Ae,C,m,O,G,!1,!1,R,X));ee.push(ve.last)}else{if(u&&!o){const re=pr(B,f).point,Ae=l.lineStartIndex+l.segment+1,ve=new s.pointGeometry(C.getx(Ae),C.gety(Ae)),Ie=pr(ve,f),Me=Fo(l,re,Ie.signedDistanceFromCamera>0?Ie.point:$t(B,ve,re,1,f,void 0,R,X.canonical),U);if(l.flipState=Me&&Me.needsFlipping?1:2,Me)return Me}const H=Vo(j*x.getoffsetX(l.glyphStartIndex),q,K,o,D,B,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,C,m,O,G,!1,!1,R,X);if(!H)return{notEnoughRoom:!0};ee=[H]}for(const H of ee)s.addDynamicAttributes(M,H.point,H.angle);return{}}function zl(l,t,o,u,f){const m=u.projectTilePoint(l.x,l.y,t);if(!f)return pr(m,o,m.z);const _=f(l);return pr(new s.pointGeometry(m.x+_[0],m.y+_[1]),o,m.z+_[2])}function $t(l,t,o,u,f,m,_,x){const C=zl(l.add(l.sub(t)._unit()),x,f,_,m).point,M=o.sub(C);return o.add(M._mult(u/M.mag()))}function Vo(l,t,o,u,f,m,_,x,C,M,D,B,O,U,G,R,X){const j=u?l-t:l+t;let q=j>0?1:-1,K=0;u&&(q*=-1,K=Math.PI),q<0&&(K+=Math.PI);let ee=q>0?x+_:x+_+1,H=f,re=f,Ae=0,ve=0;const Ie=Math.abs(j),Me=[],Ze=[];let ge=m;const Ve=()=>{const rt=ee-q;return Ae===0?m:new s.pointGeometry(M.getx(rt),M.gety(rt))},Ge=()=>$t(Ve(),ge,re,Ie-Ae+1,D,O,R,X.canonical);for(;Ae+ve<=Ie;){if(ee+=q,ee<x||ee>=C)return null;if(re=H,Me.push(H),U&&Ze.push(ge||Ve()),H=B[ee],H===void 0){ge=new s.pointGeometry(M.getx(ee),M.gety(ee));const rt=zl(ge,X.canonical,D,R,O);H=rt.signedDistanceFromCamera>0?B[ee]=rt.point:Ge()}else ge=null;Ae+=ve,ve=re.dist(H)}G&&O&&(ge=ge||new s.pointGeometry(M.getx(ee),M.gety(ee)),B[ee]=H=B[ee]===void 0?H:Ge(),ve=re.dist(H));const st=(Ie-Ae)/ve,be=H.sub(re),pt=be.mult(st)._add(re);o&&pt._add(be._unit()._perp()._mult(o*q));const gt=K+Math.atan2(H.y-re.y,H.x-re.x);return Me.push(pt),U&&(ge=ge||new s.pointGeometry(M.getx(ee),M.gety(ee)),Ze.push(function(rt,nt,vt){const kt=1-vt;return new s.pointGeometry(rt.x*kt+nt.x*vt,rt.y*kt+nt.y*vt)}(Ze.length>0?Ze[Ze.length-1]:ge,ge,st))),{point:pt,angle:gt,path:Me,tilePath:Ze}}const Bl=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Vi(l,t){for(let o=0;o<l;o++){const u=t.length;t.resize(u+4),t.float32.set(Bl,3*u)}}function Mr(l,t,o){const u=t[0],f=t[1];return l[0]=o[0]*u+o[4]*f+o[12],l[1]=o[1]*u+o[5]*f+o[13],l[3]=o[3]*u+o[7]*f+o[15],l}const rn=100;class xa{constructor(t,o,u=new mo(t.width+200,t.height+200,25),f=new mo(t.width+200,t.height+200,25)){this.transform=t,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+rn,this.screenBottomBoundary=t.height+rn,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=o}placeCollisionBox(t,o,u,f,m,_,x){let C=o.projectedAnchorX,M=o.projectedAnchorY,D=o.projectedAnchorZ;const B=o.elevation,O=o.tileID;if(B&&O){const ee=this.transform.projection.upVector(O.canonical,o.tileAnchorX,o.tileAnchorY),H=this.transform.projection.upVectorScale(O.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;C+=ee[0]*B*H,M+=ee[1]*B*H,D+=ee[2]*B*H}const U=this.projectAndGetPerspectiveRatio(_,[C,M,D],o.tileID,this.transform.projection.name==="globe"||!!B||this.transform.pitch>0),G=m*U.perspectiveRatio,R=(o.x1*t+u.x-o.padding)*G+U.point.x,X=(o.y1*t+u.y-o.padding)*G+U.point.y,j=(o.x2*t+u.x+o.padding)*G+U.point.x,q=(o.y2*t+u.y+o.padding)*G+U.point.y,K=U.perspectiveRatio<=.55||U.occluded;return!this.isInsideGrid(R,X,j,q)||!f&&this.grid.hitTest(R,X,j,q,x)||K?{box:[],offscreen:!1,occluded:U.occluded}:{box:[R,X,j,q],offscreen:this.isOffscreen(R,X,j,q),occluded:!1}}placeCollisionCircles(t,o,u,f,m,_,x,C,M,D,B,O,U,G){const R=[],X=this.transform.elevation,j=X?X.getAtTileOffsetFunc(G,this.transform.center.lat,this.transform.worldSize,this.transform.projection):Ge=>[0,0,0],q=new s.pointGeometry(o.tileAnchorX,o.tileAnchorY),K=this.transform.projection.projectTilePoint(o.tileAnchorX,o.tileAnchorY,G.canonical),ee=j(q),H=[K.x+ee[0],K.y+ee[1],K.z+ee[2]],re=this.projectAndGetPerspectiveRatio(_,[H[0],H[1],H[2]],G,this.transform.projection.name==="globe"||!!X||this.transform.pitch>0),{perspectiveRatio:Ae}=re,ve=(D?m/Ae:m*Ae)/s.ONE_EM,Ie=pr(new s.pointGeometry(H[0],H[1]),x,H[2]).point,Me=re.signedDistanceFromCamera>0?_a(ve,f,o.lineOffsetX*ve,o.lineOffsetY*ve,!1,Ie,q,o,u,x,{},X&&!D?j:null,D&&!!X,this.transform.projection,G):null;let Ze=!1,ge=!1,Ve=!0;if(Me&&!re.occluded){const Ge=.5*O*Ae+U,st=new s.pointGeometry(-100,-100),be=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),pt=new fn,gt=Me.first,rt=Me.last;let nt=[];for(let ct=gt.path.length-1;ct>=1;ct--)nt.push(gt.path[ct]);for(let ct=1;ct<rt.path.length;ct++)nt.push(rt.path[ct]);const vt=2.5*Ge;if(C){const ct=nt.map(X?(Mt,qt)=>{const Ii=j(qt<gt.path.length-1?gt.tilePath[gt.path.length-1-qt]:rt.tilePath[qt-gt.path.length+2]);return pr(Mt,C,Ii[2])}:Mt=>pr(Mt,C));nt=ct.some(Mt=>Mt.signedDistanceFromCamera<=0)?[]:ct.map(Mt=>Mt.point)}let kt=[];if(nt.length>0){const ct=nt[0].clone(),Mt=nt[0].clone();for(let qt=1;qt<nt.length;qt++)ct.x=Math.min(ct.x,nt[qt].x),ct.y=Math.min(ct.y,nt[qt].y),Mt.x=Math.max(Mt.x,nt[qt].x),Mt.y=Math.max(Mt.y,nt[qt].y);kt=ct.x>=st.x&&Mt.x<=be.x&&ct.y>=st.y&&Mt.y<=be.y?[nt]:Mt.x<st.x||ct.x>be.x||Mt.y<st.y||ct.y>be.y?[]:s.clipLine([nt],st.x,st.y,be.x,be.y)}for(const ct of kt){pt.reset(ct,.25*Ge);let Mt=0;Mt=pt.length<=.5*Ge?1:Math.ceil(pt.paddedLength/vt)+1;for(let qt=0;qt<Mt;qt++){const Ii=qt/Math.max(Mt-1,1),nr=pt.lerp(Ii),or=nr.x+rn,zr=nr.y+rn;R.push(or,zr,Ge,0);const sn=or-Ge,En=zr-Ge,Qn=or+Ge,In=zr+Ge;if(Ve=Ve&&this.isOffscreen(sn,En,Qn,In),ge=ge||this.isInsideGrid(sn,En,Qn,In),!t&&this.grid.hitTestCircle(or,zr,Ge,B)&&(Ze=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Ze,occluded:!1}}}}return{circles:!M&&Ze||!ge?[]:R,offscreen:Ve,collisionDetected:Ze,occluded:re.occluded}}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let u=1/0,f=1/0,m=-1/0,_=-1/0;for(const D of t){const B=new s.pointGeometry(D.x+rn,D.y+rn);u=Math.min(u,B.x),f=Math.min(f,B.y),m=Math.max(m,B.x),_=Math.max(_,B.y),o.push(B)}const x=this.grid.query(u,f,m,_).concat(this.ignoredGrid.query(u,f,m,_)),C={},M={};for(const D of x){const B=D.key;if(C[B.bucketInstanceId]===void 0&&(C[B.bucketInstanceId]={}),C[B.bucketInstanceId][B.featureIndex])continue;const O=[new s.pointGeometry(D.x1,D.y1),new s.pointGeometry(D.x2,D.y1),new s.pointGeometry(D.x2,D.y2),new s.pointGeometry(D.x1,D.y2)];s.polygonIntersectsPolygon(o,O)&&(C[B.bucketInstanceId][B.featureIndex]=!0,M[B.bucketInstanceId]===void 0&&(M[B.bucketInstanceId]=[]),M[B.bucketInstanceId].push(B.featureIndex))}return M}insertCollisionBox(t,o,u,f,m){(o?this.ignoredGrid:this.grid).insert({bucketInstanceId:u,featureIndex:f,collisionGroupID:m},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,o,u,f,m){const _=o?this.ignoredGrid:this.grid,x={bucketInstanceId:u,featureIndex:f,collisionGroupID:m};for(let C=0;C<t.length;C+=4)_.insertCircle(x,t[C],t[C+1],t[C+2])}projectAndGetPerspectiveRatio(t,o,u,f){const m=[o[0],o[1],o[2],1];let _=!1;return o[2]||this.transform.pitch>0?(s.transformMat4$1(m,m,t),this.fogState&&u&&(_=function(x,C,M,D,B,O){const U=O.calculateFogTileMatrix(B),G=[C,M,D];return s.transformMat4(G,G,U),Ht(x,G,O.pitch,O._fov)}(this.fogState,o[0],o[1],o[2],u.toUnwrapped(),this.transform)>.9)):Mr(m,m,t),{point:new s.pointGeometry((m[0]/m[3]+1)/2*this.transform.width+rn,(-m[1]/m[3]+1)/2*this.transform.height+rn),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/m[3]*.5,1.5),signedDistanceFromCamera:m[3],occluded:f&&m[2]>m[3]||_}}isOffscreen(t,o,u,f){return u<rn||t>=this.screenRightBoundary||f<rn||o>this.screenBottomBoundary}isInsideGrid(t,o,u,f){return u>=0&&t<this.gridRightBoundary&&f>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const t=s.identity([]);return s.translate(t,t,[-100,-100,0]),t}}class Ri{constructor(t,o,u,f){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?o:-o))):f&&u?1:0,this.placed=u}isHidden(){return this.opacity===0&&!this.placed}}class bn{constructor(t,o,u,f,m,_=!1){this.text=new Ri(t?t.text:null,o,u,m),this.icon=new Ri(t?t.icon:null,o,f,m),this.clipped=_}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wn{constructor(t,o,u,f=!1){this.text=t,this.icon=o,this.skipFade=u,this.clipped=f}}class tr{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class kl{constructor(t,o,u,f,m){this.bucketInstanceId=t,this.featureIndex=o,this.sourceLayerIndex=u,this.bucketIndex=f,this.tileID=m}}class nn{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const o=++this.maxGroupID;this.collisionGroups[t]={ID:o,predicate:u=>u.collisionGroupID===o}}return this.collisionGroups[t]}}function Uo(l,t,o,u,f){const{horizontalAlign:m,verticalAlign:_}=s.getAnchorAlignment(l),x=-(m-.5)*t,C=-(_-.5)*o,M=s.evaluateVariableOffset(l,u);return new s.pointGeometry(x+M[0]*f,C+M[1]*f)}function Zo(l,t,o,u,f){const m=new s.pointGeometry(l,t);return o&&m._rotate(u?f:-f),m}class fd{constructor(t,o,u,f,m){this.transform=t.clone(),this.collisionIndex=new xa(this.transform,m),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=o,this.retainedQueryData={},this.collisionGroups=new nn(u),this.collisionCircleArrays={},this.prevPlacement=f,f&&(f.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,o,u,f){const m=u.getBucket(o),_=u.latestFeatureIndex;if(!m||!_||o.id!==m.layerIds[0])return;const x=m.layers[0].layout,C=u.collisionBoxArray,M=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),D=u.tileSize/s.EXTENT,B=u.tileID.toUnwrapped(),O=this.transform.calculateProjMatrix(B),U=x.get("text-pitch-alignment")==="map",G=x.get("text-rotation-alignment")==="map";o.compileFilter();const R=o.dynamicFilter(),X=o.dynamicFilterNeedsFeature(),j=this.transform.calculatePixelsToTileUnitsMatrix(u),q=Ao(O,u.tileID.canonical,U,G,this.transform,j);let K=null;if(U){const re=Go(O,u.tileID.canonical,U,G,this.transform,j);K=s.multiply$1([],this.transform.labelPlaneMatrix,re)}let ee=null;R&&u.latestFeatureIndex&&(ee={unwrappedTileID:B,dynamicFilter:R,dynamicFilterNeedsFeature:X,featureIndex:u.latestFeatureIndex}),this.retainedQueryData[m.bucketInstanceId]=new kl(m.bucketInstanceId,_,m.sourceLayerIndex,m.index,u.tileID);const H={bucket:m,layout:x,posMatrix:O,textLabelPlaneMatrix:q,labelToScreenMatrix:K,clippingData:ee,scale:M,textPixelRatio:D,holdingForFade:u.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(m.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(m.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(f)for(const re of m.sortKeyRanges){const{sortKey:Ae,symbolInstanceStart:ve,symbolInstanceEnd:Ie}=re;t.push({sortKey:Ae,symbolInstanceStart:ve,symbolInstanceEnd:Ie,parameters:H})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:H})}attemptAnchorPlacement(t,o,u,f,m,_,x,C,M,D,B,O,U,G,R,X,j,q){const K=[O.textOffset0,O.textOffset1],ee=Uo(t,u,f,K,m),H=this.collisionIndex.placeCollisionBox(m,o,Zo(ee.x,ee.y,_,x,this.transform.angle),B,C,M,D.predicate);if((!X||this.collisionIndex.placeCollisionBox(G.getSymbolInstanceIconSize(q,this.transform.zoom,U),X,Zo(ee.x,ee.y,_,x,this.transform.angle),B,C,M,D.predicate).box.length!==0)&&H.box.length>0){let re;return this.prevPlacement&&this.prevPlacement.variableOffsets[O.crossTileID]&&this.prevPlacement.placements[O.crossTileID]&&this.prevPlacement.placements[O.crossTileID].text&&(re=this.prevPlacement.variableOffsets[O.crossTileID].anchor),this.variableOffsets[O.crossTileID]={textOffset:K,width:u,height:f,anchor:t,textScale:m,prevAnchor:re},this.markUsedJustification(G,t,O,R),G.allowVerticalPlacement&&(this.markUsedOrientation(G,R,O),this.placedOrientations[O.crossTileID]=R),{shift:ee,placedGlyphBoxes:H}}}placeLayerBucketPart(t,o,u,f){const{bucket:m,layout:_,posMatrix:x,textLabelPlaneMatrix:C,labelToScreenMatrix:M,clippingData:D,textPixelRatio:B,holdingForFade:O,collisionBoxArray:U,partiallyEvaluatedTextSize:G,partiallyEvaluatedIconSize:R,collisionGroup:X}=t.parameters,j=_.get("text-optional"),q=_.get("icon-optional"),K=_.get("text-allow-overlap"),ee=_.get("icon-allow-overlap"),H=_.get("text-rotation-alignment")==="map",re=_.get("text-pitch-alignment")==="map",Ae=_.get("icon-text-fit")!=="none",ve=_.get("symbol-z-order")==="viewport-y";let Ie=K&&(ee||!m.hasIconData()||q),Me=ee&&(K||!m.hasTextData()||j);!m.collisionArrays&&U&&m.deserializeCollisionBoxes(U),u&&f&&m.updateCollisionDebugBuffers(this.transform.zoom,U);const Ze=(ge,Ve,Ge)=>{if(D){const Di={zoom:this.transform.zoom,pitch:this.transform.pitch};let zi=null;if(D.dynamicFilterNeedsFeature){const ri=this.retainedQueryData[m.bucketInstanceId];zi=D.featureIndex.loadFeature({featureIndex:ge.featureIndex,bucketIndex:ri.bucketIndex,sourceLayerIndex:ri.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,D.dynamicFilter)(Di,zi,this.retainedQueryData[m.bucketInstanceId].tileID.canonical,new s.pointGeometry(ge.tileAnchorX,ge.tileAnchorY),this.transform.calculateDistanceTileData(D.unwrappedTileID)))return this.placements[ge.crossTileID]=new wn(!1,!1,!1,!0),void(o[ge.crossTileID]=!0)}if(o[ge.crossTileID])return;if(O)return void(this.placements[ge.crossTileID]=new wn(!1,!1,!1));let st=!1,be=!1,pt=!0,gt=!1,rt=!1,nt=null,vt={box:null,offscreen:null,occluded:null},kt={box:null,offscreen:null,occluded:null},ct=null,Mt=null,qt=null,Ii=0,nr=0,or=0;Ge.textFeatureIndex?Ii=Ge.textFeatureIndex:ge.useRuntimeCollisionCircles&&(Ii=ge.featureIndex),Ge.verticalTextFeatureIndex&&(nr=Ge.verticalTextFeatureIndex);const zr=Di=>{Di.tileID=this.retainedQueryData[m.bucketInstanceId].tileID,(this.transform.elevation||Di.elevation)&&(Di.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[m.bucketInstanceId].tileID,Di.tileAnchorX,Di.tileAnchorY):0)},sn=Ge.textBox;if(sn){zr(sn);const Di=ri=>{let Ni=s.WritingMode.horizontal;if(m.allowVerticalPlacement&&!ri&&this.prevPlacement){const Br=this.prevPlacement.placedOrientations[ge.crossTileID];Br&&(this.placedOrientations[ge.crossTileID]=Br,Ni=Br,this.markUsedOrientation(m,Ni,ge))}return Ni},zi=(ri,Ni)=>{if(m.allowVerticalPlacement&&ge.numVerticalGlyphVertices>0&&Ge.verticalTextBox){for(const Br of m.writingModes)if(Br===s.WritingMode.vertical?(vt=Ni(),kt=vt):vt=ri(),vt&&vt.box&&vt.box.length)break}else vt=ri()};if(_.get("text-variable-anchor")){let ri=_.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ge.crossTileID]){const Ti=this.prevPlacement.variableOffsets[ge.crossTileID];ri.indexOf(Ti.anchor)>0&&(ri=ri.filter(Ur=>Ur!==Ti.anchor),ri.unshift(Ti.anchor))}const Ni=(Ti,Ur,Js)=>{const kr=m.getSymbolInstanceTextSize(G,ge,this.transform.zoom,Ve),Co=(Ti.x2-Ti.x1)*kr+2*Ti.padding,nh=(Ti.y2-Ti.y1)*kr+2*Ti.padding,Ac=Ae&&!ee?Ur:null;Ac&&zr(Ac);let $o={box:[],offscreen:!1,occluded:!1};const zd=K?2*ri.length:ri.length;for(let Yn=0;Yn<zd;++Yn){const gc=this.attemptAnchorPlacement(ri[Yn%ri.length],Ti,Co,nh,kr,H,re,B,x,X,Yn>=ri.length,ge,Ve,m,Js,Ac,G,R);if(gc&&($o=gc.placedGlyphBoxes,$o&&$o.box&&$o.box.length)){st=!0,nt=gc.shift;break}}return $o};zi(()=>Ni(sn,Ge.iconBox,s.WritingMode.horizontal),()=>{const Ti=Ge.verticalTextBox;return Ti&&zr(Ti),m.allowVerticalPlacement&&!(vt&&vt.box&&vt.box.length)&&ge.numVerticalGlyphVertices>0&&Ti?Ni(Ti,Ge.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),vt&&(st=vt.box,pt=vt.offscreen,gt=vt.occluded);const Br=Di(vt&&vt.box);if(!st&&this.prevPlacement){const Ti=this.prevPlacement.variableOffsets[ge.crossTileID];Ti&&(this.variableOffsets[ge.crossTileID]=Ti,this.markUsedJustification(m,Ti.anchor,ge,Br))}}else{const ri=(Ni,Br)=>{const Ti=m.getSymbolInstanceTextSize(G,ge,this.transform.zoom,Ve),Ur=this.collisionIndex.placeCollisionBox(Ti,Ni,new s.pointGeometry(0,0),K,B,x,X.predicate);return Ur&&Ur.box&&Ur.box.length&&(this.markUsedOrientation(m,Br,ge),this.placedOrientations[ge.crossTileID]=Br),Ur};zi(()=>ri(sn,s.WritingMode.horizontal),()=>{const Ni=Ge.verticalTextBox;return m.allowVerticalPlacement&&ge.numVerticalGlyphVertices>0&&Ni?(zr(Ni),ri(Ni,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Di(vt&&vt.box&&vt.box.length)}}if(ct=vt,st=ct&&ct.box&&ct.box.length>0,pt=ct&&ct.offscreen,gt=ct&&ct.occluded,ge.useRuntimeCollisionCircles){const Di=m.text.placedSymbolArray.get(ge.centerJustifiedTextSymbolIndex>=0?ge.centerJustifiedTextSymbolIndex:ge.verticalPlacedTextSymbolIndex),zi=s.evaluateSizeForFeature(m.textSizeData,G,Di),ri=_.get("text-padding");Mt=this.collisionIndex.placeCollisionCircles(K,Di,m.lineVertexArray,m.glyphOffsetArray,zi,x,C,M,u,re,X.predicate,ge.collisionCircleDiameter*zi/s.ONE_EM,ri,this.retainedQueryData[m.bucketInstanceId].tileID),st=K||Mt.circles.length>0&&!Mt.collisionDetected,pt=pt&&Mt.offscreen,gt=Mt.occluded}if(Ge.iconFeatureIndex&&(or=Ge.iconFeatureIndex),Ge.iconBox){const Di=zi=>{zr(zi);const ri=Ae&&nt?Zo(nt.x,nt.y,H,re,this.transform.angle):new s.pointGeometry(0,0),Ni=m.getSymbolInstanceIconSize(R,this.transform.zoom,Ve);return this.collisionIndex.placeCollisionBox(Ni,zi,ri,ee,B,x,X.predicate)};kt&&kt.box&&kt.box.length&&Ge.verticalIconBox?(qt=Di(Ge.verticalIconBox),be=qt.box.length>0):(qt=Di(Ge.iconBox),be=qt.box.length>0),pt=pt&&qt.offscreen,rt=qt.occluded}const En=j||ge.numHorizontalGlyphVertices===0&&ge.numVerticalGlyphVertices===0,Qn=q||ge.numIconVertices===0;if(En||Qn?Qn?En||(be=be&&st):st=be&&st:be=st=be&&st,st&&ct&&ct.box&&this.collisionIndex.insertCollisionBox(ct.box,_.get("text-ignore-placement"),m.bucketInstanceId,kt&&kt.box&&nr?nr:Ii,X.ID),be&&qt&&this.collisionIndex.insertCollisionBox(qt.box,_.get("icon-ignore-placement"),m.bucketInstanceId,or,X.ID),Mt&&(st&&this.collisionIndex.insertCollisionCircles(Mt.circles,_.get("text-ignore-placement"),m.bucketInstanceId,Ii,X.ID),u)){const Di=m.bucketInstanceId;let zi=this.collisionCircleArrays[Di];zi===void 0&&(zi=this.collisionCircleArrays[Di]=new tr);for(let ri=0;ri<Mt.circles.length;ri+=4)zi.circles.push(Mt.circles[ri+0]),zi.circles.push(Mt.circles[ri+1]),zi.circles.push(Mt.circles[ri+2]),zi.circles.push(Mt.collisionDetected?1:0)}const In=this.transform.projection.name!=="globe";Ie=Ie&&(In||!gt),Me=Me&&(In||!rt),this.placements[ge.crossTileID]=new wn(st||Ie,be||Me,pt||m.justReloaded),o[ge.crossTileID]=!0};if(ve){const ge=m.getSortedSymbolIndexes(this.transform.angle);for(let Ve=ge.length-1;Ve>=0;--Ve){const Ge=ge[Ve];Ze(m.symbolInstances.get(Ge),Ge,m.collisionArrays[Ge])}}else for(let ge=t.symbolInstanceStart;ge<t.symbolInstanceEnd;ge++)Ze(m.symbolInstances.get(ge),ge,m.collisionArrays[ge]);if(u&&m.bucketInstanceId in this.collisionCircleArrays){const ge=this.collisionCircleArrays[m.bucketInstanceId];s.invert(ge.invProjMatrix,x),ge.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(t,o,u,f){let m;m=f===s.WritingMode.vertical?u.verticalPlacedTextSymbolIndex:{left:u.leftJustifiedTextSymbolIndex,center:u.centerJustifiedTextSymbolIndex,right:u.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(o)];const _=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex,u.verticalPlacedTextSymbolIndex];for(const x of _)x>=0&&(t.text.placedSymbolArray.get(x).crossTileID=m>=0&&x!==m?0:u.crossTileID)}markUsedOrientation(t,o,u){const f=o===s.WritingMode.horizontal||o===s.WritingMode.horizontalOnly?o:0,m=o===s.WritingMode.vertical?o:0,_=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex];for(const x of _)t.text.placedSymbolArray.get(x).placedOrientation=f;u.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).placedOrientation=m)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let u=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const f=o?o.symbolFadeChange(t):1,m=o?o.opacities:{},_=o?o.variableOffsets:{},x=o?o.placedOrientations:{};for(const C in this.placements){const M=this.placements[C],D=m[C];D?(this.opacities[C]=new bn(D,f,M.text,M.icon,null,M.clipped),u=u||M.text!==D.text.placed||M.icon!==D.icon.placed):(this.opacities[C]=new bn(null,f,M.text,M.icon,M.skipFade,M.clipped),u=u||M.text||M.icon)}for(const C in m){const M=m[C];if(!this.opacities[C]){const D=new bn(M,f,!1,!1);D.isHidden()||(this.opacities[C]=D,u=u||M.text.placed||M.icon.placed)}}for(const C in _)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=_[C]);for(const C in x)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=x[C]);u?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:t)}updateLayerOpacities(t,o){const u={};for(const f of o){const m=f.getBucket(t);m&&f.latestFeatureIndex&&t.id===m.layerIds[0]&&this.updateBucketOpacities(m,u,f.collisionBoxArray)}}updateBucketOpacities(t,o,u){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const f=t.layers[0].layout,m=!!t.layers[0].dynamicFilter(),_=new bn(null,0,!1,!1,!0),x=f.get("text-allow-overlap"),C=f.get("icon-allow-overlap"),M=f.get("text-variable-anchor"),D=f.get("text-rotation-alignment")==="map",B=f.get("text-pitch-alignment")==="map",O=f.get("icon-text-fit")!=="none",U=new bn(null,0,x&&(C||!t.hasIconData()||f.get("icon-optional")),C&&(x||!t.hasTextData()||f.get("text-optional")),!0);!t.collisionArrays&&u&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(u);const G=(X,j,q)=>{for(let K=0;K<j/4;K++)X.opacityVertexArray.emplaceBack(q)};let R=0;for(let X=0;X<t.symbolInstances.length;X++){const j=t.symbolInstances.get(X),{numHorizontalGlyphVertices:q,numVerticalGlyphVertices:K,crossTileID:ee}=j;let H=this.opacities[ee];o[ee]?H=_:H||(H=U,this.opacities[ee]=H),o[ee]=!0;const re=q>0||K>0,Ae=j.numIconVertices>0,ve=this.placedOrientations[j.crossTileID],Ie=ve===s.WritingMode.vertical,Me=ve===s.WritingMode.horizontal||ve===s.WritingMode.horizontalOnly;if(!re&&!Ae||H.isHidden()||R++,re){const Ze=pu(H.text);G(t.text,q,Ie?wa:Ze),G(t.text,K,Me?wa:Ze);const ge=H.text.isHidden();[j.rightJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.leftJustifiedTextSymbolIndex].forEach(st=>{st>=0&&(t.text.placedSymbolArray.get(st).hidden=ge||Ie?1:0)}),j.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(j.verticalPlacedTextSymbolIndex).hidden=ge||Me?1:0);const Ve=this.variableOffsets[j.crossTileID];Ve&&this.markUsedJustification(t,Ve.anchor,j,ve);const Ge=this.placedOrientations[j.crossTileID];Ge&&(this.markUsedJustification(t,"left",j,Ge),this.markUsedOrientation(t,Ge,j))}if(Ae){const Ze=pu(H.icon);j.placedIconSymbolIndex>=0&&(G(t.icon,j.numIconVertices,Ie?wa:Ze),t.icon.placedSymbolArray.get(j.placedIconSymbolIndex).hidden=H.icon.isHidden()),j.verticalPlacedIconSymbolIndex>=0&&(G(t.icon,j.numVerticalIconVertices,Me?wa:Ze),t.icon.placedSymbolArray.get(j.verticalPlacedIconSymbolIndex).hidden=H.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Ze=t.collisionArrays[X];if(Ze){let ge=new s.pointGeometry(0,0),Ve=!0;if(Ze.textBox||Ze.verticalTextBox){if(M){const st=this.variableOffsets[ee];st?(ge=Uo(st.anchor,st.width,st.height,st.textOffset,st.textScale),D&&ge._rotate(B?this.transform.angle:-this.transform.angle)):Ve=!1}m&&(Ve=!H.clipped),Ze.textBox&&on(t.textCollisionBox.collisionVertexArray,H.text.placed,!Ve||Ie,ge.x,ge.y),Ze.verticalTextBox&&on(t.textCollisionBox.collisionVertexArray,H.text.placed,!Ve||Me,ge.x,ge.y)}const Ge=Ve&&Boolean(!Me&&Ze.verticalIconBox);Ze.iconBox&&on(t.iconCollisionBox.collisionVertexArray,H.icon.placed,Ge,O?ge.x:0,O?ge.y:0),Ze.verticalIconBox&&on(t.iconCollisionBox.collisionVertexArray,H.icon.placed,!Ge,O?ge.x:0,O?ge.y:0)}}}if(t.fullyClipped=R===0,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const X=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=X.invProjMatrix,t.placementViewportMatrix=X.viewportMatrix,t.collisionCircleArray=X.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,o){const u=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*u>t}setStale(){this.stale=!0}}function on(l,t,o,u,f){l.emplaceBack(t?1:0,o?1:0,u||0,f||0),l.emplaceBack(t?1:0,o?1:0,u||0,f||0),l.emplaceBack(t?1:0,o?1:0,u||0,f||0),l.emplaceBack(t?1:0,o?1:0,u||0,f||0)}const md=Math.pow(2,25),du=Math.pow(2,24),Er=Math.pow(2,17),va=Math.pow(2,16),Rn=Math.pow(2,9),Ll=Math.pow(2,8),ba=Math.pow(2,1);function pu(l){if(l.opacity===0&&!l.placed)return 0;if(l.opacity===1&&l.placed)return 4294967295;const t=l.placed?1:0,o=Math.floor(127*l.opacity);return o*md+t*du+o*Er+t*va+o*Rn+t*Ll+o*ba+t}const wa=0;class Pl{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&t.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,o,u,f,m){const _=this._bucketParts;for(;this._currentTileIndex<t.length;)if(o.getBucketParts(_,f,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,_.sort((x,C)=>x.sortKey-C.sortKey));this._currentPartIndex<_.length;){const x=_[this._currentPartIndex];if(o.placeLayerBucketPart(x,this._seenCrossTileIDs,u,x.symbolInstanceStart===0),this._currentPartIndex++,m())return!0}return!1}}class Ad{constructor(t,o,u,f,m,_,x,C){this.placement=new fd(t,m,_,x,C),this._currentPlacementIndex=o.length-1,this._forceFullPlacement=u,this._showCollisionBoxes=f,this._done=!1}isDone(){return this._done}continuePlacement(t,o,u){const f=s.exported.now(),m=()=>{const _=s.exported.now()-f;return!this._forceFullPlacement&&_>2};for(;this._currentPlacementIndex>=0;){const _=o[t[this._currentPlacementIndex]],x=this.placement.collisionIndex.transform.zoom;if(_.type==="symbol"&&(!_.minzoom||_.minzoom<=x)&&(!_.maxzoom||_.maxzoom>x)){if(this._inProgressLayer||(this._inProgressLayer=new Pl(_)),this._inProgressLayer.continuePlacement(u[_.source],this.placement,this._showCollisionBoxes,_,m))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const fu=512/s.EXTENT/2;class gd{constructor(t,o,u){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=u;for(let f=0;f<o.length;f++){const m=o.get(f),_=m.key;this.indexedSymbolInstances[_]||(this.indexedSymbolInstances[_]=[]),this.indexedSymbolInstances[_].push({crossTileID:m.crossTileID,coord:this.getScaledCoordinates(m,t)})}}getScaledCoordinates(t,o){const u=fu/Math.pow(2,o.canonical.z-this.tileID.canonical.z);return{x:Math.floor((o.canonical.x*s.EXTENT+t.tileAnchorX)*u),y:Math.floor((o.canonical.y*s.EXTENT+t.tileAnchorY)*u)}}findMatches(t,o,u){const f=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let m=0;m<t.length;m++){const _=t.get(m);if(_.crossTileID)continue;const x=this.indexedSymbolInstances[_.key];if(!x)continue;const C=this.getScaledCoordinates(_,o);for(const M of x)if(Math.abs(M.coord.x-C.x)<=f&&Math.abs(M.coord.y-C.y)<=f&&!u[M.crossTileID]){u[M.crossTileID]=!0,_.crossTileID=M.crossTileID;break}}}}class mu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _d{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const o=Math.round((t-this.lng)/360);if(o!==0)for(const u in this.indexes){const f=this.indexes[u],m={};for(const _ in f){const x=f[_];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+o),m[x.tileID.key]=x}this.indexes[u]=m}this.lng=t}addBucket(t,o,u){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let m=0;m<o.symbolInstances.length;m++)o.symbolInstances.get(m).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const f=this.usedCrossTileIDs[t.overscaledZ];for(const m in this.indexes){const _=this.indexes[m];if(Number(m)>t.overscaledZ)for(const x in _){const C=_[x];C.tileID.isChildOf(t)&&C.findMatches(o.symbolInstances,t,f)}else{const x=_[t.scaledTo(Number(m)).key];x&&x.findMatches(o.symbolInstances,t,f)}}for(let m=0;m<o.symbolInstances.length;m++){const _=o.symbolInstances.get(m);_.crossTileID||(_.crossTileID=u.generate(),f[_.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new gd(t,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(t,o){for(const u in o.indexedSymbolInstances)for(const f of o.indexedSymbolInstances[u])delete this.usedCrossTileIDs[t][f.crossTileID]}removeStaleBuckets(t){let o=!1;for(const u in this.indexes){const f=this.indexes[u];for(const m in f)t[f[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,f[m]),delete f[m],o=!0)}return o}}class Ca{constructor(){this.layerIndexes={},this.crossTileIDs=new mu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,o,u,f){let m=this.layerIndexes[t.id];m===void 0&&(m=this.layerIndexes[t.id]=new _d);let _=!1;const x={};f.name!=="globe"&&m.handleWrapJump(u);for(const C of o){const M=C.getBucket(t);M&&t.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(C.tileID,M,this.crossTileIDs)&&(_=!0),x[M.bucketInstanceId]=!0)}return m.removeStaleBuckets(x)&&(_=!0),_}pruneUnusedLayers(t){const o={};t.forEach(u=>{o[u]=!0});for(const u in this.layerIndexes)o[u]||delete this.layerIndexes[u]}}const Es=(l,t)=>s.emitValidationErrors(l,t&&t.filter(o=>o.identifier!=="source.canvas")),Au=s.pick(at,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),gu=s.pick(at,["setCenter","setZoom","setBearing","setPitch"]),_u={version:8,layers:[],sources:{}},go={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class yr extends s.Evented{constructor(t,o={}){super(),this.map=t,this.dispatcher=new Ot(Ct(),this),this.imageManager=new mi,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(t._requestManager,o.localFontFamily?s.LocalGlyphMode.all:o.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,o.localFontFamily||o.localIdeographFontFamily),this.lineAtlas=new s.LineAtlas(256,512),this.crossTileSymbolIndex=new Ca,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const u=this;this._rtlTextPluginCallback=yr.registerForPluginStateChange(f=>{u.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:f.pluginStatus,pluginURL:f.pluginURL},(m,_)=>{if(s.triggerPluginCompletionEvent(m),_&&_.every(x=>x))for(const x in u._sourceCaches){const C=u._sourceCaches[x],M=C.getSource().type;M!=="vector"&&M!=="geojson"||C.reload()}})}),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const m=this.getSource(f.sourceId);if(m&&m.vectorLayerIds)for(const _ in this._layers){const x=this._layers[_];x.source===m.id&&this._validateLayer(x)}})}loadURL(t,o={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const u=typeof o.validate=="boolean"?o.validate:!s.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,o.accessToken);const f=this.map._requestManager.transformRequest(t,s.ResourceType.Style);this._request=s.getJSON(f,(m,_)=>{this._request=null,m?this.fire(new s.ErrorEvent(m)):_&&this._load(_,u)})}loadJSON(t,o={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(t,o.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(_u,!1)}_updateLayerCount(t,o){const u=o?1:-1;t.is3D()&&(this._num3DLayers+=u),t.type==="circle"&&(this._numCircleLayers+=u),t.type==="symbol"&&(this._numSymbolLayers+=u)}_load(t,o){if(o&&Es(this,s.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t,this._updateMapProjection();for(const f in t.sources)this.addSource(f,t.sources[f],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const u=ti(this.stylesheet.layers);this._order=u.map(f=>f.id),this._layers={},this._serializedLayers={};for(let f of u)f=s.createStyleLayer(f),f.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=f,this._serializedLayers[f.id]=f.serialize(),this._updateLayerCount(f,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new $r(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(t){t?this.stylesheet.projection=t:delete this.stylesheet.projection,this.map._explicitProjection||this.map._updateProjection()}_updateMapProjection(){this.map._explicitProjection?this.applyProjectionUpdate():this.map._updateProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_loadSprite(t){this._spriteRequest=function(o,u,f){let m,_,x;const C=s.exported.devicePixelRatio>1?"@2x":"";let M=s.getJSON(u.transformRequest(u.normalizeSpriteURL(o,C,".json"),s.ResourceType.SpriteJSON),(O,U)=>{M=null,x||(x=O,m=U,B())}),D=s.getImage(u.transformRequest(u.normalizeSpriteURL(o,C,".png"),s.ResourceType.SpriteImage),(O,U)=>{D=null,x||(x=O,_=U,B())});function B(){if(x)f(x);else if(m&&_){const O=s.exported.getImageData(_),U={};for(const G in m){const{width:R,height:X,x:j,y:q,sdf:K,pixelRatio:ee,stretchX:H,stretchY:re,content:Ae}=m[G],ve=new s.RGBAImage({width:R,height:X});s.RGBAImage.copy(O,ve,{x:j,y:q},{x:0,y:0},{width:R,height:X}),U[G]={data:ve,pixelRatio:ee,sdf:K,stretchX:H,stretchY:re,content:Ae}}f(null,U)}}return{cancel(){M&&(M.cancel(),M=null),D&&(D.cancel(),D=null)}}}(t,this.map._requestManager,(o,u)=>{if(this._spriteRequest=null,o)this.fire(new s.ErrorEvent(o));else if(u)for(const f in u)this.imageManager.addImage(f,u[f]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(t){const o=this.getSource(t.source);if(!o)return;const u=t.sourceLayer;u&&(o.type==="geojson"||o.vectorLayerIds&&o.vectorLayerIds.indexOf(u)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${u}" does not exist on source "${o.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const o=[];for(const u of t){const f=this._layers[u];f.type!=="custom"&&o.push(f.serialize())}return o}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&go[t.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const o=this._changed;if(this._changed){const f=Object.keys(this._updatedLayers),m=Object.keys(this._removedLayers);(f.length||m.length)&&this._updateWorkerLayers(f,m);for(const _ in this._updatedSources){const x=this._updatedSources[_];x==="reload"?this._reloadSource(_):x==="clear"&&this._clearSource(_)}this._updateTilesForChangedImages();for(const _ in this._updatedPaintProps)this._layers[_].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const u={};for(const f in this._sourceCaches){const m=this._sourceCaches[f];u[f]=m.used,m.used=!1}for(const f of this._order){const m=this._layers[f];if(m.recalculate(t,this._availableImages),!m.isHidden(t.zoom)){const x=this._getLayerSourceCache(m);x&&(x.used=!0)}const _=this.map.painter;if(_){const x=m.getProgramIds();if(!x)continue;const C=m.getProgramConfiguration(t.zoom);for(const M of x)_.useProgram(M,C)}}for(const f in u){const m=this._sourceCaches[f];u[f]!==m.used&&m.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:m.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),o&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const o in this._sourceCaches)this._sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,o){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(t){if(this._checkLoaded(),Es(this,s.validateStyle(t)))return!1;(t=s.clone$1(t)).layers=ti(t.layers);const o=function(f,m){if(!f)return[{command:at.setStyle,args:[m]}];let _=[];try{if(!$(f.version,m.version))return[{command:at.setStyle,args:[m]}];$(f.center,m.center)||_.push({command:at.setCenter,args:[m.center]}),$(f.zoom,m.zoom)||_.push({command:at.setZoom,args:[m.zoom]}),$(f.bearing,m.bearing)||_.push({command:at.setBearing,args:[m.bearing]}),$(f.pitch,m.pitch)||_.push({command:at.setPitch,args:[m.pitch]}),$(f.sprite,m.sprite)||_.push({command:at.setSprite,args:[m.sprite]}),$(f.glyphs,m.glyphs)||_.push({command:at.setGlyphs,args:[m.glyphs]}),$(f.transition,m.transition)||_.push({command:at.setTransition,args:[m.transition]}),$(f.light,m.light)||_.push({command:at.setLight,args:[m.light]}),$(f.fog,m.fog)||_.push({command:at.setFog,args:[m.fog]}),$(f.projection,m.projection)||_.push({command:at.setProjection,args:[m.projection]});const x={},C=[];(function(B,O,U,G){let R;for(R in O=O||{},B=B||{})B.hasOwnProperty(R)&&(O.hasOwnProperty(R)||ii(R,U,G));for(R in O)O.hasOwnProperty(R)&&(B.hasOwnProperty(R)?$(B[R],O[R])||(B[R].type==="geojson"&&O[R].type==="geojson"&&vn(B,O,R)?U.push({command:at.setGeoJSONSourceData,args:[R,O[R].data]}):fo(R,O,U,G)):Jt(R,O,U))})(f.sources,m.sources,C,x);const M=[];f.layers&&f.layers.forEach(B=>{B.source&&x[B.source]?_.push({command:at.removeLayer,args:[B.id]}):M.push(B)});let D=f.terrain;D&&x[D.source]&&(_.push({command:at.setTerrain,args:[void 0]}),D=void 0),_=_.concat(C),$(D,m.terrain)||_.push({command:at.setTerrain,args:[m.terrain]}),function(B,O,U){O=O||[];const G=(B=B||[]).map(Ut),R=O.map(Ut),X=B.reduce(Rt,{}),j=O.reduce(Rt,{}),q=G.slice(),K=Object.create(null);let ee,H,re,Ae,ve,Ie,Me;for(ee=0,H=0;ee<G.length;ee++)re=G[ee],j.hasOwnProperty(re)?H++:(U.push({command:at.removeLayer,args:[re]}),q.splice(q.indexOf(re,H),1));for(ee=0,H=0;ee<R.length;ee++)re=R[R.length-1-ee],q[q.length-1-ee]!==re&&(X.hasOwnProperty(re)?(U.push({command:at.removeLayer,args:[re]}),q.splice(q.lastIndexOf(re,q.length-H),1)):H++,Ie=q[q.length-ee],U.push({command:at.addLayer,args:[j[re],Ie]}),q.splice(q.length-ee,0,re),K[re]=!0);for(ee=0;ee<R.length;ee++)if(re=R[ee],Ae=X[re],ve=j[re],!K[re]&&!$(Ae,ve))if($(Ae.source,ve.source)&&$(Ae["source-layer"],ve["source-layer"])&&$(Ae.type,ve.type)){for(Me in qe(Ae.layout,ve.layout,U,re,null,at.setLayoutProperty),qe(Ae.paint,ve.paint,U,re,null,at.setPaintProperty),$(Ae.filter,ve.filter)||U.push({command:at.setFilter,args:[re,ve.filter]}),$(Ae.minzoom,ve.minzoom)&&$(Ae.maxzoom,ve.maxzoom)||U.push({command:at.setLayerZoomRange,args:[re,ve.minzoom,ve.maxzoom]}),Ae)Ae.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?qe(Ae[Me],ve[Me],U,re,Me.slice(6),at.setPaintProperty):$(Ae[Me],ve[Me])||U.push({command:at.setLayerProperty,args:[re,Me,ve[Me]]}));for(Me in ve)ve.hasOwnProperty(Me)&&!Ae.hasOwnProperty(Me)&&Me!=="layout"&&Me!=="paint"&&Me!=="filter"&&Me!=="metadata"&&Me!=="minzoom"&&Me!=="maxzoom"&&(Me.indexOf("paint.")===0?qe(Ae[Me],ve[Me],U,re,Me.slice(6),at.setPaintProperty):$(Ae[Me],ve[Me])||U.push({command:at.setLayerProperty,args:[re,Me,ve[Me]]}))}else U.push({command:at.removeLayer,args:[re]}),Ie=q[q.lastIndexOf(re)+1],U.push({command:at.addLayer,args:[ve,Ie]})}(M,m.layers,_)}catch(x){console.warn("Unable to compute style diff:",x),_=[{command:at.setStyle,args:[m]}]}return _}(this.serialize(),t).filter(f=>!(f.command in gu));if(o.length===0)return!1;const u=o.filter(f=>!(f.command in Au));if(u.length>0)throw new Error(`Unimplemented: ${u.map(f=>f.command).join(", ")}.`);return o.forEach(f=>{f.command!=="setTransition"&&this[f.command].apply(this,f.args)}),this.stylesheet=t,this._updateMapProjection(),!0}addImage(t,o){return this.getImage(t)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,o),this._afterImageUpdated(t),this)}updateImage(t,o){this.imageManager.updateImage(t,o)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,o,u={}){if(this._checkLoaded(),this.getSource(t)!==void 0)throw new Error("There is already a source with this ID");if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(s.validateSource,`sources.${t}`,o,null,u))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const f=fe(t,o,this.dispatcher,this);f.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:f.serialize(),sourceId:t}));const m=_=>{const x=(_?"symbol:":"other:")+t,C=this._sourceCaches[x]=new s.SourceCache(x,f,_);(_?this._symbolSourceCaches:this._otherSourceCaches)[t]=C,C.style=this,C.onAdd(this.map)};m(!1),o.type!=="vector"&&o.type!=="geojson"||m(!0),f.onAdd&&f.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const o=this.getSource(t);if(!o)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===t)return this.fire(new s.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${f}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new s.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const u=this._getSourceCaches(t);for(const f of u)delete this._sourceCaches[f.id],delete this._updatedSources[f.id],f.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:f.getSource().id})),f.setEventedParent(null),f.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],o.setEventedParent(null),o.onRemove&&o.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(t,o){this._checkLoaded(),this.getSource(t).setData(o),this._changed=!0}getSource(t){const o=this._getSourceCache(t);return o&&o.getSource()}addLayer(t,o,u={}){this._checkLoaded();const f=t.id;if(this.getLayer(f))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${f}" already exists on this map`)));let m;if(t.type==="custom"){if(Es(this,s.validateCustomStyleLayer(t)))return;m=s.createStyleLayer(t)}else{if(typeof t.source=="object"&&(this.addSource(f,t.source),t=s.clone$1(t),t=s.extend(t,{source:f})),this._validate(s.validateLayer,`layers.${f}`,t,{arrayIndex:-1},u))return;m=s.createStyleLayer(t),this._validateLayer(m),m.setEventedParent(this,{layer:{id:f}}),this._serializedLayers[m.id]=m.serialize(),this._updateLayerCount(m,!0)}const _=o?this._order.indexOf(o):this._order.length;if(o&&_===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${o}" does not exist on this map.`)));this._order.splice(_,0,f),this._layerOrderChanged=!0,this._layers[f]=m;const x=this._getLayerSourceCache(m);if(this._removedLayers[f]&&m.source&&x&&m.type!=="custom"){const C=this._removedLayers[f];delete this._removedLayers[f],C.type!==m.type?this._updatedSources[m.source]="clear":(this._updatedSources[m.source]="reload",x.pause())}this._updateLayer(m),m.onAdd&&m.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,o){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new s.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===o)return;const u=this._order.indexOf(t);this._order.splice(u,1);const f=o?this._order.indexOf(o):this._order.length;o&&f===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${o}" does not exist on this map.`))):(this._order.splice(f,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const o=this._layers[t];if(!o)return void this.fire(new s.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));o.setEventedParent(null),this._updateLayerCount(o,!1);const u=this._order.indexOf(t);this._order.splice(u,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=o,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],o.onRemove&&o.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const o in this._layers)if(this._layers[o].type===t)return!0;return!1}setLayerZoomRange(t,o,u){this._checkLoaded();const f=this.getLayer(t);f?f.minzoom===o&&f.maxzoom===u||(o!=null&&(f.minzoom=o),u!=null&&(f.maxzoom=u),this._updateLayer(f)):this.fire(new s.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(t,o,u={}){this._checkLoaded();const f=this.getLayer(t);if(f){if(!$(f.filter,o))return o==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(s.validateFilter,`layers.${f.id}.filter`,o,{layerType:f.type},u)||(f.filter=s.clone$1(o),this._updateLayer(f)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){const o=this.getLayer(t);return o&&s.clone$1(o.filter)}setLayoutProperty(t,o,u,f={}){this._checkLoaded();const m=this.getLayer(t);m?$(m.getLayoutProperty(o),u)||(m.setLayoutProperty(o,u,f),this._updateLayer(m)):this.fire(new s.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,o){const u=this.getLayer(t);if(u)return u.getLayoutProperty(o);this.fire(new s.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(t,o,u,f={}){this._checkLoaded();const m=this.getLayer(t);m?$(m.getPaintProperty(o),u)||(m.setPaintProperty(o,u,f)&&this._updateLayer(m),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,o){const u=this.getLayer(t);return u&&u.getPaintProperty(o)}setFeatureState(t,o){this._checkLoaded();const u=t.source,f=t.sourceLayer,m=this.getSource(u);if(!m)return void this.fire(new s.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)));const _=m.type;if(_==="geojson"&&f)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(_==="vector"&&!f)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));t.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const x=this._getSourceCaches(u);for(const C of x)C.setFeatureState(f,t.id,o)}removeFeatureState(t,o){this._checkLoaded();const u=t.source,f=this.getSource(u);if(!f)return void this.fire(new s.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)));const m=f.type,_=m==="vector"?t.sourceLayer:void 0;if(m==="vector"&&!_)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(o&&typeof t.id!="string"&&typeof t.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const x=this._getSourceCaches(u);for(const C of x)C.removeFeatureState(_,t.id,o)}getFeatureState(t){this._checkLoaded();const o=t.source,u=t.sourceLayer,f=this.getSource(o);if(f){if(f.type!=="vector"||u)return t.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(o)[0].getFeatureState(u,t.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const o in this._sourceCaches){const u=this._sourceCaches[o].getSource();t[u.id]||(t[u.id]=u.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},o=>o!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0;const o=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&o&&o.getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",o.pause()),this._changed=!0,t.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(t){const o=_=>this._layers[_].type==="fill-extrusion",u={},f=[];for(let _=this._order.length-1;_>=0;_--){const x=this._order[_];if(o(x)){u[x]=_;for(const C of t){const M=C[x];if(M)for(const D of M)f.push(D)}}}f.sort((_,x)=>x.intersectionZ-_.intersectionZ);const m=[];for(let _=this._order.length-1;_>=0;_--){const x=this._order[_];if(o(x))for(let C=f.length-1;C>=0;C--){const M=f[C].feature;if(u[M.layer.id]<_)break;m.push(M),f.pop()}else for(const C of t){const M=C[x];if(M)for(const D of M)m.push(D.feature)}}return m}queryRenderedFeatures(t,o,u){o&&o.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",o.filter,null,o);const f={};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const C of o.layers){const M=this._layers[C];if(!M)return this.fire(new s.ErrorEvent(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];f[M.source]=!0}}const m=[];o.availableImages=this._availableImages;const _=o&&o.layers?o.layers.some(C=>{const M=this.getLayer(C);return M&&M.is3D()}):this.has3DLayers(),x=Pe.createFromScreenPoints(t,u);for(const C in this._sourceCaches){const M=this._sourceCaches[C].getSource().id;o.layers&&!f[M]||m.push(_e(this._sourceCaches[C],this._layers,this._serializedLayers,x,o,u,_,!!this.map._showQueryGeometry))}return this.placement&&m.push(function(C,M,D,B,O,U,G){const R={},X=U.queryRenderedSymbols(B),j=[];for(const q of Object.keys(X).map(Number))j.push(G[q]);j.sort(Xe);for(const q of j){const K=q.featureIndex.lookupSymbolFeatures(X[q.bucketInstanceId],M,q.bucketIndex,q.sourceLayerIndex,O.filter,O.layers,O.availableImages,C);for(const ee in K){const H=R[ee]=R[ee]||[],re=K[ee];re.sort((Ae,ve)=>{const Ie=q.featureSortOrder;if(Ie){const Me=Ie.indexOf(Ae.featureIndex);return Ie.indexOf(ve.featureIndex)-Me}return ve.featureIndex-Ae.featureIndex});for(const Ae of re)H.push(Ae)}}for(const q in R)R[q].forEach(K=>{const ee=K.feature,H=D(C[q]).getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=H});return R}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),x.screenGeometry,o,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(m)}querySourceFeatures(t,o){o&&o.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",o.filter,null,o);const u=this._getSourceCaches(t);let f=[];for(const m of u)f=f.concat(Be(m,o));return f}addSourceType(t,o,u){return yr.getSourceType(t)?u(new Error(`A source type called "${t}" already exists.`)):(yr.setSourceType(t,o),o.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:o.workerSourceURL},u):u(null,null))}getLight(){return this.light.getLight()}setLight(t,o={}){this._checkLoaded();const u=this.light.getLight();let f=!1;for(const _ in t)if(!$(t[_],u[_])){f=!0;break}if(!f)return;const m={now:s.exported.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,o),this.light.updateTransitions(m)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(t,o=1){if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(o===1){if(typeof t.source=="object"){const u="terrain-dem-src";this.addSource(u,t.source),t=s.clone$1(t),t=s.extend(t,{source:u})}if(this._validate(s.validateTerrain,"terrain",t))return}if(!this.terrain||this.terrain&&o!==this.terrain.drapeRenderMode)this._createTerrain(t,o);else{const u=this.terrain,f=u.get();for(const m in t)if(!$(t[m],f[m])){u.set(t),this.stylesheet.terrain=t;const _={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};u.updateTransitions(_);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(t){const o=this.fog=new dr(t,this.map.transform);this.stylesheet.fog=t;const u={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};o.updateTransitions(u)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const t of this.map._markers)t._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const o=this.fog,u=o.get();for(const f in t)if(!$(t[f],u[f])){o.set(t),this.stylesheet.fog=t;const m={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};o.updateTransitions(m);break}}else this._createFog(t);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter(u=>this.isLayerDraped(this._layers[u])),o=this._order.filter(u=>!this.isLayerDraped(this._layers[u]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...o)}_createTerrain(t,o){const u=this.terrain=new ci(t,o);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const f={now:s.exported.now(),transition:s.extend({duration:0},this.stylesheet.transition)};u.updateTransitions(f)}_force3DLayerUpdate(){for(const t in this._layers){const o=this._layers[t];o.type==="fill-extrusion"&&this._updateLayer(o)}}_forceSymbolLayerUpdate(){for(const t in this._layers){const o=this._layers[t];o.type==="symbol"&&this._updateLayer(o)}}_validate(t,o,u,f,m={}){return(!m||m.validate!==!1)&&Es(this,t.call(s.validateStyle,s.extend({key:o,style:this.serialize(),value:u,styleSpec:s.spec},f)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const o=this._getSourceCaches(t);for(const u of o)u.clearTiles()}_reloadSource(t){const o=this._getSourceCaches(t);for(const u of o)u.resume(),u.reload()}_updateSources(t){for(const o in this._sourceCaches)this._sourceCaches[o].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const o=this._sourceCaches[t];o.resume(),o.reload()}}_updatePlacement(t,o,u,f,m=!1){let _=!1,x=!1;const C={};for(const M of this._order){const D=this._layers[M];if(D.type!=="symbol")continue;if(!C[D.source]){const O=this._getLayerSourceCache(D);if(!O)continue;C[D.source]=O.getRenderableIds(!0).map(U=>O.getTileByID(U)).sort((U,G)=>G.tileID.overscaledZ-U.tileID.overscaledZ||(U.tileID.isLessThan(G.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(D,C[D.source],t.center.lng,t.projection);_=_||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),m=m||this._layerOrderChanged||u===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(m||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),t.zoom))&&(this.pauseablePlacement=new Ad(t,this._order,m,o,u,f,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),x=!0),_&&this.pauseablePlacement.placement.setStale()),x||_)for(const M of this._order){const D=this._layers[M];D.type==="symbol"&&this.placement.updateLayerOpacities(D,C[D.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,o,u){this.imageManager.getImages(o.icons,u),this._updateTilesForChangedImages();const f=m=>{m&&m.setDependencies(o.tileID.key,o.type,o.icons)};f(this._otherSourceCaches[o.source]),f(this._symbolSourceCaches[o.source])}getGlyphs(t,o,u){this.glyphManager.getGlyphs(o.stacks,u)}getResource(t,o,u){return s.makeRequest(o,u)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return t.type==="symbol"?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const o=[];return this._otherSourceCaches[t]&&o.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&o.push(this._symbolSourceCaches[t]),o}_isSourceCacheLoaded(t){const o=this._getSourceCaches(t);return o.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):o.every(u=>u.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}yr.getSourceType=function(l){return me[l]},yr.setSourceType=function(l,t){me[l]=t},yr.registerForPluginStateChange=s.registerForPluginStateChange;var Is=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}
#endif`,Ds="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let _o={},Nn={};_o=_t("",`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
float unpack_depth(vec4 rgba_depth)
{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,!0),Nn=_t(`#ifdef FOG
uniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,`#ifdef FOG
uniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,!0);const Ta=_t(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef TERRAIN
highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#endif`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Ss=Is;var zs={background:_t(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:_t(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:_t(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec2 scaled_extrude=extrude*a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=scaled_extrude.x*surface_vectors[0]+scaled_extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
#if defined(SCALE_WITH_MAP) && defined(PROJECTION_GLOBE_VIEW)
view_scale*=a_scale;
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:_t("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:_t(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
extrude*=a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:_t(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:_t("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:_t("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:_t("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:_t(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:_t(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:_t(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:_t(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:_t(`varying vec4 v_color;void main() {vec4 color=v_color;
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
vec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(pos.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:_t(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:_t(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_t(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:_t(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;varying highp vec2 v_uv;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
vec4 out_color=texture2D(u_gradient_image,v_uv);
#else
vec4 out_color=color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#ifdef RENDER_LINE_GRADIENT
attribute vec3 a_packed;
#else
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;varying highp vec2 v_uv;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_GRADIENT
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];float a_linesofar=a_packed[2];highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:_t(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:_t(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:_t(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);
#else
vec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);
#endif
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:_t(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);
#else
vec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);
#endif
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:_t(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchor_z=a_z_tile_anchor.x;vec2 tile_anchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchor_z)+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(a_pos,anchor_z)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),anchor_z,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchor_z),mercator_pos,u_zoom_transition);
#else
vec3 proj_pos=vec3(a_projected_pos.xy,anchor_z);
#endif
#ifdef PROJECTED_POS_ON_VIEWPORT
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:_t(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
}`),terrainDepth:_t(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:_t(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ds),skyboxGradient:_t(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ds),skyboxCapture:_t(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:_t(`uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 merc_pos=a_merc_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;uv=uv*EXTENT;vec4 up_vector=vec4(elevationVector(uv),1.0);float height=elevation(uv);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
vec4 globe=u_globe_matrix*vec4(globe_pos+up_vector.xyz*height,1.0);vec4 mercator=vec4(0.0);if (u_zoom_transition > 0.0) {mercator=vec4(merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;}vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);}`),globeAtmosphere:_t(`uniform float u_opacity;uniform highp float u_fadeout_range;uniform vec3 u_start_color;uniform vec3 u_end_color;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;varying highp vec3 v_ray_dir;void main() {highp vec3 dir=normalize(v_ray_dir);highp vec3 closest_point=abs(dot(u_globe_pos,dir))*dir;float norm_dist_from_center=length(closest_point-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 1.0)
discard;float t=clamp(1.0-sqrt(norm_dist_from_center-1.0)/u_fadeout_range,0.0,1.0);vec3 color=mix(u_start_color,u_end_color,1.0-t);gl_FragColor=vec4(color*t*u_opacity,u_opacity);}`,"attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;varying highp vec3 v_ray_dir;void main() {v_ray_dir=mix(mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);gl_Position=vec4(a_pos,1.0);}")};function _t(l,t,o){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,m=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),_=l.match(f),x=t.match(f),C=Is.match(f);let M=x?x.concat(_):_;o||(_o.staticUniforms&&(M=_o.staticUniforms.concat(M)),Nn.staticUniforms&&(M=Nn.staticUniforms.concat(M))),M&&(M=M.concat(C));const D={};return{fragmentSource:l=l.replace(u,(B,O,U,G,R)=>(D[R]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${R}
varying ${U} ${G} ${R};
#else
uniform ${U} ${G} u_${R};
#endif
`:`
#ifdef HAS_UNIFORM_u_${R}
    ${U} ${G} ${R} = u_${R};
#endif
`)),vertexSource:t=t.replace(u,(B,O,U,G,R)=>{const X=G==="float"?"vec2":"vec4",j=R.match(/color/)?"color":X;return D[R]?O==="define"?`
#ifndef HAS_UNIFORM_u_${R}
uniform lowp float u_${R}_t;
attribute ${U} ${X} a_${R};
varying ${U} ${G} ${R};
#else
uniform ${U} ${G} u_${R};
#endif
`:j==="vec4"?`
#ifndef HAS_UNIFORM_u_${R}
    ${R} = a_${R};
#else
    ${U} ${G} ${R} = u_${R};
#endif
`:`
#ifndef HAS_UNIFORM_u_${R}
    ${R} = unpack_mix_${j}(a_${R}, u_${R}_t);
#else
    ${U} ${G} ${R} = u_${R};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${R}
uniform lowp float u_${R}_t;
attribute ${U} ${X} a_${R};
#else
uniform ${U} ${G} u_${R};
#endif
`:j==="vec4"?`
#ifndef HAS_UNIFORM_u_${R}
    ${U} ${G} ${R} = a_${R};
#else
    ${U} ${G} ${R} = u_${R};
#endif
`:`
#ifndef HAS_UNIFORM_u_${R}
    ${U} ${G} ${R} = unpack_mix_${j}(a_${R}, u_${R}_t);
#else
    ${U} ${G} ${R} = u_${R};
#endif
`}),staticAttributes:m,staticUniforms:M}}class Ma{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,o,u,f,m,_,x,C){this.context=t;let M=this.boundPaintVertexBuffers.length!==f.length;for(let D=0;!M&&D<f.length;D++)this.boundPaintVertexBuffers[D]!==f[D]&&(M=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===o&&this.boundLayoutVertexBuffer===u&&!M&&this.boundIndexBuffer===m&&this.boundVertexOffset===_&&this.boundDynamicVertexBuffer===x&&this.boundDynamicVertexBuffer2===C?(t.bindVertexArrayOES.set(this.vao),x&&x.bind(),m&&m.dynamicDraw&&m.bind(),C&&C.bind()):this.freshBind(o,u,f,m,_,x,C)}freshBind(t,o,u,f,m,_,x){let C;const M=t.numAttributes,D=this.context,B=D.gl;if(D.extVertexArrayObject)this.vao&&this.destroy(),this.vao=D.extVertexArrayObject.createVertexArrayOES(),D.bindVertexArrayOES.set(this.vao),C=0,this.boundProgram=t,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=f,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=_,this.boundDynamicVertexBuffer2=x;else{C=D.currentNumAttributes||0;for(let O=M;O<C;O++)B.disableVertexAttribArray(O)}o.enableAttributes(B,t);for(const O of u)O.enableAttributes(B,t);_&&_.enableAttributes(B,t),x&&x.enableAttributes(B,t),o.bind(),o.setVertexAttribPointers(B,t,m);for(const O of u)O.bind(),O.setVertexAttribPointers(B,t,m);_&&(_.bind(),_.setVertexAttribPointers(B,t,m)),f&&f.bind(),x&&(x.bind(),x.setVertexAttribPointers(B,t,m)),D.currentNumAttributes=M}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function yu(l,t){const o=Math.pow(2,t.canonical.z),u=t.canonical.y;return[new s.MercatorCoordinate(0,u/o).toLngLat().lat,new s.MercatorCoordinate(0,(u+1)/o).toLngLat().lat]}function xu(l,t,o,u,f,m,_){const x=l.context,C=x.gl,M=o.fbo;if(!M)return;l.prepareDrawTile();const D=l.useProgram("hillshade");x.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,M.colorAttachment.get());const B=((R,X,j,q)=>{const K=j.paint.get("hillshade-shadow-color"),ee=j.paint.get("hillshade-highlight-color"),H=j.paint.get("hillshade-accent-color");let re=j.paint.get("hillshade-illumination-direction")*(Math.PI/180);j.paint.get("hillshade-illumination-anchor")==="viewport"&&(re-=R.transform.angle);const Ae=!R.options.moving;return{u_matrix:q||R.transform.calculateProjMatrix(X.tileID.toUnwrapped(),Ae),u_image:0,u_latrange:yu(0,X.tileID),u_light:[j.paint.get("hillshade-exaggeration"),re],u_shadow:K,u_highlight:ee,u_accent:H}})(l,o,u,l.terrain?t.projMatrix:null);l.prepareDrawProgram(x,D,t.toUnwrapped());const{tileBoundsBuffer:O,tileBoundsIndexBuffer:U,tileBoundsSegments:G}=l.getTileBoundsBuffers(o);D.draw(x,C.TRIANGLES,f,m,_,s.CullFaceMode.disabled,B,u.id,O,U,G)}function Rl(l,t,o){if(!t.needsDEMTextureUpload)return;const u=l.context,f=u.gl;u.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||l.getTileTexture(o.stride);const m=o.getPixels();t.demTexture?t.demTexture.update(m,{premultiply:!1}):t.demTexture=new s.Texture(u,m,f.RGBA,{premultiply:!1}),t.needsDEMTextureUpload=!1}function Nl(l,t,o,u,f,m){const _=l.context,x=_.gl;if(!t.dem)return;const C=t.dem;if(_.activeTexture.set(x.TEXTURE1),Rl(l,t,C),!t.demTexture)return;t.demTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE);const M=C.dim;_.activeTexture.set(x.TEXTURE0);let D=t.fbo;if(!D){const G=new s.Texture(_,{width:M,height:M,data:null},x.RGBA);G.bind(x.LINEAR,x.CLAMP_TO_EDGE),D=t.fbo=_.createFramebuffer(M,M,!0),D.colorAttachment.set(G.texture)}_.bindFramebuffer.set(D.framebuffer),_.viewport.set([0,0,M,M]);const{tileBoundsBuffer:B,tileBoundsIndexBuffer:O,tileBoundsSegments:U}=l.getMercatorTileBoundsBuffers();l.useProgram("hillshadePrepare").draw(_,x.TRIANGLES,u,f,m,s.CullFaceMode.disabled,((G,R)=>{const X=R.stride,j=s.create();return s.ortho(j,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(j,j,[0,-s.EXTENT,0]),{u_matrix:j,u_image:1,u_dimension:[X,X],u_zoom:G.overscaledZ,u_unpack:R.unpackVector}})(t.tileID,C),o.id,B,O,U),t.needsHillshadePrepare=!1}const Ol=(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_image0:new s.Uniform1i(l,t.u_image0),u_skirt_height:new s.Uniform1f(l,t.u_skirt_height)}),vu=(l,t)=>({u_matrix:l,u_image0:0,u_skirt_height:t}),bu=(l,t,o,u,f,m)=>({u_proj_matrix:Float32Array.from(l),u_globe_matrix:t,u_merc_matrix:o,u_zoom_transition:u,u_merc_center:f,u_image0:0,u_grid_matrix:m?Float32Array.from(m):new Float32Array(9)});function Ea(l,t){return l!=null&&t!=null&&!(!l.hasData()||!t.hasData())&&l.demTexture!=null&&t.demTexture!=null&&l.tileID.key!==t.tileID.key}const On=new class{constructor(){this.operations={}}newMorphing(l,t,o,u,f){if(l in this.operations){const m=this.operations[l];m.to.tileID.key!==o.tileID.key&&(m.queued=o)}else this.operations[l]={startTime:u,phase:0,duration:f,from:t,to:o,queued:null}}getMorphValuesForProxy(l){if(!(l in this.operations))return null;const t=this.operations[l];return{from:t.from,to:t.to,phase:t.phase}}update(l){for(const t in this.operations){const o=this.operations[t];for(o.phase=(l-o.startTime)/o.duration;o.phase>=1||!this._validOp(o);)if(!this._nextOp(o,l)){delete this.operations[t];break}}}_nextOp(l,t){return!!l.queued&&(l.from=l.to,l.to=l.queued,l.queued=null,l.phase=0,l.startTime=t,!0)}_validOp(l){return l.from.hasData()&&l.to.hasData()}},jo={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Gl(l,t){const o=1<<l.z;return!t&&(l.x===0||l.x===o-1)||l.y===0||l.y===o-1}const Ia=l=>({u_matrix:l});function Fl(l,t,o,u,f){if(f>0){const m=s.exported.now(),_=(m-l.timeAdded)/f,x=t?(m-t.timeAdded)/f:-1,C=o.getSource(),M=u.coveringZoomLevel({tileSize:C.tileSize,roundZoom:C.roundZoom}),D=!t||Math.abs(t.tileID.overscaledZ-M)>Math.abs(l.tileID.overscaledZ-M),B=D&&l.refreshedUponExpiration?1:s.clamp(D?_:1-x,0,1);return l.refreshedUponExpiration&&_>=1&&(l.refreshedUponExpiration=!1),t?{opacity:1,mix:1-B}:{opacity:B,mix:0}}return{opacity:1,mix:0}}const yd=2*s.mercatorZfromAltitude(1,0)*s.GLOBE_RADIUS*Math.PI;class Bs extends s.SourceCache{constructor(t){const o={type:"raster-dem",maxzoom:t.transform.maxZoom},u=new Ot(Ct(),null),f=fe("mock-dem",o,u,t.style);super("mock-dem",f,!1),f.setEventedParent(this),this._sourceLoaded=!0}_loadTile(t,o){t.state="loaded",o(null)}}class ks extends s.SourceCache{constructor(t){const o=fe("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new Ot(Ct(),null),t.style);super("proxy",o,!1),o.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,o,u){if(t.freezeTileCoverage)return;this.transform=t;const f=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((m,_)=>{if(m[_.key]="",!this._tiles[_.key]){const x=new s.Tile(_,this._source.tileSize*_.overscaleFactor(),t.tileZoom);x.state="loaded",this._tiles[_.key]=x}return m},{});for(const m in this._tiles)m in f||(this.freeFBO(m),this._tiles[m].unloadVectorData(),delete this._tiles[m])}freeFBO(t){const o=this.proxyCachedFBO[t];if(o!==void 0){const u=Object.values(o);this.renderCachePool.push(...u),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach(t=>t.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Vl extends s.OverscaledTileID{constructor(t,o,u){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=o,this.projMatrix=u}}class Ir extends s.Elevation{constructor(t,o){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[u,f,m]=function(C){const M=new s.StructArrayLayout4i8,D=new s.StructArrayLayout3ui6,B=131;M.reserve(17161),D.reserve(33800);const O=s.EXTENT/128,U=s.EXTENT+O/2,G=U+O;for(let X=-O;X<G;X+=O)for(let j=-O;j<G;j+=O){const q=j<0||j>U||X<0||X>U?24575:0,K=s.clamp(Math.round(j),0,s.EXTENT),ee=s.clamp(Math.round(X),0,s.EXTENT);M.emplaceBack(K+q,ee,K,ee)}const R=(X,j)=>{const q=j*B+X;D.emplaceBack(q+1,q,q+B),D.emplaceBack(q+B,q+B+1,q+1)};for(let X=1;X<129;X++)for(let j=1;j<129;j++)R(j,X);return[0,129].forEach(X=>{for(let j=0;j<130;j++)R(j,X),R(X,j)}),[M,D,32768]}(),_=t.context;this.gridBuffer=_.createVertexBuffer(u,s.boundsAttributes.members),this.gridIndexBuffer=_.createIndexBuffer(f),this.gridSegments=s.SegmentVector.simpleSegment(0,0,u.length,f.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,u.length,m),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new ks(o.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,0,s.EXTENT,0,s.EXTENT,0,1);const x=_.gl;this._overlapStencilMode=new s.StencilMode({func:x.GEQUAL,mask:255},0,255,x.KEEP,x.KEEP,x.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=o,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Bs(o.map)}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency()}update(t,o,u){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const f=t.terrain.properties;this.sourceCache=t.terrain.drapeRenderMode===0?this._mockSourceCache:t._getSourceCache(f.get("source")),this._exaggeration=f.get("exaggeration");const m=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const _=this.getScaledDemTileSize();this.sourceCache.update(o,_,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,m(),this._initializing=!0),m(),o.updateElevation(!u),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(o),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(t){this._findCoveringTileCache[t]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||t.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(t){t.coord&&t.dataType==="source"?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):t.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(t=>t.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const o=this.proxySourceCache,u=this.painter.transform;this._initializing&&(this._initializing=u._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(u.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const f=this.proxyCoords=o.getIds().map(C=>{const M=o.getTileByID(C).tileID;return M.projMatrix=u.calculateProjMatrix(M.toUnwrapped()),M});(function(C,M){const D=M.transform.pointCoordinate(M.transform.getCameraPoint()),B=new s.pointGeometry(D.x,D.y);C.sort((O,U)=>{if(U.overscaledZ-O.overscaledZ)return U.overscaledZ-O.overscaledZ;const G=new s.pointGeometry(O.canonical.x+(1<<O.canonical.z)*O.wrap,O.canonical.y),R=new s.pointGeometry(U.canonical.x+(1<<U.canonical.z)*U.wrap,U.canonical.y),X=B.mult(1<<O.canonical.z);return X.x-=.5,X.y-=.5,X.distSqr(G)-X.distSqr(R)})})(f,this.painter),this._previousZoom=u.zoom;const m=this.proxyToSource||{};this.proxyToSource={},f.forEach(C=>{this.proxyToSource[C.key]={}}),this.terrainTileForTile={};const _=this._style._sourceCaches;for(const C in _){const M=_[C];if(!M.used||(M!==this.sourceCache&&this.resetTileLookupCache(M.id),this._setupProxiedCoordsForOrtho(M,t[C],m),M.usedForTerrain))continue;const D=t[C];M.getSource().reparseOverscaled&&this._assignTerrainTiles(D)}this.proxiedCoords[o.id]=f.map(C=>new Vl(C,C.key,this.orthoMatrix)),this._assignTerrainTiles(f),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(m),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const x={};this._visibleDemTiles=[];for(const C of this.proxyCoords){const M=this.terrainTileForTile[C.key];if(!M)continue;const D=M.tileID.key;D in x||(this._visibleDemTiles.push(M),x[D]=D)}}_assignTerrainTiles(t){this._initializing||t.forEach(o=>{if(this.terrainTileForTile[o.key])return;const u=this._findTileCoveringTileID(o,this.sourceCache);u&&(this.terrainTileForTile[o.key]=u)})}_prepareDEMTextures(){const t=this.painter.context,o=t.gl;for(const u in this.terrainTileForTile){const f=this.terrainTileForTile[u],m=f.dem;!m||f.demTexture&&!f.needsDEMTextureUpload||(t.activeTexture.set(o.TEXTURE1),Rl(this.painter,f,m))}}_prepareDemTileUniforms(t,o,u,f){if(!o||o.demTexture==null)return!1;const m=t.tileID.canonical,_=Math.pow(2,o.tileID.canonical.z-m.z),x=f||"";return u[`u_dem_tl${x}`]=[m.x*_%1,m.y*_%1],u[`u_dem_scale${x}`]=_,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,o=t.gl;if(!this._emptyDepthBufferTexture){const u=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(t,u,o.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let t=0;const o=this._visibleDemTiles.reduce((u,f)=>{if(!f.dem)return u;const m=f.dem.tree.minimums[0];return m>0&&t++,u+m},0);return t?o/t:0}_updateEmptyDEMTexture(){const t=this.painter.context,o=t.gl;t.activeTexture.set(o.TEXTURE2);const u=this._getLoadedAreaMinimum(),f=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(u,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let m=this._emptyDEMTexture;return m?m.update(f,{premultiply:!1}):m=this._emptyDEMTexture=new s.Texture(t,f,o.RGBA,{premultiply:!1}),m}setupElevationDraw(t,o,u){const f=this.painter.context,m=f.gl,_=(x=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(x),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var x;_.u_dem_size=this.sourceCache.getSource().tileSize,_.u_exaggeration=this.exaggeration();const C=this.painter.transform,M=C.projection,D=t.tileID.canonical;_.u_tile_tl_up=M.upVector(D,0,0),_.u_tile_tr_up=M.upVector(D,s.EXTENT,0),_.u_tile_br_up=M.upVector(D,s.EXTENT,s.EXTENT),_.u_tile_bl_up=M.upVector(D,0,s.EXTENT),_.u_tile_up_scale=u&&u.useDenormalizedUpVectorScale?yd:M.upVectorScale(D,C.center.lat,C.worldSize).metersToTile;let B=null,O=null,U=1;if(u&&u.morphing&&this._useVertexMorphing){const G=u.morphing.srcDemTile,R=u.morphing.dstDemTile;U=u.morphing.phase,G&&R&&(this._prepareDemTileUniforms(t,G,_,"_prev")&&(O=G),this._prepareDemTileUniforms(t,R,_)&&(B=R))}if(O&&B?(f.activeTexture.set(m.TEXTURE2),B.demTexture.bind(m.NEAREST,m.CLAMP_TO_EDGE,m.NEAREST),f.activeTexture.set(m.TEXTURE4),O.demTexture.bind(m.NEAREST,m.CLAMP_TO_EDGE,m.NEAREST),_.u_dem_lerp=U):(B=this.terrainTileForTile[t.tileID.key],f.activeTexture.set(m.TEXTURE2),(this._prepareDemTileUniforms(t,B,_)?B.demTexture:this.emptyDEMTexture).bind(m.NEAREST,m.CLAMP_TO_EDGE)),f.activeTexture.set(m.TEXTURE3),u&&u.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(m.NEAREST,m.CLAMP_TO_EDGE),this._depthFBO&&(_.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(m.NEAREST,m.CLAMP_TO_EDGE),_.u_depth_size_inv=[1,1]),u&&u.useMeterToDem&&B){const G=(1<<B.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;_.u_meter_to_dem=G}u&&u.labelPlaneMatrixInv&&(_.u_label_plane_matrix_inv=u.labelPlaneMatrixInv),o.setTerrainUniformValues(f,_)}renderToBackBuffer(t){const o=this.painter,u=this.painter.context;t.length!==0&&(u.bindFramebuffer.set(null),u.viewport.set([0,0,o.width,o.height]),this.renderingToTexture=!1,function(f,m,_,x,C){if(f.transform.projection.name==="globe")(function(M,D,B,O,U){const G=M.context,R=G.gl;let X,j;const q=M.options.showTerrainWireframe?2:0,K=(Me,Ze)=>{if(j===Me)return;const ge=[jo[Me],"PROJECTION_GLOBE_VIEW"];Ze&&ge.push(jo[q]),X=M.useProgram("globeRaster",null,ge),j=Me},ee=M.colorModeForRenderPass(),H=new s.DepthMode(R.LEQUAL,s.DepthMode.ReadWrite,M.depthRangeFor3D);On.update(U);const re=M.transform,Ae=s.calculateGlobeMercatorMatrix(re),ve=[s.mercatorXfromLng(re.center.lng),s.mercatorYfromLat(re.center.lat)],Ie=M.globeSharedBuffers;if((q?[!1,!0]:[!1]).forEach(Me=>{j=-1;const Ze=Me?R.LINES:R.TRIANGLES;for(const ge of O){const Ve=B.getTile(ge),Ge=s.StencilMode.disabled,st=D.prevTerrainTileForTile[ge.key],be=D.terrainTileForTile[ge.key];Ea(st,be)&&On.newMorphing(ge.key,st,be,U,250),G.activeTexture.set(R.TEXTURE0),Ve.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE);const pt=On.getMorphValuesForProxy(ge.key),gt=pt?1:0,rt={useDenormalizedUpVectorScale:!0};pt&&s.extend$1(rt,{morphing:{srcDemTile:pt.from,dstDemTile:pt.to,phase:s.easeCubicInOut(pt.phase)}});const nt=Float32Array.from(re.globeMatrix),vt=s.globeTileLatLngCorners(ge.canonical),kt=s.getGridMatrix(ge.canonical,vt),ct=bu(re.projMatrix,nt,Ae,s.globeToMercatorTransition(re.zoom),ve,kt);if(K(gt,Me),D.setupElevationDraw(Ve,X,rt),M.prepareDrawProgram(G,X,ge.toUnwrapped()),Ie){const[Mt,qt,Ii]=Me?Ie.getWirefameBuffers(M.context):Ie.getGridBuffers();X.draw(G,Ze,H,Ge,ee,s.CullFaceMode.backCCW,ct,"globe_raster",Mt,qt,Ii)}}}),Ie){X=M.useProgram("globeRaster",null,["GLOBE_POLES","PROJECTION_GLOBE_VIEW"]);for(const Me of O){const{x:Ze,y:ge,z:Ve}=Me.canonical,Ge=ge===0,st=ge===(1<<Ve)-1,[be,pt,gt,rt]=Ie.getPoleBuffers(Ve);if(rt&&(Ge||st)){const nt=B.getTile(Me);G.activeTexture.set(R.TEXTURE0),nt.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE);let vt=s.globePoleMatrixForTile(Ve,Ze,re);const kt=(ct,Mt)=>ct.draw(G,R.TRIANGLES,H,s.StencilMode.disabled,ee,s.CullFaceMode.disabled,bu(re.projMatrix,vt,vt,0,ve),"globe_pole_raster",Mt,gt,rt);D.setupElevationDraw(nt,X,{}),M.prepareDrawProgram(G,X,Me.toUnwrapped()),Ge&&kt(X,be),st&&(vt=s.scale(s.create(),vt,[1,-1,1]),kt(X,pt))}}}})(f,m,_,x,C);else{const M=f.context,D=M.gl;let B,O;const U=f.options.showTerrainWireframe?2:0,G=(K,ee)=>{if(O===K)return;const H=[jo[K]];ee&&H.push(jo[U]),B=f.useProgram("terrainRaster",null,H),O=K},R=f.colorModeForRenderPass(),X=new s.DepthMode(D.LEQUAL,s.DepthMode.ReadWrite,f.depthRangeFor3D);On.update(C);const j=f.transform,q=6*Math.pow(1.5,22-j.zoom)*m.exaggeration();(U?[!1,!0]:[!1]).forEach(K=>{O=-1;const ee=K?D.LINES:D.TRIANGLES,[H,re]=K?m.getWirefameBuffer():[m.gridIndexBuffer,m.gridSegments];for(const Ae of x){const ve=_.getTile(Ae),Ie=s.StencilMode.disabled,Me=m.prevTerrainTileForTile[Ae.key],Ze=m.terrainTileForTile[Ae.key];Ea(Me,Ze)&&On.newMorphing(Ae.key,Me,Ze,C,250),M.activeTexture.set(D.TEXTURE0),ve.texture.bind(D.LINEAR,D.CLAMP_TO_EDGE,D.LINEAR_MIPMAP_NEAREST);const ge=On.getMorphValuesForProxy(Ae.key),Ve=ge?1:0;let Ge;ge&&(Ge={morphing:{srcDemTile:ge.from,dstDemTile:ge.to,phase:s.easeCubicInOut(ge.phase)}});const st=vu(Ae.projMatrix,Gl(Ae.canonical,j.renderWorldCopies)?q/10:q);G(Ve,K),m.setupElevationDraw(ve,B,Ge),f.prepareDrawProgram(M,B,Ae.toUnwrapped()),B.draw(M,ee,X,Ie,R,s.CullFaceMode.backCCW,st,"terrain_raster",m.gridBuffer,H,re)}})}}(o,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,t.splice(0,t.length))}renderBatch(t){if(this._drapedRenderBatches.length===0)return t+1;this.renderingToTexture=!0;const o=this.painter,u=this.painter.context,f=this.proxySourceCache,m=this.proxiedCoords[f.id],_=this._drapedRenderBatches.shift(),x=[],C=o.style.order;let M=0;for(const D of m){const B=f.getTileByID(D.proxyTileKey),O=f.proxyCachedFBO[D.key]?f.proxyCachedFBO[D.key][t]:void 0,U=O!==void 0?f.renderCache[O]:this.pool[M++],G=O!==void 0;if(B.texture=U.tex,G&&!U.dirty){x.push(B.tileID);continue}let R;u.bindFramebuffer.set(U.fb.framebuffer),this.renderedToTile=!1,U.dirty&&(u.clear({color:s.Color.transparent,stencil:0}),U.dirty=!1);for(let X=_.start;X<=_.end;++X){const j=o.style._layers[C[X]];if(j.isHidden(o.transform.zoom))continue;const q=o.style._getLayerSourceCache(j),K=q?this.proxyToSource[D.key][q.id]:[D];if(!K)continue;const ee=K;u.viewport.set([0,0,U.fb.width,U.fb.height]),R!==(q?q.id:null)&&(this._setupStencil(U,K,j,q),R=q?q.id:null),o.renderLayer(o,q,j,ee)}this.renderedToTile?(U.dirty=!0,x.push(B.tileID)):G||--M,M===5&&(M=0,this.renderToBackBuffer(x))}return this.renderToBackBuffer(x),this.renderingToTexture=!1,u.bindFramebuffer.set(null),u.viewport.set([0,0,o.width,o.height]),_.end+1}postRender(){}renderCacheEfficiency(t){const o=t.order.length;if(o===0)return{efficiency:100};let u,f=0,m=0,_=!1;for(let x=0;x<o;++x){const C=t._layers[t.order[x]];this._style.isLayerDraped(C)?(_&&++f,++m):_||(_=!0,u=C.id)}return m===0?{efficiency:100}:{efficiency:100*(1-f/m),firstUndrapedLayer:u}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter(o=>o.dem).forEach(o=>{t=Math.min(t,o.dem.tree.minimums[0])}),t===0?t:(t-30)*this._exaggeration}raycast(t,o,u){if(!this._visibleDemTiles)return null;const f=this._visibleDemTiles.filter(m=>m.dem).map(m=>{const _=m.tileID,x=Math.pow(2,_.overscaledZ),{x:C,y:M}=_.canonical,D=C/x,B=(C+1)/x,O=M/x,U=(M+1)/x;return{minx:D,miny:O,maxx:B,maxy:U,t:m.dem.tree.raycastRoot(D,O,B,U,t,o,u),tile:m}});f.sort((m,_)=>(m.t!==null?m.t:Number.MAX_VALUE)-(_.t!==null?_.t:Number.MAX_VALUE));for(const m of f){if(m.t==null)return null;const _=m.tile.dem.tree.raycast(m.minx,m.miny,m.maxx,m.maxy,t,o,u);if(_!=null)return _}return null}_createFBO(){const t=this.painter.context,o=t.gl,u=this.drapeBufferSize;t.activeTexture.set(o.TEXTURE0);const f=new s.Texture(t,{width:u[0],height:u[1],data:null},o.RGBA);f.bind(o.LINEAR,o.CLAMP_TO_EDGE);const m=t.createFramebuffer(u[0],u[1],!1);return m.colorAttachment.set(f.texture),m.depthAttachment=new Oo(t,m.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,u[0],u[1]),this._stencilRef=0,m.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):m.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&o.texParameterf(o.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:m,tex:f,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some(t=>{const o=this._style._layers[t],u=o.isHidden(this.painter.transform.zoom),f=o.getCrossfadeParameters(),m=!!f&&f.t!==1,_=o.hasTransition();return o.type!=="custom"&&!u&&(m||_)})}_clearRasterFadeFromRenderCache(){let t=!1;for(const o in this._style._sourceCaches)if(this._style._sourceCaches[o]._source instanceof P){t=!0;break}if(t)for(let o=0;o<this._style.order.length;++o){const u=this._style._layers[this._style.order[o]],f=u.isHidden(this.painter.transform.zoom),m=this._style._getLayerSourceCache(u);if(u.type!=="raster"||f||!m)continue;const _=u.paint.get("raster-fade-duration");for(const x of this.proxyCoords){const C=this.proxyToSource[x.key][m.id];if(C)for(const M of C){const D=Fl(m.getTile(M),m.findLoadedParent(M,0),m,this.painter.transform,_);(D.opacity!==1||D.mix!==0)&&this._clearRenderCacheForTile(m.id,M)}}}}_setupDrapedRenderBatches(){const t=this._style.order,o=t.length;if(o===0)return;const u=[];let f,m=0,_=this._style._layers[t[m]];for(;!this._style.isLayerDraped(_)&&_.isHidden(this.painter.transform.zoom)&&++m<o;)_=this._style._layers[t[m]];for(;m<o;++m){const x=this._style._layers[t[m]];x.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(x)?f===void 0&&(f=m):f!==void 0&&(u.push({start:f,end:m-1}),f=void 0))}f!==void 0&&u.push({start:f,end:m-1}),this._drapedRenderBatches=u}_setupRenderCache(t){const o=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,o.renderCache.length>o.renderCachePool.length){const _=Object.values(o.proxyCachedFBO);o.proxyCachedFBO={};for(let x=0;x<_.length;++x){const C=Object.values(_[x]);o.renderCachePool.push(...C)}}return}this._clearRasterFadeFromRenderCache();const u=this.proxyCoords,f=this._tilesDirty;for(let _=u.length-1;_>=0;_--){const x=u[_];if(o.getTileByID(x.key),o.proxyCachedFBO[x.key]!==void 0){const C=t[x.key],M=this.proxyToSource[x.key];let D=0;for(const B in M){const O=M[B],U=C[B];if(!U||U.length!==O.length||O.some((G,R)=>G!==U[R]||f[B]&&f[B].hasOwnProperty(G.key))){D=-1;break}++D}for(const B in o.proxyCachedFBO[x.key])o.renderCache[o.proxyCachedFBO[x.key][B]].dirty=D<0||D!==Object.values(C).length}}const m=[...this._drapedRenderBatches];m.sort((_,x)=>x.end-x.start-(_.end-_.start));for(const _ of m)for(const x of u){if(o.proxyCachedFBO[x.key])continue;let C=o.renderCachePool.pop();C===void 0&&o.renderCache.length<50&&(C=o.renderCache.length,o.renderCache.push(this._createFBO())),C!==void 0&&(o.proxyCachedFBO[x.key]={},o.proxyCachedFBO[x.key][_.start]=C,o.renderCache[C].dirty=!0)}this._tilesDirty={}}_setupStencil(t,o,u,f){if(!f||!this._sourceTilesOverlap[f.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const m=this.painter.context,_=m.gl;if(o.length<=1)return void(this._overlapStencilType=!1);let x;if(u.isTileClipped())x=o.length,this._overlapStencilMode.test={func:_.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(o[0].overscaledZ>o[o.length-1].overscaledZ))return void(this._overlapStencilType=!1);x=1,this._overlapStencilMode.test={func:_.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+x>255&&(m.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=x,this._overlapStencilMode.ref=this._stencilRef,u.isTileClipped()&&this._renderTileClippingMasks(o,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs.get(t.key)||0),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(t,o){const u=this.painter,f=this.painter.context,m=f.gl;u._tileClippingMaskIDs.clear(),f.setColorMode(s.ColorMode.disabled),f.setDepthMode(s.DepthMode.disabled);const _=u.useProgram("clippingMask");for(const x of t){const C=--o;u._tileClippingMaskIDs.set(x.key,C),_.draw(f,m.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:m.ALWAYS,mask:0},C,255,m.KEEP,m.KEEP,m.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Ia(x.projMatrix),"$clipping",u.tileExtentBuffer,u.quadTriangleIndexBuffer,u.tileExtentSegments)}}pointCoordinate(t){const o=this.painter.transform;if(t.x<0||t.x>o.width||t.y<0||t.y>o.height)return null;const u=[t.x,t.y,1,1];s.transformMat4$1(u,u,o.pixelMatrixInverse),s.scale$1(u,u,1/u[3]),u[0]/=o.worldSize,u[1]/=o.worldSize;const f=o._camera.position,m=s.mercatorZfromAltitude(1,o.center.lat),_=[f[0],f[1],f[2]/m,0],x=s.subtract([],u.slice(0,3),_);s.normalize(x,x);const C=this.raycast(_,x,this._exaggeration);return C!==null&&C?(s.scaleAndAdd(_,_,x,C),_[3]=_[2],_[2]*=m,_):null}drawDepth(){const t=this.painter,o=t.context,u=this.proxySourceCache,f=Math.ceil(t.width),m=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===f&&this._depthFBO.height===m||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const _=o.gl,x=o.createFramebuffer(f,m,!0);o.activeTexture.set(_.TEXTURE0);const C=new s.Texture(o,{width:f,height:m,data:null},_.RGBA);C.bind(_.NEAREST,_.CLAMP_TO_EDGE),x.colorAttachment.set(C.texture);const M=o.createRenderbuffer(o.gl.DEPTH_COMPONENT16,f,m);x.depthAttachment.set(M),this._depthFBO=x,this._depthTexture=C}o.bindFramebuffer.set(this._depthFBO.framebuffer),o.viewport.set([0,0,f,m]),function(_,x,C,M){if(_.transform.projection.name==="globe")return;const D=_.context,B=D.gl;D.clear({depth:1});const O=_.useProgram("terrainDepth"),U=new s.DepthMode(B.LESS,s.DepthMode.ReadWrite,_.depthRangeFor3D);for(const G of M){const R=C.getTile(G),X=vu(G.projMatrix,0);x.setupElevationDraw(R,O),O.draw(D,B.TRIANGLES,U,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,X,"terrain_depth",x.gridBuffer,x.gridIndexBuffer,x.gridNoSkirtSegments)}}(t,this,u,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,o,u){if(t.getSource()instanceof ne)return this._setupProxiedCoordsForImageSource(t,o,u);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const f=this.proxiedCoords[t.id]=[],m=this.proxyCoords;for(let x=0;x<m.length;x++){const C=m[x],M=this._findTileCoveringTileID(C,t);if(M){const D=this._createProxiedId(C,M,u[C.key]&&u[C.key][t.id]);f.push(D),this.proxyToSource[C.key][t.id]=[D]}}let _=!1;for(let x=0;x<o.length;x++){const C=t.getTile(o[x]);if(!C||!C.hasData())continue;const M=this._findTileCoveringTileID(C.tileID,this.proxySourceCache);if(M&&M.tileID.canonical.z!==C.tileID.canonical.z){const D=this.proxyToSource[M.tileID.key][t.id],B=this._createProxiedId(M.tileID,C,u[M.tileID.key]&&u[M.tileID.key][t.id]);D?D.splice(D.length-1,0,B):this.proxyToSource[M.tileID.key][t.id]=[B],f.push(B),_=!0}}this._sourceTilesOverlap[t.id]=_}_setupProxiedCoordsForImageSource(t,o,u){if(!t.getSource().loaded())return;const f=this.proxiedCoords[t.id]=[],m=this.proxyCoords,_=t.getSource(),x=new s.pointGeometry(_.tileID.x,_.tileID.y)._div(1<<_.tileID.z),C=_.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((D,B)=>(D.min.x=Math.min(D.min.x,B.x-x.x),D.min.y=Math.min(D.min.y,B.y-x.y),D.max.x=Math.max(D.max.x,B.x-x.x),D.max.y=Math.max(D.max.y,B.y-x.y),D),{min:new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),M=(D,B)=>{const O=D.wrap+D.canonical.x/(1<<D.canonical.z),U=D.canonical.y/(1<<D.canonical.z),G=s.EXTENT/(1<<D.canonical.z),R=B.wrap+B.canonical.x/(1<<B.canonical.z),X=B.canonical.y/(1<<B.canonical.z);return O+G<R+C.min.x||O>R+C.max.x||U+G<X+C.min.y||U>X+C.max.y};for(let D=0;D<m.length;D++){const B=m[D];for(let O=0;O<o.length;O++){const U=t.getTile(o[O]);if(!U||!U.hasData()||M(B,U.tileID))continue;const G=this._createProxiedId(B,U,u[B.key]&&u[B.key][t.id]),R=this.proxyToSource[B.key][t.id];R?R.push(G):this.proxyToSource[B.key][t.id]=[G],f.push(G)}}}_createProxiedId(t,o,u){let f=this.orthoMatrix;if(u){const m=u.find(_=>_.key===o.tileID.key);if(m)return m}if(o.tileID.key!==t.key){const m=t.canonical.z-o.tileID.canonical.z;let _,x,C;f=s.create();const M=o.tileID.wrap-t.wrap<<t.overscaledZ;m>0?(_=s.EXTENT>>m,x=_*((o.tileID.canonical.x<<m)-t.canonical.x+M),C=_*((o.tileID.canonical.y<<m)-t.canonical.y)):(_=s.EXTENT<<-m,x=s.EXTENT*(o.tileID.canonical.x-(t.canonical.x+M<<-m)),C=s.EXTENT*(o.tileID.canonical.y-(t.canonical.y<<-m))),s.ortho(f,0,_,0,_,0,1),s.translate(f,f,[x,C,0])}return new Vl(o.tileID,t.key,f)}_findTileCoveringTileID(t,o){let u=o.getTile(t);if(u&&u.hasData())return u;const f=this._findCoveringTileCache[o.id],m=f[t.key];if(u=m?o.getTileByID(m):null,u&&u.hasData()||m===null)return u;let _=u?u.tileID:t,x=_.overscaledZ;const C=o.getSource().minzoom,M=[];if(!m){const B=o.getSource().maxzoom;if(t.canonical.z>=B){const O=t.canonical.z-B;o.getSource().reparseOverscaled?(x=Math.max(t.canonical.z+2,o.transform.tileZoom),_=new s.OverscaledTileID(x,t.wrap,B,t.canonical.x>>O,t.canonical.y>>O)):O!==0&&(x=B,_=new s.OverscaledTileID(x,t.wrap,B,t.canonical.x>>O,t.canonical.y>>O))}_.key!==t.key&&(M.push(_.key),u=o.getTile(_))}const D=B=>{M.forEach(O=>{f[O]=B}),M.length=0};for(x-=1;x>=C&&(!u||!u.hasData());x--){u&&D(u.tileID.key);const B=_.calculateScaledKey(x);if(u=o.getTileByID(B),u&&u.hasData())break;const O=f[B];if(O===null)break;O===void 0?M.push(B):u=o.getTileByID(O)}return D(u?u.tileID.key:null),u&&u.hasData()?u:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(t,o){let u=this._tilesDirty[t];u||(u=this._tilesDirty[t]={}),u[o.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(o){let u=0;const f=new s.StructArrayLayout2ui4,m=131;for(let _=1;_<129;_++){for(let x=1;x<129;x++)u=_*m+x,f.emplaceBack(u,u+1),f.emplaceBack(u,u+m),f.emplaceBack(u+1,u+m),_===128&&f.emplaceBack(u+m,u+m+1);f.emplaceBack(u+1,u+1+m)}return f}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function Da(l){const t=[];for(let o=0;o<l.length;o++){if(l[o]===null)continue;const u=l[o].split(" ");t.push(u.pop())}return t}class Ls{static cacheKey(t,o,u){let f=`${t}${u?u.cacheKey:""}`;for(const m of o)f+=`/${m}`;return f}constructor(t,o,u,f,m,_){const x=t.gl;this.program=x.createProgram();const C=Da(u.staticAttributes),M=f?f.getBinderAttributes():[],D=C.concat(M),B=u.staticUniforms?Da(u.staticUniforms):[],O=f?f.getBinderUniforms():[],U=B.concat(O),G=[];for(const H of U)G.indexOf(H)<0&&G.push(H);let R=f?f.defines():[];R=R.concat(_.map(H=>`#define ${H}`));const X=R.concat(`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ss,Ta.fragmentSource,Nn.fragmentSource,u.fragmentSource).join(`
`),j=R.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ss,Ta.vertexSource,Nn.vertexSource,_o.vertexSource,u.vertexSource).join(`
`),q=x.createShader(x.FRAGMENT_SHADER);if(x.isContextLost())return void(this.failedToCreate=!0);x.shaderSource(q,X),x.compileShader(q),x.attachShader(this.program,q);const K=x.createShader(x.VERTEX_SHADER);if(x.isContextLost())return void(this.failedToCreate=!0);x.shaderSource(K,j),x.compileShader(K),x.attachShader(this.program,K),this.attributes={};const ee={};this.numAttributes=D.length;for(let H=0;H<this.numAttributes;H++)D[H]&&(x.bindAttribLocation(this.program,H,D[H]),this.attributes[D[H]]=H);x.linkProgram(this.program),x.deleteShader(K),x.deleteShader(q);for(let H=0;H<G.length;H++){const re=G[H];if(re&&!ee[re]){const Ae=x.getUniformLocation(this.program,re);Ae&&(ee[re]=Ae)}}this.fixedUniforms=m(t,ee),this.binderUniforms=f?f.getUniforms(t,ee):[],_.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=((H,re)=>({u_dem:new s.Uniform1i(H,re.u_dem),u_dem_prev:new s.Uniform1i(H,re.u_dem_prev),u_dem_unpack:new s.Uniform4f(H,re.u_dem_unpack),u_dem_tl:new s.Uniform2f(H,re.u_dem_tl),u_dem_scale:new s.Uniform1f(H,re.u_dem_scale),u_dem_tl_prev:new s.Uniform2f(H,re.u_dem_tl_prev),u_dem_scale_prev:new s.Uniform1f(H,re.u_dem_scale_prev),u_dem_size:new s.Uniform1f(H,re.u_dem_size),u_dem_lerp:new s.Uniform1f(H,re.u_dem_lerp),u_exaggeration:new s.Uniform1f(H,re.u_exaggeration),u_depth:new s.Uniform1i(H,re.u_depth),u_depth_size_inv:new s.Uniform2f(H,re.u_depth_size_inv),u_meter_to_dem:new s.Uniform1f(H,re.u_meter_to_dem),u_label_plane_matrix_inv:new s.UniformMatrix4f(H,re.u_label_plane_matrix_inv),u_tile_tl_up:new s.Uniform3f(H,re.u_tile_tl_up),u_tile_tr_up:new s.Uniform3f(H,re.u_tile_tr_up),u_tile_br_up:new s.Uniform3f(H,re.u_tile_br_up),u_tile_bl_up:new s.Uniform3f(H,re.u_tile_bl_up),u_tile_up_scale:new s.Uniform1f(H,re.u_tile_up_scale)}))(t,ee)),_.indexOf("FOG")!==-1&&(this.fogUniforms=((H,re)=>({u_fog_matrix:new s.UniformMatrix4f(H,re.u_fog_matrix),u_fog_range:new s.Uniform2f(H,re.u_fog_range),u_fog_color:new s.Uniform4f(H,re.u_fog_color),u_fog_horizon_blend:new s.Uniform1f(H,re.u_fog_horizon_blend),u_fog_temporal_offset:new s.Uniform1f(H,re.u_fog_temporal_offset)}))(t,ee))}setTerrainUniformValues(t,o){if(!this.terrainUniforms)return;const u=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const f in o)u[f].set(o[f])}}setFogUniformValues(t,o){if(!this.fogUniforms)return;const u=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const f in o)u[f].location&&u[f].set(o[f])}}draw(t,o,u,f,m,_,x,C,M,D,B,O,U,G,R,X){const j=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(u),t.setStencilMode(f),t.setColorMode(m),t.setCullFace(_);for(const K of Object.keys(this.fixedUniforms))this.fixedUniforms[K].set(x[K]);G&&G.setUniforms(t,this.binderUniforms,O,{zoom:U});const q={[j.LINES]:2,[j.TRIANGLES]:3,[j.LINE_STRIP]:1}[o];for(const K of B.get()){const ee=K.vaos||(K.vaos={});(ee[C]||(ee[C]=new Ma)).bind(t,this,M,G?G.getPaintVertexBuffers():[],D,K.vertexOffset,R,X),j.drawElements(o,K.primitiveLength*q,j.UNSIGNED_SHORT,K.primitiveOffset*q*2)}}}function Ps(l,t,o){const u=1/Fi(o,1,t.transform.tileZoom),f=Math.pow(2,o.tileID.overscaledZ),m=o.tileSize*Math.pow(2,t.transform.tileZoom)/f,_=m*(o.tileID.canonical.x+o.tileID.wrap*f),x=m*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[u,l.fromScale,l.toScale],u_fade:l.t,u_pixel_coord_upper:[_>>16,x>>16],u_pixel_coord_lower:[65535&_,65535&x]}}const Ul=s.create(),Sa=(l,t,o,u,f,m,_,x,C)=>{const M=t.style.light,D=M.properties.get("position"),B=[D.x,D.y,D.z],O=s.create$1();M.properties.get("anchor")==="viewport"&&(s.fromRotation(O,-t.transform.angle),s.transformMat3(B,B,O));const U=M.properties.get("color"),G=t.transform,R={u_matrix:l,u_lightpos:B,u_lightintensity:M.properties.get("intensity"),u_lightcolor:[U.r,U.g,U.b],u_vertical_gradient:+o,u_opacity:u,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ul,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0};return G.projection.name==="globe"&&(R.u_tile_id=[f.canonical.x,f.canonical.y,1<<f.canonical.z],R.u_zoom_transition=_,R.u_inv_rot_matrix=C,R.u_merc_center=x,R.u_up_dir=G.projection.upVector(new s.CanonicalTileID(0,0,0),x[0]*s.EXTENT,x[1]*s.EXTENT),R.u_height_lift=m),R},za=(l,t,o,u,f,m,_,x,C,M,D)=>{const B=Sa(l,t,o,u,f,x,C,M,D),O={u_height_factor:-Math.pow(2,f.overscaledZ)/_.tileSize/8};return s.extend(B,Ps(m,t,_),O)},Ba=l=>({u_matrix:l}),ka=(l,t,o,u)=>s.extend(Ba(l),Ps(o,t,u)),La=(l,t)=>({u_matrix:l,u_world:t}),wu=(l,t,o,u,f)=>s.extend(ka(l,t,o,u),{u_world:f}),Cu=s.create(),Qo=(l,t,o,u,f,m)=>{const _=l.transform,x=_.projection.name==="globe";let C;if(m.paint.get("circle-pitch-alignment")==="map")if(x){const D=s.globePixelsToTileUnits(_.zoom,t.canonical);C=Float32Array.from([D,0,0,D])}else C=_.calculatePixelsToTileUnitsMatrix(o);else C=new Float32Array([_.pixelsToGLUnits[0],0,0,_.pixelsToGLUnits[1]]);const M={u_camera_to_center_distance:_.cameraToCenterDistance,u_matrix:l.translatePosMatrix(t.projMatrix,o,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:C,u_inv_rot_matrix:Cu,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};return x&&(M.u_inv_rot_matrix=u,M.u_merc_center=f,M.u_tile_id=[t.canonical.x,t.canonical.y,1<<t.canonical.z],M.u_zoom_transition=s.globeToMercatorTransition(_.zoom),M.u_up_dir=_.projection.upVector(t.canonical,f[0],f[1])),M},xd=l=>{const t=[];return l.paint.get("circle-pitch-alignment")==="map"&&t.push("PITCH_WITH_MAP"),l.paint.get("circle-pitch-scale")==="map"&&t.push("SCALE_WITH_MAP"),t},vd=(l,t,o)=>{const u=s.EXTENT/o.tileSize;return{u_matrix:l,u_camera_to_center_distance:t.cameraToCenterDistance,u_extrude_scale:[t.pixelsToGLUnits[0]/u,t.pixelsToGLUnits[1]/u]}},Tu=(l,t,o=1)=>({u_matrix:l,u_color:t,u_overlay:0,u_overlay_scale:o}),bd=s.create(),wd=(l,t,o,u,f,m,_)=>{const x=l.transform,C=x.projection.name==="globe",M=C?s.globePixelsToTileUnits(x.zoom,t.canonical):Fi(o,1,m),D={u_matrix:t.projMatrix,u_extrude_scale:M,u_intensity:_,u_inv_rot_matrix:bd,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};return C&&(D.u_inv_rot_matrix=u,D.u_merc_center=f,D.u_tile_id=[t.canonical.x,t.canonical.y,1<<t.canonical.z],D.u_zoom_transition=s.globeToMercatorTransition(x.zoom),D.u_up_dir=x.projection.upVector(t.canonical,f[0],f[1])),D},Cd=(l,t,o,u,f,m,_)=>{const x=l.transform,C=x.calculatePixelsToTileUnitsMatrix(t),M={u_matrix:yo(l,t,o,f),u_pixels_to_tile_units:C,u_device_pixel_ratio:_,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:m,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0};if(jl(o)){const D=Pa(t,l.transform);M.u_texsize=t.lineAtlasTexture.size,M.u_scale=[D,u.fromScale,u.toScale],M.u_mix=u.t}return M},Zl=(l,t,o,u,f,m)=>{const _=l.transform,x=Pa(t,_);return{u_matrix:yo(l,t,o,f),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:_.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:m,u_image:0,u_scale:[x,u.fromScale,u.toScale],u_fade:u.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Pa(l,t){return 1/Fi(l,1,t.tileZoom)}function yo(l,t,o,u){return l.translatePosMatrix(u||t.tileID.projMatrix,t,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}function jl(l){const t=l.paint.get("line-dasharray").value;return t.value||t.kind!=="constant"}const Mu=(l,t,o,u,f,m)=>{return{u_matrix:l,u_tl_parent:t,u_scale_parent:o,u_fade_t:u.mix,u_opacity:u.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(x=f.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(_=f.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Ql(f.paint.get("raster-hue-rotate")),u_perspective_transform:m};var _,x};function Ql(l){l*=Math.PI/180;const t=Math.sin(l),o=Math.cos(l);return[(2*o+1)/3,(-Math.sqrt(3)*t-o+1)/3,(Math.sqrt(3)*t-o+1)/3]}const Gn=s.create(),Yl=(l,t,o,u,f,m,_,x,C,M,D,B,O,U)=>{const G=f.transform,R={u_is_size_zoom_constant:+(l==="constant"||l==="source"),u_is_size_feature_constant:+(l==="constant"||l==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:G.cameraToCenterDistance,u_rotate_symbol:+o,u_aspect_ratio:G.width/G.height,u_fade_change:f.options.fadeDuration?f.symbolFadeChange:1,u_matrix:m,u_label_plane_matrix:_,u_coord_matrix:x,u_is_text:+C,u_pitch_with_map:+u,u_texsize:M,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Gn,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Gn};return G.projection.name==="globe"&&(R.u_tile_id=[D.canonical.x,D.canonical.y,1<<D.canonical.z],R.u_zoom_transition=B,R.u_inv_rot_matrix=U,R.u_merc_center=O,R.u_camera_forward=G._camera.forward(),R.u_ecef_origin=s.globeECEFOrigin(G.globeMatrix,D.toUnwrapped()),R.u_tile_matrix=Float32Array.from(G.globeMatrix)),R},xo=(l,t,o,u,f,m,_,x,C,M,D,B,O,U,G)=>{const{cameraToCenterDistance:R,_pitch:X}=f.transform;return s.extend(Yl(l,t,o,u,f,m,_,x,C,M,B,O,U,G),{u_gamma_scale:u?R*Math.cos(f.terrain?0:X):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+D})},Yo=(l,t,o,u,f,m,_,x,C,M,D,B,O,U)=>s.extend(xo(l,t,o,u,f,m,_,x,!0,C,!0,D,B,O,U),{u_texsize_icon:M,u_texture_icon:1}),Eu=(l,t,o)=>({u_matrix:l,u_opacity:t,u_color:o}),Hl=(l,t,o,u,f,m)=>s.extend(function(_,x,C,M){const D=C.imageManager.getPattern(_.from.toString()),B=C.imageManager.getPattern(_.to.toString()),{width:O,height:U}=C.imageManager.getPixelSize(),G=Math.pow(2,M.tileID.overscaledZ),R=M.tileSize*Math.pow(2,C.transform.tileZoom)/G,X=R*(M.tileID.canonical.x+M.tileID.wrap*G),j=R*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:D.tl,u_pattern_br_a:D.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[O,U],u_mix:x.t,u_pattern_size_a:D.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:x.fromScale,u_scale_b:x.toScale,u_tile_units_to_pixels:1/Fi(M,1,C.transform.tileZoom),u_pixel_coord_upper:[X>>16,j>>16],u_pixel_coord_lower:[65535&X,65535&j]}}(u,m,o,f),{u_matrix:l,u_opacity:t}),li={fillExtrusion:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_lightpos:new s.Uniform3f(l,t.u_lightpos),u_lightintensity:new s.Uniform1f(l,t.u_lightintensity),u_lightcolor:new s.Uniform3f(l,t.u_lightcolor),u_vertical_gradient:new s.Uniform1f(l,t.u_vertical_gradient),u_opacity:new s.Uniform1f(l,t.u_opacity),u_tile_id:new s.Uniform3f(l,t.u_tile_id),u_zoom_transition:new s.Uniform1f(l,t.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(l,t.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(l,t.u_merc_center),u_up_dir:new s.Uniform3f(l,t.u_up_dir),u_height_lift:new s.Uniform1f(l,t.u_height_lift)}),fillExtrusionPattern:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_lightpos:new s.Uniform3f(l,t.u_lightpos),u_lightintensity:new s.Uniform1f(l,t.u_lightintensity),u_lightcolor:new s.Uniform3f(l,t.u_lightcolor),u_vertical_gradient:new s.Uniform1f(l,t.u_vertical_gradient),u_height_factor:new s.Uniform1f(l,t.u_height_factor),u_tile_id:new s.Uniform3f(l,t.u_tile_id),u_zoom_transition:new s.Uniform1f(l,t.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(l,t.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(l,t.u_merc_center),u_up_dir:new s.Uniform3f(l,t.u_up_dir),u_height_lift:new s.Uniform1f(l,t.u_height_lift),u_image:new s.Uniform1i(l,t.u_image),u_texsize:new s.Uniform2f(l,t.u_texsize),u_pixel_coord_upper:new s.Uniform2f(l,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(l,t.u_pixel_coord_lower),u_scale:new s.Uniform3f(l,t.u_scale),u_fade:new s.Uniform1f(l,t.u_fade),u_opacity:new s.Uniform1f(l,t.u_opacity)}),fill:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix)}),fillPattern:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_image:new s.Uniform1i(l,t.u_image),u_texsize:new s.Uniform2f(l,t.u_texsize),u_pixel_coord_upper:new s.Uniform2f(l,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(l,t.u_pixel_coord_lower),u_scale:new s.Uniform3f(l,t.u_scale),u_fade:new s.Uniform1f(l,t.u_fade)}),fillOutline:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_world:new s.Uniform2f(l,t.u_world)}),fillOutlinePattern:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_world:new s.Uniform2f(l,t.u_world),u_image:new s.Uniform1i(l,t.u_image),u_texsize:new s.Uniform2f(l,t.u_texsize),u_pixel_coord_upper:new s.Uniform2f(l,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(l,t.u_pixel_coord_lower),u_scale:new s.Uniform3f(l,t.u_scale),u_fade:new s.Uniform1f(l,t.u_fade)}),circle:(l,t)=>({u_camera_to_center_distance:new s.Uniform1f(l,t.u_camera_to_center_distance),u_extrude_scale:new s.UniformMatrix2f(l,t.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(l,t.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_inv_rot_matrix:new s.UniformMatrix4f(l,t.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(l,t.u_merc_center),u_tile_id:new s.Uniform3f(l,t.u_tile_id),u_zoom_transition:new s.Uniform1f(l,t.u_zoom_transition),u_up_dir:new s.Uniform3f(l,t.u_up_dir)}),collisionBox:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_camera_to_center_distance:new s.Uniform1f(l,t.u_camera_to_center_distance),u_extrude_scale:new s.Uniform2f(l,t.u_extrude_scale)}),collisionCircle:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_inv_matrix:new s.UniformMatrix4f(l,t.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(l,t.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(l,t.u_viewport_size)}),debug:(l,t)=>({u_color:new s.UniformColor(l,t.u_color),u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_overlay:new s.Uniform1i(l,t.u_overlay),u_overlay_scale:new s.Uniform1f(l,t.u_overlay_scale)}),clippingMask:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix)}),heatmap:(l,t)=>({u_extrude_scale:new s.Uniform1f(l,t.u_extrude_scale),u_intensity:new s.Uniform1f(l,t.u_intensity),u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_inv_rot_matrix:new s.UniformMatrix4f(l,t.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(l,t.u_merc_center),u_tile_id:new s.Uniform3f(l,t.u_tile_id),u_zoom_transition:new s.Uniform1f(l,t.u_zoom_transition),u_up_dir:new s.Uniform3f(l,t.u_up_dir)}),heatmapTexture:(l,t)=>({u_image:new s.Uniform1i(l,t.u_image),u_color_ramp:new s.Uniform1i(l,t.u_color_ramp),u_opacity:new s.Uniform1f(l,t.u_opacity)}),hillshade:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_image:new s.Uniform1i(l,t.u_image),u_latrange:new s.Uniform2f(l,t.u_latrange),u_light:new s.Uniform2f(l,t.u_light),u_shadow:new s.UniformColor(l,t.u_shadow),u_highlight:new s.UniformColor(l,t.u_highlight),u_accent:new s.UniformColor(l,t.u_accent)}),hillshadePrepare:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_image:new s.Uniform1i(l,t.u_image),u_dimension:new s.Uniform2f(l,t.u_dimension),u_zoom:new s.Uniform1f(l,t.u_zoom),u_unpack:new s.Uniform4f(l,t.u_unpack)}),line:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_pixels_to_tile_units:new s.UniformMatrix2f(l,t.u_pixels_to_tile_units),u_device_pixel_ratio:new s.Uniform1f(l,t.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(l,t.u_units_to_pixels),u_dash_image:new s.Uniform1i(l,t.u_dash_image),u_gradient_image:new s.Uniform1i(l,t.u_gradient_image),u_image_height:new s.Uniform1f(l,t.u_image_height),u_texsize:new s.Uniform2f(l,t.u_texsize),u_scale:new s.Uniform3f(l,t.u_scale),u_mix:new s.Uniform1f(l,t.u_mix),u_alpha_discard_threshold:new s.Uniform1f(l,t.u_alpha_discard_threshold)}),linePattern:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_texsize:new s.Uniform2f(l,t.u_texsize),u_pixels_to_tile_units:new s.UniformMatrix2f(l,t.u_pixels_to_tile_units),u_device_pixel_ratio:new s.Uniform1f(l,t.u_device_pixel_ratio),u_image:new s.Uniform1i(l,t.u_image),u_units_to_pixels:new s.Uniform2f(l,t.u_units_to_pixels),u_scale:new s.Uniform3f(l,t.u_scale),u_fade:new s.Uniform1f(l,t.u_fade),u_alpha_discard_threshold:new s.Uniform1f(l,t.u_alpha_discard_threshold)}),raster:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_tl_parent:new s.Uniform2f(l,t.u_tl_parent),u_scale_parent:new s.Uniform1f(l,t.u_scale_parent),u_fade_t:new s.Uniform1f(l,t.u_fade_t),u_opacity:new s.Uniform1f(l,t.u_opacity),u_image0:new s.Uniform1i(l,t.u_image0),u_image1:new s.Uniform1i(l,t.u_image1),u_brightness_low:new s.Uniform1f(l,t.u_brightness_low),u_brightness_high:new s.Uniform1f(l,t.u_brightness_high),u_saturation_factor:new s.Uniform1f(l,t.u_saturation_factor),u_contrast_factor:new s.Uniform1f(l,t.u_contrast_factor),u_spin_weights:new s.Uniform3f(l,t.u_spin_weights),u_perspective_transform:new s.Uniform2f(l,t.u_perspective_transform)}),symbolIcon:(l,t)=>({u_is_size_zoom_constant:new s.Uniform1i(l,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(l,t.u_is_size_feature_constant),u_size_t:new s.Uniform1f(l,t.u_size_t),u_size:new s.Uniform1f(l,t.u_size),u_camera_to_center_distance:new s.Uniform1f(l,t.u_camera_to_center_distance),u_rotate_symbol:new s.Uniform1i(l,t.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(l,t.u_aspect_ratio),u_fade_change:new s.Uniform1f(l,t.u_fade_change),u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(l,t.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(l,t.u_coord_matrix),u_is_text:new s.Uniform1i(l,t.u_is_text),u_pitch_with_map:new s.Uniform1i(l,t.u_pitch_with_map),u_texsize:new s.Uniform2f(l,t.u_texsize),u_tile_id:new s.Uniform3f(l,t.u_tile_id),u_zoom_transition:new s.Uniform1f(l,t.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(l,t.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(l,t.u_merc_center),u_camera_forward:new s.Uniform3f(l,t.u_camera_forward),u_tile_matrix:new s.UniformMatrix4f(l,t.u_tile_matrix),u_ecef_origin:new s.Uniform3f(l,t.u_ecef_origin),u_texture:new s.Uniform1i(l,t.u_texture)}),symbolSDF:(l,t)=>({u_is_size_zoom_constant:new s.Uniform1i(l,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(l,t.u_is_size_feature_constant),u_size_t:new s.Uniform1f(l,t.u_size_t),u_size:new s.Uniform1f(l,t.u_size),u_camera_to_center_distance:new s.Uniform1f(l,t.u_camera_to_center_distance),u_rotate_symbol:new s.Uniform1i(l,t.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(l,t.u_aspect_ratio),u_fade_change:new s.Uniform1f(l,t.u_fade_change),u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(l,t.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(l,t.u_coord_matrix),u_is_text:new s.Uniform1i(l,t.u_is_text),u_pitch_with_map:new s.Uniform1i(l,t.u_pitch_with_map),u_texsize:new s.Uniform2f(l,t.u_texsize),u_texture:new s.Uniform1i(l,t.u_texture),u_gamma_scale:new s.Uniform1f(l,t.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(l,t.u_device_pixel_ratio),u_tile_id:new s.Uniform3f(l,t.u_tile_id),u_zoom_transition:new s.Uniform1f(l,t.u_zoom_transition),u_inv_rot_matrix:new s.UniformMatrix4f(l,t.u_inv_rot_matrix),u_merc_center:new s.Uniform2f(l,t.u_merc_center),u_camera_forward:new s.Uniform3f(l,t.u_camera_forward),u_tile_matrix:new s.UniformMatrix4f(l,t.u_tile_matrix),u_ecef_origin:new s.Uniform3f(l,t.u_ecef_origin),u_is_halo:new s.Uniform1i(l,t.u_is_halo)}),symbolTextAndIcon:(l,t)=>({u_is_size_zoom_constant:new s.Uniform1i(l,t.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(l,t.u_is_size_feature_constant),u_size_t:new s.Uniform1f(l,t.u_size_t),u_size:new s.Uniform1f(l,t.u_size),u_camera_to_center_distance:new s.Uniform1f(l,t.u_camera_to_center_distance),u_rotate_symbol:new s.Uniform1i(l,t.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(l,t.u_aspect_ratio),u_fade_change:new s.Uniform1f(l,t.u_fade_change),u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(l,t.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(l,t.u_coord_matrix),u_is_text:new s.Uniform1i(l,t.u_is_text),u_pitch_with_map:new s.Uniform1i(l,t.u_pitch_with_map),u_texsize:new s.Uniform2f(l,t.u_texsize),u_texsize_icon:new s.Uniform2f(l,t.u_texsize_icon),u_texture:new s.Uniform1i(l,t.u_texture),u_texture_icon:new s.Uniform1i(l,t.u_texture_icon),u_gamma_scale:new s.Uniform1f(l,t.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(l,t.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(l,t.u_is_halo)}),background:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_opacity:new s.Uniform1f(l,t.u_opacity),u_color:new s.UniformColor(l,t.u_color)}),backgroundPattern:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_opacity:new s.Uniform1f(l,t.u_opacity),u_image:new s.Uniform1i(l,t.u_image),u_pattern_tl_a:new s.Uniform2f(l,t.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(l,t.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(l,t.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(l,t.u_pattern_br_b),u_texsize:new s.Uniform2f(l,t.u_texsize),u_mix:new s.Uniform1f(l,t.u_mix),u_pattern_size_a:new s.Uniform2f(l,t.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(l,t.u_pattern_size_b),u_scale_a:new s.Uniform1f(l,t.u_scale_a),u_scale_b:new s.Uniform1f(l,t.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(l,t.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(l,t.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(l,t.u_tile_units_to_pixels)}),terrainRaster:Ol,terrainDepth:Ol,skybox:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_sun_direction:new s.Uniform3f(l,t.u_sun_direction),u_cubemap:new s.Uniform1i(l,t.u_cubemap),u_opacity:new s.Uniform1f(l,t.u_opacity),u_temporal_offset:new s.Uniform1f(l,t.u_temporal_offset)}),skyboxGradient:(l,t)=>({u_matrix:new s.UniformMatrix4f(l,t.u_matrix),u_color_ramp:new s.Uniform1i(l,t.u_color_ramp),u_center_direction:new s.Uniform3f(l,t.u_center_direction),u_radius:new s.Uniform1f(l,t.u_radius),u_opacity:new s.Uniform1f(l,t.u_opacity),u_temporal_offset:new s.Uniform1f(l,t.u_temporal_offset)}),skyboxCapture:(l,t)=>({u_matrix_3f:new s.UniformMatrix3f(l,t.u_matrix_3f),u_sun_direction:new s.Uniform3f(l,t.u_sun_direction),u_sun_intensity:new s.Uniform1f(l,t.u_sun_intensity),u_color_tint_r:new s.Uniform4f(l,t.u_color_tint_r),u_color_tint_m:new s.Uniform4f(l,t.u_color_tint_m),u_luminance:new s.Uniform1f(l,t.u_luminance)}),globeRaster:(l,t)=>({u_proj_matrix:new s.UniformMatrix4f(l,t.u_proj_matrix),u_globe_matrix:new s.UniformMatrix4f(l,t.u_globe_matrix),u_merc_matrix:new s.UniformMatrix4f(l,t.u_merc_matrix),u_zoom_transition:new s.Uniform1f(l,t.u_zoom_transition),u_merc_center:new s.Uniform2f(l,t.u_merc_center),u_image0:new s.Uniform1i(l,t.u_image0),u_grid_matrix:new s.UniformMatrix3f(l,t.u_grid_matrix)}),globeAtmosphere:(l,t)=>({u_frustum_tl:new s.Uniform3f(l,t.u_frustum_tl),u_frustum_tr:new s.Uniform3f(l,t.u_frustum_tr),u_frustum_br:new s.Uniform3f(l,t.u_frustum_br),u_frustum_bl:new s.Uniform3f(l,t.u_frustum_bl),u_globe_pos:new s.Uniform3f(l,t.u_globe_pos),u_globe_radius:new s.Uniform1f(l,t.u_globe_radius),u_opacity:new s.Uniform1f(l,t.u_opacity),u_fadeout_range:new s.Uniform1f(l,t.u_fadeout_range),u_start_color:new s.Uniform3f(l,t.u_start_color),u_end_color:new s.Uniform3f(l,t.u_end_color)})};let vo;function Iu(l,t,o,u,f,m,_){const x=l.context,C=x.gl,M=l.useProgram("collisionBox"),D=[];let B=0,O=0;for(let K=0;K<u.length;K++){const ee=u[K],H=t.getTile(ee),re=H.getBucket(o);if(!re)continue;let Ae=ee.projMatrix;f[0]===0&&f[1]===0||(Ae=l.translatePosMatrix(ee.projMatrix,H,f,m));const ve=_?re.textCollisionBox:re.iconCollisionBox,Ie=re.collisionCircleArray;if(Ie.length>0){const Me=s.create(),Ze=Ae;s.mul(Me,re.placementInvProjMatrix,l.transform.glCoordMatrix),s.mul(Me,Me,re.placementViewportMatrix),D.push({circleArray:Ie,circleOffset:O,transform:Ze,invTransform:Me}),B+=Ie.length/4,O=B}ve&&(l.terrain&&l.terrain.setupElevationDraw(H,M),M.draw(x,C.LINES,s.DepthMode.disabled,s.StencilMode.disabled,l.colorModeForRenderPass(),s.CullFaceMode.disabled,vd(Ae,l.transform,H),o.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,null,l.transform.zoom,null,ve.collisionVertexBuffer,ve.collisionVertexBufferExt))}if(!_||!D.length)return;const U=l.useProgram("collisionCircle"),G=new s.StructArrayLayout2f1f2i16;G.resize(4*B),G._trim();let R=0;for(const K of D)for(let ee=0;ee<K.circleArray.length/4;ee++){const H=4*ee,re=K.circleArray[H+0],Ae=K.circleArray[H+1],ve=K.circleArray[H+2],Ie=K.circleArray[H+3];G.emplace(R++,re,Ae,ve,Ie,0),G.emplace(R++,re,Ae,ve,Ie,1),G.emplace(R++,re,Ae,ve,Ie,2),G.emplace(R++,re,Ae,ve,Ie,3)}(!vo||vo.length<2*B)&&(vo=function(K){const ee=2*K,H=new s.StructArrayLayout3ui6;H.resize(ee),H._trim();for(let re=0;re<ee;re++){const Ae=6*re;H.uint16[Ae+0]=4*re+0,H.uint16[Ae+1]=4*re+1,H.uint16[Ae+2]=4*re+2,H.uint16[Ae+3]=4*re+2,H.uint16[Ae+4]=4*re+3,H.uint16[Ae+5]=4*re+0}return H}(B));const X=x.createIndexBuffer(vo,!0),j=x.createVertexBuffer(G,s.collisionCircleLayout.members,!0);for(const K of D){const ee={u_matrix:K.transform,u_inv_matrix:K.invTransform,u_camera_to_center_distance:(q=l.transform).cameraToCenterDistance,u_viewport_size:[q.width,q.height]};U.draw(x,C.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,l.colorModeForRenderPass(),s.CullFaceMode.disabled,ee,o.id,j,X,s.SegmentVector.simpleSegment(0,2*K.circleOffset,K.circleArray.length,K.circleArray.length/2),null,l.transform.zoom,null,null,null)}var q;j.destroy(),X.destroy()}const ql=s.create();function Rs(l,t,o,u,f,m){const{horizontalAlign:_,verticalAlign:x}=s.getAnchorAlignment(l),C=-(_-.5)*t,M=-(x-.5)*o,D=s.evaluateVariableOffset(l,u);return new s.pointGeometry((C/f+D[0])*m,(M/f+D[1])*m)}function Td(l,t,o,u,f,m,_,x,C,M,D,B){const O=l.text.placedSymbolArray,U=l.text.dynamicLayoutVertexArray,G=l.icon.dynamicLayoutVertexArray,R={},X=x.projMatrix,j=m.elevation,q=B.upVectorScale(x.canonical,m.center.lat,m.worldSize);U.clear();for(let K=0;K<O.length;K++){const ee=O.get(K),H=l.allowVerticalPlacement&&!ee.placedOrientation,re=ee.hidden||!ee.crossTileID||H?null:u[ee.crossTileID];if(re){const Ae=new s.pointGeometry(ee.tileAnchorX,ee.tileAnchorY),ve=B.upVector(x.canonical,Ae.x,Ae.y),Ie=j?j.getAtTileOffset(x,Ae.x,Ae.y):0,Me=Gr([ee.projectedAnchorX+Ie*ve[0]*q.metersToTile,ee.projectedAnchorY+Ie*ve[1]*q.metersToTile,ee.projectedAnchorZ+Ie*ve[2]*q.metersToTile],o?X:_),Ze=Ci(m.cameraToCenterDistance,Me.signedDistanceFromCamera);let ge=f.evaluateSizeForFeature(l.textSizeData,M,ee)*Ze/s.ONE_EM;o&&(ge*=l.tilePixelRatio/C);const{width:Ve,height:Ge,anchor:st,textOffset:be,textScale:pt}=re,gt=Rs(st,Ve,Ge,be,pt,ge),rt=o?pr(Ae.add(gt),_,Ie*q.metersToLabelSpace).point:Me.point.add(t?gt.rotate(-m.angle):gt),nt=l.allowVerticalPlacement&&ee.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let vt=0;vt<ee.numGlyphs;vt++)s.addDynamicAttributes(U,rt,nt);D&&ee.associatedIconIndex>=0&&(R[ee.associatedIconIndex]={shiftedAnchor:rt,angle:nt})}else Vi(ee.numGlyphs,U)}if(D){G.clear();const K=l.icon.placedSymbolArray;for(let ee=0;ee<K.length;ee++){const H=K.get(ee);if(H.hidden)Vi(H.numGlyphs,G);else{const re=R[ee];if(re)for(let Ae=0;Ae<H.numGlyphs;Ae++)s.addDynamicAttributes(G,re.shiftedAnchor,re.angle);else Vi(H.numGlyphs,G)}}l.icon.dynamicLayoutVertexBuffer.updateData(G)}l.text.dynamicLayoutVertexBuffer.updateData(U)}function Md(l,t,o){return o.iconsInText&&t?"symbolTextAndIcon":l?"symbolSDF":"symbolIcon"}function Wl(l,t,o,u,f,m,_,x,C,M,D,B){const O=l.context,U=O.gl,G=l.transform,R=x==="map",X=C==="map",j=R&&o.layout.get("symbol-placement")!=="point",q=R&&!X&&!j,K=o.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ee=!1;const H=l.depthModeForSublayer(0,s.DepthMode.ReadOnly),re=[s.mercatorXfromLng(G.center.lng),s.mercatorYfromLat(G.center.lat)],Ae=o.layout.get("text-variable-anchor"),ve=G.projection.name==="globe",Ie=ve?s.globeToMercatorTransition(G.zoom):0,Me=[],Ze=[];l.terrain&&X&&Ze.push("PITCH_WITH_MAP_TERRAIN"),ve&&Ze.push("PROJECTION_GLOBE_VIEW");for(const ge of u){const Ve=t.getTile(ge),Ge=Ve.getBucket(o);if(!Ge||Ge.projection!==G.projection.name)continue;const st=f?Ge.text:Ge.icon;if(!st||Ge.fullyClipped||!st.segments.get().length)continue;const be=st.programConfigurations.get(o.id),pt=f||Ge.sdfIcons,gt=f?Ge.textSizeData:Ge.iconSizeData,rt=X||G.pitch!==0,nt=s.evaluateSizeForZoom(gt,G.zoom);let vt,kt,ct,Mt,qt=[0,0],Ii=null;if(f){if(kt=Ve.glyphAtlasTexture,ct=U.LINEAR,vt=Ve.glyphAtlasTexture.size,Ge.iconsInText){qt=Ve.imageAtlasTexture.size,Ii=Ve.imageAtlasTexture;const kr=gt.kind==="composite"||gt.kind==="camera";Mt=rt||l.options.rotating||l.options.zooming||kr?U.LINEAR:U.NEAREST}}else{const kr=o.layout.get("icon-size").constantOr(0)!==1||Ge.iconsNeedLinear;kt=Ve.imageAtlasTexture,ct=pt||l.options.rotating||l.options.zooming||kr||rt?U.LINEAR:U.NEAREST,vt=Ve.imageAtlasTexture.size}const nr=l.transform.calculatePixelsToTileUnitsMatrix(Ve),or=Ao(ge.projMatrix,Ve.tileID.canonical,X,R,l.transform,nr),zr=l.terrain&&X&&j?s.invert(s.create(),or):ql,sn=Go(ge.projMatrix,Ve.tileID.canonical,X,R,l.transform,nr),En=Ae&&Ge.hasTextData(),Qn=o.layout.get("icon-text-fit")!=="none"&&En&&Ge.hasIconData();if(j){const kr=G.elevation,Co=kr?kr.getAtTileOffsetFunc(ge,G.center.lat,G.worldSize,G.projection):nh=>[0,0,0];Ms(Ge,ge.projMatrix,l,f,or,sn,X,M,Co,ge)}const In=j||f&&Ae||Qn,Di=l.translatePosMatrix(ge.projMatrix,Ve,m,_),zi=In?ql:or,ri=l.translatePosMatrix(sn,Ve,m,_,!0),Ni=G.projection.createInversionMatrix(G,ge.canonical),Br=In?Ze.concat(["PROJECTED_POS_ON_VIEWPORT"]):Ze,Ti=pt&&o.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ur;Ur=pt?Ge.iconsInText?Yo(gt.kind,nt,q,X,l,Di,zi,ri,vt,qt,ge,Ie,re,Ni):xo(gt.kind,nt,q,X,l,Di,zi,ri,f,vt,!0,ge,Ie,re,Ni):Yl(gt.kind,nt,q,X,l,Di,zi,ri,f,vt,ge,Ie,re,Ni);const Js={program:l.useProgram(Md(pt,f,Ge),be,Br),buffers:st,uniformValues:Ur,atlasTexture:kt,atlasTextureIcon:Ii,atlasInterpolation:ct,atlasInterpolationIcon:Mt,isSDF:pt,hasHalo:Ti,tile:Ve,labelPlaneMatrixInv:zr};if(K&&Ge.canOverlap){ee=!0;const kr=st.segments.get();for(const Co of kr)Me.push({segments:new s.SegmentVector([Co]),sortKey:Co.sortKey,state:Js})}else Me.push({segments:st.segments,sortKey:0,state:Js})}ee&&Me.sort((ge,Ve)=>ge.sortKey-Ve.sortKey);for(const ge of Me){const Ve=ge.state;if(l.terrain&&l.terrain.setupElevationDraw(Ve.tile,Ve.program,{useDepthForOcclusion:!ve,labelPlaneMatrixInv:Ve.labelPlaneMatrixInv}),O.activeTexture.set(U.TEXTURE0),Ve.atlasTexture.bind(Ve.atlasInterpolation,U.CLAMP_TO_EDGE),Ve.atlasTextureIcon&&(O.activeTexture.set(U.TEXTURE1),Ve.atlasTextureIcon&&Ve.atlasTextureIcon.bind(Ve.atlasInterpolationIcon,U.CLAMP_TO_EDGE)),Ve.isSDF){const Ge=Ve.uniformValues;Ve.hasHalo&&(Ge.u_is_halo=1,Du(Ve.buffers,ge.segments,o,l,Ve.program,H,D,B,Ge)),Ge.u_is_halo=0}Du(Ve.buffers,ge.segments,o,l,Ve.program,H,D,B,Ve.uniformValues)}}function Du(l,t,o,u,f,m,_,x,C){const M=u.context;f.draw(M,M.gl.TRIANGLES,m,_,x,s.CullFaceMode.disabled,C,o.id,l.layoutVertexBuffer,l.indexBuffer,t,o.paint,u.transform.zoom,l.programConfigurations.get(o.id),l.dynamicLayoutVertexBuffer,l.opacityVertexBuffer)}function Ra(l,t,o,u,f,m,_){const x=l.context.gl,C=o.paint.get("fill-pattern"),M=C&&C.constantOr(1),D=o.getCrossfadeParameters();let B,O,U,G,R;_?(O=M&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",B=x.LINES):(O=M?"fillPattern":"fill",B=x.TRIANGLES);for(const X of u){const j=t.getTile(X);if(M&&!j.patternsLoaded())continue;const q=j.getBucket(o);if(!q)continue;l.prepareDrawTile();const K=q.programConfigurations.get(o.id),ee=l.useProgram(O,K);M&&(l.context.activeTexture.set(x.TEXTURE0),j.imageAtlasTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE),K.updatePaintBuffers(D));const H=C.constantOr(null);if(H&&j.imageAtlas){const Ae=j.imageAtlas,ve=Ae.patternPositions[H.to.toString()],Ie=Ae.patternPositions[H.from.toString()];ve&&Ie&&K.setConstantPatternPositions(ve,Ie)}const re=l.translatePosMatrix(X.projMatrix,j,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(_){G=q.indexBuffer2,R=q.segments2;const Ae=l.terrain&&l.terrain.renderingToTexture?l.terrain.drapeBufferSize:[x.drawingBufferWidth,x.drawingBufferHeight];U=O==="fillOutlinePattern"&&M?wu(re,l,D,j,Ae):La(re,Ae)}else G=q.indexBuffer,R=q.segments,U=M?ka(re,l,D,j):Ba(re);l.prepareDrawProgram(l.context,ee,X.toUnwrapped()),ee.draw(l.context,B,f,l.stencilModeForClipping(X),m,s.CullFaceMode.disabled,U,o.id,q.layoutVertexBuffer,G,R,o.paint,l.transform.zoom,K)}}function Ho(l,t,o,u,f,m,_){const x=l.context,C=x.gl,M=l.transform,D=o.paint.get("fill-extrusion-pattern"),B=D.constantOr(1),O=o.getCrossfadeParameters(),U=o.paint.get("fill-extrusion-opacity"),G=function(K){if(K.projection.name!=="globe")return 0;const ee=Math.PI/32,H=Math.tan(ee),re=s.earthRadius;return re*Math.sqrt(1+2*H*H)-re}(M),R=M.projection.name==="globe",X=R?s.globeToMercatorTransition(M.zoom):0,j=[s.mercatorXfromLng(M.center.lng),s.mercatorYfromLat(M.center.lat)],q=[];R&&q.push("PROJECTION_GLOBE_VIEW");for(const K of u){const ee=t.getTile(K),H=ee.getBucket(o);if(!H||H.projection!==M.projection.name)continue;const re=H.programConfigurations.get(o.id),Ae=l.useProgram(B?"fillExtrusionPattern":"fillExtrusion",re,q);if(l.terrain){const Ve=l.terrain;if(l.style.terrainSetForDrapingOnly())Ve.setupElevationDraw(ee,Ae,{useMeterToDem:!0});else{if(!H.enableTerrain)continue;if(Ve.setupElevationDraw(ee,Ae,{useMeterToDem:!0}),Ns(x,t,K,H,o,Ve),!H.centroidVertexBuffer){const Ge=Ae.attributes.a_centroid_pos;Ge!==void 0&&C.vertexAttrib2f(Ge,0,0)}}}B&&(l.context.activeTexture.set(C.TEXTURE0),ee.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),re.updatePaintBuffers(O));const ve=D.constantOr(null);if(ve&&ee.imageAtlas){const Ve=ee.imageAtlas,Ge=Ve.patternPositions[ve.to.toString()],st=Ve.patternPositions[ve.from.toString()];Ge&&st&&re.setConstantPatternPositions(Ge,st)}const Ie=l.translatePosMatrix(K.projMatrix,ee,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Me=M.projection.createInversionMatrix(M,K.canonical),Ze=o.paint.get("fill-extrusion-vertical-gradient"),ge=B?za(Ie,l,Ze,U,K,O,ee,G,X,j,Me):Sa(Ie,l,Ze,U,K,G,X,j,Me);l.prepareDrawProgram(x,Ae,K.toUnwrapped()),Ae.draw(x,x.gl.TRIANGLES,f,m,_,s.CullFaceMode.backCCW,ge,o.id,H.layoutVertexBuffer,H.indexBuffer,H.segments,o.paint,l.transform.zoom,re,l.terrain?H.centroidVertexBuffer:null,R?H.layoutVertexExtBuffer:null)}}function Ns(l,t,o,u,f,m){const _=[j=>{let q=j.canonical.x-1,K=j.wrap;return q<0&&(q=(1<<j.canonical.z)-1,K--),new s.OverscaledTileID(j.overscaledZ,K,j.canonical.z,q,j.canonical.y)},j=>{let q=j.canonical.x+1,K=j.wrap;return q===1<<j.canonical.z&&(q=0,K++),new s.OverscaledTileID(j.overscaledZ,K,j.canonical.z,q,j.canonical.y)},j=>new s.OverscaledTileID(j.overscaledZ,j.wrap,j.canonical.z,j.canonical.x,(j.canonical.y===0?1<<j.canonical.z:j.canonical.y)-1),j=>new s.OverscaledTileID(j.overscaledZ,j.wrap,j.canonical.z,j.canonical.x,j.canonical.y===(1<<j.canonical.z)-1?0:j.canonical.y+1)],x=j=>{const q=t.getSource().minzoom,K=H=>{const re=t.getTileByID(H);if(re&&re.hasData())return re.getBucket(f)},ee=[0,-1,1];for(const H of ee){if(j.overscaledZ+H<q)continue;const re=K(j.calculateScaledKey(j.overscaledZ+H));if(re)return re}},C=[0,0,0],M=(j,q)=>(C[0]=Math.min(j.min.y,q.min.y),C[1]=Math.max(j.max.y,q.max.y),C[2]=s.EXTENT-q.min.x>j.max.x?q.min.x-s.EXTENT:j.max.x,C),D=(j,q)=>(C[0]=Math.min(j.min.x,q.min.x),C[1]=Math.max(j.max.x,q.max.x),C[2]=s.EXTENT-q.min.y>j.max.y?q.min.y-s.EXTENT:j.max.y,C),B=[(j,q)=>M(j,q),(j,q)=>M(q,j),(j,q)=>D(j,q),(j,q)=>D(q,j)],O=new s.pointGeometry(0,0);let U,G,R;const X=(j,q,K,ee,H)=>{const re=[[ee?K:j,ee?j:K,0],[ee?K:q,ee?q:K,0]],Ae=H<0?s.EXTENT+H:H,ve=[ee?Ae:(j+q)/2,ee?(j+q)/2:Ae,0];return K===0&&H<0||K!==0&&H>0?m.getForTilePoints(R,[ve],!0,G):re.push(ve),m.getForTilePoints(o,re,!0,U),Math.max(re[0][2],re[1][2],ve[2])/m.exaggeration()};for(let j=0;j<4;j++){const q=(j<2?1:5)-j,K=u.borders[j];if(K.length===0)continue;const ee=R=_[j](o),H=x(ee);if(!(H&&H instanceof s.FillExtrusionBucket&&H.enableTerrain)||u.borderDoneWithNeighborZ[j]===H.canonical.z&&H.borderDoneWithNeighborZ[q]===u.canonical.z||(G=m.findDEMTileFor(ee),!G||!G.dem))continue;if(!U){const Ie=m.findDEMTileFor(o);if(!Ie||!Ie.dem)return;U=Ie}const re=H.borders[q];let Ae=0;const ve=H.borderDoneWithNeighborZ[q]!==u.canonical.z;if(u.canonical.z===H.canonical.z){for(let Ie=0;Ie<K.length;Ie++){const Me=u.featuresOnBorder[K[Ie]],Ze=Me.borders[j];let ge;for(;Ae<re.length&&(ge=H.featuresOnBorder[re[Ae]],!(ge.borders[q][1]>Ze[0]+3));)ve&&H.encodeCentroid(void 0,ge,!1),Ae++;if(ge&&Ae<re.length){const Ve=Ae;let Ge=0;for(;!(ge.borders[q][0]>Ze[1]-3)&&(Ge++,++Ae!==re.length);)ge=H.featuresOnBorder[re[Ae]];if(ge=H.featuresOnBorder[re[Ve]],Me.intersectsCount()>1||ge.intersectsCount()>1||Ge!==1){Ge!==1&&(Ae=Ve),u.encodeCentroid(void 0,Me,!1),ve&&H.encodeCentroid(void 0,ge,!1);continue}const st=B[j](Me,ge),be=j%2?s.EXTENT-1:0;O.x=X(st[0],Math.min(s.EXTENT-1,st[1]),be,j<2,st[2]),O.y=0,u.encodeCentroid(O,Me,!1),ve&&H.encodeCentroid(O,ge,!1)}else u.encodeCentroid(void 0,Me,!1)}u.borderDoneWithNeighborZ[j]=H.canonical.z,u.needsCentroidUpdate=!0,ve&&(H.borderDoneWithNeighborZ[q]=u.canonical.z,H.needsCentroidUpdate=!0)}else{for(const Ie of K)u.encodeCentroid(void 0,u.featuresOnBorder[Ie],!1);if(ve){for(const Ie of re)H.encodeCentroid(void 0,H.featuresOnBorder[Ie],!1);H.borderDoneWithNeighborZ[q]=u.canonical.z,H.needsCentroidUpdate=!0}u.borderDoneWithNeighborZ[j]=H.canonical.z,u.needsCentroidUpdate=!0}}(u.needsCentroidUpdate||!u.centroidVertexBuffer&&u.centroidVertexArray.length!==0)&&u.uploadCentroid(l)}const Kl=new s.Color(1,0,0,1),Xl=new s.Color(0,1,0,1),Su=new s.Color(0,0,1,1),Na=new s.Color(1,0,1,1),Oa=new s.Color(0,1,1,1);function Je(l,t,o,u){Os(l,0,t+o/2,l.transform.width,o,u)}function Fr(l,t,o,u){Os(l,t-o/2,0,o,l.transform.height,u)}function Os(l,t,o,u,f,m){const _=l.context,x=_.gl;x.enable(x.SCISSOR_TEST),x.scissor(t*s.exported.devicePixelRatio,o*s.exported.devicePixelRatio,u*s.exported.devicePixelRatio,f*s.exported.devicePixelRatio),_.clear({color:m}),x.disable(x.SCISSOR_TEST)}function zu(l,t,o){const u=l.context,f=u.gl,m=l.transform.projection.name==="globe",_=o.projMatrix,x=l.useProgram("debug",null,m?["PROJECTION_GLOBE_VIEW"]:null),C=t.getTileByID(o.key);l.terrain&&l.terrain.setupElevationDraw(C,x);const M=s.DepthMode.disabled,D=s.StencilMode.disabled,B=l.colorModeForRenderPass(),O="$debug";u.activeTexture.set(f.TEXTURE0),l.emptyTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),m?C._makeGlobeTileDebugBuffers(l.context,l.transform.projection):C._makeDebugTileBoundsBuffers(l.context,l.transform.projection);const U=C._tileDebugBuffer||l.debugBuffer,G=C._tileDebugIndexBuffer||l.debugIndexBuffer,R=C._tileDebugSegments||l.debugSegments;x.draw(u,f.LINE_STRIP,M,D,B,s.CullFaceMode.disabled,Tu(_,s.Color.red),O,U,G,R,null,null,null,C._globeTileDebugBorderBuffer);const X=C.latestRawTileData,j=Math.floor((X&&X.byteLength||0)/1024),q=t.getTile(o).tileSize,K=512/Math.min(q,512)*(o.overscaledZ/l.transform.zoom)*.5;let ee=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ee+=` => ${o.overscaledZ}`),function(ve,Ie){ve.initDebugOverlayCanvas();const Me=ve.debugOverlayCanvas,Ze=ve.context.gl,ge=ve.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,Me.width,Me.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(Ie,5,5),ge.strokeText(Ie,5,5),ve.debugOverlayTexture.update(Me),ve.debugOverlayTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE)}(l,`${ee} ${j}kb`);const H=C._tileDebugTextBuffer||l.debugBuffer,re=C._tileDebugTextIndexBuffer||l.quadTriangleIndexBuffer,Ae=C._tileDebugTextSegments||l.debugSegments;x.draw(u,f.TRIANGLES,M,D,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,Tu(_,s.Color.transparent,K),O,H,re,Ae,null,null,null,C._globeTileDebugTextBuffer)}const Bu=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:qo}=Bu;function Cn(l,t,o,u){l.emplaceBack(t,o,u)}class Gs{constructor(t){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,Cn(this.vertexArray,-1,-1,1),Cn(this.vertexArray,1,-1,1),Cn(this.vertexArray,-1,1,1),Cn(this.vertexArray,1,1,1),Cn(this.vertexArray,-1,-1,-1),Cn(this.vertexArray,1,-1,-1),Cn(this.vertexArray,-1,1,-1),Cn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,qo),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function Fn(l,t,o,u,f,m){const _=l.gl,x=t.paint.get("sky-atmosphere-color"),C=t.paint.get("sky-atmosphere-halo-color"),M=t.paint.get("sky-atmosphere-sun-intensity"),D=((B,O,U,G,R)=>({u_matrix_3f:B,u_sun_direction:O,u_sun_intensity:U,u_color_tint_r:[G.r,G.g,G.b,G.a],u_color_tint_m:[R.r,R.g,R.b,R.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),u),f,M,x,C);_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_CUBE_MAP_POSITIVE_X+m,t.skyboxTexture,0),o.draw(l,_.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,D,"skyboxCapture",t.skyboxGeometry.vertexBuffer,t.skyboxGeometry.indexBuffer,t.skyboxGeometry.segment)}function Vn(l,t){return s.transformMat4(l,l,t)}const Jl={symbol:function(l,t,o,u,f){if(l.renderPass!=="translucent")return;const m=s.StencilMode.disabled,_=l.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(x,C,M,D,B,O,U){const G=C.transform,R=B==="map",X=O==="map";for(const j of x){const q=D.getTile(j),K=q.getBucket(M);if(!K||K.projection!==G.projection.name||!K.text||!K.text.segments.get().length)continue;const ee=s.evaluateSizeForZoom(K.textSizeData,G.zoom),H=C.transform.calculatePixelsToTileUnitsMatrix(q),re=Ao(j.projMatrix,q.tileID.canonical,X,R,C.transform,H),Ae=M.layout.get("icon-text-fit")!=="none"&&K.hasIconData();if(ee){const ve=Math.pow(2,G.zoom-q.tileID.overscaledZ);Td(K,R,X,U,s.symbolSize,G,re,j,ve,ee,Ae,G.projection)}}}(u,l,o,t,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),f),o.paint.get("icon-opacity").constantOr(1)!==0&&Wl(l,t,o,u,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),m,_),o.paint.get("text-opacity").constantOr(1)!==0&&Wl(l,t,o,u,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),m,_),t.map.showCollisionBoxes&&(Iu(l,t,o,u,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Iu(l,t,o,u,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))},circle:function(l,t,o,u){if(l.renderPass!=="translucent")return;const f=o.paint.get("circle-opacity"),m=o.paint.get("circle-stroke-width"),_=o.paint.get("circle-stroke-opacity"),x=o.layout.get("circle-sort-key").constantOr(1)!==void 0;if(f.constantOr(1)===0&&(m.constantOr(1)===0||_.constantOr(1)===0))return;const C=l.context,M=C.gl,D=l.transform,B=l.depthModeForSublayer(0,s.DepthMode.ReadOnly),O=s.StencilMode.disabled,U=l.colorModeForRenderPass(),G=D.projection.name==="globe",R=[s.mercatorXfromLng(D.center.lng),s.mercatorYfromLat(D.center.lat)],X=[];for(let q=0;q<u.length;q++){const K=u[q],ee=t.getTile(K),H=ee.getBucket(o);if(!H)continue;const re=H.programConfigurations.get(o.id),Ae=xd(o);G&&Ae.push("PROJECTION_GLOBE_VIEW");const ve=l.useProgram("circle",re,Ae),Ie=H.layoutVertexBuffer,Me=H.globeExtVertexBuffer,Ze=H.indexBuffer,ge=D.projection.createInversionMatrix(D,K.canonical),Ve={programConfiguration:re,program:ve,layoutVertexBuffer:Ie,globeExtVertexBuffer:Me,indexBuffer:Ze,uniformValues:Qo(l,K,ee,ge,R,o),tile:ee};if(x){const Ge=H.segments.get();for(const st of Ge)X.push({segments:new s.SegmentVector([st]),sortKey:st.sortKey,state:Ve})}else X.push({segments:H.segments,sortKey:0,state:Ve})}x&&X.sort((q,K)=>q.sortKey-K.sortKey);const j={useDepthForOcclusion:!G};for(const q of X){const{programConfiguration:K,program:ee,layoutVertexBuffer:H,globeExtVertexBuffer:re,indexBuffer:Ae,uniformValues:ve,tile:Ie}=q.state,Me=q.segments;l.terrain&&l.terrain.setupElevationDraw(Ie,ee,j),l.prepareDrawProgram(C,ee,Ie.tileID.toUnwrapped()),ee.draw(C,M.TRIANGLES,B,O,U,s.CullFaceMode.disabled,ve,o.id,H,Ae,Me,o.paint,D.zoom,K,G?re:null)}},heatmap:function(l,t,o,u){if(o.paint.get("heatmap-opacity")!==0)if(l.renderPass==="offscreen"){const f=l.context,m=f.gl,_=s.StencilMode.disabled,x=new s.ColorMode([m.ONE,m.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(O,U,G){const R=O.gl;O.activeTexture.set(R.TEXTURE1),O.viewport.set([0,0,U.width/4,U.height/4]);let X=G.heatmapFbo;if(X)R.bindTexture(R.TEXTURE_2D,X.colorAttachment.get()),O.bindFramebuffer.set(X.framebuffer);else{const j=R.createTexture();R.bindTexture(R.TEXTURE_2D,j),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_2D,R.TEXTURE_MAG_FILTER,R.LINEAR),X=G.heatmapFbo=O.createFramebuffer(U.width/4,U.height/4,!1),function(q,K,ee,H){const re=q.gl;re.texImage2D(re.TEXTURE_2D,0,re.RGBA,K.width/4,K.height/4,0,re.RGBA,q.extRenderToTextureHalfFloat?q.extTextureHalfFloat.HALF_FLOAT_OES:re.UNSIGNED_BYTE,null),H.colorAttachment.set(ee)}(O,U,j,X)}})(f,l,o),f.clear({color:s.Color.transparent});const C=l.transform,M=C.projection.name==="globe",D=M?["PROJECTION_GLOBE_VIEW"]:null,B=[s.mercatorXfromLng(C.center.lng),s.mercatorYfromLat(C.center.lat)];for(let O=0;O<u.length;O++){const U=u[O];if(t.hasRenderableParent(U))continue;const G=t.getTile(U),R=G.getBucket(o);if(!R)continue;const X=R.programConfigurations.get(o.id),j=l.useProgram("heatmap",X,D),{zoom:q}=l.transform;l.terrain&&l.terrain.setupElevationDraw(G,j),l.prepareDrawProgram(f,j,U.toUnwrapped());const K=C.projection.createInversionMatrix(C,U.canonical);j.draw(f,m.TRIANGLES,s.DepthMode.disabled,_,x,s.CullFaceMode.disabled,wd(l,U,G,K,B,q,o.paint.get("heatmap-intensity")),o.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,o.paint,l.transform.zoom,X,M?R.globeExtVertexBuffer:null)}f.viewport.set([0,0,l.width,l.height])}else l.renderPass==="translucent"&&(l.context.setColorMode(l.colorModeForRenderPass()),function(f,m){const _=f.context,x=_.gl,C=m.heatmapFbo;if(!C)return;_.activeTexture.set(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,C.colorAttachment.get()),_.activeTexture.set(x.TEXTURE1);let M=m.colorRampTexture;M||(M=m.colorRampTexture=new s.Texture(_,m.colorRamp,x.RGBA)),M.bind(x.LINEAR,x.CLAMP_TO_EDGE),f.useProgram("heatmapTexture").draw(_,x.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,f.colorModeForRenderPass(),s.CullFaceMode.disabled,((D,B,O,U)=>({u_image:0,u_color_ramp:1,u_opacity:B.paint.get("heatmap-opacity")}))(0,m),m.id,f.viewportBuffer,f.quadTriangleIndexBuffer,f.viewportSegments,m.paint,f.transform.zoom)}(l,o))},line:function(l,t,o,u){if(l.renderPass!=="translucent")return;const f=o.paint.get("line-opacity"),m=o.paint.get("line-width");if(f.constantOr(1)===0||m.constantOr(1)===0)return;const _=l.depthModeForSublayer(0,s.DepthMode.ReadOnly),x=l.colorModeForRenderPass(),C=l.terrain&&l.terrain.renderingToTexture?1:s.exported.devicePixelRatio,M=o.paint.get("line-dasharray"),D=M.constantOr(1),B=o.layout.get("line-cap"),O=o.paint.get("line-pattern"),U=O.constantOr(1),G=o.paint.get("line-gradient"),R=o.getCrossfadeParameters(),X=U?"linePattern":"line",j=l.context,q=j.gl,K=(H=>{const re=[];jl(H)&&re.push("RENDER_LINE_DASH"),H.paint.get("line-gradient")&&re.push("RENDER_LINE_GRADIENT");const Ae=H.paint.get("line-pattern").constantOr(1),ve=H.paint.get("line-opacity").constantOr(1)!==1;return!Ae&&ve&&re.push("RENDER_LINE_ALPHA_DISCARD"),re})(o);let ee=K.includes("RENDER_LINE_ALPHA_DISCARD");l.terrain&&l.terrain.clipOrMaskOverlapStencilType()&&(ee=!1);for(const H of u){const re=t.getTile(H);if(U&&!re.patternsLoaded())continue;const Ae=re.getBucket(o);if(!Ae)continue;l.prepareDrawTile();const ve=Ae.programConfigurations.get(o.id),Ie=l.useProgram(X,ve,K),Me=O.constantOr(null);if(Me&&re.imageAtlas){const be=re.imageAtlas,pt=be.patternPositions[Me.to.toString()],gt=be.patternPositions[Me.from.toString()];pt&&gt&&ve.setConstantPatternPositions(pt,gt)}const Ze=M.constantOr(null),ge=B.constantOr(null);if(!U&&Ze&&ge&&re.lineAtlas){const be=re.lineAtlas,pt=be.getDash(Ze.to,ge),gt=be.getDash(Ze.from,ge);pt&&gt&&ve.setConstantPatternPositions(pt,gt)}const Ve=l.terrain?H.projMatrix:null,Ge=U?Zl(l,re,o,R,Ve,C):Cd(l,re,o,R,Ve,Ae.lineClipsArray.length,C);if(G){const be=Ae.gradients[o.id];let pt=be.texture;if(o.gradientVersion!==be.version){let gt=256;if(o.stepInterpolant){const rt=t.getSource().maxzoom,nt=H.canonical.z===rt?Math.ceil(1<<l.transform.maxZoom-H.canonical.z):1;gt=s.clamp(s.nextPowerOfTwo(Ae.maxLineLength/s.EXTENT*1024*nt),256,j.maxTextureSize)}be.gradient=s.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:gt,image:be.gradient||void 0,clips:Ae.lineClipsArray}),be.texture?be.texture.update(be.gradient):be.texture=new s.Texture(j,be.gradient,q.RGBA),be.version=o.gradientVersion,pt=be.texture}j.activeTexture.set(q.TEXTURE1),pt.bind(o.stepInterpolant?q.NEAREST:q.LINEAR,q.CLAMP_TO_EDGE)}D&&(j.activeTexture.set(q.TEXTURE0),re.lineAtlasTexture.bind(q.LINEAR,q.REPEAT),ve.updatePaintBuffers(R)),U&&(j.activeTexture.set(q.TEXTURE0),re.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),ve.updatePaintBuffers(R)),l.prepareDrawProgram(j,Ie,H.toUnwrapped());const st=be=>{Ie.draw(j,q.TRIANGLES,_,be,x,s.CullFaceMode.disabled,Ge,o.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,o.paint,l.transform.zoom,ve,Ae.layoutVertexBuffer2)};if(ee){const be=l.stencilModeForClipping(H).ref;be===0&&l.terrain&&j.clear({stencil:0});const pt={func:q.EQUAL,mask:255};Ge.u_alpha_discard_threshold=.8,st(new s.StencilMode(pt,be,255,q.KEEP,q.KEEP,q.INVERT)),Ge.u_alpha_discard_threshold=0,st(new s.StencilMode(pt,be,255,q.KEEP,q.KEEP,q.KEEP))}else st(l.stencilModeForClipping(H))}ee&&(l.resetStencilClippingMasks(),l.terrain&&j.clear({stencil:0}))},fill:function(l,t,o,u){const f=o.paint.get("fill-color"),m=o.paint.get("fill-opacity");if(m.constantOr(1)===0)return;const _=l.colorModeForRenderPass(),x=o.paint.get("fill-pattern"),C=l.opaquePassEnabledForLayer()&&!x.constantOr(1)&&f.constantOr(s.Color.transparent).a===1&&m.constantOr(0)===1?"opaque":"translucent";if(l.renderPass===C){const M=l.depthModeForSublayer(1,l.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);Ra(l,t,o,u,M,_,!1)}if(l.renderPass==="translucent"&&o.paint.get("fill-antialias")){const M=l.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);Ra(l,t,o,u,M,_,!0)}},"fill-extrusion":function(l,t,o,u){const f=o.paint.get("fill-extrusion-opacity");if(f!==0&&l.renderPass==="translucent"){const m=new s.DepthMode(l.context.gl.LEQUAL,s.DepthMode.ReadWrite,l.depthRangeFor3D);if(f!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))Ho(l,t,o,u,m,s.StencilMode.disabled,s.ColorMode.disabled),Ho(l,t,o,u,m,l.stencilModeFor3D(),l.colorModeForRenderPass()),l.resetStencilClippingMasks();else{const _=l.colorModeForRenderPass();Ho(l,t,o,u,m,s.StencilMode.disabled,_)}}},hillshade:function(l,t,o,u){if(l.renderPass!=="offscreen"&&l.renderPass!=="translucent")return;const f=l.context,m=l.depthModeForSublayer(0,s.DepthMode.ReadOnly),_=l.colorModeForRenderPass(),x=l.terrain&&l.terrain.renderingToTexture,[C,M]=l.renderPass!=="translucent"||x?[{},u]:l.stencilConfigForOverlap(u);for(const D of M){const B=t.getTile(D);if(B.needsHillshadePrepare&&l.renderPass==="offscreen")Nl(l,B,o,m,s.StencilMode.disabled,_);else if(l.renderPass==="translucent"){const O=x&&l.terrain?l.terrain.stencilModeForRTTOverlap(D):C[D.overscaledZ];xu(l,D,B,o,m,O,_)}}f.viewport.set([0,0,l.width,l.height]),l.resetStencilClippingMasks()},raster:function(l,t,o,u,f,m){if(l.renderPass!=="translucent"||o.paint.get("raster-opacity")===0||!u.length)return;const _=l.context,x=_.gl,C=t.getSource(),M=l.useProgram("raster"),D=l.colorModeForRenderPass(),B=l.terrain&&l.terrain.renderingToTexture,[O,U]=C instanceof ne||B?[{},u]:l.stencilConfigForOverlap(u),G=U[U.length-1].overscaledZ,R=!l.options.moving;for(const X of U){const j=B?s.DepthMode.disabled:l.depthModeForSublayer(X.overscaledZ-G,o.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,x.LESS),q=X.toUnwrapped(),K=t.getTile(X);if(B&&(!K||!K.hasData()))continue;const ee=B?X.projMatrix:l.transform.calculateProjMatrix(q,R),H=l.terrain&&B?l.terrain.stencilModeForRTTOverlap(X):O[X.overscaledZ],re=m?0:o.paint.get("raster-fade-duration");K.registerFadeDuration(re);const Ae=t.findLoadedParent(X,0),ve=Fl(K,Ae,t,l.transform,re);let Ie,Me;l.terrain&&l.terrain.prepareDrawTile();const Ze=o.paint.get("raster-resampling")==="nearest"?x.NEAREST:x.LINEAR;_.activeTexture.set(x.TEXTURE0),K.texture.bind(Ze,x.CLAMP_TO_EDGE),_.activeTexture.set(x.TEXTURE1),Ae?(Ae.texture.bind(Ze,x.CLAMP_TO_EDGE),Ie=Math.pow(2,Ae.tileID.overscaledZ-K.tileID.overscaledZ),Me=[K.tileID.canonical.x*Ie%1,K.tileID.canonical.y*Ie%1]):K.texture.bind(Ze,x.CLAMP_TO_EDGE);const ge=Mu(ee,Me||[0,0],Ie||1,ve,o,C instanceof ne?C.perspectiveTransform:[0,0]);if(l.prepareDrawProgram(_,M,q),C instanceof ne)C.boundsBuffer&&C.boundsSegments&&M.draw(_,x.TRIANGLES,j,s.StencilMode.disabled,D,s.CullFaceMode.disabled,ge,o.id,C.boundsBuffer,l.quadTriangleIndexBuffer,C.boundsSegments);else{const{tileBoundsBuffer:Ve,tileBoundsIndexBuffer:Ge,tileBoundsSegments:st}=l.getTileBoundsBuffers(K);M.draw(_,x.TRIANGLES,j,H,D,s.CullFaceMode.disabled,ge,o.id,Ve,Ge,st)}}l.resetStencilClippingMasks()},background:function(l,t,o,u){const f=o.paint.get("background-color"),m=o.paint.get("background-opacity");if(m===0)return;const _=l.context,x=_.gl,C=l.transform,M=C.tileSize,D=o.paint.get("background-pattern");if(l.isPatternMissing(D))return;const B=!D&&f.a===1&&m===1&&l.opaquePassEnabledForLayer()?"opaque":"translucent";if(l.renderPass!==B)return;const O=s.StencilMode.disabled,U=l.depthModeForSublayer(0,B==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),G=l.colorModeForRenderPass(),R=l.useProgram(D?"backgroundPattern":"background");let X,j=u;j||(X=l.getBackgroundTiles(),j=Object.values(X).map(K=>K.tileID)),D&&(_.activeTexture.set(x.TEXTURE0),l.imageManager.bind(l.context));const q=o.getCrossfadeParameters();for(const K of j){const ee=K.toUnwrapped(),H=u?K.projMatrix:l.transform.calculateProjMatrix(ee);l.prepareDrawTile();const re=t?t.getTile(K):X?X[K.key]:new s.Tile(K,M,C.zoom,l),Ae=D?Hl(H,m,l,D,{tileID:K,tileSize:M},q):Eu(H,m,f);l.prepareDrawProgram(_,R,ee);const{tileBoundsBuffer:ve,tileBoundsIndexBuffer:Ie,tileBoundsSegments:Me}=l.getTileBoundsBuffers(re);R.draw(_,x.TRIANGLES,U,O,G,s.CullFaceMode.disabled,Ae,o.id,ve,Ie,Me)}},sky:function(l,t,o){const u=l.transform,f=u.projection.name==="mercator"||u.projection.name==="globe"?1:s.smoothstep(7,8,u.zoom),m=o.paint.get("sky-opacity")*f;if(m===0)return;const _=l.context,x=o.paint.get("sky-type"),C=new s.DepthMode(_.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),M=l.frameCounter/1e3%1;x==="atmosphere"?l.renderPass==="offscreen"?o.needsSkyboxCapture(l)&&(function(D,B,O,U){const G=D.context,R=G.gl;let X=B.skyboxFbo;if(!X){X=B.skyboxFbo=G.createFramebuffer(32,32,!1),B.skyboxGeometry=new Gs(G),B.skyboxTexture=G.gl.createTexture(),R.bindTexture(R.TEXTURE_CUBE_MAP,B.skyboxTexture),R.texParameteri(R.TEXTURE_CUBE_MAP,R.TEXTURE_WRAP_S,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_CUBE_MAP,R.TEXTURE_WRAP_T,R.CLAMP_TO_EDGE),R.texParameteri(R.TEXTURE_CUBE_MAP,R.TEXTURE_MIN_FILTER,R.LINEAR),R.texParameteri(R.TEXTURE_CUBE_MAP,R.TEXTURE_MAG_FILTER,R.LINEAR);for(let ee=0;ee<6;++ee)R.texImage2D(R.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,R.RGBA,32,32,0,R.RGBA,R.UNSIGNED_BYTE,null)}G.bindFramebuffer.set(X.framebuffer),G.viewport.set([0,0,32,32]);const j=B.getCenter(D,!0),q=D.useProgram("skyboxCapture"),K=new Float64Array(16);s.identity(K),s.rotateY(K,K,.5*-Math.PI),Fn(G,B,q,K,j,0),s.identity(K),s.rotateY(K,K,.5*Math.PI),Fn(G,B,q,K,j,1),s.identity(K),s.rotateX(K,K,.5*-Math.PI),Fn(G,B,q,K,j,2),s.identity(K),s.rotateX(K,K,.5*Math.PI),Fn(G,B,q,K,j,3),s.identity(K),Fn(G,B,q,K,j,4),s.identity(K),s.rotateY(K,K,Math.PI),Fn(G,B,q,K,j,5),G.viewport.set([0,0,D.width,D.height])}(l,o),o.markSkyboxValid(l)):l.renderPass==="sky"&&function(D,B,O,U,G){const R=D.context,X=R.gl,j=D.transform,q=D.useProgram("skybox");R.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_CUBE_MAP,B.skyboxTexture);const K=((ee,H,re,Ae,ve)=>({u_matrix:ee,u_sun_direction:H,u_cubemap:0,u_opacity:Ae,u_temporal_offset:ve}))(j.skyboxMatrix,B.getCenter(D,!1),0,U,G);D.prepareDrawProgram(R,q),q.draw(R,X.TRIANGLES,O,s.StencilMode.disabled,D.colorModeForRenderPass(),s.CullFaceMode.backCW,K,"skybox",B.skyboxGeometry.vertexBuffer,B.skyboxGeometry.indexBuffer,B.skyboxGeometry.segment)}(l,o,C,m,M):x==="gradient"&&l.renderPass==="sky"&&function(D,B,O,U,G){const R=D.context,X=R.gl,j=D.transform,q=D.useProgram("skyboxGradient");B.skyboxGeometry||(B.skyboxGeometry=new Gs(R)),R.activeTexture.set(X.TEXTURE0);let K=B.colorRampTexture;K||(K=B.colorRampTexture=new s.Texture(R,B.colorRamp,X.RGBA)),K.bind(X.LINEAR,X.CLAMP_TO_EDGE);const ee=((H,re,Ae,ve,Ie)=>({u_matrix:H,u_color_ramp:0,u_center_direction:re,u_radius:s.degToRad(Ae),u_opacity:ve,u_temporal_offset:Ie}))(j.skyboxMatrix,B.getCenter(D,!1),B.paint.get("sky-gradient-radius"),U,G);D.prepareDrawProgram(R,q),q.draw(R,X.TRIANGLES,O,s.StencilMode.disabled,D.colorModeForRenderPass(),s.CullFaceMode.backCW,ee,"skyboxGradient",B.skyboxGeometry.vertexBuffer,B.skyboxGeometry.indexBuffer,B.skyboxGeometry.segment)}(l,o,C,m,M)},debug:function(l,t,o){for(let u=0;u<o.length;u++)zu(l,t,o[u])},custom:function(l,t,o){const u=l.context,f=o.implementation;if(l.transform.projection.unsupportedLayers&&l.transform.projection.unsupportedLayers.includes("custom"))s.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(l.renderPass==="offscreen"){const m=f.prerender;m&&(l.setCustomLayerDefaults(),u.setColorMode(l.colorModeForRenderPass()),m.call(f,u.gl,l.transform.customLayerMatrix()),u.setDirty(),l.setBaseState())}else if(l.renderPass==="translucent"){l.setCustomLayerDefaults(),u.setColorMode(l.colorModeForRenderPass()),u.setStencilMode(s.StencilMode.disabled);const m=f.renderingMode==="3d"?new s.DepthMode(l.context.gl.LEQUAL,s.DepthMode.ReadWrite,l.depthRangeFor3D):l.depthModeForSublayer(0,s.DepthMode.ReadOnly);u.setDepthMode(m),f.render(u.gl,l.transform.customLayerMatrix()),u.setDirty(),l.setBaseState(),u.bindFramebuffer.set(null)}}};class ku{constructor(t,o){this.context=new z(t),this.transform=o,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ca,this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this._tileClippingMaskIDs=new Map,this._skippedStencilTileIDs=new Set}updateTerrain(t,o){const u=!!t&&!!t.terrain&&this.transform.projection.supportsTerrain;if(!(u||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ir(this,t));const f=this._terrain;this.transform.elevation=u?f:null,f.update(t,this.transform,o)}_updateFog(t){const o=t.fog;if(!o||o.getOpacity(this.transform.pitch)<1||o.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[u,f]=o.getFovAdjustedRange(this.transform._fov);if(u>f)return void(this.transform.fogCullDistSq=null);const m=u+.78*(f-u);this.transform.fogCullDistSq=m*m}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,o){if(this.width=t*s.exported.devicePixelRatio,this.height=o*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const u of this.style.order)this.style._layers[u].resize()}setup(){const t=this.context,o=new s.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(s.EXTENT,0),o.emplaceBack(0,s.EXTENT),o.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(o,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const u=new s.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(s.EXTENT,0),u.emplaceBack(0,s.EXTENT),u.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=t.createVertexBuffer(u,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const f=new s.StructArrayLayout2i4;f.emplaceBack(-1,-1),f.emplaceBack(1,-1),f.emplaceBack(-1,1),f.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(f,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const m=new s.StructArrayLayout4i8;m.emplaceBack(0,0,0,0),m.emplaceBack(s.EXTENT,0,s.EXTENT,0),m.emplaceBack(0,s.EXTENT,0,s.EXTENT),m.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(m,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const _=new s.StructArrayLayout3ui6;_.emplaceBack(0,1,2),_.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(_);const x=new s.StructArrayLayout1ui2;for(const M of[0,1,3,2,0])x.emplaceBack(M);this.debugIndexBuffer=t.createIndexBuffer(x),this.emptyTexture=new s.Texture(t,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=s.create();const C=this.context.gl;this.stencilClearMode=new s.StencilMode({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO),this.loadTimeStamps.push(s.window.performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(t){return t._makeTileBoundsBuffers(this.context,this.transform.projection),t._tileBoundsBuffer?{tileBoundsBuffer:t._tileBoundsBuffer,tileBoundsIndexBuffer:t._tileBoundsIndexBuffer,tileBoundsSegments:t._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,o=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear(),this.useProgram("clippingMask").draw(t,o.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,Ia(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear())}_renderTileClippingMasks(t,o,u){if(!o||this.currentStencilSource===o.id||!t.isTileClipped()||!u||u.length===0)return;const f=[];let m=!1;if(this._tileClippingMaskIDs&&!this.terrain){for(const D of u)if(this._tileClippingMaskIDs.has(D.key)||(m=!0),this._skippedStencilTileIDs.has(D.key)){if(!o.getTile(D).getBucket(t))continue;this._skippedStencilTileIDs.delete(D.key),f.push(D)}if(!m&&f.length===0)return}const _=this.context,x=_.gl;_.setColorMode(s.ColorMode.disabled),_.setDepthMode(s.DepthMode.disabled);const C=this.useProgram("clippingMask"),M=D=>{const B=o.getTile(D),{tileBoundsBuffer:O,tileBoundsIndexBuffer:U,tileBoundsSegments:G}=this.getTileBoundsBuffers(B);C.draw(_,x.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:x.GREATER,mask:255},this._tileClippingMaskIDs.get(D.key)||0,255,x.KEEP,x.KEEP,x.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Ia(D.projMatrix),"$clipping",O,U,G)};if(!m&&f.length>0)for(const D of f)M(D);else{(this._tileClippingMaskIDs.size===0||this.nextStencilID+u.length>256)&&this.clearStencil(),this._tileClippingMaskIDs.clear(),this._skippedStencilTileIDs.clear();for(const D of u)this._tileClippingMaskIDs.set(D.key,this.nextStencilID++),o.getTile(D).getBucket(t)?M(D):this._skippedStencilTileIDs.add(D.key)}this._skippedStencilTileIDs.size===0&&(this.currentStencilSource=o.id)}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,o=this.context.gl;return new s.StencilMode({func:o.NOTEQUAL,mask:255},t,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const o=this.context.gl;return new s.StencilMode({func:o.EQUAL,mask:255},this._tileClippingMaskIDs.get(t.key)||0,0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(t){const o=this.context.gl,u=t.sort((_,x)=>x.overscaledZ-_.overscaledZ),f=u[u.length-1].overscaledZ,m=u[0].overscaledZ-f+1;if(m>1){this.currentStencilSource=void 0,this.nextStencilID+m>256&&this.clearStencil();const _={};for(let x=0;x<m;x++)_[x+f]=new s.StencilMode({func:o.GEQUAL,mask:255},x+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=m,[_,u]}return[{[f]:s.StencilMode.disabled},u]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([t.CONSTANT_COLOR,t.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(t,o,u){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new s.DepthMode(u||this.context.gl.LEQUAL,o,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,o){this.style=t,this.options=o,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const u=this.style.order,f=this.style._sourceCaches;for(const M in f){const D=f[M];D.used&&D.prepare(this.context)}const m={},_={},x={};for(const M in f){const D=f[M];m[M]=D.getVisibleCoordinates(),_[M]=m[M].slice().reverse(),x[M]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<u.length;M++)if(this.style._layers[u[M]].is3D()){this.opaquePassCutoff=M;break}if(this.terrain&&(this.terrain.updateTileBinding(x),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const M of u){const D=this.style._layers[M],B=t._getLayerSourceCache(D);if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const O=B?_[B.id]:void 0;(D.type==="custom"||D.isSky()||O&&O.length)&&this.renderLayer(this,B,D,O)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let C=s.Color.transparent;if(this.style.fog&&this.style.fog.getOpacity(this.transform.pitch)&&(C=this.style.fog.properties.get("color")),this.context.clear({color:o.showOverdrawInspector?s.Color.black:C,depth:1}),this.clearStencil(),this._showOverdrawInspector=o.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=u.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[u[this.currentLayer]],D=t._getLayerSourceCache(M);if(M.isSky())continue;const B=D?_[D.id]:void 0;this._renderTileClippingMasks(M,D,B),this.renderLayer(this,D,M,B)}if(this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<u.length;this.currentLayer++){const M=this.style._layers[u[this.currentLayer]],D=t._getLayerSourceCache(M);M.isSky()&&this.renderLayer(this,D,M,D?_[D.id]:void 0)}for(this.transform.projection.name==="globe"&&function(M){const D=M.context,B=D.gl,O=M.transform,U=new s.DepthMode(B.LEQUAL,s.DepthMode.ReadOnly,[0,1]),G=M.useProgram("globeAtmosphere"),R=O.centerOffset,X=O._camera.getCameraToClipPerspective(O._fov,O.width/O.height,O._nearZ,O._farZ);X[8]=2*-R.x/O.width,X[9]=2*R.y/O.height;const j=s.invert([],X),q=s.mul([],j,O.projMatrix),K={u_frustum_tl:Vn([-1,1,1],j),u_frustum_tr:Vn([1,1,1],j),u_frustum_br:Vn([1,-1,1],j),u_frustum_bl:Vn([-1,-1,1],j),u_globe_pos:Vn([O.globeMatrix[12],O.globeMatrix[13],O.globeMatrix[14]],q),u_globe_radius:O.worldSize/2/Math.PI-1,u_opacity:1-s.globeToMercatorTransition(O.zoom),u_fadeout_range:2,u_start_color:[1,1,1],u_end_color:[.0118,.7451,.9882]};M.prepareDrawProgram(D,G);const ee=M.globeSharedBuffers;ee&&G.draw(D,B.TRIANGLES,U,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,K,"skybox",ee.atmosphereVertexBuffer,ee.atmosphereIndexBuffer,ee.atmosphereSegments)}(this),this.renderPass="translucent",this.currentLayer=0;this.currentLayer<u.length;){const M=this.style._layers[u[this.currentLayer]],D=t._getLayerSourceCache(M);if(M.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(M)){if(M.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const B=D?(M.type==="symbol"?x:_)[D.id]:void 0;this._renderTileClippingMasks(M,D,D?m[D.id]:void 0),this.renderLayer(this,D,M,B),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let M=null;s.values(this.style._layers).forEach(D=>{const B=t._getLayerSourceCache(D);B&&!D.isHidden(this.transform.zoom)&&(!M||M.getSource().maxzoom<B.getSource().maxzoom)&&(M=B)}),M&&this.options.showTileBoundaries&&Jl.debug(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const D=M.transform.padding;Je(M,M.transform.height-(D.top||0),3,Kl),Je(M,D.bottom||0,3,Xl),Fr(M,D.left||0,3,Su),Fr(M,M.transform.width-(D.right||0),3,Na);const B=M.transform.centerPoint;(function(O,U,G,R){Os(O,U-1,G-10,2,20,R),Os(O,U-10,G-1,20,2,R)})(M,B.x,M.transform.height-B.y,Oa)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,o,u,f){u.isHidden(this.transform.zoom)||(u.type==="background"||u.type==="sky"||u.type==="custom"||f&&f.length)&&(this.id=u.id,this.gpuTimingStart(u),t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes(u.type)||Jl[u.type](t,o,u,f,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery;let u=this.gpuTimers[t.id];u||(u=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:o.createQueryEXT()}),u.calls++,o.beginQueryEXT(o.TIME_ELAPSED_EXT,u.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const o={};for(const u in t){const f=t[u],m=this.context.extTimerQuery,_=m.getQueryObjectEXT(f.query,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(f.query),o[u]=_}return o}translatePosMatrix(t,o,u,f,m){if(!u[0]&&!u[1])return t;const _=m?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(_){const M=Math.sin(_),D=Math.cos(_);u=[u[0]*D-u[1]*M,u[0]*M+u[1]*D]}const x=[m?u[0]:Fi(o,u[0],this.transform.zoom),m?u[1]:Fi(o,u[1],this.transform.zoom),0],C=new Float32Array(16);return s.translate(C,t,x),C}saveTileTexture(t){const o=this._tileTextures[t.size[0]];o?o.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const o=this._tileTextures[t];return o&&o.length>0?o.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const o=this.imageManager.getPattern(t.from.toString()),u=this.imageManager.getPattern(t.to.toString());return!o||!u}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,o=this.style&&this.style.fog,u=[];return this.terrain&&!this.terrain.renderingToTexture&&u.push("TERRAIN"),o&&!t&&o.getOpacity(this.transform.pitch)!==0&&u.push("FOG"),t&&u.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&u.push("OVERDRAW_INSPECTOR"),u}useProgram(t,o,u){this.cache=this.cache||{};const f=u||[],m=this.currentGlobalDefines().concat(f),_=Ls.cacheKey(t,m,o);return this.cache[_]||(this.cache[_]=new Ls(this.context,t,zs[t],o,li[t],m)),this.cache[_]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,o,u){if(this.terrain&&this.terrain.renderingToTexture)return;const f=this.style.fog;if(f){const m=f.getOpacity(this.transform.pitch);m!==0&&o.setFogUniformValues(t,((_,x,C,M)=>{const D=x.properties.get("color"),B=_.frameCounter/1e3%1,O=[D.r/D.a,D.g/D.a,D.b/D.a,M];return{u_fog_matrix:C?_.transform.calculateFogTileMatrix(C):_.identityMat,u_fog_range:x.getFovAdjustedRange(_.transform._fov),u_fog_color:O,u_fog_horizon_blend:x.properties.get("horizon-blend"),u_fog_temporal_offset:B}})(this,f,u,m))}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const t=this.context.gl,o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),o}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&t.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const t=this._backgroundTiles,o=this._backgroundTiles={},u=this.transform.coveringTiles({tileSize:512});for(const f of u)o[f.key]=t[f.key]||new s.Tile(f,512,this.transform.tileZoom,this);return o}clearBackgroundTiles(){this._backgroundTiles={}}}class Un{constructor(t=0,o=0,u=0,f=0){if(isNaN(t)||t<0||isNaN(o)||o<0||isNaN(u)||u<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=o,this.left=u,this.right=f}interpolate(t,o,u){return o.top!=null&&t.top!=null&&(this.top=s.number(t.top,o.top,u)),o.bottom!=null&&t.bottom!=null&&(this.bottom=s.number(t.bottom,o.bottom,u)),o.left!=null&&t.left!=null&&(this.left=s.number(t.left,o.left,u)),o.right!=null&&t.right!=null&&(this.right=s.number(t.right,o.right,u)),this}getCenter(t,o){const u=s.clamp((this.left+t-this.right)/2,0,t),f=s.clamp((this.top+o-this.bottom)/2,0,o);return new s.pointGeometry(u,f)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Un(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Lu(l,t){const o=s.getColumn(l,3);s.fromQuat(l,t),s.setColumn(l,3,o)}function $l(l,t){const o=s.identity$1([]);return s.rotateZ$1(o,o,-t),s.rotateX$1(o,o,-l),o}function Ga(l,t){const o=[l[0],l[1],0],u=[t[0],t[1],0];if(s.length(o)>=1e-15){const _=s.normalize([],o);s.scale$2(u,_,s.dot(u,_)),t[0]=u[0],t[1]=u[1]}const f=s.cross([],t,l);if(s.len(f)<1e-15)return null;const m=Math.atan2(-f[1],f[0]);return $l(Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2]),m)}class Fs{constructor(t,o){this.position=t,this.orientation=o}get position(){return this._position}set position(t){if(t){const o=t instanceof s.MercatorCoordinate?t:new s.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(o.x=s.wrap(o.x,0,1)),this._position=o}else this._position=null}lookAtPoint(t,o){if(this.orientation=null,!this.position)return;const u=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(t)):0,f=this.position,m=s.MercatorCoordinate.fromLngLat(t,u),_=[m.x-f.x,m.y-f.y,m.z-f.z];o||(o=[0,0,1]),o[2]=Math.abs(o[2]),this.orientation=Ga(_,o)}setPitchBearing(t,o){this.orientation=$l(s.degToRad(t),s.degToRad(-o))}}class Vs{constructor(t,o){this._transform=s.identity([]),this.orientation=o,this.position=t}get mercatorPosition(){const t=this.position;return new s.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=s.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var o;t&&s.setColumn(this._transform,3,[(o=t)[0],o[1],o[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||s.identity$1([]),t&&Lu(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),o=this.right();return{bearing:Math.atan2(-o[1],o[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,o){this._orientation=$l(t,o),Lu(this._transform,this._orientation)}forward(){const t=s.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=s.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=s.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,o){const u=new Float64Array(16);return s.invert(u,this.getWorldToCamera(t,o)),u}getWorldToCameraPosition(t,o,u){const f=this.position;s.scale$2(f,f,-t);const m=new Float64Array(16);return s.fromScaling(m,[u,u,u]),s.translate(m,m,f),m[10]*=o,m}getWorldToCamera(t,o){const u=new Float64Array(16),f=new Float64Array(4),m=this.position;return s.conjugate(f,this._orientation),s.scale$2(m,m,-t),s.fromQuat(u,f),s.translate(u,u,m),u[1]*=-1,u[5]*=-1,u[9]*=-1,u[13]*=-1,u[8]*=o,u[9]*=o,u[10]*=o,u[11]*=o,u}getCameraToClipPerspective(t,o,u,f){const m=new Float64Array(16);return s.perspective(m,t,o,u,f),m}getDistanceToElevation(t){const o=t===0?0:s.mercatorZfromAltitude(t,this.position[1]),u=this.forward();return(o-this.position[2])/u[2]}clone(){return new Vs([...this.position],[...this.orientation])}}function ec(l,t){const o=Us(l),u=function(m,_,x,C,M){const D=new s.LngLat(x.lng-180*Zn,x.lat),B=new s.LngLat(x.lng+180*Zn,x.lat),O=m.project(D.lng,D.lat),U=m.project(B.lng,B.lat),G=-Math.atan2(U.y-O.y,U.x-O.x),R=s.MercatorCoordinate.fromLngLat(x);R.y=s.clamp(R.y,-.999975,.999975);const X=R.toLngLat(),j=m.project(X.lng,X.lat),q=s.MercatorCoordinate.fromLngLat(X);q.x+=Zn;const K=q.toLngLat(),ee=m.project(K.lng,K.lat),H=rc(ee.x-j.x,ee.y-j.y,G),re=s.MercatorCoordinate.fromLngLat(X);re.y+=Zn;const Ae=re.toLngLat(),ve=m.project(Ae.lng,Ae.lat),Ie=rc(ve.x-j.x,ve.y-j.y,G),Me=Math.abs(H.x)/Math.abs(Ie.y),Ze=s.identity([]);s.rotateZ(Ze,Ze,-G*(1-(M?0:C)));const ge=s.identity([]);return s.scale(ge,ge,[1,1-(1-Me)*C,1]),ge[4]=-Ie.x/Ie.y*C,s.rotateZ(ge,ge,G),s.multiply$1(ge,Ze,ge),ge}(l.projection,0,l.center,o,t),f=tc(l);return s.scale(u,u,[f,f,1]),u}function tc(l){const t=l.projection,o=Us(l),u=ic(t,l.center),f=ic(t,s.LngLat.convert(t.center));return Math.pow(2,u*o+(1-o)*f)}function Us(l){const t=l.projection.range;if(!t)return 0;const o=Math.max(l.width,l.height),u=Math.log(o/1024)/Math.LN2;return s.smoothstep(t[0]+u,t[1]+u,l.zoom)}const Zn=1/4e4;function ic(l,t){const o=s.clamp(t.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),u=new s.LngLat(t.lng-180*Zn,o),f=new s.LngLat(t.lng+180*Zn,o),m=l.project(u.lng,o),_=l.project(f.lng,o),x=s.MercatorCoordinate.fromLngLat(u),C=s.MercatorCoordinate.fromLngLat(f),M=_.x-m.x,D=_.y-m.y,B=C.x-x.x,O=C.y-x.y,U=Math.sqrt((B*B+O*O)/(M*M+D*D));return Math.log(U)/Math.LN2}function rc(l,t,o){const u=Math.cos(o),f=Math.sin(o);return{x:l*u-t*f,y:l*f+t*u}}class Fa{constructor(t,o,u,f,m,_,x){this.tileSize=512,this._renderWorldCopies=m===void 0||m,this._minZoom=t||0,this._maxZoom=o||22,this._minPitch=u==null?0:u,this._maxPitch=f==null?60:f,this.setProjection(_),this.setMaxBounds(x),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Un,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Vs,this._centerAltitude=0,this._centerAltitudeValidForExaggeration=0,this._averageElevation=0,this.cameraElevationReference="ground",this._projectionScaler=1,this._horizonShift=.1}clone(){const t=new Fa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,t.tileSize=this.tileSize,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._seaLevelZoom=this._seaLevelZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._nearZ=this._nearZ,t._farZ=this._farZ,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(t){const o=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||o)&&this._updateCameraOnTerrain(),(t||o)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(t){t==null&&(t={name:"mercator"}),this.projectionOptions=t;const o=this.projection?this.getProjection():void 0;this.projection=s.getProjection(t);const u=this.getProjection();return $(o,u)?null:(this._calcMatrices(),u)}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(t){this.rotation=t}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const o=-t*Math.PI/180;var u;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=(u=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u),function(f,m,_){var x=m[0],C=m[1],M=m[2],D=m[3],B=Math.sin(_),O=Math.cos(_);f[0]=x*O+M*B,f[1]=C*O+D*B,f[2]=x*-B+M*O,f[3]=C*-B+D*O}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const o=s.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(t){const o=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._setZoom(o),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=0);const t=this._elevation;this._centerAltitude=t.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=t.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,o=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],u=this.horizonLineFromTop();let f=0,m=0;for(let _=0;_<o.length;_++){const x=new s.pointGeometry(o[_][0]*this.width,u+o[_][1]*(this.height-u)),C=t.pointCoordinate(x);if(!C)continue;const M=1/Math.hypot(C[0]-this._camera.position[0],C[1]-this._camera.position[1]);f+=C[3]*M,m+=M}return m===0?NaN:f/m}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const t=this._seaLevelZoom,o=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),u=this.pixelsPerMeter/this.worldSize*o,f=this._mercatorZfromZoom(t),m=this._mercatorZfromZoom(this._maxZoom),_=Math.max(f-u,m);this._setZoom(this._zoomFromMercatorZ(_))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(t){const o=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let u;u=t.z<this._camera.position[2]?[o.x,o.y,o.z]:[t.x,t.y,t.z];const f=s.length(s.sub([],this._camera.position,u));return s.clamp(this._zoomFromMercatorZ(f),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height||!t.position&&!t.orientation)return;this._updateCameraState();let o=!1;if(t.orientation&&!s.exactEquals(t.orientation,this._camera.orientation)&&(o=this._setCameraOrientation(t.orientation)),t.position){const u=[t.position.x,t.position.y,t.position.z];s.exactEquals$1(u,this._camera.position)||(this._setCameraPosition(u),o=!0)}o&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,o=new Fs;return o.position=new s.MercatorCoordinate(t[0],t[1],t[2]),o.orientation=this._camera.orientation,o._elevation=this.elevation,o._renderWorldCopies=this.renderWorldCopies,o}_setCameraOrientation(t){if(!s.length$1(t))return!1;s.normalize$1(t,t);const o=s.transformQuat([],[0,0,-1],t),u=s.transformQuat([],[0,-1,0],t);if(u[2]<0)return!1;const f=Ga(o,u);return!!f&&(this._camera.orientation=f,!0)}_setCameraPosition(t){const o=this.zoomScale(this.minZoom)*this.tileSize,u=this.zoomScale(this.maxZoom)*this.tileSize,f=this.cameraToCenterDistance;t[2]=s.clamp(t[2],f/u,f/o),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,o,u){this._unmodified=!1,this._edgeInsets.interpolate(t,o,u),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const o=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(t){const o=[new s.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const u=this.pointCoordinate(new s.pointGeometry(0,0)),f=this.pointCoordinate(new s.pointGeometry(this.width,0)),m=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),_=this.pointCoordinate(new s.pointGeometry(0,this.height)),x=Math.floor(Math.min(u.x,f.x,m.x,_.x)),C=Math.floor(Math.max(u.x,f.x,m.x,_.x)),M=1;for(let D=x-M;D<=C+M;D++)D!==0&&o.push(new s.UnwrappedTileID(D,t))}return o}coveringTiles(t){let o=this.coveringZoomLevel(t);const u=o,f=this.elevation&&!t.isTerrainDEM,m=this.projection.name==="mercator";if(t.minzoom!==void 0&&o<t.minzoom)return[];t.maxzoom!==void 0&&o>t.maxzoom&&(o=t.maxzoom);const _=this.locationCoordinate(this.center),x=this.center.lat,C=1<<o,M=[C*_.x,C*_.y,0],D=this.projection.name==="globe",B=!D,O=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,B),U=D?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),G=C*s.mercatorZfromAltitude(1,this.center.lat),R=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),X=[C*U.x,C*U.y,R*(B?1:G)],j=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),q=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?o:0,K=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ee=t.isTerrainDEM?-K:this._elevation?this._elevation.getMinElevationBelowMSL():0,H=this.projection.isReprojectedInTileSpace?tc(this):1,re=be=>{const gt=new s.MercatorCoordinate(be.x+25e-6,be.y,be.z),rt=new s.MercatorCoordinate(be.x,be.y+25e-6,be.z),nt=be.toLngLat(),vt=gt.toLngLat(),kt=rt.toLngLat(),ct=this.locationCoordinate(nt),Mt=this.locationCoordinate(vt),qt=this.locationCoordinate(kt),Ii=Math.hypot(Mt.x-ct.x,Mt.y-ct.y),nr=Math.hypot(qt.x-ct.x,qt.y-ct.y);return Math.sqrt(Ii*nr)*H/25e-6},Ae=be=>{const pt=K,gt=ee;return{aabb:s.tileAABB(this,C,0,0,0,be,gt,pt,this.projection),zoom:0,x:0,y:0,minZ:gt,maxZ:pt,wrap:be,fullyVisible:!1}},ve=[];let Ie=[];const Me=o,Ze=t.reparseOverscaled?u:o,ge=be=>be*be,Ve=ge((R-this._centerAltitude)*G),Ge=be=>{if(!this._elevation||!be.tileID||!m)return;const pt=this._elevation.getMinMaxForTile(be.tileID),gt=be.aabb;pt?(gt.min[2]=pt.min,gt.max[2]=pt.max,gt.center[2]=(gt.min[2]+gt.max[2])/2):(be.shouldSplit=st(be),be.shouldSplit||(gt.min[2]=gt.max[2]=gt.center[2]=this._centerAltitude))},st=be=>{if(be.zoom<q)return!0;if(be.zoom===Me)return!1;if(be.shouldSplit!=null)return be.shouldSplit;const pt=be.aabb.distanceX(X),gt=be.aabb.distanceY(X);let rt=Ve,nt=1;if(D){rt=ge(be.aabb.distanceZ(X));const kt=Math.pow(2,be.zoom),ct=s.latFromMercatorY((be.y+1)/kt),Mt=s.latFromMercatorY(be.y/kt),qt=Math.min(Math.max(x,ct),Mt),Ii=s.circumferenceAtLatitude(qt)/s.circumferenceAtLatitude(x);nt=Math.min(Ii,1)}else if(f&&(rt=ge(be.aabb.distanceZ(X)*G)),this.projection.isReprojectedInTileSpace&&u<=5){const kt=Math.pow(2,be.zoom),ct=re(new s.MercatorCoordinate((be.x+.5)/kt,(be.y+.5)/kt));nt=ct>.85?1:ct}const vt=pt*pt+gt*gt+rt;return vt<ge((1<<Me-be.zoom)*j*nt*((kt,ct)=>{if(ct*ge(.707)<kt)return 1;const Mt=Math.sqrt(ct/kt);return Mt/(1.4144271570014144+(Math.pow(1.1,Mt-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(rt,Ve),vt))};if(this.renderWorldCopies)for(let be=1;be<=3;be++)ve.push(Ae(-be)),ve.push(Ae(be));for(ve.push(Ae(0));ve.length>0;){const be=ve.pop(),pt=be.x,gt=be.y;let rt=be.fullyVisible;if(!rt){const nt=be.aabb.intersects(O);if(nt===0)continue;rt=nt===2}if(be.zoom!==Me&&st(be))for(let nt=0;nt<4;nt++){const vt=(pt<<1)+nt%2,kt=(gt<<1)+(nt>>1),ct={aabb:m?be.aabb.quadrant(nt):s.tileAABB(this,C,be.zoom+1,vt,kt,be.wrap,be.minZ,be.maxZ,this.projection),zoom:be.zoom+1,x:vt,y:kt,wrap:be.wrap,fullyVisible:rt,tileID:void 0,shouldSplit:void 0,minZ:be.minZ,maxZ:be.maxZ};f&&!D&&(ct.tileID=new s.OverscaledTileID(be.zoom+1===Me?Ze:be.zoom+1,be.wrap,be.zoom+1,vt,kt),Ge(ct)),ve.push(ct)}else{const nt=be.zoom===Me?Ze:be.zoom;if(t.minzoom&&t.minzoom>nt)continue;const vt=M[0]-(.5+pt+(be.wrap<<be.zoom))*(1<<o-be.zoom),kt=M[1]-.5-gt,ct=be.tileID?be.tileID:new s.OverscaledTileID(nt,be.wrap,be.zoom,pt,gt);Ie.push({tileID:ct,distanceSq:vt*vt+kt*kt})}}if(this.fogCullDistSq){const be=this.fogCullDistSq,pt=this.horizonLineFromTop();Ie=Ie.filter(gt=>{const rt=[0,0,0,1],nt=[s.EXTENT,s.EXTENT,0,1],vt=this.calculateFogTileMatrix(gt.tileID.toUnwrapped());s.transformMat4$1(rt,rt,vt),s.transformMat4$1(nt,nt,vt);const kt=s.getAABBPointSquareDist(rt,nt);if(kt===0)return!0;let ct=!1;const Mt=this._elevation;if(Mt&&kt>be&&pt!==0){const qt=this.calculateProjMatrix(gt.tileID.toUnwrapped());let Ii;t.isTerrainDEM||(Ii=Mt.getMinMaxForTile(gt.tileID)),Ii||(Ii={min:ee,max:K});const nr=s.furthestTileCorner(this.rotation),or=[nr[0]*s.EXTENT,nr[1]*s.EXTENT,Ii.max];s.transformMat4(or,or,qt),ct=(1-or[1])*this.height*.5<pt}return kt<be||ct})}return Ie.sort((be,pt)=>be.distanceSq-pt.distanceSq).map(be=>be.tileID)}resize(t,o){this.width=t,this.height=o,this.pixelsToGLUnits=[2/t,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const o=s.clamp(t.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),u=this.projection.project(t.lng,o);return new s.pointGeometry(u.x*this.worldSize,u.y*this.worldSize)}unproject(t){return this.projection.unproject(t.x/this.worldSize,t.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(t,o){let u,f;const m=this.centerPoint;if(this.projection.name==="globe"){const x=this.worldSize;u=(o.x-m.x)/x,f=(o.y-m.y)/x}else{const x=this.pointCoordinate(o),C=this.pointCoordinate(m);u=x.x-C.x,f=x.y-C.y}const _=this.locationCoordinate(t);this.setLocation(new s.MercatorCoordinate(_.x-u,_.y-f))}setLocation(t){this.center=this.coordinateLocation(t),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(t){return this.projection.locationPoint(this,t)}locationPoint3D(t){return this._coordinatePoint(this.locationCoordinate(t),!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(t,o){const u=o?s.mercatorZfromAltitude(o,t.lat):void 0,f=this.projection.project(t.lng,t.lat);return new s.MercatorCoordinate(f.x,f.y,u)}coordinateLocation(t){return this.projection.unproject(t.x,t.y)}pointRayIntersection(t,o){const u=o!=null?o:this._centerAltitude,f=[t.x,t.y,0,1],m=[t.x,t.y,1,1];s.transformMat4$1(f,f,this.pixelMatrixInverse),s.transformMat4$1(m,m,this.pixelMatrixInverse);const _=m[3];s.scale$1(f,f,1/f[3]),s.scale$1(m,m,1/_);const x=f[2],C=m[2];return{p0:f,p1:m,t:x===C?0:(u-x)/(C-x)}}screenPointToMercatorRay(t){const o=[t.x,t.y,0,1],u=[t.x,t.y,1,1];return s.transformMat4$1(o,o,this.pixelMatrixInverse),s.transformMat4$1(u,u,this.pixelMatrixInverse),s.scale$1(o,o,1/o[3]),s.scale$1(u,u,1/u[3]),o[2]=s.mercatorZfromAltitude(o[2],this._center.lat)*this.worldSize,u[2]=s.mercatorZfromAltitude(u[2],this._center.lat)*this.worldSize,s.scale$1(o,o,1/this.worldSize),s.scale$1(u,u,1/this.worldSize),new s.Ray([o[0],o[1],o[2]],s.normalize([],s.sub([],u,o)))}rayIntersectionCoordinate(t){const{p0:o,p1:u,t:f}=t,m=s.mercatorZfromAltitude(o[2],this._center.lat),_=s.mercatorZfromAltitude(u[2],this._center.lat);return new s.MercatorCoordinate(s.number(o[0],u[0],f)/this.worldSize,s.number(o[1],u[1],f)/this.worldSize,s.number(m,_,f))}pointCoordinate(t,o=this._centerAltitude){return this.projection.pointCoordinate(this,t.x,t.y,o)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);const o=this.elevation;let u=this.elevation.pointCoordinate(t);if(u)return new s.MercatorCoordinate(u[0],u[1],u[2]);let f=0,m=this.horizonLineFromTop();if(t.y>m)return this.pointCoordinate(t);const _=.02*m,x=t.clone();for(let C=0;C<10&&m-f>_;C++){x.y=s.number(f,m,.66);const M=o.pointCoordinate(x);M?(m=x.y,u=M):f=x.y}return u?new s.MercatorCoordinate(u[0],u[1],u[2]):this.pointCoordinate(t)}isPointAboveHorizon(t){if(this.elevation)return!this.elevation.pointCoordinate(t);{const o=this.horizonLineFromTop();return t.y<o}}_coordinatePoint(t,o){const u=o&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,f=[t.x*this.worldSize,t.y*this.worldSize,u+t.toAltitude(),1];return s.transformMat4$1(f,f,this.pixelMatrix),f[3]>0?new s.pointGeometry(f[0]/f[3],f[1]/f[3]):new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(t,o){const u=new s.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),f=new s.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),m=new s.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),_=new s.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let x=this.pointCoordinate(u,t),C=this.pointCoordinate(f,t);const M=this.pointCoordinate(m,o),D=this.pointCoordinate(_,o),B=(O,U)=>(U.y-O.y)/(U.x-O.x);return x.y>1&&C.y>=0?x=new s.MercatorCoordinate((1-D.y)/B(D,x)+D.x,1):x.y<0&&C.y<=1&&(x=new s.MercatorCoordinate(-D.y/B(D,x)+D.x,0)),C.y>1&&x.y>=0?C=new s.MercatorCoordinate((1-M.y)/B(M,C)+M.x,1):C.y<0&&x.y<=1&&(C=new s.MercatorCoordinate(-M.y/B(M,C)+M.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(x)).extend(this.coordinateLocation(C)).extend(this.coordinateLocation(D)).extend(this.coordinateLocation(M))}_getBounds3D(){const t=this.elevation;if(!t.visibleDemTiles.length)return this._getBounds(0,0);const o=t.visibleDemTiles.reduce((u,f)=>{if(f.dem){const m=f.dem.tree;u.min=Math.min(u.min,m.minimums[0]),u.max=Math.max(u.max,m.maximums[0])}return u},{min:Number.MAX_VALUE,max:0});return this._getBounds(o.min*t.exaggeration(),o.max*t.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(t=!0){const o=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,u=this.height/2-o*(1-this._horizonShift);return t?Math.max(0,u):u}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(t,o){return this.projection.createTileMatrix(this,o,t)}calculateDistanceTileData(t){const o=t.key,u=this._distanceTileDataCache;if(u[o])return u[o];const f=t.canonical,m=1/this.height,_=this.cameraWorldSize/this.zoomScale(f.z),x=(f.x+Math.pow(2,f.z)*t.wrap)*_,C=f.y*_,M=this.point,D=this.angle,B=Math.sin(-D),O=-Math.cos(-D);return u[o]={bearing:[B,O],center:[(M.x-x)*m,(M.y-C)*m],scale:_/s.EXTENT*m},u[o]}calculateFogTileMatrix(t){const o=t.key,u=this._fogTileMatrixCache;if(u[o])return u[o];const f=this.calculatePosMatrix(t,this.cameraWorldSize);return s.multiply$1(f,this.worldToFogMatrix,f),u[o]=new Float32Array(f),u[o]}calculateProjMatrix(t,o=!1){const u=t.key,f=o?this._alignedProjMatrixCache:this._projMatrixCache;if(f[u])return f[u];const m=this.calculatePosMatrix(t,this.worldSize);return s.multiply$1(m,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:o?this.alignedProjMatrix:this.projMatrix,m),f[u]=new Float32Array(m),f[u]}calculatePixelsToTileUnitsMatrix(t){const o=t.tileID.key,u=this._pixelsToTileUnitsCache;if(u[o])return u[o];const f=function(m,_){const{scale:x}=m.tileTransform,C=x*s.EXTENT/(m.tileSize*Math.pow(2,_.zoom-m.tileID.overscaledZ+m.tileID.canonical.z));return M=new Float32Array(4),O=(D=_.inverseAdjustmentMatrix)[1],U=D[2],G=D[3],X=(B=[C,C])[1],M[0]=D[0]*(R=B[0]),M[1]=O*R,M[2]=U*X,M[3]=G*X,M;var M,D,B,O,U,G,R,X}(t,this);return u[o]=f,u[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const o=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,u=this._computeCameraPosition(o),f=this._camera.forward(),m=s.mercatorZfromAltitude(1,this._center.lat);u[2]/=m,f[2]/=m,s.normalize(f,f);const _=t.raycast(u,f,t.exaggeration());if(_){const x=s.scaleAndAdd([],u,f,_),C=new s.MercatorCoordinate(x[0],x[1],s.mercatorZfromAltitude(x[2],s.latFromMercatorY(x[1]))),M=(C.z+s.length([C.x-u[0],C.y-u[1],C.z-u[2]*m]))*this._projectionScaler;this._seaLevelZoom=this._zoomFromMercatorZ(M),this._centerAltitude=C.toAltitude(),this._center=this.coordinateLocation(C),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const o=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,u=this._computeCameraPosition(o),f=t.getAtPointOrZero(new s.MercatorCoordinate(...u)),m=this._minimumHeightOverTerrain()*Math.cos(s.degToRad(this._maxPitch)),_=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*f;if(_<m){const x=this.locationCoordinate(this._center,this._centerAltitude),C=[x.x-u[0],x.y-u[1],x.z-u[2]],M=s.length(C);C[2]-=(m-_)/this._projectionScaler;const D=s.length(C);if(D===0)return;s.scale$2(C,C,M/D*this._projectionScaler),this._camera.position=[x.x-C[0],x.y-C[1],x.z*this._projectionScaler-C[2]],this._camera.orientation=Ga(C,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;if(this._constraining=!0,this.projection.isReprojectedInTileSpace){const B=this.center;return B.lat=s.clamp(B.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(B.lng=s.clamp(B.lng,this.minLng,this.maxLng)),this.center=B,void(this._constraining=!1)}const t=this._unmodified,{x:o,y:u}=this.point;let f=0,m=o,_=u;const x=this.width/2,C=this.height/2,M=this.worldMinY*this.scale,D=this.worldMaxY*this.scale;if(u-C<M&&(_=M+C),u+C>D&&(_=D-C),D-M<this.height&&(f=Math.max(f,this.height/(D-M)),_=(D+M)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const B=this.worldMinX*this.scale,O=this.worldMaxX*this.scale,U=this.worldSize/2-(B+O)/2;m=(o+U+this.worldSize)%this.worldSize-U,m-x<B&&(m=B+x),m+x>O&&(m=O-x),O-B<this.width&&(f=Math.max(f,this.width/(O-B)),m=(O+B)/2)}m===o&&_===u||(this.center=this.unproject(new s.pointGeometry(m,_))),f&&(this.zoom+=this.scaleZoom(f)),this._constrainCameraAltitude(),this._unmodified=t,this._constraining=!1}_minZoomForBounds(){let t=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(t=Math.max(t,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),t}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this._fov/2,o=this.centerOffset,u=this.pixelsPerMeter;this._projectionScaler=u/(s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize),this.cameraToCenterDistance=.5/Math.tan(t)*this.height*this._projectionScaler,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const f=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?u:1),m=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);m[8]=2*-o.x/this.width,m[9]=2*o.y/this.height;let _=s.mul([],m,f);if(this.projection.isReprojectedInTileSpace){const ee=this.locationCoordinate(this.center),H=s.identity([]);s.translate(H,H,[ee.x*this.worldSize,ee.y*this.worldSize,0]),s.multiply$1(H,H,ec(this)),s.translate(H,H,[-ee.x*this.worldSize,-ee.y*this.worldSize,0]),s.multiply$1(_,_,H),this.inverseAdjustmentMatrix=function(re){const Ae=ec(re,!0);return Ji([],[Ae[0],Ae[1],Ae[4],Ae[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],_,[this.worldSize,this.worldSize,this.worldSize/u,1]),this.projMatrix=_,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const x=new Float32Array(16);s.identity(x),s.scale(x,x,[1,-1,1]),s.rotateX(x,x,this._pitch),s.rotateZ(x,x,this.angle);const C=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),M=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;C[8]=2*-o.x/this.width,C[9]=2*(o.y+M)/this.height,this.skyboxMatrix=s.multiply$1(x,C,x);const D=this.point,B=D.x,O=D.y,U=this.width%2/2,G=this.height%2/2,R=Math.cos(this.angle),X=Math.sin(this.angle),j=B-Math.round(B)+R*U+X*G,q=O-Math.round(O)+R*G+X*U,K=new Float64Array(_);if(s.translate(K,K,[j>.5?j-1:j,q>.5?q-1:q,0]),this.alignedProjMatrix=K,_=s.create(),s.scale(_,_,[this.width/2,-this.height/2,1]),s.translate(_,_,[1,-1,0]),this.labelPlaneMatrix=_,_=s.create(),s.scale(_,_,[1,-1,1]),s.translate(_,_,[-1,-1,0]),s.scale(_,_,[2/this.width,2/this.height,1]),this.glCoordMatrix=_,this.pixelMatrix=s.multiply$1(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},_=s.invert(new Float64Array(16),this.pixelMatrix),!_)throw new Error("failed to invert matrix");this.pixelMatrixInverse=_,this.globeMatrix=this.projection.name==="globe"?s.calculateGlobeMatrix(this):_,this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSize,o=this.cameraPixelsPerMeter,u=this._camera.position,f=1/this.height,m=[t,t,o];s.scale$2(m,m,f),s.scale$2(u,u,-1),s.multiply$2(u,u,m);const _=s.create();s.translate(_,_,u),s.scale(_,_,m),this.mercatorFogMatrix=_,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,o,f)}_computeCameraPosition(t){const o=(t=t||this.pixelsPerMeter)/this.pixelsPerMeter,u=this._camera.forward(),f=this.point,m=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*o-t/this.worldSize*this._centerAltitude;return[f.x/this.worldSize-u[0]*m,f.y/this.worldSize-u[1]*m,t/this.worldSize*this._centerAltitude-u[2]*m]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const o=this._maxCameraBoundsDistance()*Math.cos(this._pitch),u=t[2];let f=1;u>0&&(f=Math.min((o-this._camera.position[2])/u,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,t,f),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const t=this._camera.position,o=this._camera.forward(),{pitch:u,bearing:f}=this._camera.getPitchBearing(),m=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._projectionScaler,_=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),x=Math.max((t[2]-m)/Math.cos(u),_),C=this._zoomFromMercatorZ(x);s.scaleAndAdd(t,t,o,x),this._pitch=s.clamp(u,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(f,-Math.PI,Math.PI),this._setZoom(s.clamp(C,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator to enable terrain."),1))}anyCornerOffEdge(t,o){const u=Math.min(t.x,o.x),f=Math.max(t.x,o.x),m=Math.min(t.y,o.y),_=Math.max(t.y,o.y);if(m<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const x=[new s.pointGeometry(u,m),new s.pointGeometry(f,_),new s.pointGeometry(u,_),new s.pointGeometry(f,m)],C=this.renderWorldCopies?-3:0,M=this.renderWorldCopies?4:1;for(const D of x){const B=this.pointRayIntersection(D);if(B.t<0)return!0;const O=this.rayIntersectionCoordinate(B);if(O.x<C||O.y<0||O.x>M||O.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.pointGeometry(0,0),new s.pointGeometry(this.width,this.height))}zoomDeltaToMovement(t,o){const u=s.length(s.sub([],this._camera.position,t)),f=this._zoomFromMercatorZ(u)+o;return u-this._mercatorZfromZoom(f)}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,t))}}function nc(l,t){let o=!1,u=null;const f=()=>{u=null,o&&(l(),u=setTimeout(f,t),o=!1)};return()=>(o=!0,u||f(),u)}class Pu{constructor(t){this._hashName=t&&encodeURIComponent(t),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=nc(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,s.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(t){const o=this._map;if(!o)return"";const u=o.getCenter(),f=Math.round(100*o.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),x=Math.round(u.lng*_)/_,C=Math.round(u.lat*_)/_,M=o.getBearing(),D=o.getPitch();let B="";if(B+=t?`/${x}/${C}/${f}`:`${f}/${C}/${x}`,(M||D)&&(B+="/"+Math.round(10*M)/10),D&&(B+=`/${Math.round(D)}`),this._hashName){const O=this._hashName;let U=!1;const G=s.window.location.hash.slice(1).split("&").map(R=>{const X=R.split("=")[0];return X===O?(U=!0,`${X}=${B}`):R}).filter(R=>R);return U||G.push(`${O}=${B}`),`#${G.join("&")}`}return`#${B}`}_getCurrentHash(){const t=s.window.location.hash.replace("#","");if(this._hashName){let o;return t.split("&").map(u=>u.split("=")).forEach(u=>{u[0]===this._hashName&&(o=u)}),(o&&o[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._map;if(!t)return!1;const o=this._getCurrentHash();if(o.length>=3&&!o.some(u=>isNaN(u))){const u=t.dragRotate.isEnabled()&&t.touchZoomRotate.isEnabled()?+(o[3]||0):t.getBearing();return t.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:u,pitch:+(o[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,t)}}const Tn={linearity:.3,easing:s.bezier(0,0,.3,1)},Ru=s.extend({deceleration:2500,maxSpeed:1400},Tn),Nu=s.extend({deceleration:20,maxSpeed:1400},Tn),Ou=s.extend({deceleration:1e3,maxSpeed:360},Tn),Gu=s.extend({deceleration:1e3,maxSpeed:90},Tn);class Fu{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,o=s.exported.now();for(;t.length>0&&o-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:m}of this._inertiaBuffer)o.zoom+=m.zoomDelta||0,o.bearing+=m.bearingDelta||0,o.pitch+=m.pitchDelta||0,m.panDelta&&o.pan._add(m.panDelta),m.around&&(o.around=m.around),m.pinchAround&&(o.pinchAround=m.pinchAround);const u=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(o.pan.mag()){const m=Qi(o.pan.mag(),u,s.extend({},Ru,t||{}));f.offset=o.pan.mult(m.amount/o.pan.mag()),f.center=this._map.transform.center,Zs(f,m)}if(o.zoom){const m=Qi(o.zoom,u,Nu);f.zoom=this._map.transform.zoom+m.amount,Zs(f,m)}if(o.bearing){const m=Qi(o.bearing,u,Ou);f.bearing=this._map.transform.bearing+s.clamp(m.amount,-179,179),Zs(f,m)}if(o.pitch){const m=Qi(o.pitch,u,Gu);f.pitch=this._map.transform.pitch+m.amount,Zs(f,m)}if(f.zoom||f.bearing){const m=o.pinchAround===void 0?o.around:o.pinchAround;f.around=m?this._map.unproject(m):this._map.getCenter()}return this.clear(),f.noMoveStart=!0,f}}function Zs(l,t){(!l.duration||l.duration<t.duration)&&(l.duration=t.duration,l.easing=t.easing)}function Qi(l,t,o){const{maxSpeed:u,linearity:f,deceleration:m}=o,_=s.clamp(l*f/(t/1e3),-u,u),x=Math.abs(_)/(m*f);return{easing:o.easing,duration:1e3*x,amount:_*(x/2)}}class Dr extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,u,f={}){const m=wi(o.getCanvasContainer(),u),_=o.unproject(m);super(t,s.extend({point:m,lngLat:_,originalEvent:u},f)),this._defaultPrevented=!1,this.target=o}}class js extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,u){const f=t==="touchend"?u.changedTouches:u.touches,m=Dt(o.getCanvasContainer(),f),_=m.map(C=>o.unproject(C)),x=m.reduce((C,M,D,B)=>C.add(M.div(B.length)),new s.pointGeometry(0,0));super(t,{points:m,point:x,lngLats:_,lngLat:o.unproject(x),originalEvent:u}),this._defaultPrevented=!1}}class Ed extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,u){super(t,{originalEvent:u}),this._defaultPrevented=!1}}class Id{constructor(t,o){this._map=t,this._clickTolerance=o.clickTolerance}reset(){this._mousedownPos=void 0}wheel(t){return this._firePreventable(new Ed(t.type,this._map,t))}mousedown(t,o){return this._mousedownPos=o,this._firePreventable(new Dr(t.type,this._map,t))}mouseup(t){this._map.fire(new Dr(t.type,this._map,t))}preclick(t){const o=s.extend({},t);o.type="preclick",this._map.fire(new Dr(o.type,this._map,o))}click(t,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||(this.preclick(t),this._map.fire(new Dr(t.type,this._map,t)))}dblclick(t){return this._firePreventable(new Dr(t.type,this._map,t))}mouseover(t){this._map.fire(new Dr(t.type,this._map,t))}mouseout(t){this._map.fire(new Dr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new js(t.type,this._map,t))}touchmove(t){this._map.fire(new js(t.type,this._map,t))}touchend(t){this._map.fire(new js(t.type,this._map,t))}touchcancel(t){this._map.fire(new js(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mn{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(t){this._map.fire(new Dr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Dr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Dr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vu{constructor(t,o){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,o){this.isEnabled()&&t.shiftKey&&t.button===0&&(dt(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(t,o){if(!this._active)return;const u=o;if(this._lastPos.equals(u)||!this._box&&u.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=u,this._box||(this._box=pe("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const m=Math.min(f.x,u.x),_=Math.max(f.x,u.x),x=Math.min(f.y,u.y),C=Math.max(f.y,u.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${m}px,${x}px)`,this._box.style.width=_-m+"px",this._box.style.height=C-x+"px")})}mouseupWindow(t,o){if(!this._active||t.button!==0)return;const u=this._startPos,f=o;if(this.reset(),ei(),u.x!==f.x||u.y!==f.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:m=>m.fitScreenCoordinates(u,f,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Pt(),delete this._startPos,delete this._lastPos}_fireEvent(t,o){return this._map.fire(new s.Event(t,{originalEvent:o}))}}function jn(l,t){const o={};for(let u=0;u<l.length;u++)o[l[u].identifier]=t[u];return o}class mn{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,o,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=t.timeStamp),u.length===this.numTouches&&(this.centroid=function(f){const m=new s.pointGeometry(0,0);for(const _ of f)m._add(_);return m.div(f.length)}(o),this.touches=jn(u,o)))}touchmove(t,o,u){if(this.aborted||!this.centroid)return;const f=jn(u,o);for(const m in this.touches){const _=this.touches[m],x=f[m];(!x||x.dist(_)>30)&&(this.aborted=!0)}}touchend(t,o,u){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class bo{constructor(t){this.singleTap=new mn(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(t,o,u){this.singleTap.touchstart(t,o,u)}touchmove(t,o,u){this.singleTap.touchmove(t,o,u)}touchend(t,o,u){const f=this.singleTap.touchend(t,o,u);if(f){const m=t.timeStamp-this.lastTime<500,_=!this.lastTap||this.lastTap.dist(f)<30;if(m&&_||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class tt{constructor(){this._zoomIn=new bo({numTouches:1,numTaps:2}),this._zoomOut=new bo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,o,u){this._zoomIn.touchstart(t,o,u),this._zoomOut.touchstart(t,o,u)}touchmove(t,o,u){this._zoomIn.touchmove(t,o,u),this._zoomOut.touchmove(t,o,u)}touchend(t,o,u){const f=this._zoomIn.touchend(t,o,u),m=this._zoomOut.touchend(t,o,u);return f?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:_=>_.easeTo({duration:300,zoom:_.getZoom()+1,around:_.unproject(f)},{originalEvent:t})}):m?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:_=>_.easeTo({duration:300,zoom:_.getZoom()-1,around:_.unproject(m)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Uu={0:1,2:2};class Va{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(t,o){return!1}_move(t,o){return{}}mousedown(t,o){if(this._lastPoint)return;const u=ur(t);this._correctButton(t,u)&&(this._lastPoint=o,this._eventButton=u)}mousemoveWindow(t,o){const u=this._lastPoint;if(u){if(t.preventDefault(),this._eventButton!=null&&function(f,m){const _=Uu[m];return f.buttons===void 0||(f.buttons&_)!==_}(t,this._eventButton))this.reset();else if(this._moved||!(o.dist(u)<this._clickTolerance))return this._moved=!0,this._lastPoint=o,this._move(u,o)}}mouseupWindow(t){this._lastPoint&&ur(t)===this._eventButton&&(this._moved&&ei(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qs extends Va{mousedown(t,o){super.mousedown(t,o),this._lastPoint&&(this._active=!0)}_correctButton(t,o){return o===0&&!t.ctrlKey}_move(t,o){return{around:o,panDelta:o.sub(t)}}}class Wo extends Va{_correctButton(t,o){return o===0&&t.ctrlKey||o===2}_move(t,o){const u=.8*(o.x-t.x);if(u)return this._active=!0,{bearingDelta:u}}contextmenu(t){t.preventDefault()}}class oc extends Va{_correctButton(t,o){return o===0&&t.ctrlKey||o===2}_move(t,o){const u=-.5*(o.y-t.y);if(u)return this._active=!0,{pitchDelta:u}}contextmenu(t){t.preventDefault()}}class Zu{constructor(t,o){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0)}touchstart(t,o,u){return this._calculateTransform(t,o,u)}touchmove(t,o,u){if(this._active&&!(u.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(u.length===1)return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.preventDefault(),this._calculateTransform(t,o,u)}}touchend(t,o,u){this._calculateTransform(t,o,u),this._active&&u.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,o,u){u.length>0&&(this._active=!0);const f=jn(u,o),m=new s.pointGeometry(0,0),_=new s.pointGeometry(0,0);let x=0;for(const M in f){const D=f[M],B=this._touches[M];B&&(m._add(D),_._add(D.sub(B)),x++,f[M]=D)}if(this._touches=f,x<this._minTouches||!_.mag())return;const C=_.div(x);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:m.div(x),panDelta:C}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=pe("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility==="hidden"&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")},500)}}class Ua{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(t){}_move(t,o,u){return{}}touchstart(t,o,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([o[0],o[1]]))}touchmove(t,o,u){const f=this._firstTwoTouches;if(!f)return;t.preventDefault();const[m,_]=f,x=Ys(u,o,m),C=Ys(u,o,_);if(!x||!C)return;const M=this._aroundCenter?null:x.add(C).div(2);return this._move([x,C],M,t)}touchend(t,o,u){if(!this._firstTwoTouches)return;const[f,m]=this._firstTwoTouches,_=Ys(u,o,f),x=Ys(u,o,m);_&&x||(this._active&&ei(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ys(l,t,o){for(let u=0;u<l.length;u++)if(l[u].identifier===o)return t[u]}function sc(l,t){return Math.log(l/t)/Math.LN2}class ju extends Ua{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,o){const u=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(sc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:sc(this._distance,u),pinchAround:o}}}function ac(l,t){return 180*l.angleWith(t)/Math.PI}class Za extends Ua{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,o){const u=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ac(this._vector,u),pinchAround:o}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const o=25/(Math.PI*this._minDiameter)*360,u=ac(t,this._startVector);return Math.abs(u)<o}}function Hs(l){return Math.abs(l.y)>Math.abs(l.x)}class ja extends Ua{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(t){this._lastPoints=t,Hs(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,o,u){const f=this._lastPoints;if(!f)return;const m=t[0].sub(f[0]),_=t[1].sub(f[1]);return this._map._cooperativeGestures&&u.touches.length<3||(this._valid=this.gestureBeginsVertically(m,_,u.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5})}gestureBeginsVertically(t,o,u){if(this._valid!==void 0)return this._valid;const f=t.mag()>=2,m=o.mag()>=2;if(!f&&!m)return;if(!f||!m)return this._firstMove==null&&(this._firstMove=u),u-this._firstMove<100&&void 0;const _=t.y>0==o.y>0;return Hs(t)&&Hs(o)&&_}}const Qu={panStep:100,bearingStep:15,pitchStep:10};class Yu{constructor(){const t=Qu;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let o=0,u=0,f=0,m=0,_=0;switch(t.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:t.shiftKey?u=-1:(t.preventDefault(),m=-1);break;case 39:t.shiftKey?u=1:(t.preventDefault(),m=1);break;case 38:t.shiftKey?f=1:(t.preventDefault(),_=-1);break;case 40:t.shiftKey?f=-1:(t.preventDefault(),_=1);break;default:return}return this._rotationDisabled&&(u=0,f=0),{cameraAnimation:x=>{const C=x.getZoom();x.easeTo({duration:300,easeId:"keyboardHandler",easing:Hu,zoom:o?Math.round(C)+o*(t.shiftKey?2:1):C,bearing:x.getBearing()+u*this._bearingStep,pitch:x.getPitch()+f*this._pitchStep,offset:[-m*this._panStep,-_*this._panStep],center:x.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Hu(l){return l*(2-l)}const lc=4.000244140625;class qu{constructor(t,o){this._map=t,this._el=t.getCanvasContainer(),this._handler=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let o=t.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const u=s.exported.now(),f=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,o!==0&&o%lc==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(f*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),t.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=t,this._delta-=o,this._active||this._start(t)),t.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=wi(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:o,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._map.transform,o=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>lc?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&M!==0&&(M=1/M);const D=o(),B=Math.pow(2,D),O=typeof this._targetZoom=="number"?t.zoomScale(this._targetZoom):B;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(O*M))),this._type==="wheel"&&(this._startZoom=o(),this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:o(),f=this._startZoom,m=this._easing;let _,x=!1;if(this._type==="wheel"&&f&&m){const C=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),M=m(C);_=s.number(f,u,M),C<1?this._frameId||(this._frameId=!0):x=!0}else _=u,x=!0;return this._active=!0,x&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!x,zoomDelta:_-o(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let o=s.ease;if(this._prevEase){const u=this._prevEase,f=(s.exported.now()-u.start)/u.duration,m=u.easing(f+.01)-u.easing(f),_=.27/Math.sqrt(m*m+1e-4)*.01,x=Math.sqrt(.0729-_*_);o=s.bezier(_,x,.25,1)}return this._prevEase={start:s.exported.now(),duration:t,easing:o},o}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=pe("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_isFullscreen(){return!!s.window.document.fullscreenElement||!!s.window.document.webkitFullscreenElement}_showBlockerAlert(){this._alertContainer.style.visibility==="hidden"&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")},200)}}class Wu{constructor(t,o){this._clickZoom=t,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ku{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(t,o){return t.preventDefault(),{cameraAnimation:u=>{u.easeTo({duration:300,zoom:u.getZoom()+(t.shiftKey?-1:1),around:u.unproject(o)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cc{constructor(){this._tap=new bo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(t,o,u){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?u.length>0&&(this._swipePoint=o[0],this._swipeTouch=u[0].identifier):this._tap.touchstart(t,o,u))}touchmove(t,o,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;const f=o[0],m=f.y-this._swipePoint.y;return this._swipePoint=f,t.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(t,o,u)}touchend(t,o,u){this._tapTime?this._swipePoint&&u.length===0&&this.reset():this._tap.touchend(t,o,u)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xu{constructor(t,o,u){this._el=t,this._mousePan=o,this._touchPan=u}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ju{constructor(t,o,u){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=o,this._mousePitch=u}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class $u{constructor(t,o,u,f){this._el=t,this._touchZoom=o,this._touchRotate=u,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qs=l=>l.zoom||l.drag||l.pitch||l.rotate;class uc extends s.Event{}class eh{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,o){const u=s.sub([],o,t);this.radius=s.length(u[2]<0?s.div([],u,this.constants):[u[0],u[1],0])}projectRay(t){s.div(t,t,this.constants),s.normalize(t,t),s.mul$1(t,t,this.constants);const o=s.scale$2([],t,this.radius);if(o[2]>0){const u=s.scale$2([],[0,0,1],s.dot(o,[0,0,1])),f=s.scale$2([],s.normalize([],[o[0],o[1],0]),this.radius),m=s.add([],o,s.scale$2([],s.sub([],s.add([],f,u),o),2));o[0]=m[0],o[1]=m[1]}return o}}function Ko(l){return l.panDelta&&l.panDelta.mag()||l.zoomDelta||l.bearingDelta||l.pitchDelta}class th{constructor(t,o){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fu(t),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new eh,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(o),s.bindAll(["handleEvent","handleWindowEvent"],this);const u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[f,m,_]of this._listeners)f.addEventListener(m,f===s.window.document?this.handleWindowEvent:this.handleEvent,_)}destroy(){for(const[t,o,u]of this._listeners)t.removeEventListener(o,t===s.window.document?this.handleWindowEvent:this.handleEvent,u)}_addDefaultHandlers(t){const o=this._map,u=o.getCanvasContainer();this._add("mapEvent",new Id(o,t));const f=o.boxZoom=new Vu(o,t);this._add("boxZoom",f);const m=new tt,_=new Ku;o.doubleClickZoom=new Wu(_,m),this._add("tapZoom",m),this._add("clickZoom",_);const x=new cc;this._add("tapDragZoom",x);const C=o.touchPitch=new ja(o);this._add("touchPitch",C);const M=new Wo(t),D=new oc(t);o.dragRotate=new Ju(t,M,D),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]);const B=new Qs(t),O=new Zu(o,t);o.dragPan=new Xu(u,B,O),this._add("mousePan",B),this._add("touchPan",O,["touchZoom","touchRotate"]);const U=new Za,G=new ju;o.touchZoomRotate=new $u(u,G,U,x),this._add("touchRotate",U,["touchPan","touchZoom"]),this._add("touchZoom",G,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Mn(o));const R=o.scrollZoom=new qu(o,this);this._add("scrollZoom",R,["mousePan"]);const X=o.keyboard=new Yu;this._add("keyboard",X);for(const j of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[j]&&o[j].enable(t[j])}_add(t,o,u){this._handlers.push({handlerName:t,handler:o,allowed:u}),this._handlersById[t]=o}stop(t){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!qs(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,o,u){for(const f in t)if(f!==u&&(!o||o.indexOf(f)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const o=[];for(const u of t)this._el.contains(u.target)&&o.push(u);return o}handleEvent(t,o){this._updatingCamera=!0;const u=t.type==="renderFrame",f=u?void 0:t,m={needsRenderFrame:!1},_={},x={},C=t.touches?this._getMapTouches(t.touches):void 0,M=C?Dt(this._el,C):u?void 0:wi(this._el,t);for(const{handlerName:O,handler:U,allowed:G}of this._handlers){if(!U.isEnabled())continue;let R;this._blockedByActive(x,G,O)?U.reset():U[o||t.type]&&(R=U[o||t.type](t,M,C),this.mergeHandlerResult(m,_,R,O,f),R&&R.needsRenderFrame&&this._triggerRenderFrame()),(R||U.isActive())&&(x[O]=U)}const D={};for(const O in this._previousActiveHandlers)x[O]||(D[O]=f);this._previousActiveHandlers=x,(Object.keys(D).length||Ko(m))&&(this._changes.push([m,_,D]),this._triggerRenderFrame()),(Object.keys(x).length||Ko(m))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:B}=m;B&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],B(this._map))}mergeHandlerResult(t,o,u,f,m){if(!u)return;s.extend(t,u);const _={handlerName:f,originalEvent:u.originalEvent||m};u.zoomDelta!==void 0&&(o.zoom=_),u.panDelta!==void 0&&(o.drag=_),u.pitchDelta!==void 0&&(o.pitch=_),u.bearingDelta!==void 0&&(o.rotate=_)}_applyChanges(){const t={},o={},u={};for(const[f,m,_]of this._changes)f.panDelta&&(t.panDelta=(t.panDelta||new s.pointGeometry(0,0))._add(f.panDelta)),f.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(t.around=f.around),f.aroundCoord!==void 0&&(t.aroundCoord=f.aroundCoord),f.pinchAround!==void 0&&(t.pinchAround=f.pinchAround),f.noInertia&&(t.noInertia=f.noInertia),s.extend(o,m),s.extend(u,_);this._updateMapTransform(t,o,u),this._changes=[]}_updateMapTransform(t,o,u){const f=this._map,m=f.transform,_=q=>[q.x,q.y,q.z];if((q=>{const K=this._eventsInProgress.drag;return K&&!this._handlersById[K.handlerName].isActive()})()&&!Ko(t)){const q=m.zoom;m.cameraElevationReference="sea",m.recenterOnTerrain(),m.cameraElevationReference="ground",q!==m.zoom&&this._map._update(!0)}if(!Ko(t))return void this._fireEvents(o,u,!0);let{panDelta:x,zoomDelta:C,bearingDelta:M,pitchDelta:D,around:B,aroundCoord:O,pinchAround:U}=t;U!==void 0&&(B=U),(q=>o.drag&&!this._eventsInProgress.drag)()&&B&&(this._dragOrigin=_(m.pointCoordinate3D(B)),this._trackingEllipsoid.setup(m._camera.position,this._dragOrigin)),m.cameraElevationReference="sea",f._stop(!0),B=B||f.transform.centerPoint,M&&(m.bearing+=M),D&&(m.pitch+=D),m._updateCameraState();const G=[0,0,0];if(x){const q=m.pointCoordinate(B);if(m.projection.name==="globe"){const K=s.latFromMercatorY(q.y),ee=m.center.lat,H=Math.min(s.mercatorZfromAltitude(1,K)/s.mercatorZfromAltitude(1,ee),2);x=x.rotate(-m.angle),G[0]=-x.x/m.worldSize*H,G[1]=-x.y/m.worldSize*H}else{const K=m.pointCoordinate(B.sub(x));q&&K&&(G[0]=K.x-q.x,G[1]=K.y-q.y)}}const R=m.zoom,X=[0,0,0];if(C){const q=_(O||m.pointCoordinate3D(B)),K={dir:s.normalize([],s.sub([],q,m._camera.position))};if(K.dir[2]<0){const ee=m.zoomDeltaToMovement(q,C);s.scale$2(X,K.dir,ee)}}const j=s.add(G,G,X);m._translateCameraConstrained(j),C&&Math.abs(m.zoom-R)>1e-4&&m.recenterOnTerrain(),m.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(o,u,!0)}_fireEvents(t,o,u){const f=qs(this._eventsInProgress),m=qs(t),_={};for(const D in t){const{originalEvent:B}=t[D];this._eventsInProgress[D]||(_[`${D}start`]=B),this._eventsInProgress[D]=t[D]}!f&&m&&this._fireEvent("movestart",m.originalEvent);for(const D in _)this._fireEvent(D,_[D]);m&&this._fireEvent("move",m.originalEvent);for(const D in t){const{originalEvent:B}=t[D];this._fireEvent(D,B)}const x={};let C;for(const D in this._eventsInProgress){const{handlerName:B,originalEvent:O}=this._eventsInProgress[D];this._handlersById[B].isActive()||(delete this._eventsInProgress[D],C=o[B]||O,x[`${D}end`]=C)}for(const D in x)this._fireEvent(D,x[D]);const M=qs(this._eventsInProgress);if(u&&(f||m)&&!M){this._updatingCamera=!0;const D=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),B=O=>O!==0&&-this._bearingSnap<O&&O<this._bearingSnap;D?(B(D.bearing||this._map.getBearing())&&(D.bearing=0),this._map.easeTo(D,{originalEvent:C})):(this._map.fire(new s.Event("moveend",{originalEvent:C})),B(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,o){this._map.fire(new s.Event(t,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{this._frameId=void 0,this.handleEvent(new uc("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Qa="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class hc extends s.Evented{constructor(t,o){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=o.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,o){return this.jumpTo({center:t},o)}panBy(t,o,u){return t=s.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,s.extend({offset:t},o),u)}panTo(t,o,u){return this.easeTo(s.extend({center:t},o),u)}getZoom(){return this.transform.zoom}setZoom(t,o){return this.jumpTo({zoom:t},o),this}zoomTo(t,o,u){return this.easeTo(s.extend({zoom:t},o),u)}zoomIn(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}zoomOut(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}getBearing(){return this.transform.bearing}setBearing(t,o){return this.jumpTo({bearing:t},o),this}getPadding(){return this.transform.padding}setPadding(t,o){return this.jumpTo({padding:t},o),this}rotateTo(t,o,u){return this.easeTo(s.extend({bearing:t},o),u)}resetNorth(t,o){return this.rotateTo(0,s.extend({duration:1e3},t),o),this}resetNorthPitch(t,o){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},t),o),this}snapToNorth(t,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,o):this}getPitch(){return this.transform.pitch}setPitch(t,o){return this.jumpTo({pitch:t},o),this}cameraForBounds(t,o){t=s.LngLatBounds.convert(t);const u=o&&o.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),u,o)}_extendCameraOptions(t){const o={top:0,bottom:0,right:0,left:0};if(typeof(t=s.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding=="number"){const u=t.padding;t.padding={top:u,bottom:u,right:u,left:u}}return t.padding=s.extend(o,t.padding),t}_cameraForBoxAndBearing(t,o,u,f){const m=this._extendCameraOptions(f),_=this.transform,x=_.padding,C=_.project(s.LngLat.convert(t)),M=_.project(s.LngLat.convert(o)),D=new s.pointGeometry(C.x,M.y),B=new s.pointGeometry(M.x,C.y),O=-s.degToRad(u),U=C.rotate(O),G=M.rotate(O),R=D.rotate(O),X=B.rotate(O),j=new s.pointGeometry(Math.max(U.x,G.x,R.x,X.x),Math.max(U.y,G.y,R.y,X.y)),q=new s.pointGeometry(Math.min(U.x,G.x,R.x,X.x),Math.min(U.y,G.y,R.y,X.y)),K=j.sub(q),ee=(_.width-((x.left||0)+(x.right||0)+m.padding.left+m.padding.right))/K.x,H=(_.height-((x.top||0)+(x.bottom||0)+m.padding.top+m.padding.bottom))/K.y;if(H<0||ee<0)return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const re=Math.min(_.scaleZoom(_.scale*Math.min(ee,H)),m.maxZoom),Ae=typeof m.offset.x=="number"&&typeof m.offset.y=="number"?new s.pointGeometry(m.offset.x,m.offset.y):s.pointGeometry.convert(m.offset),ve=new s.pointGeometry((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(u*Math.PI/180),Ie=Ae.add(ve).mult(_.scale/_.zoomScale(re));return{center:_.unproject(C.add(M).div(2).sub(Ie)),zoom:re,bearing:u}}_cameraForBox(t,o,u,f,m){const _=this._extendCameraOptions(m);u=u||0,f=f||0,t=s.LngLat.convert(t),o=s.LngLat.convert(o);const x=this.transform.clone();x.padding=_.padding;const C=this.getFreeCameraOptions(),M=new s.LngLat(.5*(t.lng+o.lng),.5*(t.lat+o.lat)),D=.5*(u+f);if(x._camera.position[2]<s.mercatorZfromAltitude(D,M.lat))return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");C.lookAtPoint(M),x.setFreeCameraOptions(C);const B=s.MercatorCoordinate.fromLngLat(t),O=s.MercatorCoordinate.fromLngLat(o),U=x.pointRayIntersection(x.centerPoint,D),G=[(R=x.rayIntersectionCoordinate(U)).x,R.y,R.z];var R;const X=x.screenPointToMercatorRay(x.centerPoint),j=x.projection.name!=="globe";let q,K=0;do{const ee=Math.floor(x.zoom),H=1<<ee,re=Math.min(H*B.x,H*O.x),Ae=Math.min(H*B.y,H*O.y),ve=Math.max(H*B.x,H*O.x),Ie=Math.max(H*B.y,H*O.y),Me=new s.Aabb([re,Ae,u],[ve,Ie,f]),Ze=s.Frustum.fromInvProjectionMatrix(x.invProjMatrix,x.worldSize,ee,j);if(Me.intersects(Ze)!==2){q&&(x._camera.position=s.scaleAndAdd([],x._camera.position,X.dir,-q),x._updateStateFromCamera());break}const ge=s.sub([],x._camera.position,G);q=.5*s.length(ge),x._camera.position=s.scaleAndAdd([],x._camera.position,X.dir,q);try{x._updateStateFromCamera()}catch{return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++K<10);return{center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}}fitBounds(t,o,u){return this._fitInternal(this.cameraForBounds(t,o),o,u)}_raycastElevationBox(t,o){const u=this.transform.elevation;if(!u)return;const f=new s.pointGeometry(t.x,o.y),m=new s.pointGeometry(o.x,t.y),_=u.pointCoordinate(t);if(!_)return;const x=u.pointCoordinate(o);if(!x)return;const C=u.pointCoordinate(f);if(!C)return;const M=u.pointCoordinate(m);if(!M)return;const D=new s.MercatorCoordinate(_[0],_[1]).toLngLat(),B=new s.MercatorCoordinate(x[0],x[1]).toLngLat(),O=new s.MercatorCoordinate(C[0],C[1]).toLngLat(),U=new s.MercatorCoordinate(M[0],M[1]).toLngLat(),G=Math.min(D.lng,Math.min(B.lng,Math.min(O.lng,U.lng))),R=Math.min(D.lat,Math.min(B.lat,Math.min(O.lat,U.lat))),X=Math.max(D.lng,Math.max(B.lng,Math.max(O.lng,U.lng))),j=Math.max(D.lat,Math.max(B.lat,Math.max(O.lat,U.lat))),q=Math.min(_[3],Math.min(x[3],Math.min(C[3],M[3]))),K=Math.max(_[3],Math.max(x[3],Math.max(C[3],M[3])));return{minLngLat:new s.LngLat(G,R),maxLngLat:new s.LngLat(X,j),minAltitude:q,maxAltitude:K}}fitScreenCoordinates(t,o,u,f,m){let _,x,C,M;const D=s.pointGeometry.convert(t),B=s.pointGeometry.convert(o),O=this._raycastElevationBox(D,B);if(O)_=O.minLngLat,x=O.maxLngLat,C=O.minAltitude,M=O.maxAltitude;else{if(this.transform.anyCornerOffEdge(D,B))return this;_=this.transform.pointLocation(D),x=this.transform.pointLocation(B)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(s.pointGeometry.convert(t)),this.transform.pointLocation(s.pointGeometry.convert(o)),u,f):this._cameraForBox(_,x,C,M,f),f,m)}_fitInternal(t,o,u){return t?(delete(o=s.extend(t,o)).padding,o.linear?this.easeTo(o,u):this.flyTo(o,u)):this}jumpTo(t,o){this.stop();const u=t.preloadOnly?this.transform.clone():this.transform;let f=!1,m=!1,_=!1;return"zoom"in t&&u.zoom!==+t.zoom&&(f=!0,u.zoom=+t.zoom),t.center!==void 0&&(u.center=s.LngLat.convert(t.center)),"bearing"in t&&u.bearing!==+t.bearing&&(m=!0,u.bearing=+t.bearing),"pitch"in t&&u.pitch!==+t.pitch&&(_=!0,u.pitch=+t.pitch),t.padding==null||u.isPaddingEqual(t.padding)||(u.padding=t.padding),t.preloadOnly?(this._preloadTiles(u),this):(this.fire(new s.Event("movestart",o)).fire(new s.Event("move",o)),f&&this.fire(new s.Event("zoomstart",o)).fire(new s.Event("zoom",o)).fire(new s.Event("zoomend",o)),m&&this.fire(new s.Event("rotatestart",o)).fire(new s.Event("rotate",o)).fire(new s.Event("rotateend",o)),_&&this.fire(new s.Event("pitchstart",o)).fire(new s.Event("pitch",o)).fire(new s.Event("pitchend",o)),this.fire(new s.Event("moveend",o)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(Qa),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,o){const u=this.transform;if(!u.projection.supportsFreeCamera)return s.warnOnce(Qa),this;this.stop();const f=u.zoom,m=u.pitch,_=u.bearing;u.setFreeCameraOptions(t);const x=f!==u.zoom,C=m!==u.pitch,M=_!==u.bearing;return this.fire(new s.Event("movestart",o)).fire(new s.Event("move",o)),x&&this.fire(new s.Event("zoomstart",o)).fire(new s.Event("zoom",o)).fire(new s.Event("zoomend",o)),M&&this.fire(new s.Event("rotatestart",o)).fire(new s.Event("rotate",o)).fire(new s.Event("rotateend",o)),C&&this.fire(new s.Event("pitchstart",o)).fire(new s.Event("pitch",o)).fire(new s.Event("pitchend",o)),this.fire(new s.Event("moveend",o)),this}easeTo(t,o){this._stop(!1,t.easeId),((t=s.extend({offset:[0,0],duration:500,easing:s.ease},t)).animate===!1||!t.essential&&s.exported.prefersReducedMotion)&&(t.duration=0);const u=this.transform,f=this.getZoom(),m=this.getBearing(),_=this.getPitch(),x=this.getPadding(),C="zoom"in t?+t.zoom:f,M="bearing"in t?this._normalizeBearing(t.bearing,m):m,D="pitch"in t?+t.pitch:_,B="padding"in t?t.padding:u.padding,O=s.pointGeometry.convert(t.offset);let U,G,R;if(u.projection.name==="globe"){const Ie=s.MercatorCoordinate.fromLngLat(u.center),Me=O.rotate(-u.angle);Ie.x+=Me.x/u.worldSize,Ie.y+=Me.y/u.worldSize;const Ze=Ie.toLngLat(),ge=s.LngLat.convert(t.center||Ze);this._normalizeCenter(ge),U=u.centerPoint.add(Me),G=new s.pointGeometry(Ie.x,Ie.y).mult(u.worldSize),R=new s.pointGeometry(s.mercatorXfromLng(ge.lng),s.mercatorYfromLat(ge.lat)).mult(u.worldSize).sub(G)}else{U=u.centerPoint.add(O);const Ie=u.pointLocation(U),Me=s.LngLat.convert(t.center||Ie);this._normalizeCenter(Me),G=u.project(Ie),R=u.project(Me).sub(G)}const X=u.zoomScale(C-f);let j,q;t.around&&(j=s.LngLat.convert(t.around),q=u.locationPoint(j));const K=this._zooming||C!==f,ee=this._rotating||m!==M,H=this._pitching||D!==_,re=!u.isPaddingEqual(B),Ae=Ie=>Me=>{if(K&&(Ie.zoom=s.number(f,C,Me)),ee&&(Ie.bearing=s.number(m,M,Me)),H&&(Ie.pitch=s.number(_,D,Me)),re&&(Ie.interpolatePadding(x,B,Me),U=Ie.centerPoint.add(O)),j)Ie.setLocationAtPoint(j,q);else{const Ze=Ie.zoomScale(Ie.zoom-f),ge=C>f?Math.min(2,X):Math.max(.5,X),Ve=Math.pow(ge,1-Me),Ge=Ie.unproject(G.add(R.mult(Me*Ve)).mult(Ze));Ie.setLocationAtPoint(Ie.renderWorldCopies?Ge.wrap():Ge,U)}return t.preloadOnly||this._fireMoveEvents(o),Ie};if(t.preloadOnly){const Ie=this._emulate(Ae,t.duration,u);return this._preloadTiles(Ie),this}const ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=K,this._rotating=ee,this._pitching=H,this._padding=re,this._easeId=t.easeId,this._prepareEase(o,t.noMoveStart,ve),this._ease(Ae(u),Ie=>{u.recenterOnTerrain(),this._afterEase(o,Ie)},t),this}_prepareEase(t,o,u={}){this._moving=!0,this.transform.cameraElevationReference="sea",o||u.moving||this.fire(new s.Event("movestart",t)),this._zooming&&!u.zooming&&this.fire(new s.Event("zoomstart",t)),this._rotating&&!u.rotating&&this.fire(new s.Event("rotatestart",t)),this._pitching&&!u.pitching&&this.fire(new s.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new s.Event("move",t)),this._zooming&&this.fire(new s.Event("zoom",t)),this._rotating&&this.fire(new s.Event("rotate",t)),this._pitching&&this.fire(new s.Event("pitch",t))}_afterEase(t,o){if(this._easeId&&o&&this._easeId===o)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const u=this._zooming,f=this._rotating,m=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,u&&this.fire(new s.Event("zoomend",t)),f&&this.fire(new s.Event("rotateend",t)),m&&this.fire(new s.Event("pitchend",t)),this.fire(new s.Event("moveend",t))}flyTo(t,o){if(!t.essential&&s.exported.prefersReducedMotion){const rt=s.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(rt,o)}this.stop(),t=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},t);const u=this.transform,f=this.getZoom(),m=this.getBearing(),_=this.getPitch(),x=this.getPadding(),C="zoom"in t?s.clamp(+t.zoom,u.minZoom,u.maxZoom):f,M="bearing"in t?this._normalizeBearing(t.bearing,m):m,D="pitch"in t?+t.pitch:_,B="padding"in t?t.padding:u.padding,O=u.zoomScale(C-f),U=s.pointGeometry.convert(t.offset);let G=u.centerPoint.add(U);const R=u.pointLocation(G),X=s.LngLat.convert(t.center||R);this._normalizeCenter(X);const j=u.project(R),q=u.project(X).sub(j);let K=t.curve;const ee=Math.max(u.width,u.height),H=ee/O,re=q.mag();if("minZoom"in t){const rt=s.clamp(Math.min(t.minZoom,f,C),u.minZoom,u.maxZoom),nt=ee/u.zoomScale(rt-f);K=Math.sqrt(nt/re*2)}const Ae=K*K;function ve(rt){const nt=(H*H-ee*ee+(rt?-1:1)*Ae*Ae*re*re)/(2*(rt?H:ee)*Ae*re);return Math.log(Math.sqrt(nt*nt+1)-nt)}function Ie(rt){return(Math.exp(rt)-Math.exp(-rt))/2}function Me(rt){return(Math.exp(rt)+Math.exp(-rt))/2}const Ze=ve(0);let ge=function(rt){return Me(Ze)/Me(Ze+K*rt)},Ve=function(rt){return ee*((Me(Ze)*(Ie(nt=Ze+K*rt)/Me(nt))-Ie(Ze))/Ae)/re;var nt},Ge=(ve(1)-Ze)/K;if(Math.abs(re)<1e-6||!isFinite(Ge)){if(Math.abs(ee-H)<1e-6)return this.easeTo(t,o);const rt=H<ee?-1:1;Ge=Math.abs(Math.log(H/ee))/K,Ve=function(){return 0},ge=function(nt){return Math.exp(rt*K*nt)}}t.duration="duration"in t?+t.duration:1e3*Ge/("screenSpeed"in t?+t.screenSpeed/K:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const st=m!==M,be=D!==_,pt=!u.isPaddingEqual(B),gt=rt=>nt=>{const vt=nt*Ge,kt=1/ge(vt);rt.zoom=nt===1?C:f+rt.scaleZoom(kt),st&&(rt.bearing=s.number(m,M,nt)),be&&(rt.pitch=s.number(_,D,nt)),pt&&(rt.interpolatePadding(x,B,nt),G=rt.centerPoint.add(U));const ct=nt===1?X:rt.unproject(j.add(q.mult(Ve(vt))).mult(kt));return rt.setLocationAtPoint(rt.renderWorldCopies?ct.wrap():ct,G),rt._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(o),rt};if(t.preloadOnly){const rt=this._emulate(gt,t.duration,u);return this._preloadTiles(rt),this}return this._zooming=!0,this._rotating=st,this._pitching=be,this._padding=pt,this._prepareEase(o,!1),this._ease(gt(u),()=>this._afterEase(o),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,o){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const u=this._onEaseEnd;this._onEaseEnd=void 0,u.call(this,o)}if(!t){const u=this.handlers;u&&u.stop(!1)}return this}_ease(t,o,u){u.animate===!1||u.duration===0?(t(1),o()):(this._easeStart=s.exported.now(),this._easeOptions=u,this._onEaseFrame=t,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),o=this._onEaseFrame;o&&o(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,o){t=s.wrap(t,-180,180);const u=Math.abs(t-o);return Math.abs(t-360-o)<u&&(t-=360),Math.abs(t+360-o)<u&&(t+=360),t}_normalizeCenter(t){const o=this.transform;if(!o.renderWorldCopies||o.maxBounds)return;const u=t.lng-o.center.lng;t.lng+=u>180?-360:u<-180?360:0}_emulate(t,o,u){const f=Math.ceil(15*o/1e3),m=[],_=t(u.clone());for(let x=0;x<=f;x++){const C=_(x/f);m.push(C.clone())}return m}}class Ya{constructor(t={}){this.options=t,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const o=this.options&&this.options.compact;return this._map=t,this._container=pe("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=pe("button","mapboxgl-ctrl-attrib-button",this._container),pe("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=pe("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),o&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),o===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,o){const u=this._map._getUIString(`AttributionControl.${o}`);t.setAttribute("aria-label",u),t.removeAttribute("title"),t.firstElementChild&&t.firstElementChild.setAttribute("title",u)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const o=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(t){const u=o.reduce((f,m,_)=>(m.value&&(f+=`${m.key}=${m.value}${_<o.length-1?"&":""}`),f),"?");t.href=`${s.config.FEEDBACK_URL}/${u}${this._map._hash?this._map._hash.getHashString(!0):""}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(t){!t||t.sourceDataType!=="metadata"&&t.sourceDataType!=="visibility"&&t.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const o=this._map.style._sourceCaches;for(const f in o){const m=o[f];if(m.used){const _=m.getSource();_.attribution&&t.indexOf(_.attribution)<0&&t.push(_.attribution)}}t.sort((f,m)=>f.length-m.length),t=t.filter((f,m)=>{for(let _=m+1;_<t.length;_++)if(t[_].indexOf(f)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=[...this.options.customAttribution,...t]:t.unshift(this.options.customAttribution));const u=t.join(" | ");u!==this._attribHTML&&(this._attribHTML=u,t.length?(this._innerContainer.innerHTML=u,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ih{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(t){this._map=t,this._container=pe("div","mapboxgl-ctrl");const o=pe("a","mapboxgl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://www.mapbox.com/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&t.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(Object.entries(t).length===0)return!0;for(const o in t){const u=t[o].getSource();if(u.hasOwnProperty("mapbox_logo")&&!u.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const o=t[0];this._map.getCanvasContainer().offsetWidth<250?o.classList.add("mapboxgl-compact"):o.classList.remove("mapboxgl-compact")}}}class rh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const o=++this._id;return this._queue.push({callback:t,id:o,cancelled:!1}),o}remove(t){const o=this._currentlyRunning,u=o?this._queue.concat(o):this._queue;for(const f of u)if(f.id===t)return void(f.cancelled=!0)}run(t=0){const o=this._currentlyRunning=this._queue;this._queue=[];for(const u of o)if(!u.cancelled&&(u.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ha(l,t,o){if(l=new s.LngLat(l.lng,l.lat),t){const u=new s.LngLat(l.lng-360,l.lat),f=new s.LngLat(l.lng+360,l.lat),m=360*Math.ceil(Math.abs(l.lng-o.center.lng)/360),_=o.locationPoint(l).distSqr(t),x=t.x<0||t.y<0||t.x>o.width||t.y>o.height;o.locationPoint(u).distSqr(t)<_&&(x||Math.abs(u.lng-o.center.lng)<m)?l=u:o.locationPoint(f).distSqr(t)<_&&(x||Math.abs(f.lng-o.center.lng)<m)&&(l=f)}for(;Math.abs(l.lng-o.center.lng)>180;){const u=o.locationPoint(l);if(u.x>=0&&u.y>=0&&u.x<=o.width&&u.y<=o.height)break;l.lng>o.center.lng?l.lng-=360:l.lng+=360}return l}const qa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Wa extends s.Evented{constructor(t,o){if(super(),(t instanceof s.window.HTMLElement||o)&&(t=s.extend({element:t},o)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this._updateMoving=()=>this._update(!0),t&&t.element)this._element=t.element,this._offset=s.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=pe("div");const f=41,m=27,_=Te("svg",{display:"block",height:f*this._scale+"px",width:m*this._scale+"px",viewBox:`0 0 ${m} ${f}`},this._element),x=Te("radialGradient",{id:"shadowGradient"},Te("defs",{},_));Te("stop",{offset:"10%","stop-opacity":.4},x),Te("stop",{offset:"100%","stop-opacity":.05},x),Te("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},_),Te("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},_),Te("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},_),Te("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},_),this._offset=s.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()});const u=this._element.classList;for(const f in qa)u.remove(`mapboxgl-marker-anchor-${f}`);u.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(t){return t===this._map||(this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._updateMoving),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),t.on("click",this._onMapClick)),this}remove(){const t=this._map;return t&&(t.off("click",this._onMapClick),t.off("move",this._updateMoving),t.off("moveend",this._update),t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler),t.off("mouseup",this._onUp),t.off("touchend",this._onUp),t.off("mousemove",this._onMove),t.off("touchmove",this._onMove),t.off("remove",this._clearFadeTimer),t._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=s.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const f=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(t){const o=t.code,u=t.charCode||t.keyCode;o!=="Space"&&o!=="Enter"&&u!==32&&u!==13||this.togglePopup()}_onMapClick(t){const o=t.originalEvent.target,u=this._element;this._popup&&(o===u||u.contains(o))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?(t.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(t.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_evaluateOpacity(){const t=this._map;if(!t)return;const o=this._pos;if(!o||o.x<0||o.x>t.transform.width||o.y<0||o.y>t.transform.height)return void this._clearFadeTimer();const u=t.unproject(o);let f=!1;if(t.transform._terrainEnabled()&&t.getTerrain()){const _=t.getFreeCameraOptions();if(_.position){const x=_.position.toLngLat();f=x.distanceTo(u)<.9*x.distanceTo(this._lngLat)}}const m=(1-t._queryFogOpacity(u))*(f?.2:1);this._element.style.opacity=`${m}`,this._popup&&this._popup._setOpacity(`${m}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const t=this._pos;if(!t)return;const o=this._offset.mult(this._scale),u=this._calculatePitch(),f=this._calculateRotation();this._element.style.transform=`
            translate(${t.x}px, ${t.y}px) ${qa[this._anchor]}
            rotateX(${u}deg) rotateZ(${f}deg)
            translate(${o.x}px, ${o.y}px)
        `}_calculatePitch(){return this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?0:this._map&&this._pitchAlignment==="map"?this._map.getPitch():0}_calculateRotation(){return this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?this._rotation:this._map&&this._rotationAlignment==="map"?this._rotation-this._map.getBearing():0}_update(t){s.window.cancelAnimationFrame(this._updateFrameId);const o=this._map;o&&(o.transform.renderWorldCopies&&(this._lngLat=Ha(this._lngLat,this._pos,o.transform)),this._pos=o.project(this._lngLat),t===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),o._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),!o.getTerrain()&&!o.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(t){return this._offset=s.pointGeometry.convert(t),this._update(),this}_onMove(t){const o=this._map;if(o){if(!this._isDragging){const u=this._clickTolerance||o._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=o.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(t){const o=this._map;o&&this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos),this._pointerdownPos=t.point,this._state="pending",o.on("mousemove",this._onMove),o.on("touchmove",this._onMove),o.once("mouseup",this._onUp),o.once("touchend",this._onUp))}setDraggable(t){this._draggable=!!t;const o=this._map;return o&&(t?(o.on("mousedown",this._addDragHandler),o.on("touchstart",this._addDragHandler)):(o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class Dd{constructor(t){this.jumpTo(t)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const o=s.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-o)+this._end*o}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,o,u){this._start=this.getValue(o),this._end=t,this._startTime=o,this._endTime=o+u}}const Sd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},dc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Ws(l){l.parentNode&&l.parentNode.removeChild(l)}const pc={showCompass:!0,showZoom:!0,visualizePitch:!1};class fc{constructor(t,o,u=!1){this._clickTolerance=10,this.element=o,this.mouseRotate=new Wo({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,u&&(this.mousePitch=new oc({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener("mousedown",this.mousedown),o.addEventListener("touchstart",this.touchstart,{passive:!1}),o.addEventListener("touchmove",this.touchmove),o.addEventListener("touchend",this.touchend),o.addEventListener("touchcancel",this.reset)}down(t,o){this.mouseRotate.mousedown(t,o),this.mousePitch&&this.mousePitch.mousedown(t,o),dt()}move(t,o){const u=this.map,f=this.mouseRotate.mousemoveWindow(t,o),m=f&&f.bearingDelta;if(m&&u.setBearing(u.getBearing()+m),this.mousePitch){const _=this.mousePitch.mousemoveWindow(t,o),x=_&&_.pitchDelta;x&&u.setPitch(u.getPitch()+x)}}off(){const t=this.element;t.removeEventListener("mousedown",this.mousedown),t.removeEventListener("touchstart",this.touchstart,{passive:!1}),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Pt(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(s.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),wi(this.element,t)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(t){this.move(t,wi(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){t.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Dt(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){t.targetTouches.length!==1?this.reset():(this._lastPos=Dt(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){t.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const xr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let Sr,Ks=0,wo=!1;const mc={maxWidth:100,unit:"metric"};function Ka(l,t,o){const u=o&&o.maxWidth||100,f=l._containerHeight/2,m=l._containerWidth/2-u/2,_=l.unproject([m,f]),x=l.unproject([m+u,f]),C=_.distanceTo(x);if(o&&o.unit==="imperial"){const M=3.2808*C;M>5280?Xo(t,u,M/5280,l._getUIString("ScaleControl.Miles"),l):Xo(t,u,M,l._getUIString("ScaleControl.Feet"),l)}else o&&o.unit==="nautical"?Xo(t,u,C/1852,l._getUIString("ScaleControl.NauticalMiles"),l):C>=1e3?Xo(t,u,C/1e3,l._getUIString("ScaleControl.Kilometers"),l):Xo(t,u,C,l._getUIString("ScaleControl.Meters"),l)}function Xo(l,t,o,u,f){const m=function(x){const C=Math.pow(10,`${Math.floor(x)}`.length-1);let M=x/C;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(D){const B=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*B)/B}(M),C*M}(o),_=m/o;f._requestDomTask(()=>{l.style.width=t*_+"px",l.innerHTML=`${m}&nbsp;${u}`})}const Vr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},gi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Xs(l=new s.pointGeometry(0,0),t="bottom"){if(typeof l=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(l,2)));switch(t){case"top":return new s.pointGeometry(0,l);case"top-left":return new s.pointGeometry(o,o);case"top-right":return new s.pointGeometry(-o,o);case"bottom":return new s.pointGeometry(0,-l);case"bottom-left":return new s.pointGeometry(o,-o);case"bottom-right":return new s.pointGeometry(-o,-o);case"left":return new s.pointGeometry(l,0);case"right":return new s.pointGeometry(-l,0)}return new s.pointGeometry(0,0)}return l instanceof s.pointGeometry||Array.isArray(l)?s.pointGeometry.convert(l):s.pointGeometry.convert(l[t]||[0,0])}const Jo={version:s.version,supported:W,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends hc{constructor(l){if((l=s.extend({},dc,l)).minZoom!=null&&l.maxZoom!=null&&l.minZoom>l.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(l.minPitch!=null&&l.maxPitch!=null&&l.minPitch>l.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(l.minPitch!=null&&l.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(l.maxPitch!=null&&l.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(l.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(l.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Fa(l.minZoom,l.maxZoom,l.minPitch,l.maxPitch,l.renderWorldCopies),l),this._interactive=l.interactive,this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._failIfMajorPerformanceCaveat=l.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=l.preserveDrawingBuffer,this._antialias=l.antialias,this._trackResize=l.trackResize,this._bearingSnap=l.bearingSnap,this._refreshExpiredTiles=l.refreshExpiredTiles,this._fadeDuration=l.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=l.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=l.collectResourceTiming,this._optimizeForTerrain=l.optimizeForTerrain,this._renderTaskQueue=new rh,this._domRenderTaskQueue=new rh,this._controls=[],this._markers=[],this._mapId=s.uniqueId(),this._locale=s.extend({},Sd,l.locale),this._clickTolerance=l.clickTolerance,this._cooperativeGestures=l.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Dd(0),this._explicitProjection=null,this._requestManager=new s.RequestManager(l.transformRequest,l.accessToken,l.testMode),this._silenceAuthErrors=!!l.testMode,typeof l.container=="string"){if(this._container=s.window.document.getElementById(l.container),!this._container)throw new Error(`Container '${l.container}' not found.`)}else{if(!(l.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=l.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),l.maxBounds&&this.setMaxBounds(l.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new th(this,l),this._localFontFamily=l.localFontFamily,this._localIdeographFontFamily=l.localIdeographFontFamily,l.style&&this.setStyle(l.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),l.projection&&this.setProjection(l.projection),this._hash=l.hash&&new Pu(typeof l.hash=="string"&&l.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:l.center,zoom:l.zoom,bearing:l.bearing,pitch:l.pitch}),l.bounds&&(this.resize(),this.fitBounds(l.bounds,s.extend({},l.fitBoundsOptions,{duration:0})))),this.resize(),l.attributionControl&&this.addControl(new Ya({customAttribution:l.customAttribution})),this._logoControl=new ih,this.addControl(this._logoControl,l.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",t=>{this._update(t.dataType==="style"),this.fire(new s.Event(`${t.dataType}data`,t))}),this.on("dataloading",t=>{this.fire(new s.Event(`${t.dataType}dataloading`,t))})}_getMapId(){return this._mapId}addControl(l,t){if(t===void 0&&(t=l.getDefaultPosition?l.getDefaultPosition():"top-right"),!l||!l.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=l.onAdd(this);this._controls.push(l);const u=this._controlPositions[t];return t.indexOf("bottom")!==-1?u.insertBefore(o,u.firstChild):u.appendChild(o),this}removeControl(l){if(!l||!l.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(l);return t>-1&&this._controls.splice(t,1),l.onRemove(this),this}hasControl(l){return this._controls.indexOf(l)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(l){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const t=!this._moving;return t&&this.fire(new s.Event("movestart",l)).fire(new s.Event("move",l)),this.fire(new s.Event("resize",l)),t&&this.fire(new s.Event("moveend",l)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(l){return this.transform.setMaxBounds(s.LngLatBounds.convert(l)),this._update()}setMinZoom(l){if((l=l==null?-2:l)>=-2&&l<=this.transform.maxZoom)return this.transform.minZoom=l,this._update(),this.getZoom()<l?this.setZoom(l):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(l){if((l=l==null?22:l)>=this.transform.minZoom)return this.transform.maxZoom=l,this._update(),this.getZoom()>l?this.setZoom(l):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(l){if((l=l==null?0:l)<0)throw new Error("minPitch must be greater than or equal to 0");if(l>=0&&l<=this.transform.maxPitch)return this.transform.minPitch=l,this._update(),this.getPitch()<l?this.setPitch(l):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(l){if((l=l==null?85:l)>85)throw new Error("maxPitch must be less than or equal to 85");if(l>=this.transform.minPitch)return this.transform.maxPitch=l,this._update(),this.getPitch()>l?this.setPitch(l):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(l){return this.transform.renderWorldCopies=l,this._update()}getProjection(){return this._explicitProjection?this._explicitProjection:this.style&&this.style.stylesheet&&this.style.stylesheet.projection?this.style.stylesheet.projection:{name:"mercator",center:[0,0]}}setProjection(l){return this._lazyInitEmptyStyle(),l?typeof l=="string"&&(l={name:l}):l=null,this._updateProjection(l)}_updateProjection(l){l===null&&(this._explicitProjection=null);const t=l||this.getProjection(),o=this.transform.setProjection(t);if(l&&(this._explicitProjection=this.transform.getProjection()),o){this.painter.clearBackgroundTiles();for(const u in this.style._sourceCaches)this.style._sourceCaches[u].clearTiles();this.style.applyProjectionUpdate(),this._update(!0)}return this}project(l){return this.transform.locationPoint3D(s.LngLat.convert(l))}unproject(l){return this.transform.pointLocation3D(s.pointGeometry.convert(l))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(l,t,o){if(l==="mouseenter"||l==="mouseover"){let u=!1;const f=_=>{const x=t.filter(M=>this.getLayer(M)),C=x.length?this.queryRenderedFeatures(_.point,{layers:x}):[];C.length?u||(u=!0,o.call(this,new Dr(l,this,_.originalEvent,{features:C}))):u=!1},m=()=>{u=!1};return{layers:new Set(t),listener:o,delegates:{mousemove:f,mouseout:m}}}if(l==="mouseleave"||l==="mouseout"){let u=!1;const f=_=>{const x=t.filter(C=>this.getLayer(C));(x.length?this.queryRenderedFeatures(_.point,{layers:x}):[]).length?u=!0:u&&(u=!1,o.call(this,new Dr(l,this,_.originalEvent)))},m=_=>{u&&(u=!1,o.call(this,new Dr(l,this,_.originalEvent)))};return{layers:new Set(t),listener:o,delegates:{mousemove:f,mouseout:m}}}{const u=f=>{const m=t.filter(x=>this.getLayer(x)),_=m.length?this.queryRenderedFeatures(f.point,{layers:m}):[];_.length&&(f.features=_,o.call(this,f),delete f.features)};return{layers:new Set(t),listener:o,delegates:{[l]:u}}}}on(l,t,o){if(o===void 0)return super.on(l,t);Array.isArray(t)||(t=[t]);const u=this._createDelegatedListener(l,t,o);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[l]=this._delegatedListeners[l]||[],this._delegatedListeners[l].push(u);for(const f in u.delegates)this.on(f,u.delegates[f]);return this}once(l,t,o){if(o===void 0)return super.once(l,t);Array.isArray(t)||(t=[t]);const u=this._createDelegatedListener(l,t,o);for(const f in u.delegates)this.once(f,u.delegates[f]);return this}off(l,t,o){if(o===void 0)return super.off(l,t);t=new Set(Array.isArray(t)?t:[t]);const u=(m,_)=>{if(m.size!==_.size)return!1;for(const x of m)if(!_.has(x))return!1;return!0},f=this._delegatedListeners?this._delegatedListeners[l]:void 0;return f&&(m=>{for(let _=0;_<m.length;_++){const x=m[_];if(x.listener===o&&u(x.layers,t)){for(const C in x.delegates)this.off(C,x.delegates[C]);return m.splice(_,1),this}}})(f),this}queryRenderedFeatures(l,t){return this.style?(t!==void 0||l===void 0||l instanceof s.pointGeometry||Array.isArray(l)||(t=l,l=void 0),this.style.queryRenderedFeatures(l=l||[[0,0],[this.transform.width,this.transform.height]],t=t||{},this.transform)):[]}querySourceFeatures(l,t){return this.style.querySourceFeatures(l,t)}queryTerrainElevation(l,t){const o=this.transform.elevation;return o?(t=s.extend({},{exaggerated:!0},t),o.getAtPoint(s.MercatorCoordinate.fromLngLat(l),null,t.exaggerated)):null}setStyle(l,t){return(t=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&t.localFontFamily===this._localFontFamily&&this.style&&l?(this._diffStyle(l,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._localFontFamily=t.localFontFamily,this._updateStyle(l,t))}_getUIString(l){const t=this._locale[l];if(t==null)throw new Error(`Missing UI string '${l}'`);return t}_updateStyle(l,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),l&&(this.style=new yr(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof l=="string"?this.style.loadURL(l):this.style.loadJSON(l)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new yr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(l,t){if(typeof l=="string"){const o=this._requestManager.normalizeStyleURL(l),u=this._requestManager.transformRequest(o,s.ResourceType.Style);s.getJSON(u,(f,m)=>{f?this.fire(new s.ErrorEvent(f)):m&&this._updateDiff(m,t)})}else typeof l=="object"&&this._updateDiff(l,t)}_updateDiff(l,t){try{this.style.setState(l)&&this._update(!0)}catch(o){s.warnOnce(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(l,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(l,t){return this._lazyInitEmptyStyle(),this.style.addSource(l,t),this._update(!0)}isSourceLoaded(l){return!!this.style&&this.style._isSourceCacheLoaded(l)}areTilesLoaded(){const l=this.style&&this.style._sourceCaches;for(const t in l){const o=l[t]._tiles;for(const u in o){const f=o[u];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}addSourceType(l,t,o){this._lazyInitEmptyStyle(),this.style.addSourceType(l,t,o)}removeSource(l){return this.style.removeSource(l),this._updateTerrain(),this._update(!0)}getSource(l){return this.style.getSource(l)}addImage(l,t,{pixelRatio:o=1,sdf:u=!1,stretchX:f,stretchY:m,content:_}={}){if(this._lazyInitEmptyStyle(),t instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&t instanceof s.window.ImageBitmap){const{width:x,height:C,data:M}=s.exported.getImageData(t);this.style.addImage(l,{data:new s.RGBAImage({width:x,height:C},M),pixelRatio:o,stretchX:f,stretchY:m,content:_,sdf:u,version:0})}else if(t.width===void 0||t.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:x,height:C}=t,M=t;this.style.addImage(l,{data:new s.RGBAImage({width:x,height:C},new Uint8Array(M.data)),pixelRatio:o,stretchX:f,stretchY:m,content:_,sdf:u,version:0,userImage:M}),M.onAdd&&M.onAdd(this,l)}}updateImage(l,t){const o=this.style.getImage(l);if(!o)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const u=t instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&t instanceof s.window.ImageBitmap?s.exported.getImageData(t):t,{width:f,height:m}=u;f!==void 0&&m!==void 0?f===o.data.width&&m===o.data.height?(o.data.replace(u.data,!(t instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&t instanceof s.window.ImageBitmap)),this.style.updateImage(l,o)):this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(l){return l?!!this.style.getImage(l):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(l){this.style.removeImage(l)}loadImage(l,t){s.getImage(this._requestManager.transformRequest(l,s.ResourceType.Image),(o,u)=>{t(o,u instanceof s.window.HTMLImageElement?s.exported.getImageData(u):u)})}listImages(){return this.style.listImages()}addLayer(l,t){return this._lazyInitEmptyStyle(),this.style.addLayer(l,t),this._update(!0)}moveLayer(l,t){return this.style.moveLayer(l,t),this._update(!0)}removeLayer(l){return this.style.removeLayer(l),this._update(!0)}getLayer(l){return this.style.getLayer(l)}setLayerZoomRange(l,t,o){return this.style.setLayerZoomRange(l,t,o),this._update(!0)}setFilter(l,t,o={}){return this.style.setFilter(l,t,o),this._update(!0)}getFilter(l){return this.style.getFilter(l)}setPaintProperty(l,t,o,u={}){return this.style.setPaintProperty(l,t,o,u),this._update(!0)}getPaintProperty(l,t){return this.style.getPaintProperty(l,t)}setLayoutProperty(l,t,o,u={}){return this.style.setLayoutProperty(l,t,o,u),this._update(!0)}getLayoutProperty(l,t){return this.style.getLayoutProperty(l,t)}setLight(l,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(l,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(l){return this._lazyInitEmptyStyle(),!l&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(l),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(l){return this._lazyInitEmptyStyle(),this.style.setFog(l),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(l){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(l),this.transform):0}setFeatureState(l,t){return this.style.setFeatureState(l,t),this._update()}removeFeatureState(l,t){return this.style.removeFeatureState(l,t),this._update()}getFeatureState(l){return this.style.getFeatureState(l)}_updateContainerDimensions(){if(!this._container)return;const l=this._container.getBoundingClientRect().width||400,t=this._container.getBoundingClientRect().height||300;let o,u,f,m=this._container;for(;m&&(!u||!f);){const _=s.window.getComputedStyle(m).transform;_&&_!=="none"&&(o=_.match(/matrix.*\((.+)\)/)[1].split(", "),o[0]&&o[0]!=="0"&&o[0]!=="1"&&(u=o[0]),o[3]&&o[3]!=="0"&&o[3]!=="1"&&(f=o[3])),m=m.parentElement}this._containerWidth=u?Math.abs(l/u):l,this._containerHeight=f?Math.abs(t/f):t}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const l=this._container;l.classList.add("mapboxgl-map"),(this._missingCSSCanary=pe("div","mapboxgl-canary",l)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=pe("div","mapboxgl-canvas-container",l);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=pe("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const o=this._controlContainer=pe("div","mapboxgl-control-container",l),u=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(f=>{u[f]=pe("div",`mapboxgl-ctrl-${f}`,o)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(l,t){const o=s.exported.devicePixelRatio||1;this._canvas.width=o*Math.ceil(l),this._canvas.height=o*Math.ceil(t),this._canvas.style.width=`${l}px`,this._canvas.style.height=`${t}px`}_addMarker(l){this._markers.push(l)}_removeMarker(l){const t=this._markers.indexOf(l);t!==-1&&this._markers.splice(t,1)}_setupPainter(){const l=s.extend({},W.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),t=this._canvas.getContext("webgl",l)||this._canvas.getContext("experimental-webgl",l);t?(s.storeAuthState(t,!0),this.painter=new ku(t,this.transform),this.on("data",o=>{o.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(t)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(l){l.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:l}))}_contextRestored(l){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:l}))}_onMapScroll(l){if(l.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(l){return this.style?(this._styleDirty=this._styleDirty||l,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(l){return this._update(),this._renderTaskQueue.add(l)}_cancelRenderFrame(l){this._renderTaskQueue.remove(l)}_requestDomTask(l){!this.loaded()||this.loaded()&&!this.isMoving()?l():this._domRenderTaskQueue.add(l)}_render(l){let t;const o=this.painter.context.extTimerQuery,u=s.exported.now();if(this.listens("gpu-timing-frame")&&(t=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,t)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(l),this._domRenderTaskQueue.run(l),this._removed)return;let f=!1;const m=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const C=this.transform.zoom,M=this.transform.pitch,D=s.exported.now();this.style.zoomHistory.update(C,D);const B=new s.EvaluationParameters(C,{now:D,fadeDuration:m,pitch:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),O=B.crossFadingFactor();O===1&&O===this._crossFadingFactor||(f=!0,this._crossFadingFactor=O),this.style.update(B)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let _=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),_=this._updateAverageElevation(u),this.style._updateSources(this.transform),this._forceMarkerUpdate()):_=this._updateAverageElevation(u),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,m,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:m,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const C=s.exported.now()-u;o.endQueryEXT(o.TIME_ELAPSED_EXT,t),setTimeout(()=>{const M=o.getQueryObjectEXT(t,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(t),this.fire(new s.Event("gpu-timing-frame",{cpuTime:C,gpuTime:M}))},50)}if(this.listens("gpu-timing-layer")){const C=this.painter.collectGpuTimers();setTimeout(()=>{const M=this.painter.queryGpuTimers(C);this.fire(new s.Event("gpu-timing-layer",{layerTimes:M}))},50)}const x=this._sourcesDirty||this._styleDirty||this._placementDirty||_;if(x||this._repaint)this.triggerRepaint();else{const C=!this.isMoving()&&this.loaded();if(C&&(_=this._updateAverageElevation(u,!0)),_)this.triggerRepaint();else if(this._triggerFrame(!1),C&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const M=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:M})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||x||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const l of this._markers)l._update()}_updateAverageElevation(l,t=!1){const o=u=>(this.transform.averageElevation=u,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&o(0);if((t||l-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(l)){const u=this.transform.averageElevation;let f=this.transform.sampleAverageElevation(),m=!1;this.transform.elevation&&(m=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(f)?f=0:this._averageElevationLastSampledAt=l;const _=Math.abs(u-f);if(_>1){if(this._isInitialLoad||m)return this._averageElevation.jumpTo(f),o(f);this._averageElevation.easeTo(f,l,300)}else if(_>1e-4)return this._averageElevation.jumpTo(f),o(f)}return!!this._averageElevation.isEasing(l)&&o(this._averageElevation.getValue(l))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,l=>{if(l&&(l.message===s.AUTH_ERR_MSG||l.status===401)){const t=this.painter.context.gl;s.storeAuthState(t,!1),this._logoControl instanceof ih&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const l=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const o=this.painter.context.gl,u=o.createFramebuffer();function f(m){o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,m,0);const _=new Uint8Array(o.drawingBufferWidth*o.drawingBufferHeight*4);return o.readPixels(0,0,o.drawingBufferWidth,o.drawingBufferHeight,o.RGBA,o.UNSIGNED_BYTE,_),_}return o.bindFramebuffer(o.FRAMEBUFFER,u),this._canvasPixelComparison(f(l),t.canvasCopies.map(f),t.timeStamps)}_canvasPixelComparison(l,t,o){let u=o[1]-o[0];const f=l.length/4;for(let m=0;m<t.length;m++){const _=t[m];let x=0;for(let C=0;C<_.length;C+=4)_[C]===l[C]&&_[C+1]===l[C+1]&&_[C+2]===l[C+2]&&_[C+3]===l[C+3]&&(x+=1);u+=(o[m+2]-o[m+1])*(1-x/f)}return u}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1));const l=this.painter.context.gl.getExtension("WEBGL_lose_context");l&&l.loseContext(),Ws(this._canvasContainer),Ws(this._controlContainer),Ws(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(l){this._renderNextFrame=this._renderNextFrame||l,this.style&&!this._frame&&(this._frame=s.exported.frame(t=>{const o=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,o&&this._render(t)}))}_preloadTiles(l){const t=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(t,(o,u)=>o._preloadTiles(l,u),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(l){this._trackResize&&this.resize({originalEvent:l})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(l){this._showTileBoundaries!==l&&(this._showTileBoundaries=l,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(l){this._showTerrainWireframe!==l&&(this._showTerrainWireframe=l,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(l){this._speedIndexTiming!==l&&(this._speedIndexTiming=l,this._update())}get showPadding(){return!!this._showPadding}set showPadding(l){this._showPadding!==l&&(this._showPadding=l,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(l){this._showCollisionBoxes!==l&&(this._showCollisionBoxes=l,l?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(l){this._showOverdrawInspector!==l&&(this._showOverdrawInspector=l,this._update())}get repaint(){return!!this._repaint}set repaint(l){this._repaint!==l&&(this._repaint=l,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(l){this._vertices=l,this._update()}_setCacheLimits(l,t){s.setCacheLimits(l,t)}get version(){return s.version}},NavigationControl:class{constructor(l){this.options=s.extend({},pc,l),this._container=pe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",t=>{this._map&&this._map.zoomIn({},{originalEvent:t})}),pe("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",t=>{this._map&&this._map.zoomOut({},{originalEvent:t})}),pe("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",t=>{const o=this._map;o&&(this.options.visualizePitch?o.resetNorthPitch({},{originalEvent:t}):o.resetNorth({},{originalEvent:t}))}),this._compassIcon=pe("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const l=this._map;if(!l)return;const t=l.getZoom(),o=t===l.getMaxZoom(),u=t===l.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const l=this._map;if(!l)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(l.transform.pitch*(Math.PI/180)),.5)}) rotateX(${l.transform.pitch}deg) rotateZ(${l.transform.angle*(180/Math.PI)}deg)`:`rotate(${l.transform.angle*(180/Math.PI)}deg)`;l._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=t)})}onAdd(l){return this._map=l,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),l.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&l.on("pitch",this._rotateCompassArrow),l.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new fc(l,this._compass,this.options.visualizePitch)),this._container}onRemove(){const l=this._map;l&&(this._container.remove(),this.options.showZoom&&l.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&l.off("pitch",this._rotateCompassArrow),l.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(l,t){const o=pe("button",l,this._container);return o.type="button",o.addEventListener("click",t),o}_setButtonTitle(l,t){if(!this._map)return;const o=this._map._getUIString(`NavigationControl.${t}`);l.setAttribute("aria-label",o),l.firstElementChild&&l.firstElementChild.setAttribute("title",o)}},GeolocateControl:class extends s.Evented{constructor(l){super(),this.options=s.extend({},xr,l),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=nc(this._updateMarkerRotation,20)}onAdd(l){var t;return this._map=l,this._container=pe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,Sr!==void 0?t(Sr):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(o=>{Sr=o.state!=="denied",t(Sr)}):(Sr=!!s.window.navigator.geolocation,t(Sr)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,Ks=0,wo=!1}_isOutOfMapMaxBounds(l){const t=this._map.getMaxBounds(),o=l.coords;return!!t&&(o.longitude<t.getWest()||o.longitude>t.getEast()||o.latitude<t.getSouth()||o.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(l){if(this._map){if(this._isOutOfMapMaxBounds(l))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",l)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=l,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(l),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(l),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",l)),this._finish()}}_updateCamera(l){const t=new s.LngLat(l.coords.longitude,l.coords.latitude),o=l.coords.accuracy,u=this._map.getBearing(),f=s.extend({bearing:u},this.options.fitBoundsOptions);this._map.fitBounds(t.toBounds(o),f,{geolocateSource:!0})}_updateMarker(l){if(l){const t=new s.LngLat(l.coords.longitude,l.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=l.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const l=this._map._containerHeight/2,t=this._map.unproject([0,l]),o=this._map.unproject([100,l]),u=t.distanceTo(o)/100,f=Math.ceil(2*this._accuracy/u);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(l){if(this._map){if(this.options.trackUserLocation)if(l.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(l.code===3&&wo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",l)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(l){if(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=pe("button","mapboxgl-ctrl-geolocate",this._container),pe("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",l===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=pe("div","mapboxgl-user-location"),this._dotElement.appendChild(pe("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(pe("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Wa({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=pe("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Wa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||this._watchState!=="ACTIVE_LOCK"||t.originalEvent&&t.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}_onDeviceOrientation(l){this._userLocationDotMarker&&(l.webkitCompassHeading?this._heading=l.webkitCompassHeading:l.absolute===!0&&(this._heading=-1*l.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ks--,wo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let l;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ks++,Ks>1?(l={maximumAge:6e5,timeout:0},wo=!0):(l=this.options.positionOptions,wo=!1),this._geolocationWatchID=s.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,l),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else s.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const l=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(t=>{t==="granted"&&l()}).catch(console.error):l()}_clearWatch(){s.window.navigator.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ya,ScaleControl:class{constructor(l){this.options=s.extend({},mc,l),s.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ka(this._map,this._container,this.options)}onAdd(l){return this._map=l,this._container=pe("div","mapboxgl-ctrl mapboxgl-ctrl-scale",l.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._onMove),this._map=void 0}setUnit(l){this.options.unit=l,Ka(this._map,this._container,this.options)}},FullscreenControl:class{constructor(l){this._fullscreen=!1,l&&l.container&&(l.container instanceof s.window.HTMLElement?this._container=l.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(l){return this._map=l,this._container||(this._container=this._map.getContainer()),this._controlContainer=pe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const l=this._fullscreenButton=pe("button","mapboxgl-ctrl-fullscreen",this._controlContainer);pe("span","mapboxgl-ctrl-icon",l).setAttribute("aria-hidden","true"),l.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const l=this._getTitle();this._fullscreenButton.setAttribute("aria-label",l),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",l)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(l){super(),this.options=s.extend(Object.create(Vr),l),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(l&&l.className?l.className.trim().split(/\s+/):[])}addTo(l){return this._map&&this.remove(),this._map=l,this.options.closeOnClick&&l.on("preclick",this._onClose),this.options.closeOnMove&&l.on("move",this._onClose),l.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(l.on("mousemove",this._onMouseEvent),l.on("mouseup",this._onMouseEvent),l._canvasContainer.classList.add("mapboxgl-track-pointer")):l.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const l=this._map;return l&&(l.off("move",this._update),l.off("move",this._onClose),l.off("preclick",this._onClose),l.off("click",this._onClose),l.off("remove",this.remove),l.off("mousemove",this._onMouseEvent),l.off("mouseup",this._onMouseEvent),l.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(l){this._lngLat=s.LngLat.convert(l),this._pos=null,this._trackPointer=!1,this._update();const t=this._map;return t&&(t.on("move",this._update),t.off("mousemove",this._onMouseEvent),t._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const l=this._map;return l&&(l.off("move",this._update),l.on("mousemove",this._onMouseEvent),l.on("drag",this._onMouseEvent),l._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(l){return this.setDOMContent(s.window.document.createTextNode(l))}setHTML(l){const t=s.window.document.createDocumentFragment(),o=s.window.document.createElement("body");let u;for(o.innerHTML=l;u=o.firstChild,u;)t.appendChild(u);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(l){return this.options.maxWidth=l,this._update(),this}setDOMContent(l){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=pe("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(l),this.options.closeButton){const o=this._closeButton=pe("button","mapboxgl-popup-close-button",t);o.type="button",o.setAttribute("aria-label","Close popup"),o.setAttribute("aria-hidden","true"),o.innerHTML="&#215;",o.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(l){return this._classList.add(l),this._updateClassList(),this}removeClassName(l){return this._classList.delete(l),this._updateClassList(),this}setOffset(l){return this.options.offset=l,this._update(),this}toggleClassName(l){let t;return this._classList.delete(l)?t=!1:(this._classList.add(l),t=!0),this._updateClassList(),t}_onMouseEvent(l){this._update(l.point)}_getAnchor(l){if(this.options.anchor)return this.options.anchor;const t=this._map,o=this._container,u=this._pos;if(!t||!o||!u)return"bottom";const f=o.offsetWidth,m=o.offsetHeight,_=u.x<f/2,x=u.x>t.transform.width-f/2;if(u.y+l<m)return _?"top-left":x?"top-right":"top";if(u.y>t.transform.height-m){if(_)return"bottom-left";if(x)return"bottom-right"}return _?"left":x?"right":"bottom"}_updateClassList(){const l=this._container;if(!l)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),l.className=t.join(" ")}_update(l){const t=this._map,o=this._content;if(!t||!this._lngLat&&!this._trackPointer||!o)return;let u=this._container;if(u||(u=this._container=pe("div","mapboxgl-popup",t.getContainer()),this._tip=pe("div","mapboxgl-popup-tip",u),u.appendChild(o)),this.options.maxWidth&&u.style.maxWidth!==this.options.maxWidth&&(u.style.maxWidth=this.options.maxWidth),t.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ha(this._lngLat,this._pos,t.transform)),!this._trackPointer||l){const f=this._pos=this._trackPointer&&l?l:t.project(this._lngLat),m=Xs(this.options.offset),_=this._anchor=this._getAnchor(m.y),x=Xs(this.options.offset,_),C=f.add(x).round();t._requestDomTask(()=>{this._container&&_&&(this._container.style.transform=`${qa[_]} translate(${C.x}px,${C.y}px)`)})}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const l=this._container.querySelector(gi);l&&l.focus()}_onClose(){this.remove()}_setOpacity(l){this._content&&(this._content.style.opacity=l),this._tip&&(this._tip.style.opacity=l)}},Marker:Wa,Style:yr,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:Fs,Evented:s.Evented,config:s.config,prewarm:function(){Ct().acquire(xt)},clearPrewarmedResources:function(){const l=At;l&&(l.isPreloaded()&&l.numActive()===1?(l.release(xt),At=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(l){s.config.ACCESS_TOKEN=l},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(l){s.config.API_URL=l},get workerCount(){return mt.workerCount},set workerCount(l){mt.workerCount=l},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(l){s.config.MAX_PARALLEL_IMAGE_REQUESTS=l},clearStorage(l){s.clearTileCache(l)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return Jo});var V=I;return V})})(jg);var cf=jg.exports,ub="/assets/location.dac4fcf7.png",hb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAUCAYAAABvVQZ0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADASURBVHgB7ZQxDoIwFIb/1zSGUW8Aq4nExUFdPIZ4C47gDTyFuukNdFJHwgXgCGwyKE8cSBoSg9B24xua/mma9+VPWkINfx4kILiiYC96HNM25wIGofFsM5WST99p6ARl5bKLb/stTZbrCzGtoIkYPEeSCnJLK/zqqImqQ+TO0GhnstoUghJ/EUAHO2bancGWWX1SZdqU1bt2zeL7wWuTVfrO/ssqZs0YnBLI1X6bTp6J90uEYKToTPk5MsLoes4+Hz91ix2+A44AAAAASUVORK5CYII=",db="/assets/girlOnCall.a9bd4ad1.png",pb="/assets/cover.efae5d55.png";const fb={data(){return{showMessageCover:!1}},mounted(){const d=[69.340188,41.348679];document.getElementById("map").value;const g=new cf.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:d,zoom:16});new cf.Marker().setLngLat(d).addTo(g);const b=()=>{document.getElementById("email").value=""};document.getElementById("form").addEventListener("submit",()=>{let I=document.getElementById("email").value,L=`Email:  ${I}`;if(I=="")return;const W=`https://api.telegram.org/bot5398248085:AAHtX4fgYmWfVzDbe4GjVxWMmXiGK0ZTOys/sendMessage?chat_id=${-633562777}&text=${L}`;let le=new XMLHttpRequest;le.open("GET",W,!0),le.send(),b(),this.showMessageCover=!this.showMessageCover})}},pn=d=>(ws("data-v-9f285284"),d=d(),Cs(),d),mb={class:"home-footer"},Ab=pn(()=>Le("h1",null,"\u0421\u0432\u044F\u0436\u0438\u0442\u0435\u0441\u044C \u0441 \u043D\u0430\u043C\u0438",-1)),gb={class:"contacts"},_b=pn(()=>Le("svg",{class:"logo",width:"50",height:"42",viewBox:"0 0 50 42",fill:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[Le("rect",{width:"49.9796",height:"42",fill:"url(#pattern0)"}),Le("defs",null,[Le("pattern",{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},[Le("use",{"xlink:href":"#image0_143_649",transform:"translate(0 -0.0120217) scale(0.000882613 0.0010503)"})]),Le("image",{id:"image0_143_649",width:"1133",height:"975","xlink:href":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABG0AAAPPCAYAAAB+HTasAAAACXBIWXMAAC4jAAAuIwF4pT92AAAHwmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTExLTI0VDEzOjIyOjAzKzA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0xMS0yNFQxMzoyMzo1OCswNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0xMS0yNFQxMzoyMzo1OCswNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NGExNDNiNi1iN2UwLWJhNGQtYjliNi00MmI3NmNlMmZmNjgiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2NTYwMjNiZi0wZjI3LWNhNGMtYTYwZS1mYzBkMjAxMzcyMGIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphN2U2YzE1MS02ZTgxLTEwNDQtOWYyNi02YmFhNTQxZGFkZDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphN2U2YzE1MS02ZTgxLTEwNDQtOWYyNi02YmFhNTQxZGFkZDMiIHN0RXZ0OndoZW49IjIwMjEtMTEtMjRUMTM6MjM6NTgrMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4zIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTRhMTQzYjYtYjdlMC1iYTRkLWI5YjYtNDJiNzZjZTJmZjY4IiBzdEV2dDp3aGVuPSIyMDIxLTExLTI0VDEzOjIzOjU4KzA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlE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"})])],-1)),yb=pn(()=>Le("div",{class:"logoText"},[Le("svg",{width:"163",height:"23",viewBox:"0 0 163 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Le("path",{d:"M14.1751 12.52H18.9001V20.35C17.8201 21.124 16.5781 21.718 15.1741 22.132C13.7701 22.546 12.366 22.753 10.962 22.753C8.98205 22.753 7.20005 22.339 5.61605 21.511C4.03205 20.665 2.79005 19.495 1.89005 18.001C0.990048 16.507 0.540048 14.815 0.540048 12.925C0.540048 11.035 0.990048 9.343 1.89005 7.849C2.79005 6.355 4.04105 5.194 5.64305 4.366C7.24505 3.52 9.05405 3.097 11.07 3.097C12.834 3.097 14.418 3.394 15.8221 3.988C17.2261 4.582 18.3961 5.437 19.3321 6.553L15.9301 9.631C14.6521 8.227 13.1221 7.525 11.34 7.525C9.72005 7.525 8.41505 8.02 7.42505 9.01C6.43505 9.982 5.94005 11.287 5.94005 12.925C5.94005 13.969 6.16505 14.905 6.61505 15.733C7.06505 16.543 7.69505 17.182 8.50505 17.65C9.31505 18.1 10.242 18.325 11.286 18.325C12.312 18.325 13.2751 18.118 14.1751 17.704V12.52ZM26.9334 9.496C27.4554 8.83 28.1304 8.335 28.9584 8.011C29.8044 7.669 30.7674 7.498 31.8474 7.498V12.115C31.3794 12.061 30.9924 12.034 30.6864 12.034C29.5884 12.034 28.7244 12.331 28.0944 12.925C27.4824 13.519 27.1764 14.428 27.1764 15.652V22.375H22.0464V7.741H26.9334V9.496ZM41.1765 22.618C39.6105 22.618 38.1975 22.294 36.9375 21.646C35.6775 20.998 34.6875 20.098 33.9675 18.946C33.2655 17.794 32.9145 16.489 32.9145 15.031C32.9145 13.591 33.2655 12.295 33.9675 11.143C34.6875 9.991 35.6685 9.1 36.9105 8.47C38.1705 7.822 39.5925 7.498 41.1765 7.498C42.7605 7.498 44.1825 7.822 45.4425 8.47C46.7025 9.1 47.6835 9.991 48.3855 11.143C49.0875 12.277 49.4385 13.573 49.4385 15.031C49.4385 16.489 49.0875 17.794 48.3855 18.946C47.6835 20.098 46.7025 20.998 45.4425 21.646C44.1825 22.294 42.7605 22.618 41.1765 22.618ZM41.1765 18.541C42.0765 18.541 42.8145 18.235 43.3905 17.623C43.9665 16.993 44.2545 16.129 44.2545 15.031C44.2545 13.951 43.9665 13.105 43.3905 12.493C42.8145 11.881 42.0765 11.575 41.1765 11.575C40.2765 11.575 39.5385 11.881 38.9625 12.493C38.3865 13.105 38.0985 13.951 38.0985 15.031C38.0985 16.129 38.3865 16.993 38.9625 17.623C39.5385 18.235 40.2765 18.541 41.1765 18.541ZM57.134 22.618C55.91 22.618 54.704 22.483 53.516 22.213C52.328 21.925 51.374 21.556 50.654 21.106L52.193 17.596C52.859 18.01 53.651 18.343 54.569 18.595C55.487 18.829 56.396 18.946 57.296 18.946C58.124 18.946 58.709 18.865 59.051 18.703C59.411 18.523 59.591 18.271 59.591 17.947C59.591 17.623 59.375 17.398 58.943 17.272C58.529 17.128 57.863 16.993 56.945 16.867C55.775 16.723 54.776 16.534 53.948 16.3C53.138 16.066 52.436 15.634 51.842 15.004C51.248 14.374 50.951 13.492 50.951 12.358C50.951 11.422 51.23 10.594 51.788 9.874C52.346 9.136 53.156 8.56 54.218 8.146C55.298 7.714 56.585 7.498 58.079 7.498C59.141 7.498 60.194 7.606 61.238 7.822C62.282 8.038 63.155 8.344 63.857 8.74L62.318 12.223C61.022 11.503 59.618 11.143 58.106 11.143C57.296 11.143 56.702 11.242 56.324 11.44C55.946 11.62 55.757 11.863 55.757 12.169C55.757 12.511 55.964 12.754 56.378 12.898C56.792 13.024 57.476 13.159 58.43 13.303C59.636 13.483 60.635 13.69 61.427 13.924C62.219 14.158 62.903 14.59 63.479 15.22C64.073 15.832 64.37 16.696 64.37 17.812C64.37 18.73 64.091 19.558 63.533 20.296C62.975 21.016 62.147 21.583 61.049 21.997C59.969 22.411 58.664 22.618 57.134 22.618ZM71.8996 22.618C70.6756 22.618 69.4696 22.483 68.2816 22.213C67.0936 21.925 66.1396 21.556 65.4196 21.106L66.9586 17.596C67.6246 18.01 68.4166 18.343 69.3346 18.595C70.2526 18.829 71.1616 18.946 72.0616 18.946C72.8896 18.946 73.4746 18.865 73.8166 18.703C74.1766 18.523 74.3566 18.271 74.3566 17.947C74.3566 17.623 74.1406 17.398 73.7086 17.272C73.2946 17.128 72.6286 16.993 71.7106 16.867C70.5406 16.723 69.5416 16.534 68.7136 16.3C67.9036 16.066 67.2016 15.634 66.6076 15.004C66.0136 14.374 65.7166 13.492 65.7166 12.358C65.7166 11.422 65.9956 10.594 66.5536 9.874C67.1116 9.136 67.9216 8.56 68.9836 8.146C70.0636 7.714 71.3506 7.498 72.8446 7.498C73.9066 7.498 74.9596 7.606 76.0036 7.822C77.0476 8.038 77.9206 8.344 78.6226 8.74L77.0836 12.223C75.7876 11.503 74.3836 11.143 72.8716 11.143C72.0616 11.143 71.4676 11.242 71.0896 11.44C70.7116 11.62 70.5226 11.863 70.5226 12.169C70.5226 12.511 70.7296 12.754 71.1436 12.898C71.5576 13.024 72.2416 13.159 73.1956 13.303C74.4016 13.483 75.4006 13.69 76.1926 13.924C76.9846 14.158 77.6686 14.59 78.2446 15.22C78.8386 15.832 79.1356 16.696 79.1356 17.812C79.1356 18.73 78.8566 19.558 78.2986 20.296C77.7406 21.016 76.9126 21.583 75.8146 21.997C74.7346 22.411 73.4296 22.618 71.8996 22.618ZM90.2292 3.475C91.9392 3.475 93.4242 3.763 94.6842 4.339C95.9442 4.897 96.9162 5.707 97.6002 6.769C98.2842 7.813 98.6262 9.046 98.6262 10.468C98.6262 11.89 98.2842 13.123 97.6002 14.167C96.9162 15.211 95.9442 16.021 94.6842 16.597C93.4242 17.155 91.9392 17.434 90.2292 17.434H86.9352V22.375H81.5892V3.475H90.2292ZM89.9052 13.222C91.0032 13.222 91.8312 12.988 92.3892 12.52C92.9472 12.034 93.2262 11.35 93.2262 10.468C93.2262 9.586 92.9472 8.902 92.3892 8.416C91.8312 7.93 91.0032 7.687 89.9052 7.687H86.9352V13.222H89.9052ZM106.009 9.496C106.531 8.83 107.206 8.335 108.034 8.011C108.88 7.669 109.843 7.498 110.923 7.498V12.115C110.455 12.061 110.068 12.034 109.762 12.034C108.664 12.034 107.8 12.331 107.17 12.925C106.558 13.519 106.252 14.428 106.252 15.652V22.375H101.122V7.741H106.009V9.496ZM120.252 22.618C118.686 22.618 117.273 22.294 116.013 21.646C114.753 20.998 113.763 20.098 113.043 18.946C112.341 17.794 111.99 16.489 111.99 15.031C111.99 13.591 112.341 12.295 113.043 11.143C113.763 9.991 114.744 9.1 115.986 8.47C117.246 7.822 118.668 7.498 120.252 7.498C121.836 7.498 123.258 7.822 124.518 8.47C125.778 9.1 126.759 9.991 127.461 11.143C128.163 12.277 128.514 13.573 128.514 15.031C128.514 16.489 128.163 17.794 127.461 18.946C126.759 20.098 125.778 20.998 124.518 21.646C123.258 22.294 121.836 22.618 120.252 22.618ZM120.252 18.541C121.152 18.541 121.89 18.235 122.466 17.623C123.042 16.993 123.33 16.129 123.33 15.031C123.33 13.951 123.042 13.105 122.466 12.493C121.89 11.881 121.152 11.575 120.252 11.575C119.352 11.575 118.614 11.881 118.038 12.493C117.462 13.105 117.174 13.951 117.174 15.031C117.174 16.129 117.462 16.993 118.038 17.623C118.614 18.235 119.352 18.541 120.252 18.541ZM136.479 8.281H139.962V12.115H136.614V22.375H131.484V12.115H129.351V8.281H131.484V7.903C131.484 6.121 132.015 4.708 133.077 3.664C134.157 2.62 135.66 2.098 137.586 2.098C138.234 2.098 138.864 2.161 139.476 2.287C140.088 2.413 140.592 2.602 140.988 2.854L139.719 6.472C139.215 6.184 138.702 6.04 138.18 6.04C137.64 6.04 137.217 6.202 136.911 6.526C136.623 6.85 136.479 7.327 136.479 7.957V8.281ZM144.012 7.741H149.142V22.375H144.012V7.741ZM146.577 6.121C145.641 6.121 144.885 5.86 144.309 5.338C143.733 4.816 143.445 4.168 143.445 3.394C143.445 2.62 143.733 1.972 144.309 1.45C144.885 0.927996 145.641 0.666996 146.577 0.666996C147.513 0.666996 148.269 0.918996 148.845 1.423C149.421 1.909 149.709 2.539 149.709 3.313C149.709 4.123 149.421 4.798 148.845 5.338C148.269 5.86 147.513 6.121 146.577 6.121ZM162.557 21.781C162.125 22.051 161.594 22.258 160.964 22.402C160.352 22.546 159.695 22.618 158.993 22.618C157.085 22.618 155.618 22.15 154.592 21.214C153.566 20.278 153.053 18.883 153.053 17.029V12.115H150.92V8.281H153.053V4.474H158.183V8.281H161.531V12.115H158.183V16.975C158.183 17.497 158.318 17.911 158.588 18.217C158.876 18.505 159.254 18.649 159.722 18.649C160.316 18.649 160.838 18.496 161.288 18.19L162.557 21.781Z",fill:"#182061"})]),Le("svg",{width:"98",height:"6",viewBox:"0 0 98 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Le("path",{d:"M2.53961 3.20825H1.45961V5.375H0.973605V0.649999H1.45961V2.7695H2.53961L4.13936 0.649999H4.67936L2.92436 2.945L4.78061 5.375H4.20686L2.53961 3.20825ZM7.06126 5.40875C6.71926 5.40875 6.41101 5.33225 6.13651 5.17925C5.86201 5.02175 5.64601 4.80575 5.48851 4.53125C5.33101 4.25675 5.25226 3.94625 5.25226 3.59975C5.25226 3.25325 5.33101 2.94275 5.48851 2.66825C5.64601 2.39375 5.86201 2.18 6.13651 2.027C6.41101 1.874 6.71926 1.7975 7.06126 1.7975C7.40326 1.7975 7.71151 1.874 7.98601 2.027C8.26051 2.18 8.47426 2.39375 8.62726 2.66825C8.78476 2.94275 8.86351 3.25325 8.86351 3.59975C8.86351 3.94625 8.78476 4.25675 8.62726 4.53125C8.47426 4.80575 8.26051 5.02175 7.98601 5.17925C7.71151 5.33225 7.40326 5.40875 7.06126 5.40875ZM7.06126 4.9835C7.31326 4.9835 7.53826 4.92725 7.73626 4.81475C7.93876 4.69775 8.09626 4.5335 8.20876 4.322C8.32126 4.1105 8.37751 3.86975 8.37751 3.59975C8.37751 3.32975 8.32126 3.089 8.20876 2.8775C8.09626 2.666 7.93876 2.504 7.73626 2.3915C7.53826 2.2745 7.31326 2.216 7.06126 2.216C6.80926 2.216 6.58201 2.2745 6.37951 2.3915C6.18151 2.504 6.02401 2.666 5.90701 2.8775C5.79451 3.089 5.73826 3.32975 5.73826 3.59975C5.73826 3.86975 5.79451 4.1105 5.90701 4.322C6.02401 4.5335 6.18151 4.69775 6.37951 4.81475C6.58201 4.92725 6.80926 4.9835 7.06126 4.9835ZM10.0903 1.8245H10.5695V3.39725H12.8038V1.8245H13.283V5.375H12.8038V3.809H10.5695V5.375H10.0903V1.8245ZM16.3327 5.40875C15.9817 5.40875 15.6667 5.33225 15.3877 5.17925C15.1132 5.02625 14.8972 4.8125 14.7397 4.538C14.5822 4.259 14.5035 3.94625 14.5035 3.59975C14.5035 3.25325 14.5822 2.94275 14.7397 2.66825C14.8972 2.39375 15.1132 2.18 15.3877 2.027C15.6667 1.874 15.9817 1.7975 16.3327 1.7975C16.6387 1.7975 16.911 1.85825 17.1495 1.97975C17.3925 2.09675 17.5837 2.27 17.7232 2.4995L17.3655 2.7425C17.2485 2.567 17.1 2.4365 16.92 2.351C16.74 2.261 16.5442 2.216 16.3327 2.216C16.0762 2.216 15.8445 2.2745 15.6375 2.3915C15.435 2.504 15.2752 2.666 15.1582 2.8775C15.0457 3.089 14.9895 3.32975 14.9895 3.59975C14.9895 3.87425 15.0457 4.11725 15.1582 4.32875C15.2752 4.53575 15.435 4.69775 15.6375 4.81475C15.8445 4.92725 16.0762 4.9835 16.3327 4.9835C16.5442 4.9835 16.74 4.94075 16.92 4.85525C17.1 4.76975 17.2485 4.63925 17.3655 4.46375L17.7232 4.70675C17.5837 4.93625 17.3925 5.11175 17.1495 5.23325C16.9065 5.35025 16.6342 5.40875 16.3327 5.40875ZM20.0754 1.7975C20.5389 1.7975 20.8944 1.9145 21.1419 2.1485C21.3894 2.378 21.5132 2.72 21.5132 3.1745V5.375H21.0542V4.8215C20.9462 5.006 20.7864 5.15 20.5749 5.2535C20.3679 5.357 20.1204 5.40875 19.8324 5.40875C19.4364 5.40875 19.1214 5.31425 18.8874 5.12525C18.6534 4.93625 18.5364 4.6865 18.5364 4.376C18.5364 4.0745 18.6444 3.8315 18.8604 3.647C19.0809 3.4625 19.4297 3.37025 19.9067 3.37025H21.0339V3.15425C21.0339 2.84825 20.9484 2.6165 20.7774 2.459C20.6064 2.297 20.3567 2.216 20.0282 2.216C19.8032 2.216 19.5872 2.25425 19.3802 2.33075C19.1732 2.40275 18.9954 2.504 18.8469 2.6345L18.6309 2.27675C18.8109 2.12375 19.0269 2.00675 19.2789 1.92575C19.5309 1.84025 19.7964 1.7975 20.0754 1.7975ZM19.9067 5.03075C20.1767 5.03075 20.4084 4.97 20.6019 4.8485C20.7954 4.7225 20.9394 4.5425 21.0339 4.3085V3.728H19.9202C19.3127 3.728 19.0089 3.9395 19.0089 4.3625C19.0089 4.5695 19.0877 4.73375 19.2452 4.85525C19.4027 4.97225 19.6232 5.03075 19.9067 5.03075ZM25.894 1.8245V5.375H25.4147V2.24975H23.7137L23.6665 3.12725C23.6305 3.86525 23.545 4.43225 23.41 4.82825C23.275 5.22425 23.0342 5.42225 22.6877 5.42225C22.5932 5.42225 22.4785 5.40425 22.3435 5.36825L22.3772 4.9565C22.4582 4.9745 22.5145 4.9835 22.546 4.9835C22.7305 4.9835 22.87 4.898 22.9645 4.727C23.059 4.556 23.122 4.3445 23.1535 4.0925C23.185 3.8405 23.212 3.5075 23.2345 3.0935L23.2952 1.8245H25.894ZM29.9564 2.24975H28.6131V5.375H28.1339V2.24975H26.7906V1.8245H29.9564V2.24975ZM30.8518 1.8245H31.331V4.646L33.7003 1.8245H34.1255V5.375H33.6463V2.5535L31.2838 5.375H30.8518V1.8245ZM35.7015 1.8245H36.1808V3.39725H38.415V1.8245H38.8943V5.375H38.415V3.809H36.1808V5.375H35.7015V1.8245ZM42.9699 2.24975H40.9382V5.375H40.4589V1.8245H42.9699V2.24975ZM45.165 5.40875C44.823 5.40875 44.5148 5.33225 44.2403 5.17925C43.9658 5.02175 43.7498 4.80575 43.5923 4.53125C43.4348 4.25675 43.356 3.94625 43.356 3.59975C43.356 3.25325 43.4348 2.94275 43.5923 2.66825C43.7498 2.39375 43.9658 2.18 44.2403 2.027C44.5148 1.874 44.823 1.7975 45.165 1.7975C45.507 1.7975 45.8153 1.874 46.0898 2.027C46.3643 2.18 46.578 2.39375 46.731 2.66825C46.8885 2.94275 46.9673 3.25325 46.9673 3.59975C46.9673 3.94625 46.8885 4.25675 46.731 4.53125C46.578 4.80575 46.3643 5.02175 46.0898 5.17925C45.8153 5.33225 45.507 5.40875 45.165 5.40875ZM45.165 4.9835C45.417 4.9835 45.642 4.92725 45.84 4.81475C46.0425 4.69775 46.2 4.5335 46.3125 4.322C46.425 4.1105 46.4813 3.86975 46.4813 3.59975C46.4813 3.32975 46.425 3.089 46.3125 2.8775C46.2 2.666 46.0425 2.504 45.84 2.3915C45.642 2.2745 45.417 2.216 45.165 2.216C44.913 2.216 44.6858 2.2745 44.4833 2.3915C44.2853 2.504 44.1278 2.666 44.0108 2.8775C43.8983 3.089 43.842 3.32975 43.842 3.59975C43.842 3.86975 43.8983 4.1105 44.0108 4.322C44.1278 4.5335 44.2853 4.69775 44.4833 4.81475C44.6858 4.92725 44.913 4.9835 45.165 4.9835ZM50.4553 3.539C50.9368 3.6515 51.1775 3.94175 51.1775 4.40975C51.1775 4.72025 51.0628 4.95875 50.8333 5.12525C50.6038 5.29175 50.2618 5.375 49.8073 5.375H48.194V1.8245H49.76C50.165 1.8245 50.4823 1.90325 50.7118 2.06075C50.9413 2.21825 51.056 2.44325 51.056 2.73575C51.056 2.92925 51.002 3.09575 50.894 3.23525C50.7905 3.37025 50.6443 3.4715 50.4553 3.539ZM48.6598 3.404H49.7263C50.0008 3.404 50.21 3.35225 50.354 3.24875C50.5025 3.14525 50.5768 2.9945 50.5768 2.7965C50.5768 2.5985 50.5025 2.45 50.354 2.351C50.21 2.252 50.0008 2.2025 49.7263 2.2025H48.6598V3.404ZM49.787 4.997C50.093 4.997 50.3225 4.9475 50.4755 4.8485C50.6285 4.7495 50.705 4.59425 50.705 4.38275C50.705 4.17125 50.6353 4.016 50.4958 3.917C50.3563 3.8135 50.1358 3.76175 49.8343 3.76175H48.6598V4.997H49.787ZM53.968 5.40875C53.626 5.40875 53.3177 5.33225 53.0432 5.17925C52.7687 5.02175 52.5527 4.80575 52.3952 4.53125C52.2377 4.25675 52.159 3.94625 52.159 3.59975C52.159 3.25325 52.2377 2.94275 52.3952 2.66825C52.5527 2.39375 52.7687 2.18 53.0432 2.027C53.3177 1.874 53.626 1.7975 53.968 1.7975C54.31 1.7975 54.6182 1.874 54.8927 2.027C55.1672 2.18 55.381 2.39375 55.534 2.66825C55.6915 2.94275 55.7702 3.25325 55.7702 3.59975C55.7702 3.94625 55.6915 4.25675 55.534 4.53125C55.381 4.80575 55.1672 5.02175 54.8927 5.17925C54.6182 5.33225 54.31 5.40875 53.968 5.40875ZM53.968 4.9835C54.22 4.9835 54.445 4.92725 54.643 4.81475C54.8455 4.69775 55.003 4.5335 55.1155 4.322C55.228 4.1105 55.2842 3.86975 55.2842 3.59975C55.2842 3.32975 55.228 3.089 55.1155 2.8775C55.003 2.666 54.8455 2.504 54.643 2.3915C54.445 2.2745 54.22 2.216 53.968 2.216C53.716 2.216 53.4887 2.2745 53.2862 2.3915C53.0882 2.504 52.9307 2.666 52.8137 2.8775C52.7012 3.089 52.645 3.32975 52.645 3.59975C52.645 3.86975 52.7012 4.1105 52.8137 4.322C52.9307 4.5335 53.0882 4.69775 53.2862 4.81475C53.4887 4.92725 53.716 4.9835 53.968 4.9835ZM60.102 3.74825H57.132C57.159 4.11725 57.3007 4.4165 57.5572 4.646C57.8137 4.871 58.1377 4.9835 58.5292 4.9835C58.7497 4.9835 58.9522 4.94525 59.1367 4.86875C59.3212 4.78775 59.481 4.67075 59.616 4.51775L59.886 4.82825C59.7285 5.01725 59.5305 5.16125 59.292 5.26025C59.058 5.35925 58.7992 5.40875 58.5157 5.40875C58.1512 5.40875 57.8272 5.33225 57.5437 5.17925C57.2647 5.02175 57.0465 4.80575 56.889 4.53125C56.7315 4.25675 56.6527 3.94625 56.6527 3.59975C56.6527 3.25325 56.727 2.94275 56.8755 2.66825C57.0285 2.39375 57.2355 2.18 57.4965 2.027C57.762 1.874 58.059 1.7975 58.3875 1.7975C58.716 1.7975 59.0107 1.874 59.2717 2.027C59.5327 2.18 59.7375 2.39375 59.886 2.66825C60.0345 2.93825 60.1087 3.24875 60.1087 3.59975L60.102 3.74825ZM58.3875 2.20925C58.0455 2.20925 57.7575 2.3195 57.5235 2.54C57.294 2.756 57.1635 3.0395 57.132 3.3905H59.6497C59.6182 3.0395 59.4855 2.756 59.2515 2.54C59.022 2.3195 58.734 2.20925 58.3875 2.20925ZM64.5629 1.7975C65.0264 1.7975 65.3819 1.9145 65.6294 2.1485C65.8769 2.378 66.0007 2.72 66.0007 3.1745V5.375H65.5417V4.8215C65.4337 5.006 65.2739 5.15 65.0624 5.2535C64.8554 5.357 64.6079 5.40875 64.3199 5.40875C63.9239 5.40875 63.6089 5.31425 63.3749 5.12525C63.1409 4.93625 63.0239 4.6865 63.0239 4.376C63.0239 4.0745 63.1319 3.8315 63.3479 3.647C63.5684 3.4625 63.9172 3.37025 64.3942 3.37025H65.5214V3.15425C65.5214 2.84825 65.4359 2.6165 65.2649 2.459C65.0939 2.297 64.8442 2.216 64.5157 2.216C64.2907 2.216 64.0747 2.25425 63.8677 2.33075C63.6607 2.40275 63.4829 2.504 63.3344 2.6345L63.1184 2.27675C63.2984 2.12375 63.5144 2.00675 63.7664 1.92575C64.0184 1.84025 64.2839 1.7975 64.5629 1.7975ZM64.3942 5.03075C64.6642 5.03075 64.8959 4.97 65.0894 4.8485C65.2829 4.7225 65.4269 4.5425 65.5214 4.3085V3.728H64.4077C63.8002 3.728 63.4964 3.9395 63.4964 4.3625C63.4964 4.5695 63.5752 4.73375 63.7327 4.85525C63.8902 4.97225 64.1107 5.03075 64.3942 5.03075ZM69.99 2.24975H67.9582V5.375H67.479V1.8245H69.99V2.24975ZM73.8253 3.74825H70.8553C70.8823 4.11725 71.0241 4.4165 71.2806 4.646C71.5371 4.871 71.8611 4.9835 72.2526 4.9835C72.4731 4.9835 72.6756 4.94525 72.8601 4.86875C73.0446 4.78775 73.2043 4.67075 73.3393 4.51775L73.6093 4.82825C73.4518 5.01725 73.2538 5.16125 73.0153 5.26025C72.7813 5.35925 72.5226 5.40875 72.2391 5.40875C71.8746 5.40875 71.5506 5.33225 71.2671 5.17925C70.9881 5.02175 70.7698 4.80575 70.6123 4.53125C70.4548 4.25675 70.3761 3.94625 70.3761 3.59975C70.3761 3.25325 70.4503 2.94275 70.5988 2.66825C70.7518 2.39375 70.9588 2.18 71.2198 2.027C71.4853 1.874 71.7823 1.7975 72.1108 1.7975C72.4393 1.7975 72.7341 1.874 72.9951 2.027C73.2561 2.18 73.4608 2.39375 73.6093 2.66825C73.7578 2.93825 73.8321 3.24875 73.8321 3.59975L73.8253 3.74825ZM72.1108 2.20925C71.7688 2.20925 71.4808 2.3195 71.2468 2.54C71.0173 2.756 70.8868 3.0395 70.8553 3.3905H73.3731C73.3416 3.0395 73.2088 2.756 72.9748 2.54C72.7453 2.3195 72.4573 2.20925 72.1108 2.20925ZM75.0954 1.8245H75.5747V3.39725H77.8089V1.8245H78.2882V5.375H77.8089V3.809H75.5747V5.375H75.0954V1.8245ZM82.3503 2.24975H81.0071V5.375H80.5278V2.24975H79.1846V1.8245H82.3503V2.24975ZM84.566 5.40875C84.215 5.40875 83.9 5.33225 83.621 5.17925C83.3465 5.02625 83.1305 4.8125 82.973 4.538C82.8155 4.259 82.7367 3.94625 82.7367 3.59975C82.7367 3.25325 82.8155 2.94275 82.973 2.66825C83.1305 2.39375 83.3465 2.18 83.621 2.027C83.9 1.874 84.215 1.7975 84.566 1.7975C84.872 1.7975 85.1442 1.85825 85.3827 1.97975C85.6257 2.09675 85.817 2.27 85.9565 2.4995L85.5987 2.7425C85.4817 2.567 85.3332 2.4365 85.1532 2.351C84.9732 2.261 84.7775 2.216 84.566 2.216C84.3095 2.216 84.0777 2.2745 83.8707 2.3915C83.6682 2.504 83.5085 2.666 83.3915 2.8775C83.279 3.089 83.2227 3.32975 83.2227 3.59975C83.2227 3.87425 83.279 4.11725 83.3915 4.32875C83.5085 4.53575 83.6682 4.69775 83.8707 4.81475C84.0777 4.92725 84.3095 4.9835 84.566 4.9835C84.7775 4.9835 84.9732 4.94075 85.1532 4.85525C85.3332 4.76975 85.4817 4.63925 85.5987 4.46375L85.9565 4.70675C85.817 4.93625 85.6257 5.11175 85.3827 5.23325C85.1397 5.35025 84.8675 5.40875 84.566 5.40875ZM89.5185 2.24975H88.1753V5.375H87.696V2.24975H86.3528V1.8245H89.5185V2.24975ZM92.6752 3.539C93.1567 3.6515 93.3975 3.94175 93.3975 4.40975C93.3975 4.72025 93.2827 4.95875 93.0532 5.12525C92.8237 5.29175 92.4817 5.375 92.0272 5.375H90.414V1.8245H91.98C92.385 1.8245 92.7022 1.90325 92.9317 2.06075C93.1612 2.21825 93.276 2.44325 93.276 2.73575C93.276 2.92925 93.222 3.09575 93.114 3.23525C93.0105 3.37025 92.8642 3.4715 92.6752 3.539ZM90.8797 3.404H91.9462C92.2207 3.404 92.43 3.35225 92.574 3.24875C92.7225 3.14525 92.7967 2.9945 92.7967 2.7965C92.7967 2.5985 92.7225 2.45 92.574 2.351C92.43 2.252 92.2207 2.2025 91.9462 2.2025H90.8797V3.404ZM92.007 4.997C92.313 4.997 92.5425 4.9475 92.6955 4.8485C92.8485 4.7495 92.925 4.59425 92.925 4.38275C92.925 4.17125 92.8552 4.016 92.7157 3.917C92.5762 3.8135 92.3557 3.76175 92.0542 3.76175H90.8797V4.997H92.007ZM96.1879 5.40875C95.8459 5.40875 95.5376 5.33225 95.2631 5.17925C94.9886 5.02175 94.7726 4.80575 94.6151 4.53125C94.4576 4.25675 94.3789 3.94625 94.3789 3.59975C94.3789 3.25325 94.4576 2.94275 94.6151 2.66825C94.7726 2.39375 94.9886 2.18 95.2631 2.027C95.5376 1.874 95.8459 1.7975 96.1879 1.7975C96.5299 1.7975 96.8381 1.874 97.1126 2.027C97.3871 2.18 97.6009 2.39375 97.7539 2.66825C97.9114 2.94275 97.9901 3.25325 97.9901 3.59975C97.9901 3.94625 97.9114 4.25675 97.7539 4.53125C97.6009 4.80575 97.3871 5.02175 97.1126 5.17925C96.8381 5.33225 96.5299 5.40875 96.1879 5.40875ZM96.1879 4.9835C96.4399 4.9835 96.6649 4.92725 96.8629 4.81475C97.0654 4.69775 97.2229 4.5335 97.3354 4.322C97.4479 4.1105 97.5041 3.86975 97.5041 3.59975C97.5041 3.32975 97.4479 3.089 97.3354 2.8775C97.2229 2.666 97.0654 2.504 96.8629 2.3915C96.6649 2.2745 96.4399 2.216 96.1879 2.216C95.9359 2.216 95.7086 2.2745 95.5061 2.3915C95.3081 2.504 95.1506 2.666 95.0336 2.8775C94.9211 3.089 94.8649 3.32975 94.8649 3.59975C94.8649 3.86975 94.9211 4.1105 95.0336 4.322C95.1506 4.5335 95.3081 4.69775 95.5061 4.81475C95.7086 4.92725 95.9359 4.9835 96.1879 4.9835Z",fill:"#182061"})])],-1)),xb=pn(()=>Le("div",null,[Le("img",{style:{transform:"scale(0.05)",width:"unset",margin:"-230px"},src:ub,alt:""}),Le("p",null,[Ki("\u0433. \u0422\u0430\u0448\u043A\u0435\u043D\u0442, \u041C\u0438\u0440\u0437\u043E-\u0423\u043B\u0443\u0433\u0431\u0435\u043A\u0441\u043A\u0438\u0439 \u0440\u0430\u0439\u043E\u043D, \u043C\u0430\u0441\u0441\u0438\u0432 "),Le("br"),Ki(' \u042F\u043B\u0430\u043D\u0433\u0430\u0447, \u0443\u043B\u0438\u0446\u0430 \u0417\u0430\u0444\u0430\u0440\u0430 \u0414\u0438\u0451\u0440\u0430, \u0434\u043E\u043C 119 "\u0410"')])],-1)),vb=pn(()=>Le("div",null,[Le("img",{src:hb,alt:""}),Le("p",null,[Ki("\u043F\u043D-\u0441\u0431"),Le("br"),Ki("\u0441 09:00 - 18:00 ")])],-1)),bb=pn(()=>Le("h4",null,"(998) 99 218-55-88",-1)),wb={class:"map-form"},Cb=pn(()=>Le("div",{id:"map",class:"map"},null,-1)),Tb={class:"message"},Mb=pn(()=>Le("div",{class:"img-form"},[Le("img",{src:db,alt:""}),Le("div",null,[Le("h5",null,"\u0415\u0441\u0442\u044C \u0432\u043E\u043F\u0440\u043E\u0441\u044B? "),Le("p",null,"\u0417\u0430\u0434\u0430\u0439\u0442\u0435 \u0438\u0445 \u043C\u0435\u043D\u0435\u0436\u0435\u0440\u0443!")])],-1)),Eb=pn(()=>Le("img",{src:pb,alt:""},null,-1)),Ib=pn(()=>Le("h2",null,"\u041C\u044B \u0441\u0432\u044F\u0436\u0435\u043C\u0441\u044F \u0441 \u0432\u0430\u043C\u0438!",-1)),Db=[Eb,Ib],Sb=pn(()=>Le("input",{type:"email",required:"",id:"email",placeholder:"E-mail"},null,-1)),zb=pn(()=>Le("input",{type:"submit",value:"\u041F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u0446\u0438\u044E"},null,-1)),Bb=pn(()=>Le("p",null,[Ki(" \u041D\u0430\u0436\u043C\u0438\u043C\u0430\u044F \u043A\u043D\u043E\u043F\u043A\u0443 \u201C\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u201D \u0432\u044B \u0441\u043E\u0433\u043B\u0430\u0448\u0435\u0442\u0435\u0441\u044C \u0441 "),Le("span",{class:"yellow"},"\u043F\u043E\u043B\u0438\u0442\u0438\u043A\u043E\u0439 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0438\u043A\u0438 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0445 \u0434\u0430\u043D\u043D\u044B\u0445")],-1));function kb(d,g,b,E,I,L){const V=lr("RouterLink");return Jr(),hn("div",mb,[Ab,Le("div",gb,[Wt(V,{to:"/",class:"logoPart"},{default:so(()=>[_b,yb]),_:1}),xb,vb,bb]),Le("div",wb,[Cb,Le("div",Tb,[Mb,Le("form",{id:"form",action:"",onSubmit:g[0]||(g[0]=Dg(()=>{},["prevent"]))},[Le("div",{class:Lo(["cover",I.showMessageCover?"showMessageCover":""])},Db,2),Sb,zb],32),Bb])])])}var Lb=dn(fb,[["render",kb],["__scopeId","data-v-9f285284"]]);const Pb={},kf=d=>(ws("data-v-54756ee4"),d=d(),Cs(),d),Rb={class:"home-bottom"},Nb={class:"text"},Ob=kf(()=>Le("svg",{class:"logo",width:"50",height:"42",viewBox:"0 0 50 42",fill:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[Le("rect",{width:"49.9796",height:"42",fill:"url(#pattern0)"}),Le("defs",null,[Le("pattern",{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},[Le("use",{"xlink:href":"#image0_143_649",transform:"translate(0 -0.0120217) scale(0.000882613 0.0010503)"})]),Le("image",{id:"image0_143_649",width:"1133",height:"975","xlink:href":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABG0AAAPPCAYAAAB+HTasAAAACXBIWXMAAC4jAAAuIwF4pT92AAAHwmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTExLTI0VDEzOjIyOjAzKzA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0xMS0yNFQxMzoyMzo1OCswNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0xMS0yNFQxMzoyMzo1OCswNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NGExNDNiNi1iN2UwLWJhNGQtYjliNi00MmI3NmNlMmZmNjgiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2NTYwMjNiZi0wZjI3LWNhNGMtYTYwZS1mYzBkMjAxMzcyMGIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphN2U2YzE1MS02ZTgxLTEwNDQtOWYyNi02YmFhNTQxZGFkZDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphN2U2YzE1MS02ZTgxLTEwNDQtOWYyNi02YmFhNTQxZGFkZDMiIHN0RXZ0OndoZW49IjIwMjEtMTEtMjRUMTM6MjM6NTgrMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4zIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTRhMTQzYjYtYjdlMC1iYTRkLWI5YjYtNDJiNzZjZTJmZjY4IiBzdEV2dDp3aGVuPSIyMDIxLTExLTI0VDEzOjIzOjU4KzA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlE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"})])],-1)),Gb=kf(()=>Le("div",{class:"logoText"},[Le("svg",{width:"163",height:"23",viewBox:"0 0 163 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Le("path",{d:"M14.1751 12.52H18.9001V20.35C17.8201 21.124 16.5781 21.718 15.1741 22.132C13.7701 22.546 12.366 22.753 10.962 22.753C8.98205 22.753 7.20005 22.339 5.61605 21.511C4.03205 20.665 2.79005 19.495 1.89005 18.001C0.990048 16.507 0.540048 14.815 0.540048 12.925C0.540048 11.035 0.990048 9.343 1.89005 7.849C2.79005 6.355 4.04105 5.194 5.64305 4.366C7.24505 3.52 9.05405 3.097 11.07 3.097C12.834 3.097 14.418 3.394 15.8221 3.988C17.2261 4.582 18.3961 5.437 19.3321 6.553L15.9301 9.631C14.6521 8.227 13.1221 7.525 11.34 7.525C9.72005 7.525 8.41505 8.02 7.42505 9.01C6.43505 9.982 5.94005 11.287 5.94005 12.925C5.94005 13.969 6.16505 14.905 6.61505 15.733C7.06505 16.543 7.69505 17.182 8.50505 17.65C9.31505 18.1 10.242 18.325 11.286 18.325C12.312 18.325 13.2751 18.118 14.1751 17.704V12.52ZM26.9334 9.496C27.4554 8.83 28.1304 8.335 28.9584 8.011C29.8044 7.669 30.7674 7.498 31.8474 7.498V12.115C31.3794 12.061 30.9924 12.034 30.6864 12.034C29.5884 12.034 28.7244 12.331 28.0944 12.925C27.4824 13.519 27.1764 14.428 27.1764 15.652V22.375H22.0464V7.741H26.9334V9.496ZM41.1765 22.618C39.6105 22.618 38.1975 22.294 36.9375 21.646C35.6775 20.998 34.6875 20.098 33.9675 18.946C33.2655 17.794 32.9145 16.489 32.9145 15.031C32.9145 13.591 33.2655 12.295 33.9675 11.143C34.6875 9.991 35.6685 9.1 36.9105 8.47C38.1705 7.822 39.5925 7.498 41.1765 7.498C42.7605 7.498 44.1825 7.822 45.4425 8.47C46.7025 9.1 47.6835 9.991 48.3855 11.143C49.0875 12.277 49.4385 13.573 49.4385 15.031C49.4385 16.489 49.0875 17.794 48.3855 18.946C47.6835 20.098 46.7025 20.998 45.4425 21.646C44.1825 22.294 42.7605 22.618 41.1765 22.618ZM41.1765 18.541C42.0765 18.541 42.8145 18.235 43.3905 17.623C43.9665 16.993 44.2545 16.129 44.2545 15.031C44.2545 13.951 43.9665 13.105 43.3905 12.493C42.8145 11.881 42.0765 11.575 41.1765 11.575C40.2765 11.575 39.5385 11.881 38.9625 12.493C38.3865 13.105 38.0985 13.951 38.0985 15.031C38.0985 16.129 38.3865 16.993 38.9625 17.623C39.5385 18.235 40.2765 18.541 41.1765 18.541ZM57.134 22.618C55.91 22.618 54.704 22.483 53.516 22.213C52.328 21.925 51.374 21.556 50.654 21.106L52.193 17.596C52.859 18.01 53.651 18.343 54.569 18.595C55.487 18.829 56.396 18.946 57.296 18.946C58.124 18.946 58.709 18.865 59.051 18.703C59.411 18.523 59.591 18.271 59.591 17.947C59.591 17.623 59.375 17.398 58.943 17.272C58.529 17.128 57.863 16.993 56.945 16.867C55.775 16.723 54.776 16.534 53.948 16.3C53.138 16.066 52.436 15.634 51.842 15.004C51.248 14.374 50.951 13.492 50.951 12.358C50.951 11.422 51.23 10.594 51.788 9.874C52.346 9.136 53.156 8.56 54.218 8.146C55.298 7.714 56.585 7.498 58.079 7.498C59.141 7.498 60.194 7.606 61.238 7.822C62.282 8.038 63.155 8.344 63.857 8.74L62.318 12.223C61.022 11.503 59.618 11.143 58.106 11.143C57.296 11.143 56.702 11.242 56.324 11.44C55.946 11.62 55.757 11.863 55.757 12.169C55.757 12.511 55.964 12.754 56.378 12.898C56.792 13.024 57.476 13.159 58.43 13.303C59.636 13.483 60.635 13.69 61.427 13.924C62.219 14.158 62.903 14.59 63.479 15.22C64.073 15.832 64.37 16.696 64.37 17.812C64.37 18.73 64.091 19.558 63.533 20.296C62.975 21.016 62.147 21.583 61.049 21.997C59.969 22.411 58.664 22.618 57.134 22.618ZM71.8996 22.618C70.6756 22.618 69.4696 22.483 68.2816 22.213C67.0936 21.925 66.1396 21.556 65.4196 21.106L66.9586 17.596C67.6246 18.01 68.4166 18.343 69.3346 18.595C70.2526 18.829 71.1616 18.946 72.0616 18.946C72.8896 18.946 73.4746 18.865 73.8166 18.703C74.1766 18.523 74.3566 18.271 74.3566 17.947C74.3566 17.623 74.1406 17.398 73.7086 17.272C73.2946 17.128 72.6286 16.993 71.7106 16.867C70.5406 16.723 69.5416 16.534 68.7136 16.3C67.9036 16.066 67.2016 15.634 66.6076 15.004C66.0136 14.374 65.7166 13.492 65.7166 12.358C65.7166 11.422 65.9956 10.594 66.5536 9.874C67.1116 9.136 67.9216 8.56 68.9836 8.146C70.0636 7.714 71.3506 7.498 72.8446 7.498C73.9066 7.498 74.9596 7.606 76.0036 7.822C77.0476 8.038 77.9206 8.344 78.6226 8.74L77.0836 12.223C75.7876 11.503 74.3836 11.143 72.8716 11.143C72.0616 11.143 71.4676 11.242 71.0896 11.44C70.7116 11.62 70.5226 11.863 70.5226 12.169C70.5226 12.511 70.7296 12.754 71.1436 12.898C71.5576 13.024 72.2416 13.159 73.1956 13.303C74.4016 13.483 75.4006 13.69 76.1926 13.924C76.9846 14.158 77.6686 14.59 78.2446 15.22C78.8386 15.832 79.1356 16.696 79.1356 17.812C79.1356 18.73 78.8566 19.558 78.2986 20.296C77.7406 21.016 76.9126 21.583 75.8146 21.997C74.7346 22.411 73.4296 22.618 71.8996 22.618ZM90.2292 3.475C91.9392 3.475 93.4242 3.763 94.6842 4.339C95.9442 4.897 96.9162 5.707 97.6002 6.769C98.2842 7.813 98.6262 9.046 98.6262 10.468C98.6262 11.89 98.2842 13.123 97.6002 14.167C96.9162 15.211 95.9442 16.021 94.6842 16.597C93.4242 17.155 91.9392 17.434 90.2292 17.434H86.9352V22.375H81.5892V3.475H90.2292ZM89.9052 13.222C91.0032 13.222 91.8312 12.988 92.3892 12.52C92.9472 12.034 93.2262 11.35 93.2262 10.468C93.2262 9.586 92.9472 8.902 92.3892 8.416C91.8312 7.93 91.0032 7.687 89.9052 7.687H86.9352V13.222H89.9052ZM106.009 9.496C106.531 8.83 107.206 8.335 108.034 8.011C108.88 7.669 109.843 7.498 110.923 7.498V12.115C110.455 12.061 110.068 12.034 109.762 12.034C108.664 12.034 107.8 12.331 107.17 12.925C106.558 13.519 106.252 14.428 106.252 15.652V22.375H101.122V7.741H106.009V9.496ZM120.252 22.618C118.686 22.618 117.273 22.294 116.013 21.646C114.753 20.998 113.763 20.098 113.043 18.946C112.341 17.794 111.99 16.489 111.99 15.031C111.99 13.591 112.341 12.295 113.043 11.143C113.763 9.991 114.744 9.1 115.986 8.47C117.246 7.822 118.668 7.498 120.252 7.498C121.836 7.498 123.258 7.822 124.518 8.47C125.778 9.1 126.759 9.991 127.461 11.143C128.163 12.277 128.514 13.573 128.514 15.031C128.514 16.489 128.163 17.794 127.461 18.946C126.759 20.098 125.778 20.998 124.518 21.646C123.258 22.294 121.836 22.618 120.252 22.618ZM120.252 18.541C121.152 18.541 121.89 18.235 122.466 17.623C123.042 16.993 123.33 16.129 123.33 15.031C123.33 13.951 123.042 13.105 122.466 12.493C121.89 11.881 121.152 11.575 120.252 11.575C119.352 11.575 118.614 11.881 118.038 12.493C117.462 13.105 117.174 13.951 117.174 15.031C117.174 16.129 117.462 16.993 118.038 17.623C118.614 18.235 119.352 18.541 120.252 18.541ZM136.479 8.281H139.962V12.115H136.614V22.375H131.484V12.115H129.351V8.281H131.484V7.903C131.484 6.121 132.015 4.708 133.077 3.664C134.157 2.62 135.66 2.098 137.586 2.098C138.234 2.098 138.864 2.161 139.476 2.287C140.088 2.413 140.592 2.602 140.988 2.854L139.719 6.472C139.215 6.184 138.702 6.04 138.18 6.04C137.64 6.04 137.217 6.202 136.911 6.526C136.623 6.85 136.479 7.327 136.479 7.957V8.281ZM144.012 7.741H149.142V22.375H144.012V7.741ZM146.577 6.121C145.641 6.121 144.885 5.86 144.309 5.338C143.733 4.816 143.445 4.168 143.445 3.394C143.445 2.62 143.733 1.972 144.309 1.45C144.885 0.927996 145.641 0.666996 146.577 0.666996C147.513 0.666996 148.269 0.918996 148.845 1.423C149.421 1.909 149.709 2.539 149.709 3.313C149.709 4.123 149.421 4.798 148.845 5.338C148.269 5.86 147.513 6.121 146.577 6.121ZM162.557 21.781C162.125 22.051 161.594 22.258 160.964 22.402C160.352 22.546 159.695 22.618 158.993 22.618C157.085 22.618 155.618 22.15 154.592 21.214C153.566 20.278 153.053 18.883 153.053 17.029V12.115H150.92V8.281H153.053V4.474H158.183V8.281H161.531V12.115H158.183V16.975C158.183 17.497 158.318 17.911 158.588 18.217C158.876 18.505 159.254 18.649 159.722 18.649C160.316 18.649 160.838 18.496 161.288 18.19L162.557 21.781Z",fill:"#182061"})]),Le("svg",{width:"98",height:"6",viewBox:"0 0 98 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Le("path",{d:"M2.53961 3.20825H1.45961V5.375H0.973605V0.649999H1.45961V2.7695H2.53961L4.13936 0.649999H4.67936L2.92436 2.945L4.78061 5.375H4.20686L2.53961 3.20825ZM7.06126 5.40875C6.71926 5.40875 6.41101 5.33225 6.13651 5.17925C5.86201 5.02175 5.64601 4.80575 5.48851 4.53125C5.33101 4.25675 5.25226 3.94625 5.25226 3.59975C5.25226 3.25325 5.33101 2.94275 5.48851 2.66825C5.64601 2.39375 5.86201 2.18 6.13651 2.027C6.41101 1.874 6.71926 1.7975 7.06126 1.7975C7.40326 1.7975 7.71151 1.874 7.98601 2.027C8.26051 2.18 8.47426 2.39375 8.62726 2.66825C8.78476 2.94275 8.86351 3.25325 8.86351 3.59975C8.86351 3.94625 8.78476 4.25675 8.62726 4.53125C8.47426 4.80575 8.26051 5.02175 7.98601 5.17925C7.71151 5.33225 7.40326 5.40875 7.06126 5.40875ZM7.06126 4.9835C7.31326 4.9835 7.53826 4.92725 7.73626 4.81475C7.93876 4.69775 8.09626 4.5335 8.20876 4.322C8.32126 4.1105 8.37751 3.86975 8.37751 3.59975C8.37751 3.32975 8.32126 3.089 8.20876 2.8775C8.09626 2.666 7.93876 2.504 7.73626 2.3915C7.53826 2.2745 7.31326 2.216 7.06126 2.216C6.80926 2.216 6.58201 2.2745 6.37951 2.3915C6.18151 2.504 6.02401 2.666 5.90701 2.8775C5.79451 3.089 5.73826 3.32975 5.73826 3.59975C5.73826 3.86975 5.79451 4.1105 5.90701 4.322C6.02401 4.5335 6.18151 4.69775 6.37951 4.81475C6.58201 4.92725 6.80926 4.9835 7.06126 4.9835ZM10.0903 1.8245H10.5695V3.39725H12.8038V1.8245H13.283V5.375H12.8038V3.809H10.5695V5.375H10.0903V1.8245ZM16.3327 5.40875C15.9817 5.40875 15.6667 5.33225 15.3877 5.17925C15.1132 5.02625 14.8972 4.8125 14.7397 4.538C14.5822 4.259 14.5035 3.94625 14.5035 3.59975C14.5035 3.25325 14.5822 2.94275 14.7397 2.66825C14.8972 2.39375 15.1132 2.18 15.3877 2.027C15.6667 1.874 15.9817 1.7975 16.3327 1.7975C16.6387 1.7975 16.911 1.85825 17.1495 1.97975C17.3925 2.09675 17.5837 2.27 17.7232 2.4995L17.3655 2.7425C17.2485 2.567 17.1 2.4365 16.92 2.351C16.74 2.261 16.5442 2.216 16.3327 2.216C16.0762 2.216 15.8445 2.2745 15.6375 2.3915C15.435 2.504 15.2752 2.666 15.1582 2.8775C15.0457 3.089 14.9895 3.32975 14.9895 3.59975C14.9895 3.87425 15.0457 4.11725 15.1582 4.32875C15.2752 4.53575 15.435 4.69775 15.6375 4.81475C15.8445 4.92725 16.0762 4.9835 16.3327 4.9835C16.5442 4.9835 16.74 4.94075 16.92 4.85525C17.1 4.76975 17.2485 4.63925 17.3655 4.46375L17.7232 4.70675C17.5837 4.93625 17.3925 5.11175 17.1495 5.23325C16.9065 5.35025 16.6342 5.40875 16.3327 5.40875ZM20.0754 1.7975C20.5389 1.7975 20.8944 1.9145 21.1419 2.1485C21.3894 2.378 21.5132 2.72 21.5132 3.1745V5.375H21.0542V4.8215C20.9462 5.006 20.7864 5.15 20.5749 5.2535C20.3679 5.357 20.1204 5.40875 19.8324 5.40875C19.4364 5.40875 19.1214 5.31425 18.8874 5.12525C18.6534 4.93625 18.5364 4.6865 18.5364 4.376C18.5364 4.0745 18.6444 3.8315 18.8604 3.647C19.0809 3.4625 19.4297 3.37025 19.9067 3.37025H21.0339V3.15425C21.0339 2.84825 20.9484 2.6165 20.7774 2.459C20.6064 2.297 20.3567 2.216 20.0282 2.216C19.8032 2.216 19.5872 2.25425 19.3802 2.33075C19.1732 2.40275 18.9954 2.504 18.8469 2.6345L18.6309 2.27675C18.8109 2.12375 19.0269 2.00675 19.2789 1.92575C19.5309 1.84025 19.7964 1.7975 20.0754 1.7975ZM19.9067 5.03075C20.1767 5.03075 20.4084 4.97 20.6019 4.8485C20.7954 4.7225 20.9394 4.5425 21.0339 4.3085V3.728H19.9202C19.3127 3.728 19.0089 3.9395 19.0089 4.3625C19.0089 4.5695 19.0877 4.73375 19.2452 4.85525C19.4027 4.97225 19.6232 5.03075 19.9067 5.03075ZM25.894 1.8245V5.375H25.4147V2.24975H23.7137L23.6665 3.12725C23.6305 3.86525 23.545 4.43225 23.41 4.82825C23.275 5.22425 23.0342 5.42225 22.6877 5.42225C22.5932 5.42225 22.4785 5.40425 22.3435 5.36825L22.3772 4.9565C22.4582 4.9745 22.5145 4.9835 22.546 4.9835C22.7305 4.9835 22.87 4.898 22.9645 4.727C23.059 4.556 23.122 4.3445 23.1535 4.0925C23.185 3.8405 23.212 3.5075 23.2345 3.0935L23.2952 1.8245H25.894ZM29.9564 2.24975H28.6131V5.375H28.1339V2.24975H26.7906V1.8245H29.9564V2.24975ZM30.8518 1.8245H31.331V4.646L33.7003 1.8245H34.1255V5.375H33.6463V2.5535L31.2838 5.375H30.8518V1.8245ZM35.7015 1.8245H36.1808V3.39725H38.415V1.8245H38.8943V5.375H38.415V3.809H36.1808V5.375H35.7015V1.8245ZM42.9699 2.24975H40.9382V5.375H40.4589V1.8245H42.9699V2.24975ZM45.165 5.40875C44.823 5.40875 44.5148 5.33225 44.2403 5.17925C43.9658 5.02175 43.7498 4.80575 43.5923 4.53125C43.4348 4.25675 43.356 3.94625 43.356 3.59975C43.356 3.25325 43.4348 2.94275 43.5923 2.66825C43.7498 2.39375 43.9658 2.18 44.2403 2.027C44.5148 1.874 44.823 1.7975 45.165 1.7975C45.507 1.7975 45.8153 1.874 46.0898 2.027C46.3643 2.18 46.578 2.39375 46.731 2.66825C46.8885 2.94275 46.9673 3.25325 46.9673 3.59975C46.9673 3.94625 46.8885 4.25675 46.731 4.53125C46.578 4.80575 46.3643 5.02175 46.0898 5.17925C45.8153 5.33225 45.507 5.40875 45.165 5.40875ZM45.165 4.9835C45.417 4.9835 45.642 4.92725 45.84 4.81475C46.0425 4.69775 46.2 4.5335 46.3125 4.322C46.425 4.1105 46.4813 3.86975 46.4813 3.59975C46.4813 3.32975 46.425 3.089 46.3125 2.8775C46.2 2.666 46.0425 2.504 45.84 2.3915C45.642 2.2745 45.417 2.216 45.165 2.216C44.913 2.216 44.6858 2.2745 44.4833 2.3915C44.2853 2.504 44.1278 2.666 44.0108 2.8775C43.8983 3.089 43.842 3.32975 43.842 3.59975C43.842 3.86975 43.8983 4.1105 44.0108 4.322C44.1278 4.5335 44.2853 4.69775 44.4833 4.81475C44.6858 4.92725 44.913 4.9835 45.165 4.9835ZM50.4553 3.539C50.9368 3.6515 51.1775 3.94175 51.1775 4.40975C51.1775 4.72025 51.0628 4.95875 50.8333 5.12525C50.6038 5.29175 50.2618 5.375 49.8073 5.375H48.194V1.8245H49.76C50.165 1.8245 50.4823 1.90325 50.7118 2.06075C50.9413 2.21825 51.056 2.44325 51.056 2.73575C51.056 2.92925 51.002 3.09575 50.894 3.23525C50.7905 3.37025 50.6443 3.4715 50.4553 3.539ZM48.6598 3.404H49.7263C50.0008 3.404 50.21 3.35225 50.354 3.24875C50.5025 3.14525 50.5768 2.9945 50.5768 2.7965C50.5768 2.5985 50.5025 2.45 50.354 2.351C50.21 2.252 50.0008 2.2025 49.7263 2.2025H48.6598V3.404ZM49.787 4.997C50.093 4.997 50.3225 4.9475 50.4755 4.8485C50.6285 4.7495 50.705 4.59425 50.705 4.38275C50.705 4.17125 50.6353 4.016 50.4958 3.917C50.3563 3.8135 50.1358 3.76175 49.8343 3.76175H48.6598V4.997H49.787ZM53.968 5.40875C53.626 5.40875 53.3177 5.33225 53.0432 5.17925C52.7687 5.02175 52.5527 4.80575 52.3952 4.53125C52.2377 4.25675 52.159 3.94625 52.159 3.59975C52.159 3.25325 52.2377 2.94275 52.3952 2.66825C52.5527 2.39375 52.7687 2.18 53.0432 2.027C53.3177 1.874 53.626 1.7975 53.968 1.7975C54.31 1.7975 54.6182 1.874 54.8927 2.027C55.1672 2.18 55.381 2.39375 55.534 2.66825C55.6915 2.94275 55.7702 3.25325 55.7702 3.59975C55.7702 3.94625 55.6915 4.25675 55.534 4.53125C55.381 4.80575 55.1672 5.02175 54.8927 5.17925C54.6182 5.33225 54.31 5.40875 53.968 5.40875ZM53.968 4.9835C54.22 4.9835 54.445 4.92725 54.643 4.81475C54.8455 4.69775 55.003 4.5335 55.1155 4.322C55.228 4.1105 55.2842 3.86975 55.2842 3.59975C55.2842 3.32975 55.228 3.089 55.1155 2.8775C55.003 2.666 54.8455 2.504 54.643 2.3915C54.445 2.2745 54.22 2.216 53.968 2.216C53.716 2.216 53.4887 2.2745 53.2862 2.3915C53.0882 2.504 52.9307 2.666 52.8137 2.8775C52.7012 3.089 52.645 3.32975 52.645 3.59975C52.645 3.86975 52.7012 4.1105 52.8137 4.322C52.9307 4.5335 53.0882 4.69775 53.2862 4.81475C53.4887 4.92725 53.716 4.9835 53.968 4.9835ZM60.102 3.74825H57.132C57.159 4.11725 57.3007 4.4165 57.5572 4.646C57.8137 4.871 58.1377 4.9835 58.5292 4.9835C58.7497 4.9835 58.9522 4.94525 59.1367 4.86875C59.3212 4.78775 59.481 4.67075 59.616 4.51775L59.886 4.82825C59.7285 5.01725 59.5305 5.16125 59.292 5.26025C59.058 5.35925 58.7992 5.40875 58.5157 5.40875C58.1512 5.40875 57.8272 5.33225 57.5437 5.17925C57.2647 5.02175 57.0465 4.80575 56.889 4.53125C56.7315 4.25675 56.6527 3.94625 56.6527 3.59975C56.6527 3.25325 56.727 2.94275 56.8755 2.66825C57.0285 2.39375 57.2355 2.18 57.4965 2.027C57.762 1.874 58.059 1.7975 58.3875 1.7975C58.716 1.7975 59.0107 1.874 59.2717 2.027C59.5327 2.18 59.7375 2.39375 59.886 2.66825C60.0345 2.93825 60.1087 3.24875 60.1087 3.59975L60.102 3.74825ZM58.3875 2.20925C58.0455 2.20925 57.7575 2.3195 57.5235 2.54C57.294 2.756 57.1635 3.0395 57.132 3.3905H59.6497C59.6182 3.0395 59.4855 2.756 59.2515 2.54C59.022 2.3195 58.734 2.20925 58.3875 2.20925ZM64.5629 1.7975C65.0264 1.7975 65.3819 1.9145 65.6294 2.1485C65.8769 2.378 66.0007 2.72 66.0007 3.1745V5.375H65.5417V4.8215C65.4337 5.006 65.2739 5.15 65.0624 5.2535C64.8554 5.357 64.6079 5.40875 64.3199 5.40875C63.9239 5.40875 63.6089 5.31425 63.3749 5.12525C63.1409 4.93625 63.0239 4.6865 63.0239 4.376C63.0239 4.0745 63.1319 3.8315 63.3479 3.647C63.5684 3.4625 63.9172 3.37025 64.3942 3.37025H65.5214V3.15425C65.5214 2.84825 65.4359 2.6165 65.2649 2.459C65.0939 2.297 64.8442 2.216 64.5157 2.216C64.2907 2.216 64.0747 2.25425 63.8677 2.33075C63.6607 2.40275 63.4829 2.504 63.3344 2.6345L63.1184 2.27675C63.2984 2.12375 63.5144 2.00675 63.7664 1.92575C64.0184 1.84025 64.2839 1.7975 64.5629 1.7975ZM64.3942 5.03075C64.6642 5.03075 64.8959 4.97 65.0894 4.8485C65.2829 4.7225 65.4269 4.5425 65.5214 4.3085V3.728H64.4077C63.8002 3.728 63.4964 3.9395 63.4964 4.3625C63.4964 4.5695 63.5752 4.73375 63.7327 4.85525C63.8902 4.97225 64.1107 5.03075 64.3942 5.03075ZM69.99 2.24975H67.9582V5.375H67.479V1.8245H69.99V2.24975ZM73.8253 3.74825H70.8553C70.8823 4.11725 71.0241 4.4165 71.2806 4.646C71.5371 4.871 71.8611 4.9835 72.2526 4.9835C72.4731 4.9835 72.6756 4.94525 72.8601 4.86875C73.0446 4.78775 73.2043 4.67075 73.3393 4.51775L73.6093 4.82825C73.4518 5.01725 73.2538 5.16125 73.0153 5.26025C72.7813 5.35925 72.5226 5.40875 72.2391 5.40875C71.8746 5.40875 71.5506 5.33225 71.2671 5.17925C70.9881 5.02175 70.7698 4.80575 70.6123 4.53125C70.4548 4.25675 70.3761 3.94625 70.3761 3.59975C70.3761 3.25325 70.4503 2.94275 70.5988 2.66825C70.7518 2.39375 70.9588 2.18 71.2198 2.027C71.4853 1.874 71.7823 1.7975 72.1108 1.7975C72.4393 1.7975 72.7341 1.874 72.9951 2.027C73.2561 2.18 73.4608 2.39375 73.6093 2.66825C73.7578 2.93825 73.8321 3.24875 73.8321 3.59975L73.8253 3.74825ZM72.1108 2.20925C71.7688 2.20925 71.4808 2.3195 71.2468 2.54C71.0173 2.756 70.8868 3.0395 70.8553 3.3905H73.3731C73.3416 3.0395 73.2088 2.756 72.9748 2.54C72.7453 2.3195 72.4573 2.20925 72.1108 2.20925ZM75.0954 1.8245H75.5747V3.39725H77.8089V1.8245H78.2882V5.375H77.8089V3.809H75.5747V5.375H75.0954V1.8245ZM82.3503 2.24975H81.0071V5.375H80.5278V2.24975H79.1846V1.8245H82.3503V2.24975ZM84.566 5.40875C84.215 5.40875 83.9 5.33225 83.621 5.17925C83.3465 5.02625 83.1305 4.8125 82.973 4.538C82.8155 4.259 82.7367 3.94625 82.7367 3.59975C82.7367 3.25325 82.8155 2.94275 82.973 2.66825C83.1305 2.39375 83.3465 2.18 83.621 2.027C83.9 1.874 84.215 1.7975 84.566 1.7975C84.872 1.7975 85.1442 1.85825 85.3827 1.97975C85.6257 2.09675 85.817 2.27 85.9565 2.4995L85.5987 2.7425C85.4817 2.567 85.3332 2.4365 85.1532 2.351C84.9732 2.261 84.7775 2.216 84.566 2.216C84.3095 2.216 84.0777 2.2745 83.8707 2.3915C83.6682 2.504 83.5085 2.666 83.3915 2.8775C83.279 3.089 83.2227 3.32975 83.2227 3.59975C83.2227 3.87425 83.279 4.11725 83.3915 4.32875C83.5085 4.53575 83.6682 4.69775 83.8707 4.81475C84.0777 4.92725 84.3095 4.9835 84.566 4.9835C84.7775 4.9835 84.9732 4.94075 85.1532 4.85525C85.3332 4.76975 85.4817 4.63925 85.5987 4.46375L85.9565 4.70675C85.817 4.93625 85.6257 5.11175 85.3827 5.23325C85.1397 5.35025 84.8675 5.40875 84.566 5.40875ZM89.5185 2.24975H88.1753V5.375H87.696V2.24975H86.3528V1.8245H89.5185V2.24975ZM92.6752 3.539C93.1567 3.6515 93.3975 3.94175 93.3975 4.40975C93.3975 4.72025 93.2827 4.95875 93.0532 5.12525C92.8237 5.29175 92.4817 5.375 92.0272 5.375H90.414V1.8245H91.98C92.385 1.8245 92.7022 1.90325 92.9317 2.06075C93.1612 2.21825 93.276 2.44325 93.276 2.73575C93.276 2.92925 93.222 3.09575 93.114 3.23525C93.0105 3.37025 92.8642 3.4715 92.6752 3.539ZM90.8797 3.404H91.9462C92.2207 3.404 92.43 3.35225 92.574 3.24875C92.7225 3.14525 92.7967 2.9945 92.7967 2.7965C92.7967 2.5985 92.7225 2.45 92.574 2.351C92.43 2.252 92.2207 2.2025 91.9462 2.2025H90.8797V3.404ZM92.007 4.997C92.313 4.997 92.5425 4.9475 92.6955 4.8485C92.8485 4.7495 92.925 4.59425 92.925 4.38275C92.925 4.17125 92.8552 4.016 92.7157 3.917C92.5762 3.8135 92.3557 3.76175 92.0542 3.76175H90.8797V4.997H92.007ZM96.1879 5.40875C95.8459 5.40875 95.5376 5.33225 95.2631 5.17925C94.9886 5.02175 94.7726 4.80575 94.6151 4.53125C94.4576 4.25675 94.3789 3.94625 94.3789 3.59975C94.3789 3.25325 94.4576 2.94275 94.6151 2.66825C94.7726 2.39375 94.9886 2.18 95.2631 2.027C95.5376 1.874 95.8459 1.7975 96.1879 1.7975C96.5299 1.7975 96.8381 1.874 97.1126 2.027C97.3871 2.18 97.6009 2.39375 97.7539 2.66825C97.9114 2.94275 97.9901 3.25325 97.9901 3.59975C97.9901 3.94625 97.9114 4.25675 97.7539 4.53125C97.6009 4.80575 97.3871 5.02175 97.1126 5.17925C96.8381 5.33225 96.5299 5.40875 96.1879 5.40875ZM96.1879 4.9835C96.4399 4.9835 96.6649 4.92725 96.8629 4.81475C97.0654 4.69775 97.2229 4.5335 97.3354 4.322C97.4479 4.1105 97.5041 3.86975 97.5041 3.59975C97.5041 3.32975 97.4479 3.089 97.3354 2.8775C97.2229 2.666 97.0654 2.504 96.8629 2.3915C96.6649 2.2745 96.4399 2.216 96.1879 2.216C95.9359 2.216 95.7086 2.2745 95.5061 2.3915C95.3081 2.504 95.1506 2.666 95.0336 2.8775C94.9211 3.089 94.8649 3.32975 94.8649 3.59975C94.8649 3.86975 94.9211 4.1105 95.0336 4.322C95.1506 4.5335 95.3081 4.69775 95.5061 4.81475C95.7086 4.92725 95.9359 4.9835 96.1879 4.9835Z",fill:"#182061"})])],-1)),Fb=Il('<p data-v-54756ee4>\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u0438 \u0444\u043E\u0442\u043E\u043A\u043E\u043D\u0442\u0435\u043D\u0442 \u043D\u0430 \u0441\u0430\u0439\u0442\u0435 \u0437\u0430\u0449\u0438\u0449\u0435\u043D\u044B. \u0418\u0445 \u043D\u0435\u043B\u044C\u0437\u044F \u0437\u0430\u043F\u0438\u0441\u044B\u0432\u0430\u0442\u044C, \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C, \u0440\u0430\u0441\u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u044F\u0442\u044C, \u0438\u043D\u0430\u0447\u0435 \u0432\u043E\u0437\u043D\u0438\u043A\u043D\u0435\u0442 \u0441\u043E\u0431\u043B\u0430\u0437\u043D \u0438\u0445 \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C! </p><div class="social-links" data-v-54756ee4><a target="_blank" href="https://www.instagram.com/grossprofit_uz/" data-v-54756ee4><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-v-54756ee4><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z" data-v-54756ee4></path></svg></a><a target="_blank" href="https://www.facebook.com/taxandadvisetashkent/" data-v-54756ee4><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-v-54756ee4><path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z" data-v-54756ee4></path></svg></a><a target="_blank" href="https://t.me/grossprofit_uzb" data-v-54756ee4><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" data-v-54756ee4><path d="M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z" data-v-54756ee4></path></svg></a></div>',2),Vb=kf(()=>Le("p",{class:"copyRight"},[Ki("\xA9 Copyright 2022 D. Q. A. \u0412\u0441\u0435 \u043F\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043D\u044B! "),Le("a",{target:"_blank",href:"http://rdevs.uz/gross-profit"},"\u0420\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438")],-1));function Ub(d,g){const b=lr("RouterLink");return Jr(),hn("div",Rb,[Le("div",Nb,[Wt(b,{to:"/",class:"logoPart"},{default:so(()=>[Ob,Gb]),_:1}),Fb]),Vb])}var Zb=dn(Pb,[["render",Ub],["__scopeId","data-v-54756ee4"]]),jb="/assets/modalTick.9b71acce.png";const Qb={data(){return{showForm:hd}},methods:{showModal(){const d=document.getElementById("modal");d.classList.add("showModal"),setTimeout(()=>{d.classList.remove("showModal")},2e3)},sendMessage(){let d=document.getElementById("name").value,g=document.getElementById("phoneNumber").value,b=document.getElementById("description").value;if(d==""||g==""||b=="")return;let E=`\u0418\u043C\u044F:  ${d}%0A\u0422\u0435\u043B\u0435\u0444\u043E\u043D\u043D\u044B\u0439 \u043D\u043E\u043C\u0435\u0440:  ${g}%0A\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F:  ${b}`;const V=`https://api.telegram.org/bot5398248085:AAHtX4fgYmWfVzDbe4GjVxWMmXiGK0ZTOys/sendMessage?chat_id=${-633562777}&text=${E}`;let s=new XMLHttpRequest;s.open("GET",V,!0),s.send(),this.showForm.isVisible=!1,this.cleanMessage(),this.showModal()},cleanMessage(){document.getElementById("name").value="",document.getElementById("phoneNumber").value="",document.getElementById("description").value=""}}},Yb=d=>(ws("data-v-513cbeb0"),d=d(),Cs(),d),Hb=Il('<h1 data-v-513cbeb0>\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C \u0437\u0432\u043E\u043D\u043E\u043A</h1><div class="inputs" data-v-513cbeb0><p data-v-513cbeb0>\u0412\u0430\u0448\u0435 \u0438\u043C\u044F <span class="yellow" data-v-513cbeb0>*</span></p><input required type="text" id="name" data-v-513cbeb0></div><div class="inputs" data-v-513cbeb0><p data-v-513cbeb0>\u0412\u0430\u0448 \u0442\u0435\u043B\u0435\u0444\u043E\u043D <span class="yellow" data-v-513cbeb0>*</span></p><input required type="text" id="phoneNumber" data-v-513cbeb0></div><div class="inputs" data-v-513cbeb0><p data-v-513cbeb0>\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F</p><textarea required name="" id="description" cols="30" rows="10" data-v-513cbeb0></textarea></div>',4),qb={class:"submit"},Wb=Yb(()=>Le("div",{class:"modal",id:"modal"},[Le("div",{class:"top"},[Le("img",{src:jb,alt:""})]),Le("div",{class:"bottom"},[Le("h2",null,"O\u0442\u043B\u0438\u0447\u043D\u043E!"),Le("p",null,"B\u0430\u0448\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E!")])],-1));function Kb(d,g,b,E,I,L){return Jr(),hn("main",null,[Le("div",{class:Lo(["closer",I.showForm.isVisible?"activeCloser":""]),onClick:g[0]||(g[0]=V=>I.showForm.isVisible=!1)},null,2),Le("form",{onSubmit:g[2]||(g[2]=Dg(()=>{},["prevent"])),class:Lo(["bot-form",I.showForm.isVisible?"":"hideForm"])},[Hb,Le("div",qb,[Le("input",{onClick:g[1]||(g[1]=(...V)=>L.sendMessage&&L.sendMessage(...V)),type:"submit",value:"\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C \u0437\u0432\u043E\u043D\u043E\u043A"})])],34),Wb])}var Xb=dn(Qb,[["render",Kb],["__scopeId","data-v-513cbeb0"]]);const Jb={components:{HomeIntro:ov,HomeService:Ev,HomeAbout:Zv,HomeStakeholders:$v,HomeContactDetails:lb,HomeFooter:Lb,HomeBottom:Zb,Form:Xb}},$b={class:"home",id:"home"};function e3(d,g,b,E,I,L){const V=lr("HomeIntro"),s=lr("HomeService"),W=lr("HomeAbout"),le=lr("HomeStakeholders"),he=lr("HomeContactDetails"),$=lr("HomeFooter"),pe=lr("HomeBottom"),Te=lr("Form");return Jr(),hn("div",$b,[Wt(V),Wt(s),Wt(W),Wt(le),Wt(he),Wt($),Wt(pe),Wt(Te)])}var Yg=dn(Jb,[["render",e3]]);window.addEventListener("scroll",()=>{document.querySelector("header").classList.toggle("sticky",window.scrollY>0)});const t3=Mf({components:{HomeView:Yg},data(){return{showNav:F5.isVisible,showForm:hd,activeLink:1}},methods:{showNavLinks(){this.showNav=!this.showNav},showBotForm(){this.showForm.isVisible=!this.showForm.isVisible},closeNavLinks(){this.showNav=!1}}}),Sl=d=>(ws("data-v-aa626f26"),d=d(),Cs(),d),i3={class:"app"},r3=Sl(()=>Le("svg",{class:"logo",width:"50",height:"42",viewBox:"0 0 50 42",fill:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[Le("rect",{width:"49.9796",height:"42",fill:"url(#pattern0)"}),Le("defs",null,[Le("pattern",{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1"},[Le("use",{"xlink:href":"#image0_143_649",transform:"translate(0 -0.0120217) scale(0.000882613 0.0010503)"})]),Le("image",{id:"image0_143_649",width:"1133",height:"975","xlink:href":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABG0AAAPPCAYAAAB+HTasAAAACXBIWXMAAC4jAAAuIwF4pT92AAAHwmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTExLTI0VDEzOjIyOjAzKzA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0xMS0yNFQxMzoyMzo1OCswNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0xMS0yNFQxMzoyMzo1OCswNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NGExNDNiNi1iN2UwLWJhNGQtYjliNi00MmI3NmNlMmZmNjgiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2NTYwMjNiZi0wZjI3LWNhNGMtYTYwZS1mYzBkMjAxMzcyMGIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphN2U2YzE1MS02ZTgxLTEwNDQtOWYyNi02YmFhNTQxZGFkZDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphN2U2YzE1MS02ZTgxLTEwNDQtOWYyNi02YmFhNTQxZGFkZDMiIHN0RXZ0OndoZW49IjIwMjEtMTEtMjRUMTM6MjM6NTgrMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4zIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTRhMTQzYjYtYjdlMC1iYTRkLWI5YjYtNDJiNzZjZTJmZjY4IiBzdEV2dDp3aGVuPSIyMDIxLTExLTI0VDEzOjIzOjU4KzA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlE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"})])],-1)),n3=Sl(()=>Le("div",{class:"logoText"},[Le("svg",{width:"163",height:"23",viewBox:"0 0 163 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Le("path",{d:"M14.1751 12.52H18.9001V20.35C17.8201 21.124 16.5781 21.718 15.1741 22.132C13.7701 22.546 12.366 22.753 10.962 22.753C8.98205 22.753 7.20005 22.339 5.61605 21.511C4.03205 20.665 2.79005 19.495 1.89005 18.001C0.990048 16.507 0.540048 14.815 0.540048 12.925C0.540048 11.035 0.990048 9.343 1.89005 7.849C2.79005 6.355 4.04105 5.194 5.64305 4.366C7.24505 3.52 9.05405 3.097 11.07 3.097C12.834 3.097 14.418 3.394 15.8221 3.988C17.2261 4.582 18.3961 5.437 19.3321 6.553L15.9301 9.631C14.6521 8.227 13.1221 7.525 11.34 7.525C9.72005 7.525 8.41505 8.02 7.42505 9.01C6.43505 9.982 5.94005 11.287 5.94005 12.925C5.94005 13.969 6.16505 14.905 6.61505 15.733C7.06505 16.543 7.69505 17.182 8.50505 17.65C9.31505 18.1 10.242 18.325 11.286 18.325C12.312 18.325 13.2751 18.118 14.1751 17.704V12.52ZM26.9334 9.496C27.4554 8.83 28.1304 8.335 28.9584 8.011C29.8044 7.669 30.7674 7.498 31.8474 7.498V12.115C31.3794 12.061 30.9924 12.034 30.6864 12.034C29.5884 12.034 28.7244 12.331 28.0944 12.925C27.4824 13.519 27.1764 14.428 27.1764 15.652V22.375H22.0464V7.741H26.9334V9.496ZM41.1765 22.618C39.6105 22.618 38.1975 22.294 36.9375 21.646C35.6775 20.998 34.6875 20.098 33.9675 18.946C33.2655 17.794 32.9145 16.489 32.9145 15.031C32.9145 13.591 33.2655 12.295 33.9675 11.143C34.6875 9.991 35.6685 9.1 36.9105 8.47C38.1705 7.822 39.5925 7.498 41.1765 7.498C42.7605 7.498 44.1825 7.822 45.4425 8.47C46.7025 9.1 47.6835 9.991 48.3855 11.143C49.0875 12.277 49.4385 13.573 49.4385 15.031C49.4385 16.489 49.0875 17.794 48.3855 18.946C47.6835 20.098 46.7025 20.998 45.4425 21.646C44.1825 22.294 42.7605 22.618 41.1765 22.618ZM41.1765 18.541C42.0765 18.541 42.8145 18.235 43.3905 17.623C43.9665 16.993 44.2545 16.129 44.2545 15.031C44.2545 13.951 43.9665 13.105 43.3905 12.493C42.8145 11.881 42.0765 11.575 41.1765 11.575C40.2765 11.575 39.5385 11.881 38.9625 12.493C38.3865 13.105 38.0985 13.951 38.0985 15.031C38.0985 16.129 38.3865 16.993 38.9625 17.623C39.5385 18.235 40.2765 18.541 41.1765 18.541ZM57.134 22.618C55.91 22.618 54.704 22.483 53.516 22.213C52.328 21.925 51.374 21.556 50.654 21.106L52.193 17.596C52.859 18.01 53.651 18.343 54.569 18.595C55.487 18.829 56.396 18.946 57.296 18.946C58.124 18.946 58.709 18.865 59.051 18.703C59.411 18.523 59.591 18.271 59.591 17.947C59.591 17.623 59.375 17.398 58.943 17.272C58.529 17.128 57.863 16.993 56.945 16.867C55.775 16.723 54.776 16.534 53.948 16.3C53.138 16.066 52.436 15.634 51.842 15.004C51.248 14.374 50.951 13.492 50.951 12.358C50.951 11.422 51.23 10.594 51.788 9.874C52.346 9.136 53.156 8.56 54.218 8.146C55.298 7.714 56.585 7.498 58.079 7.498C59.141 7.498 60.194 7.606 61.238 7.822C62.282 8.038 63.155 8.344 63.857 8.74L62.318 12.223C61.022 11.503 59.618 11.143 58.106 11.143C57.296 11.143 56.702 11.242 56.324 11.44C55.946 11.62 55.757 11.863 55.757 12.169C55.757 12.511 55.964 12.754 56.378 12.898C56.792 13.024 57.476 13.159 58.43 13.303C59.636 13.483 60.635 13.69 61.427 13.924C62.219 14.158 62.903 14.59 63.479 15.22C64.073 15.832 64.37 16.696 64.37 17.812C64.37 18.73 64.091 19.558 63.533 20.296C62.975 21.016 62.147 21.583 61.049 21.997C59.969 22.411 58.664 22.618 57.134 22.618ZM71.8996 22.618C70.6756 22.618 69.4696 22.483 68.2816 22.213C67.0936 21.925 66.1396 21.556 65.4196 21.106L66.9586 17.596C67.6246 18.01 68.4166 18.343 69.3346 18.595C70.2526 18.829 71.1616 18.946 72.0616 18.946C72.8896 18.946 73.4746 18.865 73.8166 18.703C74.1766 18.523 74.3566 18.271 74.3566 17.947C74.3566 17.623 74.1406 17.398 73.7086 17.272C73.2946 17.128 72.6286 16.993 71.7106 16.867C70.5406 16.723 69.5416 16.534 68.7136 16.3C67.9036 16.066 67.2016 15.634 66.6076 15.004C66.0136 14.374 65.7166 13.492 65.7166 12.358C65.7166 11.422 65.9956 10.594 66.5536 9.874C67.1116 9.136 67.9216 8.56 68.9836 8.146C70.0636 7.714 71.3506 7.498 72.8446 7.498C73.9066 7.498 74.9596 7.606 76.0036 7.822C77.0476 8.038 77.9206 8.344 78.6226 8.74L77.0836 12.223C75.7876 11.503 74.3836 11.143 72.8716 11.143C72.0616 11.143 71.4676 11.242 71.0896 11.44C70.7116 11.62 70.5226 11.863 70.5226 12.169C70.5226 12.511 70.7296 12.754 71.1436 12.898C71.5576 13.024 72.2416 13.159 73.1956 13.303C74.4016 13.483 75.4006 13.69 76.1926 13.924C76.9846 14.158 77.6686 14.59 78.2446 15.22C78.8386 15.832 79.1356 16.696 79.1356 17.812C79.1356 18.73 78.8566 19.558 78.2986 20.296C77.7406 21.016 76.9126 21.583 75.8146 21.997C74.7346 22.411 73.4296 22.618 71.8996 22.618ZM90.2292 3.475C91.9392 3.475 93.4242 3.763 94.6842 4.339C95.9442 4.897 96.9162 5.707 97.6002 6.769C98.2842 7.813 98.6262 9.046 98.6262 10.468C98.6262 11.89 98.2842 13.123 97.6002 14.167C96.9162 15.211 95.9442 16.021 94.6842 16.597C93.4242 17.155 91.9392 17.434 90.2292 17.434H86.9352V22.375H81.5892V3.475H90.2292ZM89.9052 13.222C91.0032 13.222 91.8312 12.988 92.3892 12.52C92.9472 12.034 93.2262 11.35 93.2262 10.468C93.2262 9.586 92.9472 8.902 92.3892 8.416C91.8312 7.93 91.0032 7.687 89.9052 7.687H86.9352V13.222H89.9052ZM106.009 9.496C106.531 8.83 107.206 8.335 108.034 8.011C108.88 7.669 109.843 7.498 110.923 7.498V12.115C110.455 12.061 110.068 12.034 109.762 12.034C108.664 12.034 107.8 12.331 107.17 12.925C106.558 13.519 106.252 14.428 106.252 15.652V22.375H101.122V7.741H106.009V9.496ZM120.252 22.618C118.686 22.618 117.273 22.294 116.013 21.646C114.753 20.998 113.763 20.098 113.043 18.946C112.341 17.794 111.99 16.489 111.99 15.031C111.99 13.591 112.341 12.295 113.043 11.143C113.763 9.991 114.744 9.1 115.986 8.47C117.246 7.822 118.668 7.498 120.252 7.498C121.836 7.498 123.258 7.822 124.518 8.47C125.778 9.1 126.759 9.991 127.461 11.143C128.163 12.277 128.514 13.573 128.514 15.031C128.514 16.489 128.163 17.794 127.461 18.946C126.759 20.098 125.778 20.998 124.518 21.646C123.258 22.294 121.836 22.618 120.252 22.618ZM120.252 18.541C121.152 18.541 121.89 18.235 122.466 17.623C123.042 16.993 123.33 16.129 123.33 15.031C123.33 13.951 123.042 13.105 122.466 12.493C121.89 11.881 121.152 11.575 120.252 11.575C119.352 11.575 118.614 11.881 118.038 12.493C117.462 13.105 117.174 13.951 117.174 15.031C117.174 16.129 117.462 16.993 118.038 17.623C118.614 18.235 119.352 18.541 120.252 18.541ZM136.479 8.281H139.962V12.115H136.614V22.375H131.484V12.115H129.351V8.281H131.484V7.903C131.484 6.121 132.015 4.708 133.077 3.664C134.157 2.62 135.66 2.098 137.586 2.098C138.234 2.098 138.864 2.161 139.476 2.287C140.088 2.413 140.592 2.602 140.988 2.854L139.719 6.472C139.215 6.184 138.702 6.04 138.18 6.04C137.64 6.04 137.217 6.202 136.911 6.526C136.623 6.85 136.479 7.327 136.479 7.957V8.281ZM144.012 7.741H149.142V22.375H144.012V7.741ZM146.577 6.121C145.641 6.121 144.885 5.86 144.309 5.338C143.733 4.816 143.445 4.168 143.445 3.394C143.445 2.62 143.733 1.972 144.309 1.45C144.885 0.927996 145.641 0.666996 146.577 0.666996C147.513 0.666996 148.269 0.918996 148.845 1.423C149.421 1.909 149.709 2.539 149.709 3.313C149.709 4.123 149.421 4.798 148.845 5.338C148.269 5.86 147.513 6.121 146.577 6.121ZM162.557 21.781C162.125 22.051 161.594 22.258 160.964 22.402C160.352 22.546 159.695 22.618 158.993 22.618C157.085 22.618 155.618 22.15 154.592 21.214C153.566 20.278 153.053 18.883 153.053 17.029V12.115H150.92V8.281H153.053V4.474H158.183V8.281H161.531V12.115H158.183V16.975C158.183 17.497 158.318 17.911 158.588 18.217C158.876 18.505 159.254 18.649 159.722 18.649C160.316 18.649 160.838 18.496 161.288 18.19L162.557 21.781Z",fill:"#182061"})]),Le("svg",{width:"98",height:"6",viewBox:"0 0 98 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Le("path",{d:"M2.53961 3.20825H1.45961V5.375H0.973605V0.649999H1.45961V2.7695H2.53961L4.13936 0.649999H4.67936L2.92436 2.945L4.78061 5.375H4.20686L2.53961 3.20825ZM7.06126 5.40875C6.71926 5.40875 6.41101 5.33225 6.13651 5.17925C5.86201 5.02175 5.64601 4.80575 5.48851 4.53125C5.33101 4.25675 5.25226 3.94625 5.25226 3.59975C5.25226 3.25325 5.33101 2.94275 5.48851 2.66825C5.64601 2.39375 5.86201 2.18 6.13651 2.027C6.41101 1.874 6.71926 1.7975 7.06126 1.7975C7.40326 1.7975 7.71151 1.874 7.98601 2.027C8.26051 2.18 8.47426 2.39375 8.62726 2.66825C8.78476 2.94275 8.86351 3.25325 8.86351 3.59975C8.86351 3.94625 8.78476 4.25675 8.62726 4.53125C8.47426 4.80575 8.26051 5.02175 7.98601 5.17925C7.71151 5.33225 7.40326 5.40875 7.06126 5.40875ZM7.06126 4.9835C7.31326 4.9835 7.53826 4.92725 7.73626 4.81475C7.93876 4.69775 8.09626 4.5335 8.20876 4.322C8.32126 4.1105 8.37751 3.86975 8.37751 3.59975C8.37751 3.32975 8.32126 3.089 8.20876 2.8775C8.09626 2.666 7.93876 2.504 7.73626 2.3915C7.53826 2.2745 7.31326 2.216 7.06126 2.216C6.80926 2.216 6.58201 2.2745 6.37951 2.3915C6.18151 2.504 6.02401 2.666 5.90701 2.8775C5.79451 3.089 5.73826 3.32975 5.73826 3.59975C5.73826 3.86975 5.79451 4.1105 5.90701 4.322C6.02401 4.5335 6.18151 4.69775 6.37951 4.81475C6.58201 4.92725 6.80926 4.9835 7.06126 4.9835ZM10.0903 1.8245H10.5695V3.39725H12.8038V1.8245H13.283V5.375H12.8038V3.809H10.5695V5.375H10.0903V1.8245ZM16.3327 5.40875C15.9817 5.40875 15.6667 5.33225 15.3877 5.17925C15.1132 5.02625 14.8972 4.8125 14.7397 4.538C14.5822 4.259 14.5035 3.94625 14.5035 3.59975C14.5035 3.25325 14.5822 2.94275 14.7397 2.66825C14.8972 2.39375 15.1132 2.18 15.3877 2.027C15.6667 1.874 15.9817 1.7975 16.3327 1.7975C16.6387 1.7975 16.911 1.85825 17.1495 1.97975C17.3925 2.09675 17.5837 2.27 17.7232 2.4995L17.3655 2.7425C17.2485 2.567 17.1 2.4365 16.92 2.351C16.74 2.261 16.5442 2.216 16.3327 2.216C16.0762 2.216 15.8445 2.2745 15.6375 2.3915C15.435 2.504 15.2752 2.666 15.1582 2.8775C15.0457 3.089 14.9895 3.32975 14.9895 3.59975C14.9895 3.87425 15.0457 4.11725 15.1582 4.32875C15.2752 4.53575 15.435 4.69775 15.6375 4.81475C15.8445 4.92725 16.0762 4.9835 16.3327 4.9835C16.5442 4.9835 16.74 4.94075 16.92 4.85525C17.1 4.76975 17.2485 4.63925 17.3655 4.46375L17.7232 4.70675C17.5837 4.93625 17.3925 5.11175 17.1495 5.23325C16.9065 5.35025 16.6342 5.40875 16.3327 5.40875ZM20.0754 1.7975C20.5389 1.7975 20.8944 1.9145 21.1419 2.1485C21.3894 2.378 21.5132 2.72 21.5132 3.1745V5.375H21.0542V4.8215C20.9462 5.006 20.7864 5.15 20.5749 5.2535C20.3679 5.357 20.1204 5.40875 19.8324 5.40875C19.4364 5.40875 19.1214 5.31425 18.8874 5.12525C18.6534 4.93625 18.5364 4.6865 18.5364 4.376C18.5364 4.0745 18.6444 3.8315 18.8604 3.647C19.0809 3.4625 19.4297 3.37025 19.9067 3.37025H21.0339V3.15425C21.0339 2.84825 20.9484 2.6165 20.7774 2.459C20.6064 2.297 20.3567 2.216 20.0282 2.216C19.8032 2.216 19.5872 2.25425 19.3802 2.33075C19.1732 2.40275 18.9954 2.504 18.8469 2.6345L18.6309 2.27675C18.8109 2.12375 19.0269 2.00675 19.2789 1.92575C19.5309 1.84025 19.7964 1.7975 20.0754 1.7975ZM19.9067 5.03075C20.1767 5.03075 20.4084 4.97 20.6019 4.8485C20.7954 4.7225 20.9394 4.5425 21.0339 4.3085V3.728H19.9202C19.3127 3.728 19.0089 3.9395 19.0089 4.3625C19.0089 4.5695 19.0877 4.73375 19.2452 4.85525C19.4027 4.97225 19.6232 5.03075 19.9067 5.03075ZM25.894 1.8245V5.375H25.4147V2.24975H23.7137L23.6665 3.12725C23.6305 3.86525 23.545 4.43225 23.41 4.82825C23.275 5.22425 23.0342 5.42225 22.6877 5.42225C22.5932 5.42225 22.4785 5.40425 22.3435 5.36825L22.3772 4.9565C22.4582 4.9745 22.5145 4.9835 22.546 4.9835C22.7305 4.9835 22.87 4.898 22.9645 4.727C23.059 4.556 23.122 4.3445 23.1535 4.0925C23.185 3.8405 23.212 3.5075 23.2345 3.0935L23.2952 1.8245H25.894ZM29.9564 2.24975H28.6131V5.375H28.1339V2.24975H26.7906V1.8245H29.9564V2.24975ZM30.8518 1.8245H31.331V4.646L33.7003 1.8245H34.1255V5.375H33.6463V2.5535L31.2838 5.375H30.8518V1.8245ZM35.7015 1.8245H36.1808V3.39725H38.415V1.8245H38.8943V5.375H38.415V3.809H36.1808V5.375H35.7015V1.8245ZM42.9699 2.24975H40.9382V5.375H40.4589V1.8245H42.9699V2.24975ZM45.165 5.40875C44.823 5.40875 44.5148 5.33225 44.2403 5.17925C43.9658 5.02175 43.7498 4.80575 43.5923 4.53125C43.4348 4.25675 43.356 3.94625 43.356 3.59975C43.356 3.25325 43.4348 2.94275 43.5923 2.66825C43.7498 2.39375 43.9658 2.18 44.2403 2.027C44.5148 1.874 44.823 1.7975 45.165 1.7975C45.507 1.7975 45.8153 1.874 46.0898 2.027C46.3643 2.18 46.578 2.39375 46.731 2.66825C46.8885 2.94275 46.9673 3.25325 46.9673 3.59975C46.9673 3.94625 46.8885 4.25675 46.731 4.53125C46.578 4.80575 46.3643 5.02175 46.0898 5.17925C45.8153 5.33225 45.507 5.40875 45.165 5.40875ZM45.165 4.9835C45.417 4.9835 45.642 4.92725 45.84 4.81475C46.0425 4.69775 46.2 4.5335 46.3125 4.322C46.425 4.1105 46.4813 3.86975 46.4813 3.59975C46.4813 3.32975 46.425 3.089 46.3125 2.8775C46.2 2.666 46.0425 2.504 45.84 2.3915C45.642 2.2745 45.417 2.216 45.165 2.216C44.913 2.216 44.6858 2.2745 44.4833 2.3915C44.2853 2.504 44.1278 2.666 44.0108 2.8775C43.8983 3.089 43.842 3.32975 43.842 3.59975C43.842 3.86975 43.8983 4.1105 44.0108 4.322C44.1278 4.5335 44.2853 4.69775 44.4833 4.81475C44.6858 4.92725 44.913 4.9835 45.165 4.9835ZM50.4553 3.539C50.9368 3.6515 51.1775 3.94175 51.1775 4.40975C51.1775 4.72025 51.0628 4.95875 50.8333 5.12525C50.6038 5.29175 50.2618 5.375 49.8073 5.375H48.194V1.8245H49.76C50.165 1.8245 50.4823 1.90325 50.7118 2.06075C50.9413 2.21825 51.056 2.44325 51.056 2.73575C51.056 2.92925 51.002 3.09575 50.894 3.23525C50.7905 3.37025 50.6443 3.4715 50.4553 3.539ZM48.6598 3.404H49.7263C50.0008 3.404 50.21 3.35225 50.354 3.24875C50.5025 3.14525 50.5768 2.9945 50.5768 2.7965C50.5768 2.5985 50.5025 2.45 50.354 2.351C50.21 2.252 50.0008 2.2025 49.7263 2.2025H48.6598V3.404ZM49.787 4.997C50.093 4.997 50.3225 4.9475 50.4755 4.8485C50.6285 4.7495 50.705 4.59425 50.705 4.38275C50.705 4.17125 50.6353 4.016 50.4958 3.917C50.3563 3.8135 50.1358 3.76175 49.8343 3.76175H48.6598V4.997H49.787ZM53.968 5.40875C53.626 5.40875 53.3177 5.33225 53.0432 5.17925C52.7687 5.02175 52.5527 4.80575 52.3952 4.53125C52.2377 4.25675 52.159 3.94625 52.159 3.59975C52.159 3.25325 52.2377 2.94275 52.3952 2.66825C52.5527 2.39375 52.7687 2.18 53.0432 2.027C53.3177 1.874 53.626 1.7975 53.968 1.7975C54.31 1.7975 54.6182 1.874 54.8927 2.027C55.1672 2.18 55.381 2.39375 55.534 2.66825C55.6915 2.94275 55.7702 3.25325 55.7702 3.59975C55.7702 3.94625 55.6915 4.25675 55.534 4.53125C55.381 4.80575 55.1672 5.02175 54.8927 5.17925C54.6182 5.33225 54.31 5.40875 53.968 5.40875ZM53.968 4.9835C54.22 4.9835 54.445 4.92725 54.643 4.81475C54.8455 4.69775 55.003 4.5335 55.1155 4.322C55.228 4.1105 55.2842 3.86975 55.2842 3.59975C55.2842 3.32975 55.228 3.089 55.1155 2.8775C55.003 2.666 54.8455 2.504 54.643 2.3915C54.445 2.2745 54.22 2.216 53.968 2.216C53.716 2.216 53.4887 2.2745 53.2862 2.3915C53.0882 2.504 52.9307 2.666 52.8137 2.8775C52.7012 3.089 52.645 3.32975 52.645 3.59975C52.645 3.86975 52.7012 4.1105 52.8137 4.322C52.9307 4.5335 53.0882 4.69775 53.2862 4.81475C53.4887 4.92725 53.716 4.9835 53.968 4.9835ZM60.102 3.74825H57.132C57.159 4.11725 57.3007 4.4165 57.5572 4.646C57.8137 4.871 58.1377 4.9835 58.5292 4.9835C58.7497 4.9835 58.9522 4.94525 59.1367 4.86875C59.3212 4.78775 59.481 4.67075 59.616 4.51775L59.886 4.82825C59.7285 5.01725 59.5305 5.16125 59.292 5.26025C59.058 5.35925 58.7992 5.40875 58.5157 5.40875C58.1512 5.40875 57.8272 5.33225 57.5437 5.17925C57.2647 5.02175 57.0465 4.80575 56.889 4.53125C56.7315 4.25675 56.6527 3.94625 56.6527 3.59975C56.6527 3.25325 56.727 2.94275 56.8755 2.66825C57.0285 2.39375 57.2355 2.18 57.4965 2.027C57.762 1.874 58.059 1.7975 58.3875 1.7975C58.716 1.7975 59.0107 1.874 59.2717 2.027C59.5327 2.18 59.7375 2.39375 59.886 2.66825C60.0345 2.93825 60.1087 3.24875 60.1087 3.59975L60.102 3.74825ZM58.3875 2.20925C58.0455 2.20925 57.7575 2.3195 57.5235 2.54C57.294 2.756 57.1635 3.0395 57.132 3.3905H59.6497C59.6182 3.0395 59.4855 2.756 59.2515 2.54C59.022 2.3195 58.734 2.20925 58.3875 2.20925ZM64.5629 1.7975C65.0264 1.7975 65.3819 1.9145 65.6294 2.1485C65.8769 2.378 66.0007 2.72 66.0007 3.1745V5.375H65.5417V4.8215C65.4337 5.006 65.2739 5.15 65.0624 5.2535C64.8554 5.357 64.6079 5.40875 64.3199 5.40875C63.9239 5.40875 63.6089 5.31425 63.3749 5.12525C63.1409 4.93625 63.0239 4.6865 63.0239 4.376C63.0239 4.0745 63.1319 3.8315 63.3479 3.647C63.5684 3.4625 63.9172 3.37025 64.3942 3.37025H65.5214V3.15425C65.5214 2.84825 65.4359 2.6165 65.2649 2.459C65.0939 2.297 64.8442 2.216 64.5157 2.216C64.2907 2.216 64.0747 2.25425 63.8677 2.33075C63.6607 2.40275 63.4829 2.504 63.3344 2.6345L63.1184 2.27675C63.2984 2.12375 63.5144 2.00675 63.7664 1.92575C64.0184 1.84025 64.2839 1.7975 64.5629 1.7975ZM64.3942 5.03075C64.6642 5.03075 64.8959 4.97 65.0894 4.8485C65.2829 4.7225 65.4269 4.5425 65.5214 4.3085V3.728H64.4077C63.8002 3.728 63.4964 3.9395 63.4964 4.3625C63.4964 4.5695 63.5752 4.73375 63.7327 4.85525C63.8902 4.97225 64.1107 5.03075 64.3942 5.03075ZM69.99 2.24975H67.9582V5.375H67.479V1.8245H69.99V2.24975ZM73.8253 3.74825H70.8553C70.8823 4.11725 71.0241 4.4165 71.2806 4.646C71.5371 4.871 71.8611 4.9835 72.2526 4.9835C72.4731 4.9835 72.6756 4.94525 72.8601 4.86875C73.0446 4.78775 73.2043 4.67075 73.3393 4.51775L73.6093 4.82825C73.4518 5.01725 73.2538 5.16125 73.0153 5.26025C72.7813 5.35925 72.5226 5.40875 72.2391 5.40875C71.8746 5.40875 71.5506 5.33225 71.2671 5.17925C70.9881 5.02175 70.7698 4.80575 70.6123 4.53125C70.4548 4.25675 70.3761 3.94625 70.3761 3.59975C70.3761 3.25325 70.4503 2.94275 70.5988 2.66825C70.7518 2.39375 70.9588 2.18 71.2198 2.027C71.4853 1.874 71.7823 1.7975 72.1108 1.7975C72.4393 1.7975 72.7341 1.874 72.9951 2.027C73.2561 2.18 73.4608 2.39375 73.6093 2.66825C73.7578 2.93825 73.8321 3.24875 73.8321 3.59975L73.8253 3.74825ZM72.1108 2.20925C71.7688 2.20925 71.4808 2.3195 71.2468 2.54C71.0173 2.756 70.8868 3.0395 70.8553 3.3905H73.3731C73.3416 3.0395 73.2088 2.756 72.9748 2.54C72.7453 2.3195 72.4573 2.20925 72.1108 2.20925ZM75.0954 1.8245H75.5747V3.39725H77.8089V1.8245H78.2882V5.375H77.8089V3.809H75.5747V5.375H75.0954V1.8245ZM82.3503 2.24975H81.0071V5.375H80.5278V2.24975H79.1846V1.8245H82.3503V2.24975ZM84.566 5.40875C84.215 5.40875 83.9 5.33225 83.621 5.17925C83.3465 5.02625 83.1305 4.8125 82.973 4.538C82.8155 4.259 82.7367 3.94625 82.7367 3.59975C82.7367 3.25325 82.8155 2.94275 82.973 2.66825C83.1305 2.39375 83.3465 2.18 83.621 2.027C83.9 1.874 84.215 1.7975 84.566 1.7975C84.872 1.7975 85.1442 1.85825 85.3827 1.97975C85.6257 2.09675 85.817 2.27 85.9565 2.4995L85.5987 2.7425C85.4817 2.567 85.3332 2.4365 85.1532 2.351C84.9732 2.261 84.7775 2.216 84.566 2.216C84.3095 2.216 84.0777 2.2745 83.8707 2.3915C83.6682 2.504 83.5085 2.666 83.3915 2.8775C83.279 3.089 83.2227 3.32975 83.2227 3.59975C83.2227 3.87425 83.279 4.11725 83.3915 4.32875C83.5085 4.53575 83.6682 4.69775 83.8707 4.81475C84.0777 4.92725 84.3095 4.9835 84.566 4.9835C84.7775 4.9835 84.9732 4.94075 85.1532 4.85525C85.3332 4.76975 85.4817 4.63925 85.5987 4.46375L85.9565 4.70675C85.817 4.93625 85.6257 5.11175 85.3827 5.23325C85.1397 5.35025 84.8675 5.40875 84.566 5.40875ZM89.5185 2.24975H88.1753V5.375H87.696V2.24975H86.3528V1.8245H89.5185V2.24975ZM92.6752 3.539C93.1567 3.6515 93.3975 3.94175 93.3975 4.40975C93.3975 4.72025 93.2827 4.95875 93.0532 5.12525C92.8237 5.29175 92.4817 5.375 92.0272 5.375H90.414V1.8245H91.98C92.385 1.8245 92.7022 1.90325 92.9317 2.06075C93.1612 2.21825 93.276 2.44325 93.276 2.73575C93.276 2.92925 93.222 3.09575 93.114 3.23525C93.0105 3.37025 92.8642 3.4715 92.6752 3.539ZM90.8797 3.404H91.9462C92.2207 3.404 92.43 3.35225 92.574 3.24875C92.7225 3.14525 92.7967 2.9945 92.7967 2.7965C92.7967 2.5985 92.7225 2.45 92.574 2.351C92.43 2.252 92.2207 2.2025 91.9462 2.2025H90.8797V3.404ZM92.007 4.997C92.313 4.997 92.5425 4.9475 92.6955 4.8485C92.8485 4.7495 92.925 4.59425 92.925 4.38275C92.925 4.17125 92.8552 4.016 92.7157 3.917C92.5762 3.8135 92.3557 3.76175 92.0542 3.76175H90.8797V4.997H92.007ZM96.1879 5.40875C95.8459 5.40875 95.5376 5.33225 95.2631 5.17925C94.9886 5.02175 94.7726 4.80575 94.6151 4.53125C94.4576 4.25675 94.3789 3.94625 94.3789 3.59975C94.3789 3.25325 94.4576 2.94275 94.6151 2.66825C94.7726 2.39375 94.9886 2.18 95.2631 2.027C95.5376 1.874 95.8459 1.7975 96.1879 1.7975C96.5299 1.7975 96.8381 1.874 97.1126 2.027C97.3871 2.18 97.6009 2.39375 97.7539 2.66825C97.9114 2.94275 97.9901 3.25325 97.9901 3.59975C97.9901 3.94625 97.9114 4.25675 97.7539 4.53125C97.6009 4.80575 97.3871 5.02175 97.1126 5.17925C96.8381 5.33225 96.5299 5.40875 96.1879 5.40875ZM96.1879 4.9835C96.4399 4.9835 96.6649 4.92725 96.8629 4.81475C97.0654 4.69775 97.2229 4.5335 97.3354 4.322C97.4479 4.1105 97.5041 3.86975 97.5041 3.59975C97.5041 3.32975 97.4479 3.089 97.3354 2.8775C97.2229 2.666 97.0654 2.504 96.8629 2.3915C96.6649 2.2745 96.4399 2.216 96.1879 2.216C95.9359 2.216 95.7086 2.2745 95.5061 2.3915C95.3081 2.504 95.1506 2.666 95.0336 2.8775C94.9211 3.089 94.8649 3.32975 94.8649 3.59975C94.8649 3.86975 94.9211 4.1105 95.0336 4.322C95.1506 4.5335 95.3081 4.69775 95.5061 4.81475C95.7086 4.92725 95.9359 4.9835 96.1879 4.9835Z",fill:"#182061"})])],-1)),o3=Sl(()=>Le("p",{class:"accounting"},[Ki(" \u0411\u0443\u0445\u0433\u0430\u043B\u0442\u0435\u0440\u0441\u043A\u0438\u0439 "),Le("br"),Ki(" \u0430\u0443\u0442\u0441\u043E\u0440\u0441\u0438\u043D\u0433 \u0443\u0441\u043B\u0443\u0433 ")],-1)),s3=Ki("\u0413\u043B\u0430\u0432\u043D\u0430\u044F"),a3=Ki("\u041E \u043D\u0430\u0441"),l3=Ki("\u0423\u0441\u043B\u0443\u0433\u0438"),c3=Sl(()=>Le("p",null,"(998) 99 218-55-88",-1)),u3=Ki("\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C"),h3=Sl(()=>Le("br",null,null,-1)),d3=Ki("\u0437\u0432\u043E\u043D\u043E\u043A"),p3=[u3,h3,d3],f3=Sl(()=>Le("svg",{width:"300",height:"300",viewBox:"0 0 32 42",xmlns:"http://www.w3.org/2000/svg",onclick:"this.classList.toggle('active')"},[Le("g",{transform:"matrix(1,0,0,1,-389.5,-264.004)"},[Le("g",{id:"arrow_left2"},[Le("g",{transform:"matrix(1,0,0,1,0,5)"},[Le("path",{id:"top",d:"M390,270L420,270L420,270C420,270 420.195,250.19 405,265C389.805,279.81 390,279.967 390,279.967"})]),Le("g",{transform:"matrix(1,1.22465e-16,1.22465e-16,-1,0.00024296,564.935)"},[Le("path",{id:"bottom",d:"M390,270L420,270L420,270C420,270 420.195,250.19 405,265C389.805,279.81 390,279.967 390,279.967"})]),Le("path",{id:"middle",d:"M390,284.967L420,284.967"})])])],-1)),m3=[f3];function A3(d,g,b,E,I,L){const V=lr("RouterLink"),s=lr("RouterView");return Jr(),hn("div",i3,[Le("header",null,[Le("nav",null,[Wt(V,{to:"/",class:"logoPart"},{default:so(()=>[r3,n3,o3]),_:1}),Le("ul",{class:Lo(d.showNav?"showNav":"")},[Le("div",{class:"closeNavLinks",onClick:g[0]||(g[0]=(...W)=>d.closeNavLinks&&d.closeNavLinks(...W))}),Le("li",null,[Wt(V,{onClick:d.closeNavLinks,to:"/"},{default:so(()=>[s3]),_:1},8,["onClick"])]),Le("li",null,[Wt(V,{onClick:d.closeNavLinks,to:"/about"},{default:so(()=>[a3]),_:1},8,["onClick"])]),Le("li",null,[Wt(V,{onClick:d.closeNavLinks,to:"/service"},{default:so(()=>[l3]),_:1},8,["onClick"])])],2),Le("div",{class:Lo(["phoneNumber",d.showNav?"showNav2":""])},[c3,Le("button",{onClick:g[1]||(g[1]=(...W)=>d.showBotForm&&d.showBotForm(...W))},p3)],2),Le("div",{class:"icons",onClick:g[2]||(g[2]=(...W)=>d.showNavLinks&&d.showNavLinks(...W))},m3)])]),Wt(s)])}var g3=dn(t3,[["render",A3],["__scopeId","data-v-aa626f26"]]);const _3="modulepreload",IA={},y3="/",to=function(g,b){return!b||b.length===0?g():Promise.all(b.map(E=>{if(E=`${y3}${E}`,E in IA)return;IA[E]=!0;const I=E.endsWith(".css"),L=I?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${L}`))return;const V=document.createElement("link");if(V.rel=I?"stylesheet":_3,I||(V.as="script",V.crossOrigin=""),V.href=E,document.head.appendChild(V),I)return new Promise((s,W)=>{V.addEventListener("load",s),V.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${E}`)))})})).then(()=>g())},x3=Zx({history:ox("/"),routes:[{path:"/",name:"home",component:Yg},{path:"/about",name:"about",component:()=>to(()=>import("./AboutView.0611420f.js"),["assets/AboutView.0611420f.js","assets/AboutView.163230a6.css"])},{path:"/service",name:"service",component:()=>to(()=>import("./ServiceView.429ce4ef.js"),["assets/ServiceView.429ce4ef.js","assets/ServiceView.43b6caca.css","assets/OtherService.69a817d9.js","assets/OtherService.1ef60636.css","assets/searchLense.a463e85a.js","assets/scessor.2a2e4b2c.js","assets/laptop.c165fd65.js"])},{path:"/service1",name:"service1",component:()=>to(()=>import("./Service1.b370a209.js"),["assets/Service1.b370a209.js","assets/Service1.a3c193de.css","assets/OtherService.69a817d9.js","assets/OtherService.1ef60636.css","assets/ServiceExtraCard.f92e2374.js","assets/ServiceExtraCard.0f848744.css"])},{path:"/service2",name:"service2",component:()=>to(()=>import("./Service2.3a4b5fb8.js"),["assets/Service2.3a4b5fb8.js","assets/Service2.0ea11347.css","assets/OtherService.69a817d9.js","assets/OtherService.1ef60636.css","assets/ServiceExtraCard.f92e2374.js","assets/ServiceExtraCard.0f848744.css"])},{path:"/service3",name:"service3",component:()=>to(()=>import("./Service3.266c053d.js"),["assets/Service3.266c053d.js","assets/Service3.8bc68b76.css","assets/OtherService.69a817d9.js","assets/OtherService.1ef60636.css","assets/ServiceExtraCard.f92e2374.js","assets/ServiceExtraCard.0f848744.css"])},{path:"/service4",name:"service4",component:()=>to(()=>import("./Service4.17cb20f7.js"),["assets/Service4.17cb20f7.js","assets/Service4.5eed66b8.css","assets/OtherService.69a817d9.js","assets/OtherService.1ef60636.css","assets/ServiceExtraCard.f92e2374.js","assets/ServiceExtraCard.0f848744.css"])},{path:"/service5",name:"service5",component:()=>to(()=>import("./Service5.ab0dda6c.js"),["assets/Service5.ab0dda6c.js","assets/Service5.9c09e4fc.css","assets/OtherService.69a817d9.js","assets/OtherService.1ef60636.css","assets/ServiceExtraCard.f92e2374.js","assets/ServiceExtraCard.0f848744.css"])},{path:"/service6",name:"service6",component:()=>to(()=>import("./Service6.2374a1d3.js"),["assets/Service6.2374a1d3.js","assets/Service6.2013589d.css","assets/OtherService.69a817d9.js","assets/OtherService.1ef60636.css","assets/ServiceExtraCard.f92e2374.js","assets/ServiceExtraCard.0f848744.css","assets/searchLense.a463e85a.js"])},{path:"/service7",name:"service7",component:()=>to(()=>import("./Service7.d57a205a.js"),["assets/Service7.d57a205a.js","assets/Service7.064a500a.css","assets/OtherService.69a817d9.js","assets/OtherService.1ef60636.css","assets/ServiceExtraCard.f92e2374.js","assets/ServiceExtraCard.0f848744.css","assets/scessor.2a2e4b2c.js"])},{path:"/service8",name:"service8",component:()=>to(()=>import("./Service8.8b79f3e6.js"),["assets/Service8.8b79f3e6.js","assets/Service8.f35189e3.css","assets/OtherService.69a817d9.js","assets/OtherService.1ef60636.css","assets/ServiceExtraCard.f92e2374.js","assets/ServiceExtraCard.0f848744.css","assets/laptop.c165fd65.js"])}]});cf.accessToken="pk.eyJ1IjoiYWJkdWxraGFrIiwiYSI6ImNsMjd1ZTN5ejAxODIzY3AzcTRjc2sxcHAifQ.5NyEXgxDRXYrFwLhn7zW5Q";const Lf=P5(g3);Lf.use(G5());Lf.use(x3);Lf.mount("#app");export{Xb as F,Lb as H,dn as _,Il as a,Zb as b,hn as c,Wt as d,Cs as e,Le as f,Ki as g,Mf as h,fv as i,mv as j,gv as k,_v as l,Av as m,Bo as n,Jr as o,ws as p,C3 as q,lr as r,hd as s,Jy as t,v3 as u,w3 as v,so as w,b3 as x,T3 as y,Lo as z};
